import{g as Ot}from"./@amap-0.0.0-dataease.js";import{b as Nt}from"./batch-processor-0.0.0-dataease.js";var wt={exports:{}},Mt=wt.exports={};Mt.forEach=function(r,o){for(var d=0;d<r.length;d++){var e=o(r[d]);if(e)return e}};var St=wt.exports,Pt=function(r){var o=r.stateHandler.getState;function d(f){var c=o(f);return c&&!!c.isDetectable}function e(f){o(f).isDetectable=!0}function l(f){return!!o(f).busy}function S(f,c){o(f).busy=!!c}return{isDetectable:d,markAsDetectable:e,isBusy:l,markBusy:S}},Wt=function(r){var o={};function d(f){var c=r.get(f);return c===void 0?[]:o[c]||[]}function e(f,c){var E=r.get(f);o[E]||(o[E]=[]),o[E].push(c)}function l(f,c){for(var E=d(f),s=0,p=E.length;s<p;++s)if(E[s]===c){E.splice(s,1);break}}function S(f){var c=d(f);c&&(c.length=0)}return{get:d,add:e,removeListener:l,removeAllListeners:S}},_t=function(){var r=1;function o(){return r++}return{generate:o}},Rt=function(r){var o=r.idGenerator,d=r.stateHandler.getState;function e(S){var f=d(S);return f&&f.id!==void 0?f.id:null}function l(S){var f=d(S);if(!f)throw new Error("setId required the element to have a resize detection state.");var c=o.generate();return f.id=c,c}return{get:e,set:l}},Bt=function(r){function o(){}var d={log:o,warn:o,error:o};if(!r&&window.console){var e=function(l,S){l[S]=function(){var c=console[S];if(c.apply)c.apply(console,arguments);else for(var E=0;E<arguments.length;E++)c(arguments[E])}};e(d,"log"),e(d,"warn"),e(d,"error")}return d},Et={exports:{}},xt=Et.exports={};xt.isIE=function(r){function o(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!==-1||e.indexOf("trident")!==-1||e.indexOf(" edge/")!==-1}if(!o())return!1;if(!r)return!0;var d=function(){var e,l=3,S=document.createElement("div"),f=S.getElementsByTagName("i");do S.innerHTML="<!--[if gt IE "+ ++l+"]><i></i><![endif]-->";while(f[0]);return l>4?l:e}();return r===d};xt.isLegacyOpera=function(){return!!window.opera};var kt=Et.exports,st="_erd";function Ut(r){return r[st]={},mt(r)}function mt(r){return r[st]}function qt(r){delete r[st]}var Ft={initState:Ut,getState:mt,cleanState:qt},Z=kt,Gt=function(r){r=r||{};var o=r.reporter,d=r.batchProcessor,e=r.stateHandler.getState;if(!o)throw new Error("Missing required dependency: reporter.");function l(s,p){function L(){p(s)}if(Z.isIE(8))e(s).object={proxy:L},s.attachEvent("onresize",L);else{var P=c(s);if(!P)throw new Error("Element is not detectable by this strategy.");P.contentDocument.defaultView.addEventListener("resize",L)}}function S(s){var p=r.important?" !important; ":"; ";return(s.join(p)+p).trim()}function f(s,p,L){L||(L=p,p=s,s=null),s=s||{},s.debug;function P(m,j){var B=S(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),U=!1,N=window.getComputedStyle(m),x=m.offsetWidth,k=m.offsetHeight;e(m).startSize={width:x,height:k};function a(){function t(){if(N.position==="static"){m.style.setProperty("position","relative",s.important?"important":"");var D=function(H,b,z,u){function g(A){return A.replace(/[^-\d\.]/g,"")}var I=z[u];I!=="auto"&&g(I)!=="0"&&(H.warn("An element that is positioned static has style."+u+"="+I+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+u+" will be set to 0. Element: ",b),b.style.setProperty(u,"0",s.important?"important":""))};D(o,m,N,"top"),D(o,m,N,"right"),D(o,m,N,"bottom"),D(o,m,N,"left")}}function y(){U||t();function D(b,z){if(!b.contentDocument){var u=e(b);u.checkForObjectDocumentTimeoutId&&window.clearTimeout(u.checkForObjectDocumentTimeoutId),u.checkForObjectDocumentTimeoutId=setTimeout(function(){u.checkForObjectDocumentTimeoutId=0,D(b,z)},100);return}z(b.contentDocument)}var H=this;D(H,function(z){j(m)})}N.position!==""&&(t(),U=!0);var i=document.createElement("object");i.style.cssText=B,i.tabIndex=-1,i.type="text/html",i.setAttribute("aria-hidden","true"),i.onload=y,Z.isIE()||(i.data="about:blank"),e(m)&&(m.appendChild(i),e(m).object=i,Z.isIE()&&(i.data="about:blank"))}d?d.add(a):a()}Z.isIE(8)?L(p):P(p,L)}function c(s){return e(s).object}function E(s){if(e(s)){var p=c(s);p&&(Z.isIE(8)?s.detachEvent("onresize",p.proxy):s.removeChild(p),e(s).checkForObjectDocumentTimeoutId&&window.clearTimeout(e(s).checkForObjectDocumentTimeoutId),delete e(s).object)}}return{makeDetectable:f,addListener:l,uninstall:E}},Vt=St.forEach,$t=function(r){r=r||{};var o=r.reporter,d=r.batchProcessor,e=r.stateHandler.getState;r.stateHandler.hasState;var l=r.idHandler;if(!d)throw new Error("Missing required dependency: batchProcessor");if(!o)throw new Error("Missing required dependency: reporter.");var S=p(),f="erd_scroll_detection_scrollbar_style",c="erd_scroll_detection_container";function E(a){L(a,f,c)}E(window.document);function s(a){var t=r.important?" !important; ":"; ";return(a.join(t)+t).trim()}function p(){var a=500,t=500,y=document.createElement("div");y.style.cssText=s(["position: absolute","width: "+a*2+"px","height: "+t*2+"px","visibility: hidden","margin: 0","padding: 0"]);var i=document.createElement("div");i.style.cssText=s(["position: absolute","width: "+a+"px","height: "+t+"px","overflow: scroll","visibility: none","top: "+-a*3+"px","left: "+-t*3+"px","visibility: hidden","margin: 0","padding: 0"]),i.appendChild(y),document.body.insertBefore(i,document.body.firstChild);var D=a-i.clientWidth,H=t-i.clientHeight;return document.body.removeChild(i),{width:D,height:H}}function L(a,t,y){function i(z,u){u=u||function(I){a.head.appendChild(I)};var g=a.createElement("style");return g.innerHTML=z,g.id=t,u(g),g}if(!a.getElementById(t)){var D=y+"_animation",H=y+"_animation_active",b=`/* Created by the element-resize-detector library. */
`;b+="."+y+" > div::-webkit-scrollbar { "+s(["display: none"])+` }

`,b+="."+H+" { "+s(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+D,"animation-name: "+D])+` }
`,b+="@-webkit-keyframes "+D+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,b+="@keyframes "+D+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",i(b)}}function P(a){a.className+=" "+c+"_animation_active"}function m(a,t,y){if(a.addEventListener)a.addEventListener(t,y);else if(a.attachEvent)a.attachEvent("on"+t,y);else return o.error("[scroll] Don't know how to add event listeners.")}function j(a,t,y){if(a.removeEventListener)a.removeEventListener(t,y);else if(a.detachEvent)a.detachEvent("on"+t,y);else return o.error("[scroll] Don't know how to remove event listeners.")}function B(a){return e(a).container.childNodes[0].childNodes[0].childNodes[0]}function U(a){return e(a).container.childNodes[0].childNodes[0].childNodes[1]}function N(a,t){var y=e(a).listeners;if(!y.push)throw new Error("Cannot add listener to an element that is not detectable.");e(a).listeners.push(t)}function x(a,t,y){y||(y=t,t=a,a=null),a=a||{};function i(){if(a.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(l.get(t),"Scroll: "),o.log.apply)o.log.apply(null,n);else for(var h=0;h<n.length;h++)o.log(n[h])}}function D(n){function h(w){var M=w.getRootNode&&w.getRootNode().contains(w);return w===w.ownerDocument.body||w.ownerDocument.body.contains(w)||M}return!h(n)||window.getComputedStyle(n)===null}function H(n){var h=e(n).container.childNodes[0],w=window.getComputedStyle(h);return!w.width||w.width.indexOf("px")===-1}function b(){var n=window.getComputedStyle(t),h={};return h.position=n.position,h.width=t.offsetWidth,h.height=t.offsetHeight,h.top=n.top,h.right=n.right,h.bottom=n.bottom,h.left=n.left,h.widthCSS=n.width,h.heightCSS=n.height,h}function z(){var n=b();e(t).startSize={width:n.width,height:n.height},i("Element start size",e(t).startSize)}function u(){e(t).listeners=[]}function g(){if(i("storeStyle invoked."),!e(t)){i("Aborting because element has been uninstalled");return}var n=b();e(t).style=n}function I(n,h,w){e(n).lastWidth=h,e(n).lastHeight=w}function A(n){return B(n).childNodes[0]}function G(){return 2*S.width+1}function et(){return 2*S.height+1}function rt(n){return n+10+G()}function it(n){return n+10+et()}function Dt(n){return n*2+G()}function Ct(n){return n*2+et()}function dt(n,h,w){var M=B(n),V=U(n),Y=rt(h),K=it(w),T=Dt(h),v=Ct(w);M.scrollLeft=Y,M.scrollTop=K,V.scrollLeft=T,V.scrollTop=v}function ct(){var n=e(t).container;if(!n){n=document.createElement("div"),n.className=c,n.style.cssText=s(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),e(t).container=n,P(n),t.appendChild(n);var h=function(){e(t).onRendered&&e(t).onRendered()};m(n,"animationstart",h),e(t).onAnimationStart=h}return n}function Lt(){function n(){var C=e(t).style;if(C.position==="static"){t.style.setProperty("position","relative",a.important?"important":"");var R=function(X,J,Tt,at){function jt(It){return It.replace(/[^-\d\.]/g,"")}var ot=Tt[at];ot!=="auto"&&jt(ot)!=="0"&&(X.warn("An element that is positioned static has style."+at+"="+ot+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+at+" will be set to 0. Element: ",J),J.style[at]=0)};R(o,t,C,"top"),R(o,t,C,"right"),R(o,t,C,"bottom"),R(o,t,C,"left")}}function h(C,R,X,J){return C=C?C+"px":"0",R=R?R+"px":"0",X=X?X+"px":"0",J=J?J+"px":"0",["left: "+C,"top: "+R,"right: "+J,"bottom: "+X]}if(i("Injecting elements"),!e(t)){i("Aborting because element has been uninstalled");return}n();var w=e(t).container;w||(w=ct());var M=S.width,V=S.height,Y=s(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),K=s(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(h(-(1+M),-(1+V),-V,-M))),T=s(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=s(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),O=s(["position: absolute","left: 0","top: 0"]),$=s(["position: absolute","width: 200%","height: 200%"]),W=document.createElement("div"),_=document.createElement("div"),Q=document.createElement("div"),ut=document.createElement("div"),nt=document.createElement("div"),ft=document.createElement("div");W.dir="ltr",W.style.cssText=Y,W.className=c,_.className=c,_.style.cssText=K,Q.style.cssText=T,ut.style.cssText=O,nt.style.cssText=v,ft.style.cssText=$,Q.appendChild(ut),nt.appendChild(ft),_.appendChild(Q),_.appendChild(nt),W.appendChild(_),w.appendChild(W);function ht(){var C=e(t);C&&C.onExpand?C.onExpand():i("Aborting expand scroll handler: element has been uninstalled")}function vt(){var C=e(t);C&&C.onShrink?C.onShrink():i("Aborting shrink scroll handler: element has been uninstalled")}m(Q,"scroll",ht),m(nt,"scroll",vt),e(t).onExpandScroll=ht,e(t).onShrinkScroll=vt}function zt(){function n(T,v,O){var $=A(T),W=rt(v),_=it(O);$.style.setProperty("width",W+"px",a.important?"important":""),$.style.setProperty("height",_+"px",a.important?"important":"")}function h(T){var v=t.offsetWidth,O=t.offsetHeight,$=v!==e(t).lastWidth||O!==e(t).lastHeight;i("Storing current size",v,O),I(t,v,O),d.add(0,function(){if($){if(!e(t)){i("Aborting because element has been uninstalled");return}if(!w()){i("Aborting because element container has not been initialized");return}if(a.debug){var _=t.offsetWidth,Q=t.offsetHeight;(_!==v||Q!==O)&&o.warn(l.get(t),"Scroll: Size changed before updating detector elements.")}n(t,v,O)}}),d.add(1,function(){if(!e(t)){i("Aborting because element has been uninstalled");return}if(!w()){i("Aborting because element container has not been initialized");return}dt(t,v,O)}),$&&T&&d.add(2,function(){if(!e(t)){i("Aborting because element has been uninstalled");return}if(!w()){i("Aborting because element container has not been initialized");return}T()})}function w(){return!!e(t).container}function M(){function T(){return e(t).lastNotifiedWidth===void 0}i("notifyListenersIfNeeded invoked");var v=e(t);if(T()&&v.lastWidth===v.startSize.width&&v.lastHeight===v.startSize.height)return i("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(v.lastWidth===v.lastNotifiedWidth&&v.lastHeight===v.lastNotifiedHeight)return i("Not notifying: Size already notified");i("Current size not notified, notifying..."),v.lastNotifiedWidth=v.lastWidth,v.lastNotifiedHeight=v.lastHeight,Vt(e(t).listeners,function(O){O(t)})}function V(){if(i("startanimation triggered."),H(t)){i("Ignoring since element is still unrendered...");return}i("Element rendered.");var T=B(t),v=U(t);(T.scrollLeft===0||T.scrollTop===0||v.scrollLeft===0||v.scrollTop===0)&&(i("Scrollbars out of sync. Updating detector elements..."),h(M))}function Y(){if(i("Scroll detected."),H(t)){i("Scroll event fired while unrendered. Ignoring...");return}h(M)}if(i("registerListenersAndPositionElements invoked."),!e(t)){i("Aborting because element has been uninstalled");return}e(t).onRendered=V,e(t).onExpand=Y,e(t).onShrink=Y;var K=e(t).style;n(t,K.width,K.height)}function Ht(){if(i("finalizeDomMutation invoked."),!e(t)){i("Aborting because element has been uninstalled");return}var n=e(t).style;I(t,n.width,n.height),dt(t,n.width,n.height)}function At(){y(t)}function lt(){i("Installing..."),u(),z(),d.add(0,g),d.add(1,Lt),d.add(2,zt),d.add(3,Ht),d.add(4,At)}i("Making detectable..."),D(t)?(i("Element is detached"),ct(),i("Waiting until element is attached..."),e(t).onRendered=function(){i("Element is now attached"),lt()}):lt()}function k(a){var t=e(a);t&&(t.onExpandScroll&&j(B(a),"scroll",t.onExpandScroll),t.onShrinkScroll&&j(U(a),"scroll",t.onShrinkScroll),t.onAnimationStart&&j(t.container,"animationstart",t.onAnimationStart),t.container&&a.removeChild(t.container))}return{makeDetectable:x,addListener:N,uninstall:k,initDocument:E}},tt=St.forEach,Jt=Pt,Yt=Wt,Kt=_t,Qt=Rt,Xt=Bt,gt=kt,Zt=Nt,q=Ft,te=Gt,ee=$t;function bt(r){return Array.isArray(r)||r.length!==void 0}function pt(r){if(Array.isArray(r))return r;var o=[];return tt(r,function(d){o.push(d)}),o}function yt(r){return r&&r.nodeType===1}var re=function(r){r=r||{};var o;if(r.idHandler)o={get:function(x){return r.idHandler.get(x,!0)},set:r.idHandler.set};else{var d=Kt(),e=Qt({idGenerator:d,stateHandler:q});o=e}var l=r.reporter;if(!l){var S=l===!1;l=Xt(S)}var f=F(r,"batchProcessor",Zt({reporter:l})),c={};c.callOnAdd=!!F(r,"callOnAdd",!0),c.debug=!!F(r,"debug",!1);var E=Yt(o),s=Jt({stateHandler:q}),p,L=F(r,"strategy","object"),P=F(r,"important",!1),m={reporter:l,batchProcessor:f,stateHandler:q,idHandler:o,important:P};if(L==="scroll"&&(gt.isLegacyOpera()?(l.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),L="object"):gt.isIE(9)&&(l.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),L="object")),L==="scroll")p=ee(m);else if(L==="object")p=te(m);else throw new Error("Invalid strategy name: "+L);var j={};function B(x,k,a){function t(z){var u=E.get(z);tt(u,function(I){I(z)})}function y(z,u,g){E.add(u,g),z&&g(u)}if(a||(a=k,k=x,x={}),!k)throw new Error("At least one element required.");if(!a)throw new Error("Listener required.");if(yt(k))k=[k];else if(bt(k))k=pt(k);else return l.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var i=0,D=F(x,"callOnAdd",c.callOnAdd),H=F(x,"onReady",function(){}),b=F(x,"debug",c.debug);tt(k,function(u){q.getState(u)||(q.initState(u),o.set(u));var g=o.get(u);if(b&&l.log("Attaching listener to element",g,u),!s.isDetectable(u)){if(b&&l.log(g,"Not detectable."),s.isBusy(u)){b&&l.log(g,"System busy making it detectable"),y(D,u,a),j[g]=j[g]||[],j[g].push(function(){i++,i===k.length&&H()});return}return b&&l.log(g,"Making detectable..."),s.markBusy(u,!0),p.makeDetectable({debug:b,important:P},u,function(A){if(b&&l.log(g,"onElementDetectable"),q.getState(A)){s.markAsDetectable(A),s.markBusy(A,!1),p.addListener(A,t),y(D,A,a);var G=q.getState(A);if(G&&G.startSize){var et=A.offsetWidth,rt=A.offsetHeight;(G.startSize.width!==et||G.startSize.height!==rt)&&t(A)}j[g]&&tt(j[g],function(it){it()})}else b&&l.log(g,"Element uninstalled before being detectable.");delete j[g],i++,i===k.length&&H()})}b&&l.log(g,"Already detecable, adding listener."),y(D,u,a),i++}),i===k.length&&H()}function U(x){if(!x)return l.error("At least one element is required.");if(yt(x))x=[x];else if(bt(x))x=pt(x);else return l.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");tt(x,function(k){E.removeAllListeners(k),p.uninstall(k),q.cleanState(k)})}function N(x){p.initDocument&&p.initDocument(x)}return{listenTo:B,removeListener:E.removeListener,removeAllListeners:E.removeAllListeners,uninstall:U,initDocument:N}};function F(r,o,d){var e=r[o];return e==null&&d!==void 0?d:e}const ae=Ot(re);export{ae as e};
