import"./index-0.0.0-dataease.js";import{o as X,j as q,G as H,n as J,y as K}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as Q}from"./el-col-0.0.0-dataease.js";import{E as Y}from"./el-divider-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{a as Z,E as ee}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as te}from"./el-row-0.0.0-dataease.js";import{d as ae,X as le,w as k,o as se,e as f,f as n,g,i as s,j as l,S as v,R as c,U as m,P as p,a4 as h,u,O as A,W as E,a6 as C,_ as re,a3 as ie}from"./vue-0.0.0-dataease.js";import{n as oe,a as ne,g as ce}from"./templateMarket-0.0.0-dataease.js";import me from"./TemplateMarketPreviewItem-0.0.0-dataease.js";import{_ as pe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./imgUtils-0.0.0-dataease.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const ue={class:"main-title"},de={style:{"text-align":"center"}},_e={key:0,class:"template-title"},fe={style:{flex:"1","text-align":"right"}},ve=["src"],he=ae({__name:"MarketPreview",props:{previewId:{type:String,default:null}},emits:["templateApply","closeDialog","closePreview"],setup(M,{emit:F}){const{t:d}=X(),w=M,b=F,e=le({hasResult:!0,extFilterActive:!1,asideActive:!0,previewVisible:!1,templatePreviewUrl:null,marketTabs:null,marketActiveTab:null,searchText:null,panelGroupList:[],curApplyTemplate:null,folderSelectShow:!1,baseUrl:"https://dataease.io/templates",currentMarketTemplateShowList:[],networkStatus:!0,curTemplate:null});k(()=>e.marketActiveTab,()=>{x()}),k(()=>e.searchText,()=>{x()}),k(()=>w.previewId,t=>{e.currentMarketTemplateShowList.forEach(a=>{t===a.id&&T(a)})});const P=async()=>{await ne().then(t=>{e.baseUrl=t.data.baseUrl,e.currentMarketTemplateShowList=t.data.contents,e.hasResult=!0,w.previewId&&e.currentMarketTemplateShowList.forEach(a=>{w.previewId===a.id&&T(a)})}).catch(()=>{e.networkStatus=!1}),ce().then(t=>{e.marketTabs=t.data,e.marketActiveTab=e.marketTabs[0]}).catch(()=>{e.networkStatus=!1})},U=t=>{b("templateApply",t)},x=()=>{e.hasResult=!1,e.currentMarketTemplateShowList.forEach(t=>{t.showFlag=V(t),t.showFlag&&(e.hasResult=!0)})},V=t=>{let a=!1,_=!1;return t.categories.forEach(o=>{o.name===e.marketActiveTab&&(a=!0)}),(!e.searchText||t.title.indexOf(e.searchText)>-1)&&(_=!0),a&&_},T=t=>{e.curTemplate=t,t.thumbnail.indexOf("http")>-1?e.templatePreviewUrl=t.thumbnail:e.templatePreviewUrl=e.baseUrl+t.thumbnail},y=t=>{e.asideActive=t},L=()=>{e.extFilterActive=!e.extFilterActive,e.marketActiveTab=e.marketTabs[0]},R=()=>{b("closePreview")},z=t=>e.curTemplate&&e.curTemplate.id===t.id;return se(()=>{P()}),(t,a)=>{const _=f("DArrowRight"),o=q,D=f("Close"),I=f("DArrowLeft"),i=te,$=H,B=f("Filter"),N=Z,O=ee,j=Y,G=J,S=Q,W=K;return n(),g(i,{style:{width:"100%"}},{default:s(()=>[l(i,{style:{display:"table",width:"100%"}},{default:s(()=>[l(S,{style:{float:"left"},class:v(e.asideActive?"aside-active":"aside-inActive")},{default:s(()=>[c(l(o,{class:"insert",onClick:a[0]||(a[0]=r=>y(!0))},{default:s(()=>[l(_)]),_:1},512),[[m,!e.asideActive]]),c(l(i,{style:{padding:"12px 12px 0"}},{default:s(()=>[l(i,{style:{"align-items":"center"}},{default:s(()=>[l(o,{class:"insert",onClick:a[1]||(a[1]=r=>R())},{default:s(()=>[l(D)]),_:1}),p("span",ue,h(u(d)("visualization.template_preview")),1),l(o,{class:"insert",onClick:a[2]||(a[2]=r=>y(!1))},{default:s(()=>[l(I)]),_:1})]),_:1}),l(i,{class:"margin-top16 search-area"},{default:s(()=>[l($,{modelValue:e.searchText,"onUpdate:modelValue":a[3]||(a[3]=r=>e.searchText=r),size:"small","prefix-icon":"Search",class:"title-name-search",placeholder:u(d)("visualization.enter_template_name_tips"),clearable:""},null,8,["modelValue","placeholder"]),l(o,{class:v(["insert-filter filter-icon-span",e.extFilterActive?"filter-icon-active":""]),onClick:a[4]||(a[4]=r=>L())},{default:s(()=>[l(B)]),_:1},8,["class"])]),_:1}),c(l(i,null,{default:s(()=>[l(O,{modelValue:e.marketActiveTab,"onUpdate:modelValue":a[5]||(a[5]=r=>e.marketActiveTab=r),class:"margin-top16",size:"small",placeholder:u(d)("common.selectText")},{default:s(()=>[(n(!0),A(E,null,C(e.marketTabs,r=>(n(),g(N,{key:r,label:r,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[m,e.extFilterActive]]),l(j)]),_:1},512),[[m,e.asideActive]]),c(l(i,{class:v(["aside-list",e.extFilterActive?"aside-list-filter-active":""])},{default:s(()=>[(n(!0),A(E,null,C(e.currentMarketTemplateShowList,r=>c((n(),g(me,{key:r.id,template:r,"base-url":e.baseUrl,active:z(r),onPreviewTemplate:T},null,8,["template","base-url","active"])),[[m,r.showFlag]])),128)),c(l(i,{class:"custom-position"},{default:s(()=>[p("div",de,[l(G,{name:"no_result"},{default:s(()=>[l(u(oe),{style:{"margin-bottom":"16px","font-size":"75px"},class:"svg-icon"})]),_:1}),a[7]||(a[7]=p("br",null,null,-1)),p("span",null,h(u(d)("commons.no_result")),1)])]),_:1},512),[[m,!e.hasResult]])]),_:1},8,["class"]),[[m,e.asideActive]])]),_:1},8,["class"]),l(S,{style:{float:"left"},class:v(["main-area",e.asideActive?"main-area-active":""])},{default:s(()=>[l(i,null,{default:s(()=>[e.curTemplate?(n(),A("span",_e,h(e.curTemplate.title),1)):re("",!0),p("div",fe,[l(W,{style:{float:"right"},type:"primary",size:"small",onClick:a[6]||(a[6]=r=>U(e.curTemplate))},{default:s(()=>[ie(h(u(d)("visualization.apply_this_template")),1)]),_:1})])]),_:1}),l(i,{class:"img-main"},{default:s(()=>[p("img",{style:{height:"100%"},src:e.templatePreviewUrl,alt:""},null,8,ve)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})}}});const nt=pe(he,[["__scopeId","data-v-a3a2726c"]]);export{nt as default};
