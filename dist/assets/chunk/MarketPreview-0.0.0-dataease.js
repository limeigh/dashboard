import{e as j,p as q,r as H,A as J,y as K,h as Q,C as X,i as Z}from"./element-plus-secondary-0.0.0-dataease.js";import{h as tt,f as et}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as it,l as rt,w as k,b as ot,ae as v,o as p,T as A,U as o,W as r,z as f,$ as m,a0 as n,a as c,Y as h,u,c as b,S as C,a8 as M,R as at,_ as lt}from"./@vue-0.0.0-dataease.js";import{n as st,a as pt,g as mt}from"./templateMarket-0.0.0-dataease.js";import nt from"./TemplateMarketPreviewItem-0.0.0-dataease.js";import{_ as ct}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";const ut={class:"main-title"},dt={style:{"text-align":"center"}},_t={key:0,class:"template-title"},vt={style:{flex:"1","text-align":"right"}},ft=["src"],ht=it({__name:"MarketPreview",props:{previewId:{type:String,default:null}},emits:["templateApply","closeDialog","closePreview"],setup(E,{emit:F}){const{t:d}=tt(),w=E,g=F,t=rt({hasResult:!0,extFilterActive:!1,asideActive:!0,previewVisible:!1,templatePreviewUrl:null,marketTabs:null,marketActiveTab:null,searchText:null,panelGroupList:[],curApplyTemplate:null,folderSelectShow:!1,baseUrl:"https://dataease.io/templates",currentMarketTemplateShowList:[],networkStatus:!0,curTemplate:null});k(()=>t.marketActiveTab,()=>{x()}),k(()=>t.searchText,()=>{x()}),k(()=>w.previewId,e=>{t.currentMarketTemplateShowList.forEach(i=>{e===i.id&&T(i)})});const P=async()=>{await pt().then(e=>{t.baseUrl=e.data.baseUrl,t.currentMarketTemplateShowList=e.data.contents,t.hasResult=!0,w.previewId&&t.currentMarketTemplateShowList.forEach(i=>{w.previewId===i.id&&T(i)})}).catch(()=>{t.networkStatus=!1}),mt().then(e=>{t.marketTabs=e.data,t.marketActiveTab=t.marketTabs[0]}).catch(()=>{t.networkStatus=!1})},U=e=>{g("templateApply",e)},x=()=>{t.hasResult=!1,t.currentMarketTemplateShowList.forEach(e=>{e.showFlag=V(e),e.showFlag&&(t.hasResult=!0)})},V=e=>{let i=!1,_=!1;return e.categories.forEach(s=>{s.name===t.marketActiveTab&&(i=!0)}),(!t.searchText||e.title.indexOf(t.searchText)>-1)&&(_=!0),i&&_},T=e=>{t.curTemplate=e,e.thumbnail.indexOf("http")>-1?t.templatePreviewUrl=e.thumbnail:t.templatePreviewUrl=t.baseUrl+e.thumbnail},y=e=>{t.asideActive=e},L=()=>{t.extFilterActive=!t.extFilterActive,t.marketActiveTab=t.marketTabs[0]},z=()=>{g("closePreview")},R=e=>t.curTemplate&&t.curTemplate.id===e.id;return ot(()=>{P()}),(e,i)=>{const _=v("DArrowRight"),s=j,D=v("Close"),$=v("DArrowLeft"),l=q,I=H,B=v("Filter"),N=J,O=K,G=Q,W=et,S=X,Y=Z;return p(),A(l,{style:{width:"100%"}},{default:o(()=>[r(l,{style:{display:"table",width:"100%"}},{default:o(()=>[r(S,{style:{float:"left"},class:f(t.asideActive?"aside-active":"aside-inActive")},{default:o(()=>[m(r(s,{class:"insert",onClick:i[0]||(i[0]=a=>y(!0))},{default:o(()=>[r(_)]),_:1},512),[[n,!t.asideActive]]),m(r(l,{style:{padding:"12px 12px 0"}},{default:o(()=>[r(l,{style:{"align-items":"center"}},{default:o(()=>[r(s,{class:"insert",onClick:i[1]||(i[1]=a=>z())},{default:o(()=>[r(D)]),_:1}),c("span",ut,h(u(d)("visualization.template_preview")),1),r(s,{class:"insert",onClick:i[2]||(i[2]=a=>y(!1))},{default:o(()=>[r($)]),_:1})]),_:1}),r(l,{class:"margin-top16 search-area"},{default:o(()=>[r(I,{modelValue:t.searchText,"onUpdate:modelValue":i[3]||(i[3]=a=>t.searchText=a),size:"small","prefix-icon":"Search",class:"title-name-search",placeholder:u(d)("visualization.enter_template_name_tips"),clearable:""},null,8,["modelValue","placeholder"]),r(s,{class:f(["insert-filter filter-icon-span",t.extFilterActive?"filter-icon-active":""]),onClick:i[4]||(i[4]=a=>L())},{default:o(()=>[r(B)]),_:1},8,["class"])]),_:1}),m(r(l,null,{default:o(()=>[r(O,{modelValue:t.marketActiveTab,"onUpdate:modelValue":i[5]||(i[5]=a=>t.marketActiveTab=a),class:"margin-top16",size:"small",placeholder:u(d)("common.selectText")},{default:o(()=>[(p(!0),b(C,null,M(t.marketTabs,a=>(p(),A(N,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[n,t.extFilterActive]]),r(G)]),_:1},512),[[n,t.asideActive]]),m(r(l,{class:f(["aside-list",t.extFilterActive?"aside-list-filter-active":""])},{default:o(()=>[(p(!0),b(C,null,M(t.currentMarketTemplateShowList,a=>m((p(),A(nt,{key:a.id,template:a,"base-url":t.baseUrl,active:R(a),onPreviewTemplate:T},null,8,["template","base-url","active"])),[[n,a.showFlag]])),128)),m(r(l,{class:"custom-position"},{default:o(()=>[c("div",dt,[r(W,{name:"no_result"},{default:o(()=>[r(u(st),{style:{"margin-bottom":"16px","font-size":"75px"},class:"svg-icon"})]),_:1}),i[7]||(i[7]=c("br",null,null,-1)),c("span",null,h(u(d)("commons.no_result")),1)])]),_:1},512),[[n,!t.hasResult]])]),_:1},8,["class"]),[[n,t.asideActive]])]),_:1},8,["class"]),r(S,{style:{float:"left"},class:f(["main-area",t.asideActive?"main-area-active":""])},{default:o(()=>[r(l,null,{default:o(()=>[t.curTemplate?(p(),b("span",_t,h(t.curTemplate.title),1)):at("",!0),c("div",vt,[r(Y,{style:{float:"right"},type:"primary",size:"small",onClick:i[6]||(i[6]=a=>U(t.curTemplate))},{default:o(()=>[lt(h(u(d)("visualization.apply_this_template")),1)]),_:1})])]),_:1}),r(l,{class:"img-main"},{default:o(()=>[c("img",{style:{height:"100%"},src:t.templatePreviewUrl,alt:""},null,8,ft)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})}}});const zi=ct(ht,[["__scopeId","data-v-a3a2726c"]]);export{zi as default};
