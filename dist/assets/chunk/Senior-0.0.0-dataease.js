import"./index-0.0.0-dataease.js";import{E as ce}from"./el-row-0.0.0-dataease.js";import{E as O,a as de}from"./el-collapse-item-0.0.0-dataease.js";import{d as fe,af as he,r as F,t as ge,w as ve,y as V,f as m,g as d,i as l,O as w,j as n,u as e,_ as p,P as f,S as c,a4 as k,W as U,a8 as W}from"./vue-0.0.0-dataease.js";import{i as G}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as K}from"./icon_edit_outlined-0.0.0-dataease.js";import{v as _e,j as M,o as Ce,D as H}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import ye from"./FunctionCfg-0.0.0-dataease.js";import be from"./ScrollCfg-0.0.0-dataease.js";import ke from"./AssistLine-0.0.0-dataease.js";import Ae from"./Threshold-0.0.0-dataease.js";import Ie from"./MapMapping-0.0.0-dataease.js";import{C as y}from"./CollapseSwitchItem-0.0.0-dataease.js";import{useAppStoreWithOut as Se}from"./app-0.0.0-dataease.js";import{L as Ve,a as we}from"./LinkageSet-0.0.0-dataease.js";import{d as Z,H as Me,I as xe,J as je,m as Oe,K as qe,q as Ee}from"./canvasUtils-0.0.0-dataease.js";import{d as Le}from"./dvMain-0.0.0-dataease.js";import{i as De}from"./StringUtils-0.0.0-dataease.js";import{B as Je}from"./chart-0.0.0-dataease.js";import Be from"./BubbleAnimateCfg-0.0.0-dataease.js";import{_ as Ne,C as Te}from"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{I as x}from"./index-0.0.0-dataease29.js";import{D as ze,e as Pe}from"./lodash-0.0.0-dataease.js";import{_ as Re}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./el-color-picker-0.0.0-dataease.js";import"./index-0.0.0-dataease27.js";import"./index-0.0.0-dataease20.js";import"./index-0.0.0-dataease18.js";import"./position-0.0.0-dataease.js";import"./el-slider-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-form-item-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./AssistLineEdit-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./field-list-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./el-table-0.0.0-dataease.js";import"./raf-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import"./el-tabs-0.0.0-dataease.js";import"./el-tree-0.0.0-dataease.js";import"./el-tree-select-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./dv-empty-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";const Fe={class:"inner-container"},Ue={class:"right-btns"},We=["title"],Ge=["title","disabled"],Ke={class:"inner-container"},He={class:"right-btns"},Ze=["title"],$e=["title","disabled"],Qe={key:1,class:"no-senior"},Xe=fe({__name:"Senior",props:{chart:{type:Object,required:!0},quotaData:{type:Array,required:!0},quotaExtData:{type:Array,required:!0},fieldsData:{type:Array,required:!0},themes:{type:String,default:"dark"},properties:{type:Array,required:!1,default:()=>[]},propertyInnerAll:{type:Object,required:!1,default:()=>({})},eventInfo:{type:Object,required:!1}},emits:["onFunctionCfgChange","onAssistLineChange","onScrollCfgChange","onThresholdChange","onMapMappingChange","onBubbleAnimateChange"],setup(q,{emit:$}){const b=Le(),{nowPanelTrackInfo:Q,nowPanelJumpInfo:X,dvInfo:h,curComponent:E,batchOptStatus:Y}=he(b),{t:r}=Ce(),L=F(null),D=F(null),J={attrActiveNames:[],styleActiveNames:[]},_=$,s=q,{chart:t,themes:i,properties:A,propertyInnerAll:C}=ge(s);ve(()=>{var o;return(o=t.value)==null?void 0:o.senior},()=>{var o;t.value.senior=ze(((o=t.value)==null?void 0:o.senior)||{},Pe(Je.senior))});const B=V(()=>{var I;let o=0,a=0;return(I=s.fieldsData)==null||I.forEach(S=>{const v=s.chart.id+"#"+S.id;Q.value[v]&&o++,X.value[v]&&a++}),{linkageCount:o,jumpCount:a}}),ee=V(()=>!Y.value&&["indicator","rich-text"].includes(t.value.type)&&s.eventInfo),j=o=>{_("onFunctionCfgChange",o)},N=o=>{_("onAssistLineChange",o)},T=o=>{_("onScrollCfgChange",o)},z=o=>{_("onThresholdChange",o)},te=o=>{_("onMapMappingChange",o)},P=o=>{_("onBubbleAnimateChange",o)},g=o=>{var a;return(a=A==null?void 0:A.value)==null?void 0:a.includes(o)},oe=()=>{if(!h.value.id){H.warning(r("visualization.save_page_tips"));return}Z(()=>{L.value.dialogInit({id:t.value.id})})},ae=()=>{if(!h.value.id){H.warning(r("visualization.save_page_tips"));return}Z(()=>{D.value.dialogInit({id:t.value.id})})},ne=["map-mapping","function-cfg","assist-line","scroll-cfg","threshold","jump-set","linkage","bubble-animate"],ie=["chart-mix","chart-mix-stack","chart-mix-group"],R=V(()=>!De(A.value,...ne)&&ie.includes(t.value.type)),re=()=>{const o={sourceDvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.jumpActive};Me(o).then(a=>{b.setNowPanelJumpInfo(a.data)})},le=()=>{const o={dvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.linkageActive};xe(o).then(a=>{b.setNowPanelTrackInfo(a.data)})},se=Se(),me=V(()=>se.getIsDataEaseBi),pe=()=>{je({dvId:h.value.id,sourceViewId:t.value.id}).then(()=>{Oe(h.value.id).then(o=>{b.setNowPanelTrackInfo(o.data)})})},ue=()=>{qe({sourceDvId:h.value.id,sourceViewId:t.value.id}).then(()=>{Ee(h.value.id).then(o=>{b.setNowPanelJumpInfo(o.data)})})};return(o,a)=>{const I=de,S=ce;return m(),d(S,{class:c(["view-panel","senior-"+e(i)])},{default:l(()=>[R.value?p("",!0):(m(),w("div",{key:0,onKeydown:a[8]||(a[8]=W(()=>{},["stop"])),onKeyup:a[9]||(a[9]=W(()=>{},["stop"])),class:"attr-style"},[n(S,{class:"de-collapse-style"},{default:l(()=>[n(I,{modelValue:J.attrActiveNames,"onUpdate:modelValue":a[7]||(a[7]=v=>J.attrActiveNames=v),class:"style-collapse"},{default:l(()=>{var v;return[g("function-cfg")?(m(),d(e(O),{key:0,effect:e(i),name:"function",title:e(r)("chart.function_cfg"),onModelChange:j},{default:l(()=>[n(ye,{themes:e(i),chart:s.chart,"property-inner":e(C)["function-cfg"],onOnFunctionCfgChange:j},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):p("",!0),g("map-mapping")?(m(),d(e(O),{key:1,effect:e(i),name:"mapMapping",title:e(r)("chart.place_name_mapping"),onModelChange:j},{default:l(()=>[n(Ie,{themes:e(i),chart:s.chart,"property-inner":e(C)["function-cfg"],onOnMapMappingChange:te},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):p("",!0),g("assist-line")?(m(),d(y,{key:2,effect:e(i),title:e(r)("chart.assist_line"),"change-model":e(t).senior.assistLineCfg,modelValue:e(t).senior.assistLineCfg.enable,"onUpdate:modelValue":a[0]||(a[0]=u=>e(t).senior.assistLineCfg.enable=u),name:"analyse",onModelChange:a[1]||(a[1]=u=>N({data:u}))},{default:l(()=>[n(ke,{chart:s.chart,themes:e(i),"quota-data":s.quotaData,"quota-ext-data":s.quotaExtData,"property-inner":e(C)["assist-line"],onOnAssistLineChange:N},null,8,["chart","themes","quota-data","quota-ext-data","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),g("scroll-cfg")?(m(),d(y,{key:3,effect:e(i),title:e(r)("chart.scroll_cfg"),"change-model":e(t).senior.scrollCfg,modelValue:e(t).senior.scrollCfg.open,"onUpdate:modelValue":a[2]||(a[2]=u=>e(t).senior.scrollCfg.open=u),name:"scroll",onModelChange:T},{default:l(()=>[n(be,{themes:e(i),chart:s.chart,"property-inner":e(C)["scroll-cfg"],onOnScrollCfgChange:T},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),g("threshold")?(m(),d(y,{key:4,effect:e(i),title:e(r)("chart.threshold"),"change-model":e(t).senior.threshold,modelValue:e(t).senior.threshold.enable,"onUpdate:modelValue":a[3]||(a[3]=u=>e(t).senior.threshold.enable=u),name:"threshold",onModelChange:z},{default:l(()=>[n(Ae,{themes:e(i),chart:s.chart,"property-inner":e(C).threshold,onOnThresholdChange:z},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),e(t).id?(m(),d(e(_e),{key:5,chart:e(t),themes:e(i),"is-screen":e(h).type==="dataV","resource-table":"snapshot",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9TZW5pb3JIYW5kbGVy"},null,8,["chart","themes","is-screen"])):p("",!0),g("linkage")?(m(),d(y,{key:6,themes:e(i),name:"linkage",title:e(r)("visualization.linkage_setting"),modelValue:e(t).linkageActive,"onUpdate:modelValue":a[4]||(a[4]=u=>e(t).linkageActive=u),onModelChange:le},{default:l(()=>[f("div",Fe,[f("span",{class:c(["label","label-"+s.themes])},k(e(r)("visualization.linkage_setting")),3),f("span",Ue,[B.value.linkageCount>0?(m(),w(U,{key:0},[f("span",{class:c(["set-text-info",{"set-text-info-dark":e(i)==="dark"}])},k(e(r)("visualization.already_setting")),3),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.delete"),style:{margin:"0 8px"},onClick:pe},[n(e(M),null,{default:l(()=>[n(e(x),null,{default:l(()=>[n(e(G),{class:c([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,We)],64)):p("",!0),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.edit"),onClick:ae,disabled:!e(t).linkageActive},[n(e(M),null,{default:l(()=>[n(e(x),null,{default:l(()=>[n(e(K),{class:c([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ge)])])]),_:1},8,["themes","title","modelValue"])):p("",!0),g("jump-set")&&!me.value?(m(),d(y,{key:7,themes:e(i),name:"jumpSet",title:e(r)("visualization.jump_set"),modelValue:e(t).jumpActive,"onUpdate:modelValue":a[5]||(a[5]=u=>e(t).jumpActive=u),onModelChange:re},{default:l(()=>[f("div",Ke,[f("span",{class:c(["label","label-"+s.themes])},k(e(r)("visualization.jump_set")),3),f("span",He,[B.value.jumpCount?(m(),w(U,{key:0},[f("span",{class:c(["set-text-info",{"set-text-info-dark":e(i)==="dark"}])},k(e(r)("visualization.already_setting")),3),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.delete"),style:{margin:"0 8px"},onClick:ue},[n(e(M),null,{default:l(()=>[n(e(x),null,{default:l(()=>[n(e(G),{class:c([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ze)],64)):p("",!0),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.edit"),onClick:oe,disabled:!e(t).jumpActive},[n(e(M),null,{default:l(()=>[n(e(x),null,{default:l(()=>[n(e(K),{class:c([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,$e)])])]),_:1},8,["themes","title","modelValue"])):p("",!0),g("bubble-animate")?(m(),d(y,{key:8,effect:e(i),title:e(r)("visualization.bubble_dynamic_effect"),"change-model":e(t).senior.bubbleCfg,modelValue:e(t).senior.bubbleCfg.enable,"onUpdate:modelValue":a[6]||(a[6]=u=>e(t).senior.bubbleCfg.enable=u),name:"bubbleAnimate",onModelChange:P},{default:l(()=>[n(Be,{themes:e(i),chart:s.chart,"property-inner":e(C)["bubble-animate"],onOnBubbleAnimateChange:P},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),((v=e(E))==null?void 0:v.innerType)==="picture-group"?(m(),d(Ne,{key:9,element:e(E),themes:e(i)},null,8,["element","themes"])):p("",!0),ee.value?(m(),d(e(O),{key:10,effect:e(i),name:"events",title:e(r)("visualization.event")},{default:l(()=>[n(Te,{themes:e(i),"events-info":q.eventInfo},null,8,["themes","events-info"])]),_:1},8,["effect","title"])):p("",!0)]}),_:1},8,["modelValue"])]),_:1})],32)),R.value?(m(),w("div",Qe,k(e(r)("chart.chart_no_senior")),1)):p("",!0),n(Ve,{ref_key:"linkJumpRef",ref:L},null,512),n(we,{ref_key:"linkageRef",ref:D},null,512)]),_:1},8,["class"])}}});const ra=Re(Xe,[["__scopeId","data-v-fe56199c"]]);export{ra as default};
