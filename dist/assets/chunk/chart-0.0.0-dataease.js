import{k as exeRequest,h as useI18n,d as useLinkStoreWithOut}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{o as store,t as getLocale,l as deepCopy}from"./index-0.0.0-dataease.js";import{d as defineStore}from"./pinia-0.0.0-dataease.js";import{i as innerExportDataSetDetails,a as innerExportDetails}from"./chart-0.0.0-dataease2.js";import{E as ElMessage}from"./element-plus-secondary-0.0.0-dataease.js";import{useAppStoreWithOut}from"./app-0.0.0-dataease.js";import{D as Decimal}from"./decimal.js-0.0.0-dataease.js";import{w as isNumber,x as find}from"./lodash-es-0.0.0-dataease.js";import{k as computed,v as toRaw}from"./@vue-0.0.0-dataease.js";const useMapStore=defineStore("map",{state:()=>({mapCache:{},mapKey:{key:"",securityCode:"",mapType:""}}),actions:{setMap({id:e,geoJson:o}){this.mapCache[e]=o},setKey(e){this.mapKey=e}}}),useMapStoreWithOut=()=>useMapStore(store),getWorldTree=()=>exeRequest.get({url:"/map/worldTree"}),getGeoJson=e=>{let o="/map",a=e;isCustomGeo(e)&&(o="/geo",a=getBusiGeoCode(e));const r=a.substring(0,3),l=`${o}/${r}/${a}.json`;return exeRequest.get({url:l})},isCustomGeo=e=>e.startsWith("geo_"),getBusiGeoCode=e=>e.substring(4),listCustomGeoArea=()=>exeRequest.get({url:"/customGeo/geoArea/list"}),getCustomGeoArea=e=>exeRequest.get({url:`/customGeo/geoArea/${e}`}),deleteCustomGeoArea=e=>exeRequest.delete({url:`/customGeo/geoArea/${e}`}),saveCustomGeoArea=e=>exeRequest.post({url:"/customGeo/geoArea/save",data:e}),deleteCustomGeoSubArea=e=>exeRequest.delete({url:`/customGeo/geoSubArea/${e}`}),saveCustomGeoSubArea=e=>exeRequest.post({url:"/customGeo/geoSubArea/save",data:e}),listSubAreaOptions=()=>exeRequest.get({url:"/customGeo/geoSubArea/options"}),appStore=useAppStoreWithOut(),isDataEaseBi=computed(()=>appStore.getIsDataEaseBi),{t:t$2}=useI18n();function hexColorToRGBA(hex,alpha){let rgb=[];if(hex.indexOf("#")>-1){if(/^\#[0-9A-F]{3}$/i.test(hex)){let e="#";hex.replace(/[0-9A-F]/gi,function(o){e+=o+o}),hex=e}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),`rgba(${rgb.join(",")},${alpha/100})`):"rgb(0,0,0)"}else return rgb=hex.match(/\d+/g),`rgba(${rgb.join(",")},${alpha/100})`}const quotaViews=["label","richTextView","indicator","gauge","liquid"],mapChartTypes=["bubble-map","flow-map","heat-map","map","symbolic-map"],distributionChartTypes=["pie","pie-donut","pie-rose","pie-donut-rose","radar","treemap","word-cloud"],relationChartTypes=["scatter","quadrant","funnel","sankey","circle-packing"],notSupportAccumulateViews=[...quotaViews,...mapChartTypes,...distributionChartTypes,...relationChartTypes,"table-info","t-heatmap","percentage-bar-stack","percentage-bar-stack-horizontal","progress-bar","stock-line"];function handleEmptyDataStrategy(e,o){const{data:a}=o,r=e.type.includes("chart-mix");if(!(a!=null&&a.length))return o;const l=parseJson(e.senior).functionCfg.emptyDataStrategy;if(l==="ignoreData"){if(r)for(let c=0;c<a.length;c++)handleIgnoreData(a[c]);else handleIgnoreData(a);return o}const{yAxis:i,xAxisExt:n,extStack:s,extBubble:f}=e,u=(i==null?void 0:i.length)>=2||(n==null?void 0:n.length)>0||(s==null?void 0:s.length)>0;switch(l){case"breakLine":return r?(a[0]&&((n==null?void 0:n.length)>0||(s==null?void 0:s.length)>0)&&handleBreakLineMultiDimension(a[0]),a[1]&&(f==null?void 0:f.length)>0&&handleBreakLineMultiDimension(a[1])):u&&handleBreakLineMultiDimension(a),{...o,connectNulls:!1};case"setZero":{r?(a[0]&&((n==null?void 0:n.length)>0||(s==null?void 0:s.length)>0?handleSetZeroMultiDimension(a[0]):handleSetZeroSingleDimension(a[0])),a[1]&&((f==null?void 0:f.length)>0?handleSetZeroMultiDimension(a[1],!0):handleSetZeroSingleDimension(a[1],!0))):u?handleSetZeroMultiDimension(a):handleSetZeroSingleDimension(a);break}}return o}function handleBreakLineMultiDimension(e){const o=new Map,a=new Set,r=new Map;for(let i=0;i<e.length;i++){const n=e[i],s=o.get(n.field);s?s.set.add(n.category):o.set(n.field,{set:new Set([n.category]),index:i}),a.add(n.category),r.set(n.category,n.quotaList)}let l=0;o.forEach((i,n)=>{if(i.set.size<a.size){let s=0;a.forEach(f=>{i.set.has(f)||e.splice(i.index+l+s,0,{field:n,value:null,category:f,quotaList:r.get(f)}),s++}),l+=a.size-i.set.size}})}function handleSetZeroMultiDimension(e,o=!1){const a=new Map,r=new Set,l=new Map;for(let n=0;n<e.length;n++){const s=e[n];s.value===null&&(s.value=0,o&&(s.valueExt=0));const f=a.get(s.field);f?f.set.add(s.category):a.set(s.field,{set:new Set([s.category]),index:n}),r.add(s.category),l.set(s.category,s.quotaList)}let i=0;a.forEach((n,s)=>{if(n.set.size<r.size){let f=0;r.forEach(u=>{if(!n.set.has(u)){const c={field:s,value:0,category:u,quotaList:l.get(u)};o&&(c.valueExt=0),e.splice(n.index+i+f,0,c)}f++}),i+=r.size-n.set.size}})}function handleSetZeroSingleDimension(e,o=!1){e.forEach(a=>{a.value===null&&(o?a.valueExt=0:a.value=0)})}function handleIgnoreData(e){for(let o=e.length-1;o>=0;o--)e[o].value===null&&e.splice(o,1)}function resetRgbOpacity(e,o){if(e!=null&&e.startsWith("rgb")){const a=e.match(/(\d(\.\d+)?)+/g);if((a==null?void 0:a.length)===4){const r=parseFloat(a[3]);if(isNumber(r)){let l=parseFloat((r*o).toFixed(2));return l>1&&(l=1),`rgba(${a.slice(0,3).concat(l.toString()).join(",")})`}}}return e}function parseJson(e){return typeof e!="string"?e:JSON.parse(e)}function flow(...e){return(o,a,r,l)=>e.reduce((i,n)=>l?n.call(l,o,i,r):n(o,i,r),a)}const isParent=(e,o)=>{let a=e;for(;a;){if(a===o)return!0;a=a.__proto__}return!1},getGeoJsonFile=async e=>{const o=useMapStoreWithOut();let a=o.mapCache[e];return a||(a=(await getGeoJson(e)).data,o.setMap({id:e,geoJson:a})),toRaw(a)},getExcelDownloadRequest=(e,o)=>{var u;let a=JSON.parse(JSON.stringify(e.fields));["gauge","liquid"].includes(o)&&a.length>1&&(a=a.slice(1));const r=JSON.parse(JSON.stringify(e.tableRow)),l=a.map(c=>c.chartShowName??c.name),i=a.map(c=>c.deType),n=a.map(c=>c.dataeaseName);let s=r.map(c=>n.map(d=>c[d])),f=[];return(u=e.detailFields)!=null&&u.length&&(f=e.detailFields.map(c=>({name:c.name,deType:c.deType,dataeaseName:c.dataeaseName})),s=r.map(c=>n.map(d=>{if(d==="detail"&&!c[d]&&Array.isArray(c.details)){const m=c.details;return m!=null&&m.length?m.map(h=>f.map(p=>h[p.dataeaseName])):null}return c[d]}))),{header:l,details:s,excelTypes:i,excelHeaderKeys:n,detailFields:f}};function getChartExcelTitle(e,o){const a=new Date,r=c=>c.toString().padStart(2,"0"),l=a.getFullYear(),i=r(a.getMonth()+1),n=r(a.getDate()),s=r(a.getHours()),f=r(a.getMinutes()),u=r(a.getSeconds());return`${e}_${o}_${l}${i}${n}_${s}${f}${u}`}const exportExcelDownload=(e,o,a)=>{var s,f,u;const r=getChartExcelTitle(o,e.title);let l={proxy:null,dvId:e.sceneId,viewId:e.id,viewInfo:e,viewName:r,busiFlag:e.busiFlag,downloadType:e.downloadType};if(e.type.includes("chart-mix")){const c=getExcelDownloadRequest(e.data.left),d=getExcelDownloadRequest(e.data.right);l={...l,multiInfo:[c,d]},e.downloadType==="dataset"&&delete l.multiInfo}else{const c=getExcelDownloadRequest(e.data,e.type);l={...l,...c}}e.type.includes("symbolic-map")&&(l.detailFields=[]);const i=useLinkStoreWithOut();(isDataEaseBi.value||appStore.getIsIframe)&&(l.dataEaseBi=!0);const n=l.downloadType==="dataset"?innerExportDataSetDetails:innerExportDetails;(u=(f=(s=l.viewInfo)==null?void 0:s.customAttr)==null?void 0:f.basicStyle)!=null&&u.tablePageMode&&(l.viewInfo.customAttr.basicStyle.tablePageMode="page"),n(l).then(c=>{if(i.getLinkToken||isDataEaseBi.value||appStore.getIsIframe){const d=new Blob([c.data],{type:"application/vnd.ms-excel"}),m=document.createElement("a");m.style.display="none",m.href=URL.createObjectURL(d),m.download=r+".xlsx",document.body.appendChild(m),m.click(),document.body.removeChild(m)}else a&&a(c)}).catch(()=>{console.error("Excel download error"),a("error")})},copyString=(e,o=!1)=>{let a=navigator.clipboard;(!a||window.top!==window.self)&&(a={writeText:r=>new Promise(l=>{const i=document.createElement("textarea");i.setAttribute("style","z-index: -1;position: fixed;opacity: 0;"),i.value=r,document.body.appendChild(i),i.select(),document.execCommand("copy"),i.remove(),l()})}),a.writeText(e).then(()=>{o&&ElMessage.success(t$2("commons.copy_success"))})},getDynamicColorScale=(e,o,a,r)=>{const l=(o-e)/a,i=[];for(let n=0;n<a;n++)i.push({value:[e+n*l,e+(n+1)*l],color:r==null?void 0:r[n],label:`${(e+n*l).toFixed(0)} - ${(e+(n+1)*l).toFixed(0)}`});return i},filterChartDataByRange=(e,o,a)=>e.filter(r=>r.value===null||r.value===void 0||r.value>=a&&r.value<=o),getMaxAndMinValueByData=(e,o,a,r,l)=>{const i=n=>e.reduce((s,f)=>n?f[o]>s?f[o]:s:f[o]<s?f[o]:s,n?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);if(r===null||a===null){let n=a,s=r;n===null&&(n=i(!0)),s===null&&(s=i(!1)),l(n,s)}if(r===0&&a===0){const n=i(!0),s=i(!1);l(n,s)}},stepsColor=(e,o,a,r)=>{let l,i,n,s;const f=[],u=[];r=r||1;const c=function(h){return Math.pow(h/255,r)};for(e=d(e).map(c),o=d(o).map(c),l=0;l<a;l++){for(n=a-1===0?0:l/(a-1),s=1-n,i=0;i<3;i++)u[i]=m(Math.round(Math.pow(e[i]*s+o[i]*n,1/r)*255).toString(16));f.push("#"+u.join(""))}function d(h){return h.length===4?h.substr(1).split("").map(function(p){return 17*parseInt(p,16)}):[h.substr(1,2),h.substr(3,2),h.substr(5,2)].map(function(p){return parseInt(p,16)})}function m(h){return h.length===1?"0"+h:h}return f},getMapColorCases=e=>JSON.parse(JSON.stringify(e)).map(a=>{let r=a.colors;["fresh","red","spiritual"].includes(a.value)&&(r=a.colors.reverse());const l=r.length,i=r[0],n=r[l-1];return{name:a.name,value:a.value+"_split_gradient",baseColors:[i,n],colors:stepsColor(i,n,9,1)}});function getColor(e){const o=parseJson(e.customAttr).basicStyle,{seriesColor:a}=o;if(a!=null&&a.length){const{yAxis:r}=e,l=a.reduce((n,s)=>(n[s.id]=s,n),{});return r==null||r.forEach((n,s)=>{const f=l[n.id];f&&(s+1>o.colors.length?o.colors.push(f.color):o.colors[s]=f.color)}),o.colors.map(n=>hexColorToRGBA(n,o.alpha))}}function setupSeriesColor(e){const o=[],a=new Set,r=e.customAttr.basicStyle.colors,l=e.yAxis;return l==null||l.forEach(i=>{a.has(i.id)||(a.add(i.id),o.push({id:i.id,name:i.chartShowName??i.name,color:r[(a.size-1)%r.length]}))}),o}function getGroupColor(e,o){const{basicStyle:a}=parseJson(e.customAttr),{seriesColor:r}=a;if(!(r!=null&&r.length))return;const l=r.reduce((u,c)=>(u[c.id]=c,u),{}),{yAxis:i,xAxisExt:n}=e,{data:s}=o;if(n!=null&&n.length){const u=new Set;s==null||s.forEach(d=>d.category!==null&&u.add(d.category)),[...u].forEach((d,m)=>{const h=l[d];h&&(m+1>a.colors.length?a.colors.push(h.color):a.colors[m]=h.color)})}else i==null||i.forEach((u,c)=>{const d=l[u.id];d&&(c+1>a.colors.length?a.colors.push(d.color):a.colors[c]=d.color)});return a.colors.map(u=>hexColorToRGBA(u,a.alpha))}function setUpGroupSeriesColor(e,o){const a=[],r=new Set,l=e.customAttr.basicStyle.colors,{yAxis:i,xAxisExt:n}=e;return n!=null&&n.length?o==null||o.forEach(s=>{s.value===null||s.category===null||r.has(s.category)||(r.add(s.category),a.push({id:s.category,name:s.category,color:l[(r.size-1)%l.length]}))}):i==null||i.forEach(s=>{r.has(s.id)||(r.add(s.id),a.push({id:s.id,name:s.chartShowName??s.name,color:l[(r.size-1)%l.length]}))}),a}function getStackColor(e,o){const{basicStyle:a}=parseJson(e.customAttr),{seriesColor:r}=a;if(!(r!=null&&r.length))return;const l=r.reduce((u,c)=>(u[c.id]=c,u),{}),{yAxis:i,extStack:n}=e,{data:s}=o;if(n!=null&&n.length){const u=new Set;s==null||s.forEach(d=>d.category!==null&&u.add(d.category)),[...u].forEach((d,m)=>{const h=l[d];h&&(m+1>a.colors.length?a.colors.push(h.color):a.colors[m]=h.color)})}else i==null||i.forEach((u,c)=>{const d=l[u.id];d&&(c+1>a.colors.length?a.colors.push(d.color):a.colors[c]=d.color)});return a.colors.map(u=>hexColorToRGBA(u,a.alpha))}function setUpStackSeriesColor(e,o){const a=[],r=new Set,l=e.customAttr.basicStyle.colors,{yAxis:i,extStack:n}=e;return n!=null&&n.length?o==null||o.forEach(s=>{s.value===null||s.category===null||r.has(s.category)||(r.add(s.category),a.push({id:s.category,name:s.category,color:l[(r.size-1)%l.length]}))}):i==null||i.forEach(s=>{r.has(s.id)||(r.add(s.id),a.push({id:s.id,name:s.chartShowName??s.name,color:l[(r.size-1)%l.length]}))}),a}function getSingleDimensionColor(e,o){const{basicStyle:a}=parseJson(e.customAttr),{seriesColor:r}=a;if(!(r!=null&&r.length))return;const l=r.reduce((u,c)=>(u[c.id]=c,u),{}),{xAxis:i,yAxis:n}=e,{data:s}=o;if(i!=null&&i.length&&(n!=null&&n.length)){const u=new Set;s==null||s.forEach(d=>d.field!==null&&u.add(d.field)),[...u].forEach((d,m)=>{const h=l[d];h&&(m+1>a.colors.length?a.colors.push(h.color):a.colors[m]=h.color)})}return a.colors.map(u=>hexColorToRGBA(u,a.alpha))}function setUpSingleDimensionSeriesColor(e,o){const a=[],r=new Set,l=e.customAttr.basicStyle.colors,{xAxis:i,yAxis:n}=e;return i!=null&&i.length&&(n!=null&&n.length)&&(o==null||o.forEach(s=>{r.has(s.field)||(r.add(s.field),a.push({id:s.field,name:s.field,color:l[(r.size-1)%l.length]}))})),a}function isAlphaColor(e){return e!=null&&e.trim()?e.startsWith("#")?e.length===9:e.startsWith("rgb")?e.split(",").length===4:!1:!1}function getColorFormAlphaColor(e){if(isAlphaColor(e)){if(e.startsWith("#"))return e.slice(0,7);if(e.startsWith("rgb")||e.startsWith("RGB")){const o=e.split(",");return o[0]+","+o[1]+","+o[2]+")"}}return e}function isTransparent(e){if(!(e!=null&&e.trim()))return!0;if(e.startsWith("#")){const o=e.substring(1,e.length);if(o.length===3||o.length===6)return!1;if(o.length===8)return o.substring(6,8)==="00"}if(e.startsWith("rgb")){const o=e.split(",");return o.length!==4?!1:o[3].substring(0,o[3].length-1).trim()==="0"}return!1}function convertToAlphaColor(e,o){if(!(e!=null&&e.trim()))return"rgba(255,255,255,1)";if(e.startsWith("#")){let a=e.trim().substring(1);if(a.length===3){const l=a.split("");a=`${l[0]}${l[0]}${l[1]}${l[1]}${l[2]}${l[2]}`}if(a.length!==6)return"#FFFFFFFF";const r=parseInt((o*2.55).toFixed(0)).toString(16).toUpperCase();return`#${a}${r}`}return e.startsWith("rgb")?`rgba(${e.match(/\d+/g).join(",")},${o/100})`:"rgba(255,255,255,1)"}function svgStrToUrl(e){let o="";try{if(e){const a=new Blob([e],{type:"image/svg+xml"});o=URL.createObjectURL(a)}}catch{}return o}function filterEmptyMinValue(e,o){let a=0;return getMaxAndMinValueByData(e.filter(r=>r[o]),"value",0,0,(r,l)=>{a=l}),a}function getLineConditions(e){var r;const{threshold:o}=parseJson(e.senior),a=[];return o.enable&&((r=o.lineThreshold)==null||r.forEach(l=>{var i;return(i=l.conditions)==null?void 0:i.forEach(n=>a.push({fieldId:l.fieldId,term:n.term,value:n.value,color:n.color,min:n.min,max:n.max}))})),a}function getLineLabelColorByCondition(e,o,a){const r=e.filter(i=>i.fieldId===a);let l;return r.length&&r.some(i=>{if(i.term==="lt"&&o<i.value||i.term==="le"&&o<=i.value||i.term==="gt"&&o>i.value||i.term==="ge"&&o>=i.value||i.term==="between"&&o>=i.min&&o<=i.max)return l=i.color,!0}),l}const measureText=(e,o,a,r)=>{const n=document.getElementById(e.container).querySelector("canvas").getContext("2d"),{fontWeight:s,fontSize:f,fontFamily:u}=a;n.font=[s,`${f}px`,u].join(" ").trim();const c=n.measureText(o);return r==="height"?c.actualBoundingBoxAscent+c.actualBoundingBoxDescent:r==="width"?c.actualBoundingBoxRight+c.actualBoundingBoxLeft:0},hexToRgba=(e,o=1)=>{if(!e.startsWith("#"))return e;e=e.replace("#","");const a=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),n=e.slice(6,8)?parseInt(e.slice(6,8),16)/255:o;return`rgba(${a}, ${r}, ${l}, ${n})`};function safeDecimalSum(e,o){return e.reduce((a,r)=>a.plus(new Decimal(r[o]??0)),new Decimal(0)).toNumber()}function safeDecimalMean(e,o){return e.length?e.reduce((r,l)=>r.plus(new Decimal(l[o]??0)),new Decimal(0)).dividedBy(e.length).toNumber():0}const{t:t$1}=useI18n(),isEnLocal=!["zh","zh-cn","zh-CN","tw"].includes(getLocale()),formatterItem={type:"auto",unitLanguage:isEnLocal?"en":"ch",unit:1,suffix:"",decimalCount:2,thousandSeparator:!0},unitType=[{name:t$1("chart.unit_none"),value:1},{name:t$1("chart.unit_thousand"),value:1e3},{name:t$1("chart.unit_ten_thousand"),value:1e4},{name:t$1("chart.unit_million"),value:1e6},{name:t$1("chart.unit_hundred_million"),value:1e8}],unitEnType=[{name:"None",value:1},{name:"Thousand (K)",value:1e3},{name:"Million (M)",value:1e6},{name:"Billion (B)",value:1e9}];function getUnitTypeList(e){return isEnLocal?unitEnType:e==="ch"?unitType:unitEnType}function getUnitTypeValue(e,o){const a=getUnitTypeList(e);return find(a,l=>l.value===o)?o:1}function initFormatCfgUnit(e){e&&e.unitLanguage===void 0&&(e.unitLanguage="ch"),e&&isEnLocal&&(e.unitLanguage="en"),onChangeFormatCfgUnitLanguage(e,e.unitLanguage)}function onChangeFormatCfgUnitLanguage(e,o){e.unit=getUnitTypeValue(o,e.unit)}const formatterType=[{name:"value_formatter_auto",value:"auto"},{name:"value_formatter_value",value:"value"},{name:"value_formatter_percent",value:"percent"}];function valueFormatter(e,o){if(e==null)return null;let a;return o.type==="auto"?a=transSeparatorAndSuffix(transUnit(e,o),o):o.type==="value"?a=transSeparatorAndSuffix(transDecimal(transUnit(e,o),o),o):o.type==="percent"?(e=e*100,a=transSeparatorAndSuffix(transDecimal(e,o),o)):a=e,a}function transUnit(e,o){return initFormatCfgUnit(o),e/o.unit}function transDecimal(e,o){const a=retain(e,o.decimalCount);return Object.is(parseFloat(a),-0)?a.slice(1):a}function retain(e,o){if(!o)return Math.round(e);let r=(Math.round(e*Math.pow(10,o))/Math.pow(10,o)).toString();r.indexOf(".")<0&&(r+=".");for(let i=r.length-r.indexOf(".");i<=o;i++)r+="0";return r}function transSeparatorAndSuffix(e,o){let a=e+"";if(a.match(/^(\d)(\.\d)?e-(\d)/)&&(a=e.toFixed(18).replace(/\.?0+$/,"")),o.thousandSeparator){const r=/(\d)(?=(\d{3})+$)/g,l=a.split(".");l[0]=l[0].replace(r,"$1,"),a=l.join(".")}if(o.type==="percent")return a+="%",a;{const r=o.unit;o.unitLanguage==="ch"?r===1e3?a+=t$1("chart.unit_thousand"):r===1e4?a+=t$1("chart.unit_ten_thousand"):r===1e6?a+=t$1("chart.unit_million"):r===1e8&&(a+=t$1("chart.unit_hundred_million")):r===1e3?a+="K":r===1e6?a+="M":r===1e9&&(a+="B")}return a+o.suffix.replace(/(^\s*)|(\s*$)/g,"")}function niceMin(e,o,a=5){const l=(o-e)/(a-1),i=Math.floor(Math.log10(l)),n=Math.pow(10,i),s=[1,2,5,10].map(f=>f*n).find(f=>f>=l);return Math.floor(e/s)*s}const listenYAxisNiceMinEvents=(e,o)=>{var r;(r=parseJson(e.customStyle).yAxis.axisValue)!=null&&r.auto&&(o.on("legend-item-group:click",l=>{var i,n,s;if((n=(i=l.view)==null?void 0:i.options)!=null&&n.scales){const f=(s=l.view.filteredData.map(d=>d.value))==null?void 0:s.filter(d=>d!=null),u=Math.min(...f),c=Math.max(...f);l.view.options.scales.value.min=niceMin(u,c),l.view.render(!0)}}),o.on("slider:valuechanged",l=>{var f;const i=(f=l.view.filteredData.map(u=>u.value))==null?void 0:f.filter(u=>u!=null),n=Math.min(...i),s=Math.max(...i);s!==n&&(l.view.options.scales.value.min=niceMin(n,s))}))},calcNiceMinValue=(e,o,a)=>{var m;let r,l;const i=parseJson(e.senior);i.functionCfg&&i.functionCfg.sliderShow&&(l={start:i.functionCfg.sliderRange[0]/100,end:i.functionCfg.sliderRange[1]/100});const n=o.data||[];if(r=n,l&&l.start!==void 0&&l.end!==void 0){const h=Math.floor(l.start*n.length),p=Math.ceil(l.end*n.length);r=n.slice(h,p)}const s=(m=r.map(h=>h.value))==null?void 0:m.filter(h=>h!=null),f=Math.min(...s),u=Math.max(...s),c=niceMin(f,u),d={yAxis:{...a.yAxis,min:c}};return{...a,...d}},{t}=useI18n(),DEFAULT_COLOR_CASE={basicStyle:{colorScheme:"default",colors:["#1E90FF","#90EE90","#00CED1","#E2BD84","#7A90E0","#3BA272","#2BE7FF","#0A8ADA","#FFD700"],alpha:100,gradient:!1,mapStyle:"normal",areaBaseColor:"#FFFFFF",areaBorderColor:"#303133",gaugeStyle:"default",tableBorderColor:"#E6E7E4",tableScrollBarColor:"rgba(0, 0, 0, 0.15)",zoomButtonColor:"#aaa",zoomBackground:"#fff"},misc:{flowMapConfig:{lineConfig:{mapLineAnimate:!0,mapLineGradient:!1,mapLineSourceColor:"#1E90FF",mapLineTargetColor:"#90EE90"}},nameFontColor:"#000000",valueFontColor:"#5470c6"},tableHeader:{tableHeaderBgColor:"#1E90FF",tableHeaderCornerBgColor:"#1E90FF",tableHeaderColBgColor:"#1E90FF",tableHeaderFontColor:"#000000",tableHeaderCornerFontColor:"#000000",tableHeaderColFontColor:"#000000"},tableCell:{tableItemBgColor:"#FFFFFF",tableFontColor:"#000000",tableItemSubBgColor:"#EEEEEE"}},DEFAULT_COLOR_CASE_LIGHT={basicStyle:{colorScheme:"default",colors:["#1E90FF","#90EE90","#00CED1","#E2BD84","#7A90E0","#3BA272","#2BE7FF","#0A8ADA","#FFD700"],alpha:100,gradient:!1,mapStyle:"normal",areaBaseColor:"#FFFFFF",areaBorderColor:"#303133",gaugeStyle:"default",tableBorderColor:"#E6E7E4",tableScrollBarColor:"rgba(0, 0, 0, 0.15)",zoomButtonColor:"#aaa",zoomBackground:"#fff"},misc:{flowMapConfig:{lineConfig:{mapLineAnimate:!0,mapLineGradient:!1,mapLineSourceColor:"#146C94",mapLineTargetColor:"#576CBC"}},nameFontColor:"#000000",valueFontColor:"#5470c6"},tableHeader:{tableHeaderBgColor:"#1E90FF",tableHeaderCornerBgColor:"#1E90FF",tableHeaderColBgColor:"#1E90FF",tableHeaderFontColor:"#000000",tableHeaderCornerFontColor:"#000000",tableHeaderColFontColor:"#000000"},tableCell:{tableItemBgColor:"#FFFFFF",tableFontColor:"#000000",tableItemSubBgColor:"#EEEEEE"}},DEFAULT_COLOR_CASE_DARK={basicStyle:{colorScheme:"default",colors:["#1E90FF","#90EE90","#00CED1","#E2BD84","#7A90E0","#3BA272","#2BE7FF","#0A8ADA","#FFD700"],alpha:100,gradient:!1,mapStyle:"darkblue",areaBaseColor:"#5470C6",areaBorderColor:"#EBEEF5",gaugeStyle:"default",tableBorderColor:"#CCCCCC",tableScrollBarColor:"rgba(255, 255, 255, 0.5)",zoomButtonColor:"#fff",zoomBackground:"#000"},misc:{flowMapConfig:{lineConfig:{mapLineGradient:!1,mapLineSourceColor:"#146C94",mapLineTargetColor:"#576CBC"}},nameFontColor:"#ffffff",valueFontColor:"#5470c6"},tableHeader:{tableHeaderBgColor:"#1E90FF",tableHeaderCornerBgColor:"#1E90FF",tableHeaderColBgColor:"#1E90FF",tableHeaderFontColor:"#FFFFFF",tableHeaderCornerFontColor:"#FFFFFF",tableHeaderColFontColor:"#FFFFFF"},tableCell:{tableItemBgColor:"#131E42",tableFontColor:"#ffffff",tableItemSubBgColor:"#EEEEEE"}},TAB_COMMON_STYLE_BASE={headPosition:"left"},TAB_COMMON_STYLE_LIGHT={...TAB_COMMON_STYLE_BASE,headFontColor:"#000000",headFontActiveColor:"#000000",headBorderColor:"#ffffff",headBorderActiveColor:"#ffffff"},TAB_COMMON_STYLE_DARK={...TAB_COMMON_STYLE_BASE,headFontColor:"#ffffff",headFontActiveColor:"#ffffff",headBorderColor:"#000000",headBorderActiveColor:"#000000"},SENIOR_STYLE_SETTING_LIGHT={linkageIconColor:"#a6a6a6",drillLayerColor:"#a6a6a6",pagerColor:"#a6a6a6"},SENIOR_STYLE_SETTING_DARK={linkageIconColor:"#ffffff",drillLayerColor:"#ffffff",pagerColor:"#ffffff"},FILTER_COMMON_STYLE_BASE={layout:"horizontal",titleLayout:"left"},FILTER_COMMON_STYLE_LIGHT={...FILTER_COMMON_STYLE_BASE,labelColor:"#1f2329",titleColor:"#1f2329",color:"#1f2329",borderColor:"#bbbfc4",text:"#1f2329",bgColor:"#FFFFFF"},FILTER_COMMON_STYLE_DARK={...FILTER_COMMON_STYLE_BASE,labelColor:"#ffffff",titleColor:"#ffffff",color:"#FFFFFF",borderColor:"#484747",text:"#AFAFAF",bgColor:"#131C42"},DEFAULT_TAB_COLOR_CASE_BASE={headPosition:"left"},DEFAULT_TAB_COLOR_CASE_DARK={...DEFAULT_TAB_COLOR_CASE_BASE,headFontColor:"#FFFFFF",headFontActiveColor:"#FFFFFF",headBorderColor:"#131E42",headBorderActiveColor:"#131E42"},DEFAULT_TAB_COLOR_CASE_LIGHT={...DEFAULT_TAB_COLOR_CASE_BASE,headFontColor:"#OOOOOO",headFontActiveColor:"#OOOOOO",headBorderColor:"#OOOOOO",headBorderActiveColor:"#OOOOOO"},DEFAULT_MISC={pieInnerRadius:0,pieOuterRadius:80,radarShape:"polygon",radarSize:80,gaugeMinType:"fix",gaugeMinField:{id:"",summary:""},gaugeMin:0,gaugeMaxType:"dynamic",gaugeMaxField:{id:"",summary:""},gaugeMax:void 0,gaugeStartAngle:225,gaugeEndAngle:-45,nameFontSize:18,valueFontSize:18,nameValueSpace:10,valueFontColor:"#5470c6",valueFontFamily:"Microsoft YaHei",valueFontIsBolder:!1,valueFontIsItalic:!1,valueLetterSpace:0,valueFontShadow:!1,showName:!0,nameFontColor:"#000000",nameFontFamily:"Microsoft YaHei",nameFontIsBolder:!1,nameFontIsItalic:!1,nameLetterSpace:"0",nameFontShadow:!1,treemapWidth:80,treemapHeight:80,liquidMax:void 0,liquidMaxType:"dynamic",liquidMaxField:{id:"",summary:""},liquidSize:80,liquidShape:"circle",hPosition:"center",vPosition:"center",mapPitch:0,wordSizeRange:[8,32],wordSpacing:6,mapAutoLegend:!0,mapLegendMax:0,mapLegendMin:0,mapLegendNumber:9,mapLegendRangeType:"quantize",mapLegendCustomRange:[],flowMapConfig:{lineConfig:{mapLineAnimate:!0,mapLineType:"arc",mapLineWidth:1,mapLineAnimateDuration:3,mapLineGradient:!1,mapLineSourceColor:"#1E90FF",mapLineTargetColor:"#90EE90",alpha:100},pointConfig:{text:{color:"#146C94",fontSize:10},point:{color:"#146C94",size:4,animate:!1,speed:.01}}},wordCloudAxisValueRange:{auto:!0,min:0,max:0,fieldId:void 0},bullet:{bar:{ranges:{fill:["rgba(0,128,255,0.3)"],size:20,showType:"dynamic",fixedRangeNumber:3,symbol:"circle",symbolSize:4},measures:{fill:["rgba(0,128,255,1)"],size:15,symbol:"circle",symbolSize:4},target:{fill:"rgb(0,0,0)",size:20,showType:"dynamic",value:0,symbol:"line",symbolSize:4}}}},DEFAULT_LABEL={show:!1,childrenShow:!0,position:"top",color:"#909399",fontSize:12,formatter:"",labelLine:{show:!0},labelFormatter:formatterItem,reserveDecimalCount:2,labelShadow:!1,labelBgColor:"",labelShadowColor:"",quotaLabelFormatter:formatterItem,showDimension:!0,showQuota:!1,showProportion:!0,seriesLabelFormatter:[],conversionTag:{show:!1,precision:2,text:t("chart.conversion_rate")},showTotal:!1,totalFontSize:12,totalColor:"#FFF",totalFormatter:formatterItem,showStackQuota:!1,fullDisplay:!1,proportionSeriesFormatter:{show:!1,color:"#000",fontSize:12,formatterCfg:{decimalCount:2}}},DEFAULT_TOOLTIP={show:!0,trigger:"item",confine:!0,fontSize:12,color:"#909399",tooltipFormatter:formatterItem,backgroundColor:"#ffffff",seriesTooltipFormatter:[],carousel:{enable:!1,stayTime:3,intervalTime:0}},DEFAULT_TABLE_TOTAL={row:{showGrandTotals:!0,showSubTotals:!0,reverseLayout:!1,reverseSubLayout:!1,label:t("chart.total_show"),subLabel:t("chart.sub_total_show"),subTotalsDimensions:[],subTotalsDimensionsNew:!0,calcTotals:{aggregation:"SUM",cfg:[]},calcSubTotals:{aggregation:"SUM",cfg:[]},totalSort:"none",totalSortField:""},col:{showGrandTotals:!0,showSubTotals:!0,reverseLayout:!1,reverseSubLayout:!1,label:t("chart.total_show"),subLabel:t("chart.sub_total_show"),subTotalsDimensions:[],calcTotals:{aggregation:"SUM",cfg:[]},calcSubTotals:{aggregation:"SUM",cfg:[]},totalSort:"none",totalSortField:""}},DEFAULT_TABLE_HEADER={indexLabel:t("relation.index"),showIndex:!1,tableHeaderAlign:"left",tableHeaderCornerAlign:"left",tableHeaderColAlign:"left",tableHeaderBgColor:"#1E90FF",tableHeaderCornerBgColor:"#1E90FF",tableHeaderColBgColor:"#1E90FF",tableHeaderFontColor:"#000000",tableHeaderCornerFontColor:"#000000",tableHeaderColFontColor:"#000000",tableTitleFontSize:12,tableTitleCornerFontSize:12,tableTitleColFontSize:12,tableTitleHeight:36,tableHeaderSort:!1,showColTooltip:!1,showRowTooltip:!1,showTableHeader:!0,showHorizonBorder:!0,showVerticalBorder:!0,isItalic:!1,isCornerItalic:!1,isColItalic:!1,isBolder:!0,isCornerBolder:!0,isColBolder:!0,headerGroup:!1,headerGroupConfig:{columns:[],meta:[]},rowHeaderFreeze:!0},DEFAULT_TABLE_CELL={tableFontColor:"#000000",tableItemAlign:"right",tableItemBgColor:"#FFFFFF",tableItemFontSize:12,tableItemHeight:36,enableTableCrossBG:!1,tableItemSubBgColor:"#EEEEEE",showTooltip:!1,showHorizonBorder:!0,showVerticalBorder:!0,isItalic:!1,isBolder:!1,tableFreeze:!1,tableColumnFreezeHead:0,tableRowFreezeHead:0,mergeCells:!0},DEFAULT_TITLE_STYLE={show:!0,fontSize:16,color:"#ffffff",hPosition:"left",vPosition:"top",isItalic:!1,isBolder:!0,remarkShow:!1,remark:"",remarkBackgroundColor:"#ffffff",fontFamily:"",letterSpace:"0",fontShadow:!1},DEFAULT_INDICATOR_STYLE={show:!0,fontSize:20,color:"#5470C6ff",hPosition:"center",vPosition:"center",isItalic:!1,isBolder:!0,fontFamily:"Microsoft YaHei",letterSpace:0,fontShadow:!1,backgroundColor:"",suffixEnable:!0,suffix:"",suffixFontSize:14,suffixColor:"#5470C6ff",suffixIsItalic:!1,suffixIsBolder:!0,suffixFontFamily:"Microsoft YaHei",suffixLetterSpace:0,suffixFontShadow:!1},DEFAULT_INDICATOR_NAME_STYLE={show:!0,fontSize:18,color:"#ffffffff",isItalic:!1,isBolder:!0,fontFamily:"Microsoft YaHei",letterSpace:0,fontShadow:!1,nameValueSpacing:0},DEFAULT_TITLE_STYLE_BASE={show:!0,fontSize:16,hPosition:"left",vPosition:"top",isItalic:!1,isBolder:!0,remarkShow:!1,remark:"",fontFamily:"",letterSpace:"0",fontShadow:!1,color:"",remarkBackgroundColor:""},DEFAULT_TITLE_STYLE_LIGHT={...DEFAULT_TITLE_STYLE_BASE,color:"#000000",remarkBackgroundColor:"#ffffff"},DEFAULT_TITLE_STYLE_DARK={...DEFAULT_TITLE_STYLE_BASE,color:"#FFFFFF",remarkBackgroundColor:"#5A5C62"},DEFAULT_LEGEND_STYLE={show:!0,hPosition:"center",vPosition:"bottom",orient:"horizontal",icon:"circle",color:"#333333",fontSize:12,size:4,showRange:!0,sort:"none",customSort:[]},DEFAULT_XAXIS_STYLE={show:!0,position:"bottom",nameShow:!1,name:"",color:"#333333",fontSize:12,axisLabel:{show:!0,color:"#333333",fontSize:12,rotate:0,formatter:"{value}",lengthLimit:10},axisLine:{show:!0,lineStyle:{color:"#cccccc",width:1,style:"solid"}},splitLine:{show:!1,lineStyle:{color:"#cccccc",width:1,style:"solid"}},axisValue:{auto:!0,min:10,max:100,split:10,splitCount:10},axisLabelFormatter:{type:"auto",unitLanguage:isEnLocal?"en":"ch",unit:1,suffix:"",decimalCount:2,thousandSeparator:!0}},DEFAULT_YAXIS_STYLE={show:!0,position:"left",nameShow:!1,name:"",color:"#333333",fontSize:12,axisLabel:{show:!0,color:"#333333",fontSize:12,rotate:0,formatter:"{value}",lengthLimit:10},axisLine:{show:!1,lineStyle:{color:"#cccccc",width:1,style:"solid"}},splitLine:{show:!0,lineStyle:{color:"#cccccc",width:1,style:"solid"}},axisValue:{auto:!0,min:10,max:100,split:10,splitCount:10},axisLabelFormatter:{type:"auto",unitLanguage:isEnLocal?"en":"ch",unit:1,suffix:"",decimalCount:2,thousandSeparator:!0}},DEFAULT_YAXIS_EXT_STYLE={show:!0,position:"right",name:"",color:"#333333",fontSize:12,axisLabel:{show:!0,color:"#333333",fontSize:12,rotate:0,formatter:"{value}"},axisLine:{show:!1,lineStyle:{color:"#cccccc",width:1,style:"solid"}},splitLine:{show:!1,lineStyle:{color:"#cccccc",width:1,style:"solid"}},axisValue:{auto:!0,min:10,max:100,split:10,splitCount:10},axisLabelFormatter:{type:"auto",unitLanguage:isEnLocal?"en":"ch",unit:1,suffix:"",decimalCount:2,thousandSeparator:!0}},DEFAULT_MISC_STYLE={showName:!1,color:"#999",fontSize:12,axisColor:"#999",splitNumber:5,axisLine:{show:!0,lineStyle:{color:"#999999",width:1,type:"solid"}},axisTick:{show:!1,length:5,lineStyle:{color:"#999999",width:1,type:"solid"}},axisLabel:{show:!1,rotate:0,margin:8,color:"#999999",fontSize:"12",formatter:"{value}"},splitLine:{show:!0,lineStyle:{color:"#999999",width:1,type:"solid"}},splitArea:{show:!0},axisValue:{auto:!0,min:10,max:100,split:10,splitCount:10}},DEFAULT_FUNCTION_CFG={sliderShow:!1,sliderRange:[0,10],sliderBg:"#FFFFFF",sliderFillBg:"#BCD6F1",sliderTextColor:"#999999",emptyDataStrategy:"breakLine",emptyDataCustomValue:"",emptyDataFieldCtrl:[]},DEFAULT_ASSIST_LINE_CFG={enable:!1,assistLine:[]},DEFAULT_THRESHOLD={enable:!1,gaugeThreshold:"",liquidThreshold:"",labelThreshold:[],tableThreshold:[],textLabelThreshold:[],lineLabelThreshold:[]},DEFAULT_SCROLL={open:!1,row:1,interval:2e3,step:50},DEFAULT_BUBBLE_ANIMATE={enable:!1,speed:1,rings:1,type:"wave"},DEFAULT_QUADRANT_STYLE={lineStyle:{stroke:"#aaa",lineWidth:1,opacity:.5},regionStyle:[{fill:"#fdfcfc",fillOpacity:0},{fill:"#fafdfa",fillOpacity:0},{fill:"#fdfcfc",fillOpacity:0},{fill:"#fafdfa",fillOpacity:0}],labels:[{content:"",style:{fill:"#000000",fillOpacity:.5,fontSize:14}},{content:"",style:{fill:"#000000",fillOpacity:.5,fontSize:14}},{content:"",style:{fill:"#000000",fillOpacity:.5,fontSize:14}},{content:"",style:{fill:"#000000",fillOpacity:.5,fontSize:14}}]},COLOR_PANEL=["#FF4500","#FF8C00","#FFD700","#71AE46","#00CED1","#1E90FF","#C71585","#999999","#000000","#FFFFFF"],COLOR_CASES=[{name:t("chart.color_default"),value:"default",colors:["#1E90FF","#90EE90","#00CED1","#E2BD84","#7A90E0","#3BA272","#2BE7FF","#0A8ADA","#FFD700"]},{name:t("chart.color_retro"),value:"retro",colors:["#0780cf","#765005","#fa6d1d","#0e2c82","#b6b51f","#da1f18","#701866","#f47a75","#009db2"]},{name:t("chart.color_elegant"),value:"elegant",colors:["#95a2ff","#fa8080","#ffc076","#fae768","#87e885","#3cb9fc","#73abf5","#cb9bff","#434348"]},{name:t("chart.color_future"),value:"future",colors:["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86"]},{name:t("chart.color_gradual"),value:"gradual",colors:["#71ae46","#96b744","#c4cc38","#ebe12a","#eab026","#e3852b","#d85d2a","#ce2626","#ac2026"]},{name:t("chart.color_simple"),value:"simple",colors:["#929fff","#9de0ff","#ffa897","#af87fe","#7dc3fe","#bb60b2","#433e7c","#f47a75","#009db2"]},{name:t("chart.color_business"),value:"business",colors:["#194f97","#555555","#bd6b08","#00686b","#c82d31","#625ba1","#898989","#9c9800","#007f54"]},{name:t("chart.color_gentle"),value:"gentle",colors:["#5b9bd5","#ed7d31","#70ad47","#ffc000","#4472c4","#91d024","#b235e6","#02ae75","#5b9bd5"]},{name:t("chart.color_technology"),value:"technology",colors:["#05f8d6","#0082fc","#fdd845","#22ed7c","#09b0d3","#1d27c9","#f9e264","#f47a75","#009db2"]},{name:t("chart.color_light"),value:"light",colors:["#884898","#808080","#82ae46","#00a3af","#ef8b07","#007bbb","#9d775f","#fae800","#5f9b3c"]},{name:t("chart.color_classical"),value:"classical",colors:["#007bbb","#ffdb4f","#dd4b4b","#2ca9e1","#ef8b07","#4a488e","#82ae46","#dd4b4b","#bb9581"]},{name:t("chart.color_fresh"),value:"fresh",colors:["#5f9b3c","#75c24b","#83d65f","#aacf53","#c7dc68","#d8e698","#e0ebaf","#bbc8e6","#e5e5e5"]},{name:t("chart.color_energy"),value:"energy",colors:["#ef8b07","#2a83a2","#f07474","#c55784","#274a78","#7058a3","#0095d9","#75c24b","#808080"]},{name:t("chart.color_red"),value:"red",colors:["#ff0000","#ef8b07","#4c6cb3","#f8e944","#69821b","#9c5ec3","#00ccdf","#f07474","#bb9581"]},{name:t("chart.color_fast"),value:"fast",colors:["#fae800","#00c039","#0482dc","#bb9581","#ff7701","#9c5ec3","#00ccdf","#00c039","#ff7701"]},{name:t("chart.color_spiritual"),value:"spiritual",colors:["#00a3af","#4da798","#57baaa","#62d0bd","#6ee4d0","#86e7d6","#aeede1","#bde1e6","#e5e5e5"]}],CHART_FONT_FAMILY_ORIGIN=[{name:t("chart.font_family_ya_hei"),value:"Microsoft YaHei"},{name:t("chart.font_family_song_ti"),value:'SimSun, "Songti SC", STSong'},{name:t("chart.font_family_hei_ti"),value:"SimHei, Helvetica"},{name:t("chart.font_family_kai_ti"),value:'KaiTi, "Kaiti SC", STKaiti'}],CHART_FONT_FAMILY_MAP_TRANS={"Microsoft YaHei":"Microsoft YaHei",'SimSun, "Songti SC", STSong':"SimSun","SimHei, Helvetica":"SimHei",'KaiTi, "Kaiti SC", STKaiti':"KaiTi"},CHART_FONT_FAMILY=[{name:t("chart.font_family_ya_hei"),value:"Microsoft YaHei"},{name:t("chart.font_family_song_ti"),value:"SimSun"},{name:t("chart.font_family_hei_ti"),value:"SimHei"},{name:t("chart.font_family_kai_ti"),value:"KaiTi"}],CHART_FONT_FAMILY_MAP={"Microsoft YaHei":"Microsoft YaHei",SimSun:'SimSun, "Songti SC", STSong',SimHei:"SimHei, Helvetica",KaiTi:'KaiTi, "Kaiti SC", STKaiti'},CHART_FONT_LETTER_SPACE=[{name:"0px",value:0},{name:"1px",value:1},{name:"2px",value:2},{name:"3px",value:3},{name:"4px",value:4},{name:"5px",value:5},{name:"6px",value:6},{name:"7px",value:7},{name:"8px",value:8},{name:"9px",value:9},{name:"10px",value:10}],SUPPORT_Y_M=["y","y_M","y_M_d"],CHART_TYPE_CONFIGS=[{category:"quota",title:t("chart.chart_type_quota"),display:"show",details:[{render:"antv",category:"quota",value:"gauge",title:t("chart.chart_gauge"),icon:"gauge"},{render:"antv",category:"quota",value:"liquid",title:t("chart.chart_liquid"),icon:"liquid"},{render:"custom",category:"quota",value:"indicator",title:t("chart.chart_indicator"),icon:"indicator"}]},{category:"table",title:t("chart.chart_type_table"),display:"show",details:[{render:"antv",category:"table",value:"table-info",title:t("chart.chart_table_info"),icon:"table-info"},{render:"antv",category:"table",value:"table-normal",title:t("chart.chart_table_normal"),icon:"table-normal"},{render:"antv",category:"table",value:"table-pivot",title:t("chart.chart_table_pivot"),icon:"table-pivot"},{render:"antv",category:"table",value:"t-heatmap",title:t("chart.chart_table_heatmap"),icon:"t-heatmap"}]},{category:"trend",title:t("chart.chart_type_trend"),display:"show",details:[{render:"antv",category:"trend",value:"line",title:t("chart.chart_line"),icon:"line"},{render:"antv",category:"trend",value:"area",title:t("chart.chart_area"),icon:"area"},{render:"antv",category:"trend",value:"area-stack",title:t("chart.chart_area_stack"),icon:"area-stack"}]},{category:"compare",title:t("chart.chart_type_compare"),display:"show",details:[{render:"antv",category:"compare",value:"bar",title:t("chart.chart_bar"),icon:"bar"},{render:"antv",category:"compare",value:"bar-stack",title:t("chart.chart_bar_stack"),icon:"bar-stack"},{render:"antv",category:"compare",value:"percentage-bar-stack",title:t("chart.chart_percentage_bar_stack"),icon:"percentage-bar-stack"},{render:"antv",category:"compare",value:"bar-group",title:t("chart.chart_bar_group"),icon:"bar-group"},{render:"antv",category:"compare",value:"bar-group-stack",title:t("chart.chart_bar_group_stack"),icon:"bar-group-stack"},{render:"antv",category:"compare",value:"waterfall",title:t("chart.chart_waterfall"),icon:"waterfall"},{render:"antv",category:"compare",value:"bar-horizontal",title:t("chart.chart_bar_horizontal"),icon:"bar-horizontal"},{render:"antv",category:"compare",value:"bar-stack-horizontal",title:t("chart.chart_bar_stack_horizontal"),icon:"bar-stack-horizontal"},{render:"antv",category:"compare",value:"percentage-bar-stack-horizontal",title:t("chart.chart_percentage_bar_stack_horizontal"),icon:"percentage-bar-stack-horizontal"},{render:"antv",category:"compare",value:"bar-range",title:t("chart.chart_bar_range"),icon:"bar-range"},{render:"antv",category:"compare",value:"bidirectional-bar",title:t("chart.chart_bidirectional_bar"),icon:"bidirectional-bar"},{render:"antv",category:"compare",value:"progress-bar",title:t("chart.chart_progress_bar"),icon:"progress-bar"},{render:"antv",category:"trend",value:"stock-line",title:t("chart.chart_stock_line"),icon:"stock-line"},{render:"antv",category:"compare",value:"bullet-graph",title:t("chart.bullet_chart"),icon:"bullet-graph"}]},{category:"distribute",title:t("chart.chart_type_distribute"),display:"show",details:[{render:"antv",category:"distribute",value:"pie",title:t("chart.chart_pie"),icon:"pie"},{render:"antv",category:"distribute",value:"pie-donut",title:t("chart.chart_pie_donut"),icon:"pie-donut"},{render:"antv",category:"distribute",value:"pie-rose",title:t("chart.chart_pie_rose"),icon:"pie-rose"},{render:"antv",category:"distribute",value:"pie-donut-rose",title:t("chart.chart_pie_donut_rose"),icon:"pie-donut-rose"},{render:"antv",category:"chart.chart_type_distribute",value:"radar",title:t("chart.chart_radar"),icon:"radar"},{render:"antv",category:"distribute",value:"treemap",title:t("chart.chart_treemap"),icon:"treemap"},{render:"antv",category:"distribute",value:"word-cloud",title:t("chart.chart_word_cloud"),icon:"word-cloud"}]},{category:"map",title:t("chart.chart_type_space"),display:"show",details:[{render:"antv",category:"map",value:"map",title:t("chart.chart_map"),icon:"map"},{render:"antv",category:"map",value:"bubble-map",title:t("chart.chart_bubble_map"),icon:"bubble-map"},{render:"antv",category:"map",value:"flow-map",title:t("chart.chart_flow_map"),icon:"flow-map"},{render:"antv",category:"map",value:"heat-map",title:t("chart.chart_heat_map"),icon:"heat-map"},{render:"antv",category:"map",value:"symbolic-map",title:t("chart.chart_symbolic_map"),icon:"symbolic-map"}]},{category:"relation",title:t("chart.chart_type_relation"),display:"show",details:[{render:"antv",category:"distribute",value:"scatter",title:t("chart.chart_scatter"),icon:"scatter"},{render:"antv",category:"distribute",value:"quadrant",title:t("chart.chart_quadrant"),icon:"quadrant"},{render:"antv",category:"distribute",value:"funnel",title:t("chart.chart_funnel"),icon:"funnel"},{render:"antv",category:"relation",value:"sankey",title:t("chart.chart_sankey"),icon:"sankey"},{render:"antv",category:"distribute",value:"circle-packing",title:t("chart.chart_circle_packing"),icon:"circle-packing"}]},{category:"dual_axes",title:t("chart.chart_type_dual_axes"),display:"show",details:[{render:"antv",category:"dual_axes",value:"chart-mix",title:t("chart.chart_mix"),icon:"chart-mix"},{render:"antv",category:"dual_axes",value:"chart-mix-group",title:t("chart.chart_mix_group_column"),icon:"chart-mix-group"},{render:"antv",category:"dual_axes",value:"chart-mix-stack",title:t("chart.chart_mix_stack_column"),icon:"chart-mix-stack"},{render:"antv",category:"dual_axes",value:"chart-mix-dual-line",title:t("chart.chart_mix_dual_line"),icon:"chart-mix-dual-line"}]},{category:"other",title:t("datasource.other"),display:"hidden",details:[{render:"custom",category:"quota",value:"rich-text",title:t("visualization.rich_text"),icon:"rich-text"},{render:"custom",category:"quota",value:"picture-group",title:t("visualization.picture_group"),icon:"picture-group"}]}],DEFAULT_BASIC_STYLE={alpha:100,tableBorderColor:"#CCCCCC",tableScrollBarColor:"#1f23294d",tableColumnMode:"adapt",tableColumnWidth:100,tableFieldWidth:[],tablePageMode:"page",tablePageStyle:"simple",tablePageSize:20,gaugeStyle:"default",colorScheme:"default",colors:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],mapVendor:"amap",gradient:!1,lineWidth:2,lineSymbol:"circle",lineSymbolSize:4,lineSmooth:!0,barDefault:!0,radiusColumnBar:"rightAngle",columnBarRightAngleRadius:20,columnWidthRatio:60,barWidth:40,barGap:.4,lineType:"solid",scatterSymbol:"circle",scatterSymbolSize:8,radarShape:"polygon",mapStyle:"normal",heatMapType:"heatmap",heatMapIntensity:2,heatMapRadius:20,areaBorderColor:"#EBEEF5",areaBaseColor:"#ffffff",mapSymbolOpacity:.7,mapSymbolStrokeWidth:2,mapSymbol:"circle",mapSymbolSize:6,radius:80,innerRadius:60,showZoom:!0,zoomButtonColor:"#aaa",zoomBackground:"#fff",tableLayoutMode:"grid",defaultExpandLevel:1,calcTopN:!1,topN:5,topNLabel:t("datasource.other"),gaugeAxisLine:!0,gaugePercentLabel:!0,showSummary:!1,summaryLabel:t("chart.total_show"),seriesColor:[],layout:"horizontal",mapSymbolSizeMin:4,mapSymbolSizeMax:30,showLabel:!0,mapStyleUrl:"",autoFit:!0,mapCenter:{longitude:117.232,latitude:39.354},zoomLevel:7,customIcon:"",showHoverStyle:!0,autoWrap:!1,maxLines:3,radarShowPoint:!0,radarPointSize:4,radarAreaColor:!0,circleBorderColor:"#fff",circleBorderWidth:0,circlePadding:0,quotaPosition:"col",quotaColLabel:t("dataset.value")},BASE_VIEW_CONFIG={id:"",title:t("data_set.view"),sceneId:0,tableId:"",type:"bar",render:"antv",resultCount:1e3,resultMode:"custom",refreshViewEnable:!1,refreshTime:5,refreshUnit:"minute",xAxis:[],xAxisExt:[],yAxis:[],yAxisExt:[],extStack:[],drillFields:[],viewFields:[],extBubble:[],extLabel:[],extTooltip:[],customFilter:{},sortPriority:[],customAttr:{basicStyle:DEFAULT_BASIC_STYLE,misc:DEFAULT_MISC,label:DEFAULT_LABEL,tooltip:DEFAULT_TOOLTIP,tableTotal:DEFAULT_TABLE_TOTAL,tableHeader:DEFAULT_TABLE_HEADER,tableCell:DEFAULT_TABLE_CELL,indicator:DEFAULT_INDICATOR_STYLE,indicatorName:DEFAULT_INDICATOR_NAME_STYLE,map:{id:"",level:"world"}},customStyle:{text:DEFAULT_TITLE_STYLE,legend:DEFAULT_LEGEND_STYLE,xAxis:DEFAULT_XAXIS_STYLE,yAxis:DEFAULT_YAXIS_STYLE,yAxisExt:DEFAULT_YAXIS_EXT_STYLE,misc:DEFAULT_MISC_STYLE},senior:{functionCfg:DEFAULT_FUNCTION_CFG,assistLineCfg:DEFAULT_ASSIST_LINE_CFG,threshold:DEFAULT_THRESHOLD,scrollCfg:DEFAULT_SCROLL,areaMapping:{},bubbleCfg:DEFAULT_BUBBLE_ANIMATE},flowMapStartName:[],flowMapEndName:[]};function getScaleValue(e,o){const a=Math.round(e*o);return a>1?a:1}function getViewConfig(e){let o=null;return CHART_TYPE_CONFIGS.forEach(a=>{a.details.forEach(r=>{r.value===e&&(o=deepCopy(r))})}),o}export{getDynamicColorScale as $,getGroupColor as A,BASE_VIEW_CONFIG as B,CHART_FONT_FAMILY_ORIGIN as C,DEFAULT_COLOR_CASE as D,getStackColor as E,FILTER_COMMON_STYLE_LIGHT as F,getSingleDimensionColor as G,setupSeriesColor as H,DEFAULT_LABEL as I,flow as J,isAlphaColor as K,convertToAlphaColor as L,setUpStackSeriesColor as M,setUpGroupSeriesColor as N,formatterItem as O,listenYAxisNiceMinEvents as P,getLineConditions as Q,getLineLabelColorByCondition as R,SENIOR_STYLE_SETTING_LIGHT as S,TAB_COMMON_STYLE_LIGHT as T,calcNiceMinValue as U,DEFAULT_MISC as V,getCustomGeoArea as W,getGeoJsonFile as X,useMapStoreWithOut as Y,getMaxAndMinValueByData as Z,filterChartDataByRange as _,COLOR_PANEL as a,filterEmptyMinValue as a0,getColorFormAlphaColor as a1,svgStrToUrl as a2,setUpSingleDimensionSeriesColor as a3,DEFAULT_THRESHOLD as a4,getScaleValue as a5,COLOR_CASES as a6,DEFAULT_TABLE_HEADER as a7,DEFAULT_TABLE_CELL as a8,resetRgbOpacity as a9,DEFAULT_QUADRANT_STYLE as aA,DEFAULT_FUNCTION_CFG as aB,DEFAULT_ASSIST_LINE_CFG as aC,saveCustomGeoArea as aD,deleteCustomGeoArea as aE,listSubAreaOptions as aF,saveCustomGeoSubArea as aG,deleteCustomGeoSubArea as aH,copyString as aa,safeDecimalMean as ab,safeDecimalSum as ac,isTransparent as ad,isParent as ae,exportExcelDownload as af,getWorldTree as ag,listCustomGeoArea as ah,CHART_FONT_FAMILY_MAP_TRANS as ai,quotaViews as aj,notSupportAccumulateViews as ak,SUPPORT_Y_M as al,formatterType as am,isEnLocal as an,getUnitTypeList as ao,onChangeFormatCfgUnitLanguage as ap,initFormatCfgUnit as aq,CHART_FONT_FAMILY_MAP as ar,DEFAULT_TITLE_STYLE as as,getMapColorCases as at,stepsColor as au,DEFAULT_TOOLTIP as av,CHART_FONT_FAMILY as aw,CHART_FONT_LETTER_SPACE as ax,DEFAULT_TABLE_TOTAL as ay,DEFAULT_MISC_STYLE as az,DEFAULT_BASIC_STYLE as b,DEFAULT_TITLE_STYLE_LIGHT as c,DEFAULT_COLOR_CASE_LIGHT as d,DEFAULT_TAB_COLOR_CASE_LIGHT as e,DEFAULT_TITLE_STYLE_DARK as f,DEFAULT_COLOR_CASE_DARK as g,FILTER_COMMON_STYLE_DARK as h,DEFAULT_TAB_COLOR_CASE_DARK as i,SENIOR_STYLE_SETTING_DARK as j,CHART_TYPE_CONFIGS as k,DEFAULT_INDICATOR_STYLE as l,DEFAULT_INDICATOR_NAME_STYLE as m,getViewConfig as n,TAB_COMMON_STYLE_DARK as o,parseJson as p,DEFAULT_XAXIS_STYLE as q,DEFAULT_YAXIS_STYLE as r,DEFAULT_YAXIS_EXT_STYLE as s,measureText as t,hexColorToRGBA as u,valueFormatter as v,DEFAULT_LEGEND_STYLE as w,hexToRgba as x,handleEmptyDataStrategy as y,getColor as z};
