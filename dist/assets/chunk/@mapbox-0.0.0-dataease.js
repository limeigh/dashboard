import{g as M}from"./@amap-0.0.0-dataease.js";var C=_;function _(t,e){var i=t&&t.type,r;if(i==="FeatureCollection")for(r=0;r<t.features.length;r++)_(t.features[r],e);else if(i==="GeometryCollection")for(r=0;r<t.geometries.length;r++)_(t.geometries[r],e);else if(i==="Feature")_(t.geometry,e);else if(i==="Polygon")V(t.coordinates,e);else if(i==="MultiPolygon")for(r=0;r<t.coordinates.length;r++)V(t.coordinates[r],e);return t}function V(t,e){if(t.length!==0){B(t[0],e);for(var i=1;i<t.length;i++)B(t[i],!e)}}function B(t,e){for(var i=0,r=0,o=0,a=t.length,s=a-1;o<a;s=o++){var n=(t[o][0]-t[s][0])*(t[s][1]+t[o][1]),h=i+n;r+=Math.abs(i)>=Math.abs(n)?i-h+n:n-h+i,i=h}i+r>=0!=!!e&&t.reverse()}const Q=M(C);var A=v;function v(t,e){this.x=t,this.y=e}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,o=i*this.x+e*this.y;return this.x=r,this.y=o,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),o=e.x+i*(this.x-e.x)-r*(this.y-e.y),a=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=o,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};v.convert=function(t){return t instanceof v?t:Array.isArray(t)?new v(t[0],t[1]):t};const Z=M(A);var z=A,k=p;function p(t,e,i,r,o){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=o,t.readFields(D,this,e)}function D(t,e,i){t==1?e.id=i.readVarint():t==2?I(i,e):t==3?e.type=i.readVarint():t==4&&(e._geometry=i.pos)}function I(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[r]=o}}p.types=["Unknown","Point","LineString","Polygon"];p.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,o=0,a=0,s=[],n;t.pos<e;){if(r<=0){var h=t.readVarint();i=h&7,r=h>>3}if(r--,i===1||i===2)o+=t.readSVarint(),a+=t.readSVarint(),i===1&&(n&&s.push(n),n=[]),n.push(new z(o,a));else if(i===7)n&&n.push(n[0].clone());else throw new Error("unknown command "+i)}return n&&s.push(n),s};p.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,o=0,a=0,s=1/0,n=-1/0,h=1/0,f=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();i=u&7,r=u>>3}if(r--,i===1||i===2)o+=t.readSVarint(),a+=t.readSVarint(),o<s&&(s=o),o>n&&(n=o),a<h&&(h=a),a>f&&(f=a);else if(i!==7)throw new Error("unknown command "+i)}return[s,h,n,f]};p.prototype.toGeoJSON=function(t,e,i){var r=this.extent*Math.pow(2,i),o=this.extent*t,a=this.extent*e,s=this.loadGeometry(),n=p.types[this.type],h,f;function u(d){for(var y=0;y<d.length;y++){var g=d[y],T=180-(g.y+a)*360/r;d[y]=[(g.x+o)*360/r-180,360/Math.PI*Math.atan(Math.exp(T*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(h=0;h<s.length;h++)c[h]=s[h][0];s=c,u(s);break;case 2:for(h=0;h<s.length;h++)u(s[h]);break;case 3:for(s=q(s),h=0;h<s.length;h++)for(f=0;f<s[h].length;f++)u(s[h][f]);break}s.length===1?s=s[0]:n="Multi"+n;var l={type:"Feature",geometry:{type:n,coordinates:s},properties:this.properties};return"id"in this&&(l.id=this.id),l};function q(t){var e=t.length;if(e<=1)return[t];for(var i=[],r,o,a=0;a<e;a++){var s=$(t[a]);s!==0&&(o===void 0&&(o=s<0),o===s<0?(r&&i.push(r),r=[t[a]]):r.push(t[a]))}return r&&i.push(r),i}function $(t){for(var e=0,i=0,r=t.length,o=r-1,a,s;i<r;o=i++)a=t[i],s=t[o],e+=(s.x-a.x)*(a.y+s.y);return e}var G=k,X=b;function b(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(E,this,e),this.length=this._features.length}function E(t,e,i){t===15?e.version=i.readVarint():t===1?e.name=i.readString():t===5?e.extent=i.readVarint():t===2?e._features.push(i.pos):t===3?e._keys.push(i.readString()):t===4&&e._values.push(R(i))}function R(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null}return e}b.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new G(this._pbf,e,this.extent,this._keys,this._values)};var U=X,W=L;function L(t,e){this.layers=t.readFields(O,{},e)}function O(t,e,i){if(t===3){var r=new U(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}var j=W,w={exports:{}};w.exports=m;w.exports.default=m;var x=1e20;function m(t,e,i,r,o,a){this.fontSize=t||24,this.buffer=e===void 0?3:e,this.cutoff=r||.25,this.fontFamily=o||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var s=this.size=this.fontSize+this.buffer*2,n=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Uint16Array(n),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function H(t,e,i,r,o,a,s){a.fill(x,0,e*i),s.fill(0,0,e*i);for(var n=(e-r)/2,h=0;h<o;h++)for(var f=0;f<r;f++){var u=(h+n)*e+f+n,c=t.data[4*(h*r+f)+3]/255;if(c===1)a[u]=0,s[u]=x;else if(c===0)a[u]=x,s[u]=0;else{var l=Math.max(0,.5-c),d=Math.max(0,c-.5);a[u]=l*l,s[u]=d*d}}}function N(t,e,i,r,o,a,s){for(var n=0;n<e*i;n++){var h=Math.sqrt(r[n])-Math.sqrt(o[n]);t[n]=Math.round(255-255*(h/a+s))}}m.prototype._draw=function(t,e){var i=this.ctx.measureText(t),r=i.width,o=2*this.buffer,a,s,n,h,f,u,c,l;e&&this.useMetrics?(f=Math.floor(i.actualBoundingBoxAscent),l=this.buffer+Math.ceil(i.actualBoundingBoxAscent),u=this.buffer,c=this.buffer,s=Math.min(this.size,Math.ceil(i.actualBoundingBoxRight-i.actualBoundingBoxLeft)),h=Math.min(this.size-u,Math.ceil(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)),a=s+o,n=h+o,this.ctx.textBaseline="alphabetic"):(a=s=this.size,n=h=this.size,f=19*this.fontSize/24,u=c=0,l=this.middle,this.ctx.textBaseline="middle");var d;s&&h&&(this.ctx.clearRect(c,u,s,h),this.ctx.fillText(t,this.buffer,l),d=this.ctx.getImageData(c,u,s,h));var y=new Uint8ClampedArray(a*n);return H(d,a,n,s,h,this.gridOuter,this.gridInner),S(this.gridOuter,a,n,this.f,this.v,this.z),S(this.gridInner,a,n,this.f,this.v,this.z),N(y,a,n,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:y,metrics:{width:s,height:h,sdfWidth:a,sdfHeight:n,top:f,left:0,advance:r}}};m.prototype.draw=function(t){return this._draw(t,!1).data};m.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};function S(t,e,i,r,o,a){for(var s=0;s<e;s++)F(t,s,e,i,r,o,a);for(var n=0;n<i;n++)F(t,n*e,1,e,r,o,a)}function F(t,e,i,r,o,a,s){var n,h,f,u;for(a[0]=0,s[0]=-x,s[1]=x,n=0;n<r;n++)o[n]=t[e+n*i];for(n=1,h=0,f=0;n<r;n++){do u=a[h],f=(o[n]-o[u]+n*n-u*u)/(n-u)/2;while(f<=s[h]&&--h>-1);h++,a[h]=n,s[h]=f,s[h+1]=x}for(n=0,h=0;n<r;n++){for(;s[h+1]<n;)h++;u=a[h],t[e+n*i]=o[u]+(n-u)*(n-u)}}var Y=w.exports;const tt=M(Y);var J=P;function P(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=r}P.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,r=0;r<8;r++){var o=this.sampleCurveX(i)-t;if(Math.abs(o)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i=i-o/a}var s=0,n=1;for(i=t,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-t)<e));r++)t>o?s=i:n=i,i=(n-s)*.5+s;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const it=M(J);export{Z as P,tt as T,it as U,j as V,Q as r};
