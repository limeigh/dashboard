import{B as ie,w as ce,C as ue,p as ge,z as fe,N as pe,P as ke,Q as _e,y as be,e as he,L as Be,i as ve,x as Ce,E as Ie,A as ye}from"./element-plus-secondary-0.0.0-dataease.js";import{j as Ve,e as G,f as Ee}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{a as we}from"./chart-0.0.0-dataease.js";import{b as Pe,u as $,i as N}from"./imgUtils-0.0.0-dataease.js";import{s as ze}from"./snapshot-0.0.0-dataease.js";import{k as Se}from"./index-0.0.0-dataease.js";import{e as Ue}from"./element-resize-detector-0.0.0-dataease.js";import{j as q}from"./board-list-0.0.0-dataease.js";import{d as S,t as x,o as m,c as f,a as u,W as n,U as l,T as y,V as A,u as r,Z as U,z as s,Y as B,r as z,l as Fe,k as D,b as Oe,n as Re,w as We,ae as Le,S as j,_ as b,R as h,aa as Me,a8 as Te}from"./@vue-0.0.0-dataease.js";import{_ as F}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import $e from"./ImgViewDialog-0.0.0-dataease.js";const Ne=()=>Ve.get({url:"/visualizationBackground/findAll"}),De={class:"icon-option"},je=S({__name:"BoardItem",props:{item:{},active:{type:Boolean},themes:{default:"dark"},innerImageColor:{}},setup(v){const C=v,{item:k,innerImageColor:i,active:p,themes:I}=x(C),_=e=>e.url.replace("board/","").replace(".svg","");return(e,O)=>{const w=G;return m(),f("div",De,[u("div",{class:s(["icon-area",{"selected-active":r(p),"icon-area-dark":r(I)==="dark"}])},[n(w,null,{default:l(()=>[(m(),y(A(r(q)[_(r(k))]),{style:U({color:r(i)}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})],2),u("span",null,B(r(k).name),1)])}}});const Ge=F(je,[["__scopeId","data-v-5a75de09"]]),qe={class:"img-option-prefix"},xe=S({__name:"BorderOptionPrefix",props:{url:{},innerImageColor:{}},setup(v){const C=v,{innerImageColor:k}=x(C),i=p=>p.replace("board/","").replace(".svg","");return(p,I)=>(m(),f("div",qe,[n(r(G),null,{default:l(()=>[(m(),y(A(r(q)[i(p.url)]),{style:U({color:r(k),width:"20px",height:"20px"}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})]))}});const Ae=F(xe,[["__scopeId","data-v-cdc79b02"]]),Je={class:"indented-container"},Qe={class:"indented-item"},Ye={class:"indented-container"},Ze={class:"indented-item"},He={class:"indented-container"},Ke={class:"indented-item"},Xe={key:0,class:"indented-item"},eo=15e6,oo=S({__name:"BackgroundOverallCommon",props:{componentPosition:{default:"dashboard"},editPosition:{default:"canvas"},themes:{default:"dark"},commonBackgroundPop:{},backgroundColorPickerWidth:{default:50},backgroundBorderSelectWidth:{default:108}},emits:["onBackgroundChange"],setup(v,{emit:C}){const k=ze(),{t:i}=Ee(),p=C,I=z(null),_=v,e=Fe({commonBackground:{},BackgroundShowMap:{},checked:!1,backgroundOrigin:{},fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1,panel:null,predefineColors:we}),O=()=>{I.value.click()},w=()=>{Ie.error("图片大小不能超过15M")},J=o=>{const a=o.target.files[0];if(a.size>eo){w();return}$(a,g=>{e.commonBackground.outerImage=g,e.fileList=[{url:N(e.commonBackground.outerImage)}],d()})},Q=()=>{Ne().then(o=>{e.BackgroundShowMap=o.data})},R=()=>{e.commonBackground=Se(_.commonBackgroundPop),e.commonBackground.outerImage?e.fileList=[{url:N(e.commonBackground.outerImage)}]:e.fileList=[]};Q();const Y=()=>{k.recordSnapshotCacheToMobile("commonBackground")},Z=()=>{e.uploadDisabled=!1,e.commonBackground.outerImage=null,e.fileList=[],d(),Y()},H=o=>{e.dialogImageUrl=o.url,e.dialogVisible=!0},K=o=>{$(o.file,a=>{e.commonBackground.outerImage=a,d()})},d=()=>{p("onBackgroundChange",e.commonBackground)},V=z(),E=z(),X=D(()=>E.value<=240?50:_.backgroundColorPickerWidth),ee=D(()=>E.value<=240?108:_.backgroundBorderSelectWidth);return Oe(()=>{var a;R();const o=Ue();E.value=(a=V.value)==null?void 0:a.offsetWidth,o.listenTo(V.value,()=>{Re(()=>{var g;E.value=(g=V.value)==null?void 0:g.offsetWidth})})}),We(()=>_.commonBackgroundPop,()=>{R()}),(o,a)=>{const g=ie,c=ce,W=ue,L=ge,P=fe,M=pe,T=ke,oe=_e,ae=ye,ne=be,le=Le("Plus"),te=he,re=Be,se=ve,de=Ce;return m(),f("div",{style:{width:"100%"},ref_key:"bgForm",ref:V},[u("input",{id:"input",ref_key:"files",ref:I,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:a[0]||(a[0]=t=>{t.target.value=""}),onChange:J},null,544),n(de,{size:"small","label-position":"top",style:{width:"100%"}},{default:l(()=>[n(L,{gutter:8},{default:l(()=>[n(W,{span:12},{default:l(()=>[n(c,{label:r(i)("visualization.inner_padding"),class:s(["form-item w100","form-item-"+o.themes])},{default:l(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",min:0,max:100,modelValue:e.commonBackground.innerPadding,"onUpdate:modelValue":a[1]||(a[1]=t=>e.commonBackground.innerPadding=t),onChange:d},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1}),n(W,{span:12},{default:l(()=>[n(c,{label:r(i)("visualization.board_radio"),class:s(["form-item w100","form-item-"+o.themes])},{default:l(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",min:0,max:100,modelValue:e.commonBackground.borderRadius,"onUpdate:modelValue":a[2]||(a[2]=t=>e.commonBackground.borderRadius=t),onChange:d},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1})]),_:1}),o.editPosition==="canvas"?(m(),f(j,{key:0},[n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:l(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backdropFilterEnable,"onUpdate:modelValue":a[3]||(a[3]=t=>e.commonBackground.backdropFilterEnable=t),onChange:d},{default:l(()=>[b(B(o.$t("chart.backdrop_blur")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Je,[u("div",Qe,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:l(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",min:0,max:30,disabled:!e.commonBackground.backdropFilterEnable,modelValue:e.commonBackground.backdropFilter,"onUpdate:modelValue":a[4]||(a[4]=t=>e.commonBackground.backdropFilter=t),onChange:d},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"])])])],64)):h("",!0),n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:l(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundColorSelect,"onUpdate:modelValue":a[5]||(a[5]=t=>e.commonBackground.backgroundColorSelect=t),onChange:d},{default:l(()=>[b(B(o.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Ye,[u("div",Ze,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:l(()=>[e.commonBackground.backgroundColor?(m(),y(M,{key:0,modelValue:e.commonBackground.backgroundColor,"onUpdate:modelValue":a[6]||(a[6]=t=>e.commonBackground.backgroundColor=t),effect:o.themes,disabled:!e.commonBackground.backgroundColorSelect,"trigger-width":X.value,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:d},null,8,["modelValue","effect","disabled","trigger-width","predefine"])):h("",!0)]),_:1},8,["class"])])]),n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:l(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundImageEnable,"onUpdate:modelValue":a[7]||(a[7]=t=>e.commonBackground.backgroundImageEnable=t),onChange:d},{default:l(()=>[b(B(r(i)("visualization.background")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",He,[u("div",Ke,[n(c,{class:s(["form-item margin-bottom-8","form-item-"+o.themes])},{default:l(()=>[n(oe,{effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,modelValue:e.commonBackground.backgroundType,"onUpdate:modelValue":a[8]||(a[8]=t=>e.commonBackground.backgroundType=t),onChange:d},{default:l(()=>[n(T,{effect:o.themes,label:"outerImage"},{default:l(()=>[b(B(r(i)("visualization.photo")),1)]),_:1},8,["effect"]),n(T,{effect:o.themes,label:"innerImage"},{default:l(()=>[b(B(r(i)("visualization.board")),1)]),_:1},8,["effect"])]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"])]),e.commonBackground.backgroundType==="innerImage"?(m(),f("div",Xe,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:l(()=>[n(M,{modelValue:e.commonBackground.innerImageColor,"onUpdate:modelValue":a[9]||(a[9]=t=>e.commonBackground.innerImageColor=t),disabled:!e.commonBackground.backgroundImageEnable,effect:o.themes,title:r(i)("visualization.border_color_setting"),"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:d},null,8,["modelValue","disabled","effect","title","predefine"])]),_:1},8,["class"]),n(c,{class:s(["form-item fill","form-item-"+o.themes]),style:{"padding-left":"8px"}},{default:l(()=>[n(ne,{style:U({width:ee.value+"px"}),modelValue:e.commonBackground.innerImage,"onUpdate:modelValue":a[10]||(a[10]=t=>e.commonBackground.innerImage=t),"popper-class":"board-select",effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,placeholder:"选择边框...",onChange:d},Me({default:l(()=>[(m(!0),f(j,null,Te(e.BackgroundShowMap.default,(t,me)=>(m(),y(ae,{key:me,label:t.name,value:t.url},{default:l(()=>[n(Ge,{themes:o.themes,active:t.url===e.commonBackground.innerImage,"inner-image-color":e.commonBackground.innerImageColor,item:t},null,8,["themes","active","inner-image-color","item"])]),_:2},1032,["label","value"]))),128))]),_:2},[e.commonBackground.innerImage?{name:"prefix",fn:l(()=>[n(Ae,{"inner-image-color":"state.commonBackground.innerImageColor",url:e.commonBackground.innerImage},null,8,["url"])]),key:"0"}:void 0]),1032,["style","modelValue","effect","disabled"])]),_:1},8,["class"])])):h("",!0),e.commonBackground.backgroundType==="outerImage"?(m(),f("div",{key:1,class:s(["indented-item",{disabled:!e.commonBackground.backgroundImageEnable||e.uploadDisabled}])},[u("div",{class:s(["avatar-uploader-container",`img-area_${o.themes}`])},[n(re,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":H,"on-remove":Z,"before-upload":r(Pe),"http-request":K,"file-list":e.fileList,disabled:!e.commonBackground.backgroundImageEnable},{default:l(()=>[n(te,null,{default:l(()=>[n(le)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),n(L,null,{default:l(()=>[e.commonBackground.outerImage?h("",!0):(m(),f("span",{key:0,style:{"margin-top":"2px"},class:s(["image-hint",`image-hint_${o.themes}`])}," 支持JPG、PNG、GIF、SVG ",2)),e.commonBackground.outerImage?(m(),y(se,{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:O,disabled:!e.commonBackground.backgroundImageEnable},{default:l(()=>[...a[12]||(a[12]=[b(" 重新上传 ",-1)])]),_:1},8,["disabled"])):h("",!0)]),_:1})],2),n($e,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=t=>e.dialogVisible=t),"image-url":e.dialogImageUrl},null,8,["modelValue","image-url"])],2)):h("",!0)])]),_:1})],512)}}});const fo=F(oo,[["__scopeId","data-v-e749251c"]]);export{fo as B};
