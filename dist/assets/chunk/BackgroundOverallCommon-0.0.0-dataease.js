import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{x as ie,n as G,o as ce,N as ue,j as ge,y as pe,D as fe}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as ke}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as _e,a as be}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import{E as he}from"./el-color-picker-0.0.0-dataease.js";import{E as Be}from"./el-checkbox-0.0.0-dataease.js";import{E as ve}from"./el-row-0.0.0-dataease.js";import{E as Ce}from"./el-col-0.0.0-dataease.js";import{E as Ie,a as ye}from"./el-form-item-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import{a as Ve}from"./chart-0.0.0-dataease.js";import{b as Ee,u as $,i as D}from"./imgUtils-0.0.0-dataease.js";import{s as we}from"./snapshot-0.0.0-dataease.js";import{e as Pe}from"./antv-0.0.0-dataease.js";import{j as q}from"./board-list-0.0.0-dataease.js";import{d as z,t as x,f as d,O as p,P as u,j as n,i as t,g as y,l as A,u as r,T as U,S as s,a4 as B,r as S,X as Se,y as N,o as ze,n as Ue,w as Fe,e as Oe,W as j,a3 as b,_ as h,at as Re,a6 as We}from"./vue-0.0.0-dataease.js";import{_ as F}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import Me from"./ImgViewDialog-0.0.0-dataease.js";import{E as Te}from"./index-0.0.0-dataease20.js";import{E as Le,a as $e}from"./index-0.0.0-dataease27.js";const De=()=>ie.get({url:"/visualizationBackground/findAll"}),Ne={class:"icon-option"},je=z({__name:"BoardItem",props:{item:{},active:{type:Boolean},themes:{default:"dark"},innerImageColor:{}},setup(v){const C=v,{item:k,innerImageColor:i,active:f,themes:I}=x(C),_=e=>e.url.replace("board/","").replace(".svg","");return(e,O)=>{const w=G;return d(),p("div",Ne,[u("div",{class:s(["icon-area",{"selected-active":r(f),"icon-area-dark":r(I)==="dark"}])},[n(w,null,{default:t(()=>[(d(),y(A(r(q)[_(r(k))]),{style:U({color:r(i)}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})],2),u("span",null,B(r(k).name),1)])}}});const Ge=F(je,[["__scopeId","data-v-5a75de09"]]),qe={class:"img-option-prefix"},xe=z({__name:"BorderOptionPrefix",props:{url:{},innerImageColor:{}},setup(v){const C=v,{innerImageColor:k}=x(C),i=f=>f.replace("board/","").replace(".svg","");return(f,I)=>(d(),p("div",qe,[n(r(G),null,{default:t(()=>[(d(),y(A(r(q)[i(f.url)]),{style:U({color:r(k),width:"20px",height:"20px"}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})]))}});const Ae=F(xe,[["__scopeId","data-v-cdc79b02"]]),Je={class:"indented-container"},Xe={class:"indented-item"},He={class:"indented-container"},Ke={class:"indented-item"},Qe={class:"indented-container"},Ye={class:"indented-item"},Ze={key:0,class:"indented-item"},eo=15e6,oo=z({__name:"BackgroundOverallCommon",props:{componentPosition:{default:"dashboard"},editPosition:{default:"canvas"},themes:{default:"dark"},commonBackgroundPop:{},backgroundColorPickerWidth:{default:50},backgroundBorderSelectWidth:{default:108}},emits:["onBackgroundChange"],setup(v,{emit:C}){const k=we(),{t:i}=ce(),f=C,I=S(null),_=v,e=Se({commonBackground:{},BackgroundShowMap:{},checked:!1,backgroundOrigin:{},fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1,panel:null,predefineColors:Ve}),O=()=>{I.value.click()},w=()=>{fe.error("图片大小不能超过15M")},J=o=>{const a=o.target.files[0];if(a.size>eo){w();return}$(a,g=>{e.commonBackground.outerImage=g,e.fileList=[{url:D(e.commonBackground.outerImage)}],m()})},X=()=>{De().then(o=>{e.BackgroundShowMap=o.data})},R=()=>{e.commonBackground=ue(_.commonBackgroundPop),e.commonBackground.outerImage?e.fileList=[{url:D(e.commonBackground.outerImage)}]:e.fileList=[]};X();const H=()=>{k.recordSnapshotCacheToMobile("commonBackground")},K=()=>{e.uploadDisabled=!1,e.commonBackground.outerImage=null,e.fileList=[],m(),H()},Q=o=>{e.dialogImageUrl=o.url,e.dialogVisible=!0},Y=o=>{$(o.file,a=>{e.commonBackground.outerImage=a,m()})},m=()=>{f("onBackgroundChange",e.commonBackground)},V=S(),E=S(),Z=N(()=>E.value<=240?50:_.backgroundColorPickerWidth),ee=N(()=>E.value<=240?108:_.backgroundBorderSelectWidth);return ze(()=>{var a;R();const o=Pe();E.value=(a=V.value)==null?void 0:a.offsetWidth,o.listenTo(V.value,()=>{Ue(()=>{var g;E.value=(g=V.value)==null?void 0:g.offsetWidth})})}),Fe(()=>_.commonBackgroundPop,()=>{R()}),(o,a)=>{const g=Te,c=Ie,W=Ce,M=ve,P=Be,T=he,L=Le,oe=$e,ae=be,ne=_e,te=Oe("Plus"),le=ge,re=ke,se=pe,me=ye;return d(),p("div",{style:{width:"100%"},ref_key:"bgForm",ref:V},[u("input",{id:"input",ref_key:"files",ref:I,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:a[0]||(a[0]=l=>{l.target.value=""}),onChange:J},null,544),n(me,{size:"small","label-position":"top",style:{width:"100%"}},{default:t(()=>[n(M,{gutter:8},{default:t(()=>[n(W,{span:12},{default:t(()=>[n(c,{label:r(i)("visualization.inner_padding"),class:s(["form-item w100","form-item-"+o.themes])},{default:t(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",min:0,max:100,modelValue:e.commonBackground.innerPadding,"onUpdate:modelValue":a[1]||(a[1]=l=>e.commonBackground.innerPadding=l),onChange:m},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1}),n(W,{span:12},{default:t(()=>[n(c,{label:r(i)("visualization.board_radio"),class:s(["form-item w100","form-item-"+o.themes])},{default:t(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",min:0,max:100,modelValue:e.commonBackground.borderRadius,"onUpdate:modelValue":a[2]||(a[2]=l=>e.commonBackground.borderRadius=l),onChange:m},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1})]),_:1}),o.editPosition==="canvas"?(d(),p(j,{key:0},[n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:t(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backdropFilterEnable,"onUpdate:modelValue":a[3]||(a[3]=l=>e.commonBackground.backdropFilterEnable=l),onChange:m},{default:t(()=>[b(B(o.$t("chart.backdrop_blur")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Je,[u("div",Xe,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:t(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",min:0,max:30,disabled:!e.commonBackground.backdropFilterEnable,modelValue:e.commonBackground.backdropFilter,"onUpdate:modelValue":a[4]||(a[4]=l=>e.commonBackground.backdropFilter=l),onChange:m},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"])])])],64)):h("",!0),n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:t(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundColorSelect,"onUpdate:modelValue":a[5]||(a[5]=l=>e.commonBackground.backgroundColorSelect=l),onChange:m},{default:t(()=>[b(B(o.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",He,[u("div",Ke,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:t(()=>[e.commonBackground.backgroundColor?(d(),y(T,{key:0,modelValue:e.commonBackground.backgroundColor,"onUpdate:modelValue":a[6]||(a[6]=l=>e.commonBackground.backgroundColor=l),effect:o.themes,disabled:!e.commonBackground.backgroundColorSelect,"trigger-width":Z.value,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:m},null,8,["modelValue","effect","disabled","trigger-width","predefine"])):h("",!0)]),_:1},8,["class"])])]),n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:t(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundImageEnable,"onUpdate:modelValue":a[7]||(a[7]=l=>e.commonBackground.backgroundImageEnable=l),onChange:m},{default:t(()=>[b(B(r(i)("visualization.background")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Qe,[u("div",Ye,[n(c,{class:s(["form-item margin-bottom-8","form-item-"+o.themes])},{default:t(()=>[n(oe,{effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,modelValue:e.commonBackground.backgroundType,"onUpdate:modelValue":a[8]||(a[8]=l=>e.commonBackground.backgroundType=l),onChange:m},{default:t(()=>[n(L,{effect:o.themes,label:"outerImage"},{default:t(()=>[b(B(r(i)("visualization.photo")),1)]),_:1},8,["effect"]),n(L,{effect:o.themes,label:"innerImage"},{default:t(()=>[b(B(r(i)("visualization.board")),1)]),_:1},8,["effect"])]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"])]),e.commonBackground.backgroundType==="innerImage"?(d(),p("div",Ze,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:t(()=>[n(T,{modelValue:e.commonBackground.innerImageColor,"onUpdate:modelValue":a[9]||(a[9]=l=>e.commonBackground.innerImageColor=l),disabled:!e.commonBackground.backgroundImageEnable,effect:o.themes,title:r(i)("visualization.border_color_setting"),"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:m},null,8,["modelValue","disabled","effect","title","predefine"])]),_:1},8,["class"]),n(c,{class:s(["form-item fill","form-item-"+o.themes]),style:{"padding-left":"8px"}},{default:t(()=>[n(ne,{style:U({width:ee.value+"px"}),modelValue:e.commonBackground.innerImage,"onUpdate:modelValue":a[10]||(a[10]=l=>e.commonBackground.innerImage=l),"popper-class":"board-select",effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,placeholder:"选择边框...",onChange:m},Re({default:t(()=>[(d(!0),p(j,null,We(e.BackgroundShowMap.default,(l,de)=>(d(),y(ae,{key:de,label:l.name,value:l.url},{default:t(()=>[n(Ge,{themes:o.themes,active:l.url===e.commonBackground.innerImage,"inner-image-color":e.commonBackground.innerImageColor,item:l},null,8,["themes","active","inner-image-color","item"])]),_:2},1032,["label","value"]))),128))]),_:2},[e.commonBackground.innerImage?{name:"prefix",fn:t(()=>[n(Ae,{"inner-image-color":"state.commonBackground.innerImageColor",url:e.commonBackground.innerImage},null,8,["url"])]),key:"0"}:void 0]),1032,["style","modelValue","effect","disabled"])]),_:1},8,["class"])])):h("",!0),e.commonBackground.backgroundType==="outerImage"?(d(),p("div",{key:1,class:s(["indented-item",{disabled:!e.commonBackground.backgroundImageEnable||e.uploadDisabled}])},[u("div",{class:s(["avatar-uploader-container",`img-area_${o.themes}`])},[n(re,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":Q,"on-remove":K,"before-upload":r(Ee),"http-request":Y,"file-list":e.fileList,disabled:!e.commonBackground.backgroundImageEnable},{default:t(()=>[n(le,null,{default:t(()=>[n(te)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),n(M,null,{default:t(()=>[e.commonBackground.outerImage?h("",!0):(d(),p("span",{key:0,style:{"margin-top":"2px"},class:s(["image-hint",`image-hint_${o.themes}`])}," 支持JPG、PNG、GIF、SVG ",2)),e.commonBackground.outerImage?(d(),y(se,{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:O,disabled:!e.commonBackground.backgroundImageEnable},{default:t(()=>[...a[12]||(a[12]=[b(" 重新上传 ",-1)])]),_:1},8,["disabled"])):h("",!0)]),_:1})],2),n(Me,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=l=>e.dialogVisible=l),"image-url":e.dialogImageUrl},null,8,["modelValue","image-url"])],2)):h("",!0)])]),_:1})],512)}}});const So=F(oo,[["__scopeId","data-v-e749251c"]]);export{So as B};
