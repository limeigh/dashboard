import{f as Fe,S as $e,y as Ae,C as Ge,e as Be,r as Oe,p as Pe,W as Ze,a4 as je,v as ze,R as Re,A as qe}from"./element-plus-secondary-0.0.0-dataease.js";import{a as He,i as J,f as Xe,e as Q}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as Je,r as m,l as Qe,k as N,w as Ke,b as et,o as n,c as p,$ as tt,z as k,W as l,U as o,S as w,a8 as U,u as s,T as c,R as _,a as g,V as F,_ as at,Y as f,X as L,Z as ot}from"./@vue-0.0.0-dataease.js";import{v as K,i as nt}from"./visual-star-0.0.0-dataease.js";import{i as lt}from"./icon_search-outline_outlined-0.0.0-dataease.js";import{S as rt,i as st,a as it}from"./ShareGrid-0.0.0-dataease.js";import{i as ee}from"./icon_dashboard_outlined-0.0.0-dataease.js";import{i as te}from"./icon_operation-analysis_outlined-0.0.0-dataease.js";import{d as ae,a as ct}from"./dv-dashboard-spine-mobile-disabled-0.0.0-dataease.js";import{i as oe}from"./icon_pc_outlined-0.0.0-dataease.js";import{G as dt}from"./GridTable-0.0.0-dataease.js";import{b as ne}from"./vue-router_2-0.0.0-dataease.js";import{d as pt}from"./dayjs-0.0.0-dataease.js";import{s as E}from"./ShortcutOption-0.0.0-dataease.js";import{i as ut}from"./interactive-0.0.0-dataease.js";import{f as le}from"./dataVisualization-0.0.0-dataease.js";import{a as mt,e as _t,g as re}from"./index-0.0.0-dataease.js";import bt from"./ShareHandler-0.0.0-dataease.js";import{useAppStoreWithOut as ft}from"./app-0.0.0-dataease.js";import{u as vt}from"./share-0.0.0-dataease.js";import{h as ht}from"./lodash-es-0.0.0-dataease.js";import{_ as yt}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./de-copy-0.0.0-dataease.js";import"./icon_refresh_outlined-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_close_outlined-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./ShareTicket-0.0.0-dataease.js";import"./dv-info-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./vue-clipboard3-0.0.0-dataease.js";import"./clipboard-0.0.0-dataease.js";import"./TicketEdit-0.0.0-dataease.js";import"./CustomLinkPwd-0.0.0-dataease.js";import"./TicketDialog-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";const kt={class:"custom-tabs-label"},wt={key:1},gt={key:2,class:"panel-table"},Ct={key:0},St={key:1},xt={key:2},Dt={key:3},Tt=Je({__name:"ShortcutTable",props:{expand:{type:Boolean,default:!1}},setup(se){const ie=He(),{resolve:$}=ne(),{t:r}=Xe(),ce=ut(),{wsCache:A}=mt(),de=ft(),pe=_t(),ue=vt(),{push:G}=ne(),B=A.get(re("app.desktop")),C=m(),i=m("recent"),T=m("all_types"),h=Qe({tableData:[],curTypeList:[],tableColumn:[]}),O=N(()=>ce.getData),W=N(()=>ue.getShareDisable||B),P={panel:ee,panelMobile:ae,dashboard:ee,dashboardMobile:ae,dashboardMobileDisabled:ct,screen:te,dataV:te,dataset:st,datasource:it},Z=t=>t&&["dashboard","panel","dataV","screen"].includes(t.type),j=t=>{(t.paneName==="recent"||t.paneName==="store")&&(D.value=!0,E.setBusiFlag(t.paneName),h.curTypeList=E.getBusiList().filter(a=>a==="all_types"||V.includes(a)),h.tableColumn=E.getColmunList(),S())},me=()=>{const t=["panel","screen","dataset","datasource"],a=[];for(const d in O.value)O.value[d].menuAuth&&a.push(t[parseInt(d)]);return I.value[0].disabled=!(a!=null&&a.length),I.value[1].disabled=!a.includes("panel")&&!a.includes("screen"),a},_e=()=>{S()},be=A.get(re("open-backend"))==="1"?"_self":"_blank",fe=(t,a=!1)=>{if(!a){const d=$({path:"/preview",query:{dvId:t}});window.open(d.href,"_blank")}},ve=t=>{const a=$({path:"/dataset-form",query:{id:t}});window.open(a.href,be)},he=(t,a,d)=>pt(new Date(d)).format("YYYY-MM-DD HH:mm:ss"),ye={screen:r("work_branch.big_data_screen"),dataV:r("work_branch.big_data_screen"),dashboard:r("work_branch.dashboard"),panel:r("work_branch.dashboard"),dataset:r("work_branch.data_set"),datasource:r("work_branch.data_source")},S=()=>{D.value=!0;const t=T.value==="all_types"?"":T.value;E.loadData({type:t,keyword:C.value,asc:!M.value}).then(a=>{h.tableData=a.data}).finally(()=>{q.value=De(),H.value=Te(),D.value=!1})},I=m([{title:r("work_branch.recently_used"),name:"recent",disabled:!1},{title:r("work_branch.my_collection"),name:"store",disabled:!1},{title:r("visualization.share_out"),name:"share",disabled:!1}]),z=m([]),ke=t=>{z.value.push(t)},V=me(),x=N(()=>{const t=ht(V.length?I.value:[]);for(const a of z.value)t.push(a);return t}),R=m(!1);Ke(()=>x.value.length,()=>{x.value.length>0&&!R.value&&(R.value=!0,i.value=x.value[0].name)}),et(()=>{V.length&&j({paneName:"recent",uid:0,slots:void 0,props:void 0,active:!1,index:"",isClosable:!1})});const M=m(!0),D=m(!1),we=t=>{M.value=!0;const a=t.order.substring(0,t.order.indexOf("ending"));M.value=a==="desc",S()},ge=t=>{if(t&&!u(t)){const a=i.value==="recent"?t.id:t.resourceId;if(["dashboard","panel"].includes(t.type))window.open("#/panel/index?dvId="+a,"_self");else if(["dataV","screen"].includes(t.type))window.open("#/screen/index?dvId="+a,"_self");else if(["dataset"].includes(t.type)){const d=pe.getToken&&de.getIsIframe?"dataset-embedded":"dataset";G({name:d,params:{id:a}})}else["datasource"].includes(t.type)&&G({name:"datasource",params:{id:a}})}},Ce=t=>{D.value=t},Se=t=>{const a={id:t.id,type:t.type};le(a).then(()=>{t.favorite=!t.favorite})},u=t=>i.value==="store"&&!t.extFlag1,xe=t=>{if(!u(t)){const a={id:t.resourceId,type:t.type==="dataV"?"screen":"panel"};le(a).then(()=>{S()})}},q=m(),H=m(""),De=()=>C.value?"tree":"noneWhite",Te=()=>C.value?r("work_branch.relevant_content_found"):i.value==="recent"?r("work_branch.no_content_yet"):i.value==="store"?r("work_branch.no_favorites_yet"):"";return(t,a)=>{const d=Fe,Ve=Re,Le=$e,Ee=qe,We=Ae,X=Ge,y=Q,v=Be,Ie=Oe,Me=Pe,Ye=Q,Y=Ze,Ne=je,Ue=ze;return n(),p(w,null,[x.value.length?tt((n(),p("div",{key:0,class:k(["dashboard-type",se.expand&&"expand"])},[l(Le,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),class:"dashboard-type-tabs",onTabClick:j},{default:o(()=>[(n(!0),p(w,null,U(x.value.filter(e=>!W.value||e.name!=="share"),e=>(n(),c(Ve,{key:e.name,disabled:e.disabled,label:e.title,name:e.name},{label:o(()=>[g("span",kt,[e.disabled?(n(),c(d,{key:0,placement:"top",content:s(r)("work_branch.permission_denied")},{default:o(()=>[g("span",null,f(e.title),1)]),_:2},1032,["content"])):(n(),p("span",wt,f(e.title),1))])]),_:2},1032,["disabled","label","name"]))),128))]),_:1},8,["modelValue"]),s(V).length?(n(),p(w,{key:0},[W.value?_("",!0):(n(),c(rt,{key:0,"active-name":i.value,onSetLoading:Ce},null,8,["active-name"])),i.value==="recent"||i.value==="store"?(n(),c(Me,{key:1},{default:o(()=>[l(X,{span:12},{default:o(()=>[l(We,{"popper-class":"menu-panel-select_popper",class:"select-type-list",modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value=e),onChange:S},{default:o(()=>[(n(!0),p(w,null,U(h.curTypeList,e=>(n(),c(Ee,{key:e,label:s(r)(`auth.${e}`),value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(X,{class:"search",span:12},{default:o(()=>[l(Ie,{modelValue:C.value,"onUpdate:modelValue":a[2]||(a[2]=e=>C.value=e),clearable:"",onChange:_e,placeholder:s(r)("work_branch.search_keyword")},{prefix:o(()=>[l(v,null,{default:o(()=>[l(y,{name:"icon_search-outline_outlined"},{default:o(()=>[l(s(lt),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})):_("",!0),i.value==="recent"||i.value==="store"?(n(),p("div",gt,[l(dt,{"show-pagination":!1,"table-data":h.tableData,onSortChange:we,onCellClick:ge,"empty-desc":H.value,"empty-img":q.value,class:"workbranch-grid"},{default:o(()=>[l(Y,{key:"name",width:"280",prop:"name",label:s(r)("common.name")},{default:o(e=>[g("div",{class:k(["name-content",{"jump-active":Z(e.row)}])},[e.row.extFlag?(n(),c(v,{key:0,style:{"margin-right":"12px","font-size":"18px"}},{default:o(()=>[l(y,null,{default:o(()=>[(n(),c(F(P[e.row.type+"Mobile"+(u(e.row)?"Disabled":"")]),{class:"svg-icon"}))]),_:2},1024)]),_:2},1024)):(n(),c(v,{key:1,class:k(`main-color color-${e.row.type} custom-color${u(e.row)?"-disabled":""}`)},{default:o(()=>[l(y,null,{default:o(()=>[(n(),c(F(P[e.row.type]),{class:"svg-icon"}))]),_:2},1024)]),_:2},1032,["class"])),l(d,{placement:"top"},{content:o(()=>[at(f(e.row.name),1)]),default:o(()=>[g("span",{class:k(["ellipsis",{"color-disabled":u(e.row)}]),style:{"max-width":"250px"}},f(e.row.name),3)]),_:2},1024),i.value==="recent"&&["screen","panel"].includes(e.row.type)?(n(),c(v,{key:2,class:"custom-icon",onClick:L(b=>Se(e.row),["stop"]),style:ot({color:e.row.favorite?"#FFC60A":"#646A73"})},{default:o(()=>[l(Ye,null,{default:o(()=>[(n(),c(F(e.row.favorite?s(K):s(nt))))]),_:2},1024)]),_:2},1032,["onClick","style"])):_("",!0)],2)]),_:1},8,["label"]),(n(!0),p(w,null,U(h.tableColumn,e=>(n(),c(Y,{key:e.label,prop:e.field,"show-overflow-tooltip":"",sortable:e.type==="time",label:e.label},{default:o(b=>[g("span",{class:k({"jump-active":Z(b.row)})},[e.type&&e.type==="time"?(n(),p("span",Ct,f(he(null,null,b.row[e.field])),1)):e.field&&e.field==="type"?(n(),p("span",St,f(ye[b.row[e.field]]),1)):s(B)&&e.field&&e.field.endsWith("tor")?(n(),p("span",xt,f(s(ie).getName),1)):(n(),p("span",Dt,f(b.row[e.field]),1))],2)]),_:2},1032,["prop","sortable","label"]))),128)),l(Y,{width:"100",fixed:"right",key:"_operation",label:t.$t("common.operate")},{default:o(e=>[g("div",{style:{display:"flex","flex-direction":"row","align-items":"center"},class:k({"opt-disabled":u(e.row)})},[["dashboard","dataV","panel","screen"].includes(e.row.type)?(n(),p(w,{key:0},[l(d,{effect:"dark",content:s(r)("work_branch.new_page_preview"),disabled:u(e.row),placement:"top"},{default:o(()=>[l(v,{class:"hover-icon hover-icon-in-table",onClick:L(b=>fe(i.value==="recent"?e.row.id:e.row.resourceId,u(e.row)),["stop"])},{default:o(()=>[l(y,{name:"icon_pc_outlined"},{default:o(()=>[l(s(oe),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["content","disabled"]),W.value?_("",!0):(n(),c(bt,{key:0,"in-grid":!0,disabled:u(e.row),weight:e.row.weight,"resource-id":i.value==="recent"?e.row.id:e.row.resourceId,"resource-type":e.row.type},null,8,["disabled","weight","resource-id","resource-type"])),i.value==="store"?(n(),c(d,{key:1,effect:"dark",disabled:u(e.row),content:s(r)("work_branch.cancel_favorites"),placement:"top"},{default:o(()=>[l(v,{class:"hover-icon hover-icon-in-table",onClick:L(b=>xe(e.row),["stop"])},{default:o(()=>[l(y,{name:"icon_cancel_store"},{default:o(()=>[l(s(K),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["disabled","content"])):_("",!0)],64)):_("",!0),["dataset"].includes(e.row.type)?(n(),c(d,{key:1,effect:"dark",content:s(r)("work_branch.open_dataset"),placement:"top"},{default:o(()=>[l(v,{class:"hover-icon hover-icon-in-table",onClick:L(b=>ve(i.value==="recent"?e.row.id:e.row.resourceId),["stop"])},{default:o(()=>[l(y,{name:"icon_pc_outlined"},{default:o(()=>[l(s(oe),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["content"])):_("",!0)],2)]),_:1},8,["label"])]),_:1},8,["table-data","empty-desc","empty-img"])])):_("",!0)],64)):_("",!0),i.value==="data-filling"?(n(),c(s(J),{key:1,jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5lVGFibGU="})):_("",!0)],2)),[[Ue,D.value]]):(n(),c(Ne,{key:1,class:"dashboard-type",description:s(r)("work_branch.administrator_for_authorization")},null,8,["description"])),l(s(J),{jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5l",onLoaded:ke})],64)}}});const uo=yt(Tt,[["__scopeId","data-v-591bb1a2"]]);export{uo as default};
