import{B as M,w as _,C as oe,p as j,z as ae,x as G,N as se,y as ie,A as ne}from"./element-plus-secondary-0.0.0-dataease.js";import{p as re}from"./attr-0.0.0-dataease23.js";import{s as Y}from"./pinia-0.0.0-dataease.js";import{d as q}from"./dvMain-0.0.0-dataease.js";import{_ as de}from"./lodash-0.0.0-dataease.js";import{s as H}from"./snapshot-0.0.0-dataease.js";import{a as ue,b as me}from"./style-0.0.0-dataease.js";import{t as fe,n as pe}from"./canvasUtils-0.0.0-dataease.js";import{f as X}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as Z,r as L,k as O,w as J,o as c,T as y,U as s,c as U,a8 as B,S as E,u as l,z as v,W as o,_ as N,Y as T,R as A,t as ce,l as ve}from"./@vue-0.0.0-dataease.js";import{_ as he}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import{a as be}from"./chart-0.0.0-dataease.js";const ge=Z({__name:"ComponentPosition",props:{themes:{default:"dark"}},setup(K){const k=L(null),C=L("canvas-main"),V=H(),{t:z}=X(),W=q(),{curComponent:e,canvasStyleData:D}=Y(W),r=L({width:0,height:0,top:0,left:0}),f=O(()=>{if(e.value){const t=Object.keys(e.value.style);return re.filter(n=>t.includes(n.key))}else return[]}),g=O(()=>{const t=[];return de.forEach(f.value,(n,b)=>{const p=b%2;t[p]===void 0&&(t[p]=[]),t[p].push(n)}),t}),I=t=>{r.value[t]||(r.value[t]=0),e.value.maintainRadio?(e.value.style[t]=Math.ceil(r.value[t]*D.value.scale/100),t==="width"?(e.value.style.height=e.value.style.width/e.value.aspectRatio,r.value.height=Math.round(r.value.width/e.value.aspectRatio)):t==="height"&&(e.value.style.width=e.value.style.height*e.value.aspectRatio,r.value.width=Math.round(r.value.height*e.value.aspectRatio))):e.value.style[t]=r.value[t]*D.value.scale/100,(fe(C.value)||pe(C.value))&&ue(e.value,{width:k.value.offsetWidth,height:k.value.offsetHeight}),["Group","DeTabs"].includes(e.value.component)&&me(e.value),V.recordSnapshotCache("onPositionChange")},h=()=>{e.value.aspectRatio=e.value.style.width/e.value.style.height,V.recordSnapshotCache("maintainRadioChange")},S=()=>{V.recordSnapshotCache("multiDimensionalChange")},P=()=>{V.recordSnapshotCache("snapshotChange")},m=()=>{e.value&&(C.value=e.value.canvasId,k.value=document.querySelector("#editor-"+C.value),Object.keys(r.value).forEach(t=>{r.value[t]=Math.round(e.value.style[t]*100/D.value.scale)}),e.value.maintainRadio&&(r.value.width=Math.round(r.value.height*e.value.aspectRatio)))};return J(()=>e.value,()=>{m()},{deep:!0,immediate:!0}),(t,n)=>{const b=M,p=_,d=oe,a=j,w=ae,R=G;return c(),y(R,{size:"small","label-position":"left","label-width":14},{default:s(()=>[(c(!0),U(E,null,B(g.value,(u,$)=>(c(),y(a,{gutter:8,key:$},{default:s(()=>[(c(!0),U(E,null,B(u,({key:x,label:i,min:Q,max:ee,step:le},te)=>(c(),y(d,{span:12,key:te},{default:s(()=>[o(p,{class:v(["form-item","form-item-"+t.themes]),label:i},{default:s(()=>[o(b,{effect:t.themes,size:"middle",disabled:l(e).isLock,min:Q,max:ee,step:le,modelValue:r.value[x],"onUpdate:modelValue":F=>r.value[x]=F,onChange:F=>I(x),"controls-position":"right"},null,8,["effect","disabled","min","max","step","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["class","label"])]),_:2},1024))),128))]),_:2},1024))),128)),l(e)&&l(e).component==="DeTabs"?(c(),y(p,{key:0,class:v(["form-item","form-item-"+t.themes])},{default:s(()=>[o(w,{size:"small",effect:t.themes,modelValue:l(e).resizeInnerKeep,"onUpdate:modelValue":n[0]||(n[0]=u=>l(e).resizeInnerKeep=u),onChange:P},{default:s(()=>[N(T(l(z)("visualization.keep_size")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"])):A("",!0),o(p,{class:v(["form-item","form-item-"+t.themes])},{default:s(()=>[l(e)?(c(),y(w,{key:0,size:"small",effect:t.themes,modelValue:l(e).maintainRadio,"onUpdate:modelValue":n[1]||(n[1]=u=>l(e).maintainRadio=u),onChange:h},{default:s(()=>[N(T(l(z)("visualization.keep_ratio")),1)]),_:1},8,["effect","modelValue"])):A("",!0)]),_:1},8,["class"]),l(e)&&l(e).multiDimensional?(c(),y(a,{key:1},{default:s(()=>[o(d,{span:12},{default:s(()=>[o(p,{class:v(["form-item","form-item-"+t.themes])},{default:s(()=>[o(w,{size:"small",effect:t.themes,modelValue:l(e).multiDimensional.enable,"onUpdate:modelValue":n[2]||(n[2]=u=>l(e).multiDimensional.enable=u),onChange:S},{default:s(()=>[N(T(l(z)("visualization.rotation_3d")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),l(e).multiDimensional.enable?(c(),U(E,{key:0},[o(p,{class:v(["form-item","form-item-"+t.themes]),label:"X"},{default:s(()=>[o(b,{effect:t.themes,size:"middle",disabled:l(e).isLock,min:-360,max:360,step:1,modelValue:l(e).multiDimensional.x,"onUpdate:modelValue":n[3]||(n[3]=u=>l(e).multiDimensional.x=u),onChange:S,"controls-position":"right"},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"]),o(p,{class:v(["form-item","form-item-"+t.themes]),label:"Y"},{default:s(()=>[o(b,{effect:t.themes,size:"middle",disabled:l(e).isLock,min:-360,max:360,step:1,modelValue:l(e).multiDimensional.y,"onUpdate:modelValue":n[4]||(n[4]=u=>l(e).multiDimensional.y=u),onChange:S,"controls-position":"right"},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"]),o(p,{class:v(["form-item","form-item-"+t.themes]),label:"Z"},{default:s(()=>[o(b,{effect:t.themes,size:"middle",disabled:l(e).isLock,min:-360,max:360,step:1,modelValue:l(e).multiDimensional.z,"onUpdate:modelValue":n[5]||(n[5]=u=>l(e).multiDimensional.z=u),onChange:S,"controls-position":"right"},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"])],64)):A("",!0)]),_:1})]),_:1})):A("",!0)]),_:1})}}});const Ee=he(ge,[["__scopeId","data-v-5ed95882"]]),We=Z({__name:"CommonBorderSetting",props:{themes:{default:"dark"},styleInfo:{}},emits:["onStyleAttrChange"],setup(K,{emit:k}){const C=q(),V=H(),{canvasStyleData:z,curComponent:W}=Y(C),{t:e}=X(),D=K,r=k,{themes:f,styleInfo:g}=ce(D),I=ve({fontSize:[],isSetting:!1,predefineColors:be}),h=L({borderWidth:0,borderRadius:5}),S=[{name:e("visualization.border_style_solid"),value:"solid"},{name:e("visualization.border_style_dashed"),value:"dashed"},{name:e("visualization.border_style_dotted"),value:"dotted"}],P=()=>{g.value&&Object.keys(h.value).forEach(d=>{h.value[d]=Math.round(g.value[d]*100/z.value.scale)})},m=O(()=>g.value),t=d=>{V.recordSnapshotCache("border-changeStyle"),r("onStyleAttrChange",d)},n=d=>{t({key:d,value:g.value[d]})},b=d=>{g.value[d]=h.value[d]*z.value.scale/100,t({key:d,value:g.value[d]})},p=O(()=>W.value&&W.value.component==="SvgTriangle");return J(()=>g.value,()=>{P()},{deep:!0,immediate:!0}),(d,a)=>{const w=se,R=j,u=ne,$=ie,x=G;return c(),y(R,{class:"custom-row",style:{"padding-bottom":"8px"}},{default:s(()=>[o(x,{size:"small","label-position":"top"},{default:s(()=>[p.value?(c(),y(R,{key:0,style:{display:"flex"}},{default:s(()=>[o(l(_),{style:{width:"70px"},label:l(e)("visualization.color"),class:v(["form-item","form-item-"+l(f)])},{default:s(()=>[o(w,{title:l(e)("visualization.color"),disabled:!m.value.borderActive,modelValue:m.value.borderColor,"onUpdate:modelValue":a[0]||(a[0]=i=>m.value.borderColor=i),class:"color-picker-style",triggerWidth:65,"is-custom":"","show-alpha":"",predefine:I.predefineColors,onChange:a[1]||(a[1]=i=>n("borderColor"))},null,8,["title","disabled","modelValue","predefine"])]),_:1},8,["label","class"]),o(l(_),{style:{width:"150px"},label:l(e)("visualization.board_width"),class:v(["form-item","form-item-"+l(f)])},{default:s(()=>[o(l(M),{title:l(e)("visualization.board_width"),min:0,max:50,effect:l(f),disabled:!m.value.borderActive,"controls-position":"right",modelValue:h.value.borderWidth,"onUpdate:modelValue":a[2]||(a[2]=i=>h.value.borderWidth=i),class:"color-picker-style",onChange:a[3]||(a[3]=i=>b("borderWidth"))},null,8,["title","effect","disabled","modelValue"])]),_:1},8,["label","class"])]),_:1})):(c(),U(E,{key:1},[o(R,{style:{display:"flex"}},{default:s(()=>[o(l(_),{style:{width:"70px"},label:l(e)("visualization.color"),class:v(["form-item","form-item-"+l(f)])},{default:s(()=>[o(w,{title:l(e)("visualization.color"),disabled:!m.value.borderActive,modelValue:m.value.borderColor,"onUpdate:modelValue":a[4]||(a[4]=i=>m.value.borderColor=i),class:"color-picker-style",triggerWidth:65,"is-custom":"","show-alpha":"",effect:l(f),predefine:I.predefineColors,onChange:a[5]||(a[5]=i=>n("borderColor"))},null,8,["title","disabled","modelValue","effect","predefine"])]),_:1},8,["label","class"]),o(l(_),{style:{width:"150px"},label:l(e)("visualization.board_radius"),class:v(["form-item","form-item-"+l(f)])},{default:s(()=>[o(l(M),{title:l(e)("visualization.board_radius"),disabled:!m.value.borderActive,effect:l(f),min:0,max:200,"controls-position":"right",modelValue:h.value.borderRadius,"onUpdate:modelValue":a[6]||(a[6]=i=>h.value.borderRadius=i),class:"color-picker-style",onChange:a[7]||(a[7]=i=>b("borderRadius"))},null,8,["title","disabled","effect","modelValue"])]),_:1},8,["label","class"])]),_:1}),o(R,{style:{display:"flex"}},{default:s(()=>[o(l(_),{style:{width:"70px"},label:l(e)("visualization.style"),class:v(["form-item","form-item-"+l(f)])},{default:s(()=>[o($,{effect:l(f),disabled:!m.value.borderActive,modelValue:m.value.borderStyle,"onUpdate:modelValue":a[8]||(a[8]=i=>m.value.borderStyle=i),size:"small",style:{width:"65px"},onChange:a[9]||(a[9]=i=>n("borderStyle"))},{default:s(()=>[(c(),U(E,null,B(S,i=>o(u,{class:"custom-style-option",key:i.value,label:i.name,value:i.value},null,8,["label","value"])),64))]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["label","class"]),o(l(_),{style:{width:"150px"},label:l(e)("visualization.board_width"),class:v(["form-item","form-item-"+l(f)])},{default:s(()=>[o(l(M),{title:l(e)("visualization.board_width"),disabled:!m.value.borderActive,min:0,max:50,effect:l(f),"controls-position":"right",modelValue:h.value.borderWidth,"onUpdate:modelValue":a[10]||(a[10]=i=>h.value.borderWidth=i),class:"color-picker-style",onChange:a[11]||(a[11]=i=>b("borderWidth"))},null,8,["title","disabled","effect","modelValue"])]),_:1},8,["label","class"])]),_:1})],64))]),_:1})]),_:1})}}});export{Ee as C,We as _};
