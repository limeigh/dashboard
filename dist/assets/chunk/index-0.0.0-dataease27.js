import{i as V}from"./interactive-0.0.0-dataease.js";import{i as W,f as j,j as q}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{s as w}from"./ShortcutOption-0.0.0-dataease.js";import{b as z}from"./vue-router_2-0.0.0-dataease.js";import{a as A,g as b}from"./index-0.0.0-dataease.js";import J from"./Workbranch-0.0.0-dataease.js";import{n as M}from"./none-0.0.0-dataease.js";import{d as O,f as Q,e as X,g as H}from"./vant-0.0.0-dataease.js";import"./element-plus-secondary-0.0.0-dataease.js";import{D as K,h as tt}from"./lodash-es-0.0.0-dataease.js";import{d as et,r as l,l as at,k as h,w as st,b as it,o as i,c as u,a as d,W as f,U as F,u as o,S as _,a8 as Y,T as g,R as B,Y as ot,Z as rt}from"./@vue-0.0.0-dataease.js";import{_ as lt}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./icon_dashboard-0.0.0-dataease.js";import"./@vant-0.0.0-dataease.js";const nt={class:"mobile-panel-list"},mt={class:"workbranch-cell-group"},pt={key:0,class:"empty-img-mobile"},ct=["src"],ut={class:"empty-tips"},dt=et({__name:"index",emits:["setLoading"],setup(ft,{emit:N}){const P=z(),{t:y}=j(),{wsCache:v}=A("sessionStorage"),s=l("recent"),n=l(""),m=at({tableData:[],curTypeList:[]}),U=V(),r=N,Z=()=>{r("setLoading",!0),w.loadData({type:"panel",keyword:"",asc:!1}).then(t=>{m.tableData=(t.data||[]).filter(e=>e.extFlag===1)}).finally(()=>{r("setLoading",!1),D()})},G=()=>{r("setLoading",!0),q.post({url:"/share/query",data:{type:"panel",keyword:"",asc:!1}}).then(t=>{m.tableData=(t.data||[]).filter(e=>e.extFlag===1)}).finally(()=>{r("setLoading",!1),D()})},p=l([{title:y("work_branch.recent"),name:"recent",disabled:!1},{title:"我的收藏",name:"store",disabled:!1},{title:y("visualization.share_out"),name:"share",disabled:!1}]),$=h(()=>K(p.value,t=>t.name)),k=l([]),c=h(()=>{const t=tt(T.length?p.value:[]);for(const e of k.value)t.push(e);return t}),L=h(()=>U.getData),T=(()=>{const t=["panel","screen","dataset","datasource"],e=[];for(const a in L.value)L.value[a].menuAuth&&e.push(t[parseInt(a)]);return p.value[0].disabled=!(e!=null&&e.length),p.value[1].disabled=!e.includes("panel")&&!e.includes("screen"),e})(),x={recent:"数据",store:"收藏",share:"分享"},I=t=>{k.value.push(t),x[t.name]=t.shortName},D=()=>{n.value=m.tableData.length?"":`暂无${x[s.value]}`},C=l(!1);st(()=>c.value.length,()=>{c.value.length>0&&!C.value&&(C.value=!0,s.value=c.value[0].name)});const S=({name:t,disabled:e})=>{e||(t==="recent"||t==="store"?(r("setLoading",!0),w.setBusiFlag(t),Z()):t==="share"?G():n.value=void 0)};it(()=>{s.value=v.get(b("activeTab"))||"recent",v.set(b("activeTab"),""),T.length&&S({name:s.value,disabled:!1})});const R=t=>{t.extFlag1!==0&&(v.set(b("activeTab"),s.value),P.push({path:"/panel/mobile",query:{dvId:t.resourceId}}))},E=t=>new Date(t).toLocaleString();return(t,e)=>(i(),u(_,null,[d("div",nt,[f(o(X),null,{default:F(()=>[f(o(O),{"safe-area-inset-top":"",title:"工作台"}),f(o(Q),{onClickTab:S,active:s.value,"onUpdate:active":e[0]||(e[0]=a=>s.value=a)},{default:F(()=>[(i(!0),u(_,null,Y(c.value,a=>(i(),g(o(H),{key:a.name,disabled:a.disabled,name:a.name,title:a.title},null,8,["disabled","name","title"]))),128))]),_:1},8,["active"])]),_:1}),d("div",mt,[$.value.includes(s.value)?(i(!0),u(_,{key:0},Y(m.tableData,a=>(i(),g(J,{onClick:bt=>R(a),key:a.id,style:rt({color:a.extFlag1===0?"#bbbfc4":"#1f2329"}),size:"large",label:a.name,time:E(a.lastEditTime||a.time)},null,8,["onClick","style","label","time"]))),128)):s.value==="data-filling"?(i(),g(o(W),{key:1,jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5lVGFibGU="})):B("",!0)]),n.value?(i(),u("div",pt,[d("img",{width:"125",height:"125",src:o(M),alt:""},null,8,ct),d("div",ut,ot(n.value),1)])):B("",!0)]),f(o(W),{jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5l",onLoaded:I})],64))}});const Be=lt(dt,[["__scopeId","data-v-4430c833"]]);export{Be as default};
