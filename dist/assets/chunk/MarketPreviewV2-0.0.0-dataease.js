import"./index-0.0.0-dataease.js";import{o as Q,aj as Y,N as O,n as ee,j as te,G as le,y as ae}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as oe}from"./el-col-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import{a as re,E as ie}from"./el-collapse-item-0.0.0-dataease.js";import{E as se}from"./el-divider-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as ne,a as pe}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as ce}from"./el-row-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import{f as n,O as h,a5 as me,d as ue,r as de,X as fe,w as T,o as _e,e as ve,g as _,i as r,j as a,S as k,u as s,R as u,U as d,P as f,a4 as v,a6 as S,W as C,a3 as he,_ as R}from"./vue-0.0.0-dataease.js";import{i as we}from"./icon_left_outlined-0.0.0-dataease.js";import{i as ge}from"./icon-filter-0.0.0-dataease.js";import{n as ye,b as xe}from"./templateMarket-0.0.0-dataease.js";import be from"./TemplateMarketPreviewItem-0.0.0-dataease.js";import{i as Te}from"./imgUtils-0.0.0-dataease.js";import{E as ke}from"./index-0.0.0-dataease4.js";import{b as Se}from"./index-0.0.0-dataease16.js";import{_ as Ce}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";const Ae={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ee(A,w){return n(),h("svg",Ae,[...w[0]||(w[0]=[me('<g filter="url(#filter0_d_2346_358803)"><path d="M8 4H20C26.6274 4 32 9.37258 32 16C32 22.6274 26.6274 28 20 28H8V4Z" fill="white"></path></g><g filter="url(#filter1_d_2346_358803)"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 5H8V27H20C26.0751 27 31 22.0751 31 16C31 9.92487 26.0751 5 20 5ZM8 4V28H20C26.6274 28 32 22.6274 32 16C32 9.37258 26.6274 4 20 4H8Z" fill="#DEE0E3"></path></g><path d="M20.1391 16.0005L16.0732 20.0663C15.9756 20.164 15.9756 20.3223 16.0732 20.4199L16.4268 20.7735C16.5244 20.8711 16.6827 20.8711 16.7803 20.7735L21.1997 16.354C21.395 16.1588 21.395 15.8422 21.1997 15.6469L16.7803 11.2275C16.6827 11.1299 16.5244 11.1299 16.4268 11.2275L16.0732 11.5811C15.9756 11.6787 15.9756 11.837 16.0732 11.9346L20.1391 16.0005Z" fill="#3370FF"></path><defs><filter id="filter0_d_2346_358803" x="0" y="0" width="40" height="40" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2346_358803"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2346_358803" result="shape"></feBlend></filter><filter id="filter1_d_2346_358803" x="0" y="0" width="40" height="40" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2346_358803"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2346_358803" result="shape"></feBlend></filter></defs>',4)])])}const Fe={render:Ee},Be={class:"custom-breadcrumb-item-to"},Ve={style:{"text-align":"center"}},Me={class:"template-title"},Pe={style:{flex:"1","text-align":"right"}},Ue=["src"],Le=ue({__name:"MarketPreviewV2",props:{previewId:{type:String,default:null},templateShowList:{type:Array,default:()=>[]},createAuth:{type:Object,default(){return{PANEL:!1,SCREEN:!1}}}},emits:["templateApply","closeDialog","closePreview"],setup(A,{emit:w}){const{t:i}=Q(),g=A,F=w,y=de([]),e=fe({hasResult:!0,extFilterActive:!1,asideActive:!0,previewVisible:!1,templatePreviewUrl:null,marketTabs:null,marketActiveTab:null,searchText:null,panelGroupList:[],curApplyTemplate:null,folderSelectShow:!1,baseUrl:"https://dataease.io/templates",marketTemplatePreviewShowList:[],categories:[],networkStatus:!0,curTemplate:null,templateSourceType:"all",templateSourceOptions:[{value:"all",label:i("work_branch.all_source")},{value:"market",label:i("work_branch.template_market_official")},{value:"manage",label:i("template_manage.name")}],templateType:"all",templateTypeOptions:[{value:"all",label:i("work_branch.all_types")},{value:"PANEL",label:i("work_branch.dashboard")},{value:"SCREEN",label:i("work_branch.big_screen")}]});T(()=>e.templateType,()=>{x()}),T(()=>e.searchText,()=>{x()}),T(()=>g.previewId,()=>{e.marketTemplatePreviewShowList.forEach(l=>{l.contents.forEach(t=>{g.previewId===t.id&&E(t)})})}),T(()=>e.templateSourceType,()=>{x()});const I=()=>{xe().then(l=>{e.baseUrl=l.data.baseUrl,e.marketTemplatePreviewShowList=l.data.contents,e.hasResult=!0,e.categories=l.data.categories,x();const t=Y(e.currentMarketTemplateShowList);e.categories=l.data.categories.filter(p=>t.has(p.label)),y.value=O(e.categories),g.previewId&&e.marketTemplatePreviewShowList.forEach(p=>{p.contents.forEach(c=>{g.previewId===c.id&&E(c)})})}).catch(()=>{e.networkStatus=!1})},G=l=>{F("templateApply",l)},x=()=>{e.hasResult=!1,e.marketTemplatePreviewShowList.forEach(l=>{l.showFlag=N(l.category.source),l.contents.forEach(t=>{t.showFlag=D(t),t.showFlag&&(e.hasResult=!0)})}),y.value=O(e.categories)},N=l=>e.templateSourceType==="all"||l===e.templateSourceType||l==="public",D=l=>{let t=!1,p=!1,c=!1;return(e.templateType==="all"||l.templateType===e.templateType)&&(t=!0),(!e.searchText||l.title.indexOf(e.searchText)>-1)&&(p=!0),(e.templateSourceType==="all"||l.source===e.templateSourceType)&&(c=!0),t&&p&&c},E=l=>{e.curTemplate=l,l.thumbnail.indexOf("http")>-1||l.thumbnail.indexOf("static-resource")>-1?e.templatePreviewUrl=l.thumbnail:e.templatePreviewUrl=e.baseUrl+l.thumbnail},B=l=>{e.asideActive=l},$=()=>{e.extFilterActive=!e.extFilterActive,e.marketActiveTab=e.marketTabs[0]},H=()=>{F("closePreview")},j=l=>e.curTemplate&&e.curTemplate.id===l.id;return _e(()=>{I()}),(l,t)=>{const p=ee,c=te,V=ke,z=ve("ArrowRight"),m=ce,Z=le,M=pe,P=ne,W=se,X=ie,q=re,J=Se,U=oe,K=ae;return n(),_(m,{style:{width:"100%"}},{default:r(()=>[a(m,{style:{display:"table",width:"100%"}},{default:r(()=>[a(U,{style:{float:"left"},class:k(e.asideActive?"aside-active":"aside-inActive")},{default:r(()=>[a(V,{class:"box-item",effect:"dark",content:s(i)("relation.expand"),placement:"right"},{default:r(()=>[u(a(c,{class:"insert",onClick:t[0]||(t[0]=o=>B(!0))},{default:r(()=>[a(p,{name:"market-expand"},{default:r(()=>[a(s(Fe),{class:"svg-icon"})]),_:1})]),_:1},512),[[d,!e.asideActive]])]),_:1},8,["content"]),u(a(m,{style:{padding:"24px 12px 0"}},{default:r(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:r(()=>[f("span",{class:"custom-breadcrumb-item",onClick:t[1]||(t[1]=o=>H())},v(s(i)("template_manage.template_center")),1),a(c,{style:{color:"#8f959e"}},{default:r(()=>[a(z)]),_:1}),f("span",Be,v(s(i)("template_manage.preview")),1),a(V,{class:"box-item",effect:"dark",content:s(i)("relation.retract"),placement:"right"},{default:r(()=>[f("div",{onClick:t[2]||(t[2]=o=>B(!1)),class:"insert-retract"},[a(c,null,{default:r(()=>[a(p,{name:"icon_left_outlined"},{default:r(()=>[a(s(we),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["content"])]),_:1}),a(m,{class:"margin-top16 search-area"},{default:r(()=>[a(Z,{modelValue:e.searchText,"onUpdate:modelValue":t[3]||(t[3]=o=>e.searchText=o),"prefix-icon":"Search",class:"title-name-search",placeholder:s(i)("visualization.enter_template_name_tips"),clearable:""},null,8,["modelValue","placeholder"]),a(c,{class:k(["insert-filter filter-icon-span",e.extFilterActive?"filter-icon-active":""]),onClick:t[4]||(t[4]=o=>$())},{default:r(()=>[a(s(ge))]),_:1},8,["class"])]),_:1}),u(a(m,null,{default:r(()=>[a(P,{modelValue:e.templateType,"onUpdate:modelValue":t[5]||(t[5]=o=>e.templateType=o),style:{"margin-top":"8px"},placeholder:s(i)("common.selectText")},{default:r(()=>[(n(!0),h(C,null,S(e.templateTypeOptions,o=>(n(),_(M,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[d,e.extFilterActive]]),u(a(m,null,{default:r(()=>[a(P,{modelValue:e.templateSourceType,"onUpdate:modelValue":t[6]||(t[6]=o=>e.templateSourceType=o),style:{"margin-top":"8px"},placeholder:s(i)("common.selectText")},{default:r(()=>[(n(!0),h(C,null,S(e.templateSourceOptions,o=>(n(),_(M,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[d,e.extFilterActive]]),a(W,{class:"mp-divider"})]),_:1},512),[[d,e.asideActive]]),u(a(J,{class:k(["aside-list",e.extFilterActive?"aside-list-filter-active":""])},{default:r(()=>[u(a(q,{modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=o=>y.value=o),class:"market-collapse"},{default:r(()=>[(n(!0),h(C,null,S(e.marketTemplatePreviewShowList,(o,L)=>u((n(),_(X,{themes:"light",name:o.category.label,key:L,title:o.category.label},{default:r(()=>[(n(!0),h(C,null,S(o.contents,b=>u((n(),_(be,{key:b.id,template:b,"base-url":e.baseUrl,active:j(b),onPreviewTemplate:E},null,8,["template","base-url","active"])),[[d,b.showFlag]])),128))]),_:2},1032,["name","title"])),[[d,o.showFlag]])),128))]),_:1},8,["modelValue"]),[[d,e.hasResult]]),u(a(m,{class:"custom-position"},{default:r(()=>[f("div",Ve,[a(p,{name:"no_result"},{default:r(()=>[a(s(ye),{style:{"margin-bottom":"16px","font-size":"75px"},class:"svg-icon"})]),_:1}),t[9]||(t[9]=f("br",null,null,-1)),f("span",null,v(s(i)("work_branch.relevant_templates_found")),1)])]),_:1},512),[[d,!e.hasResult]])]),_:1},8,["class"]),[[d,e.asideActive]])]),_:1},8,["class"]),a(U,{style:{float:"left"},class:k(["main-area",e.asideActive?"main-area-active":""])},{default:r(()=>[e.curTemplate?(n(),_(m,{key:0,style:{padding:"24px 24px 0"}},{default:r(()=>{var o;return[f("span",Me,v(e.curTemplate.title),1),f("div",Pe,[a(K,{style:{float:"right"},type:"primary",disabled:!A.createAuth[(o=e.curTemplate)==null?void 0:o.templateType],onClick:t[8]||(t[8]=L=>G(e.curTemplate))},{default:r(()=>[he(v(s(i)("visualization.apply_this_template")),1)]),_:1},8,["disabled"])])]}),_:1})):R("",!0),e.curTemplate?(n(),_(m,{key:1,class:"img-main"},{default:r(()=>[f("img",{src:s(Te)(e.templatePreviewUrl),alt:""},null,8,Ue)]),_:1})):R("",!0)]),_:1},8,["class"])]),_:1})]),_:1})}}});const Pt=Ce(Le,[["__scopeId","data-v-093db317"]]);export{Pt as default};
