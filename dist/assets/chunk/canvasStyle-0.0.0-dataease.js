import"./translate-0.0.0-dataease.js";import{D as z,g as p,ai as b}from"./chart-0.0.0-dataease.js";import{d as g}from"./dvMain-0.0.0-dataease.js";import{u as f}from"./index-0.0.0-dataease.js";import{o as E,C as w}from"./lodash-es-0.0.0-dataease.js";const r=g(),c="#000000",R="#CCCCCC",K="#f5f6f7",v="#FFFFFF",S="#FFFFFF",M="#858383",W="#030B2E",H="#5a5c62",Y={basicStyle:["barWidth","lineWidth","lineSymbolSize","leftLineWidth","leftLineSymbolSize","tableColumnWidth"],tableHeader:["tableTitleFontSize","tableTitleColFontSize","tableTitleCornerFontSize","tableTitleHeight"],tableCell:["tableItemFontSize","tableItemHeight"],misc:["nameFontSize","valueFontSize","spaceSplit","scatterSymbolSize","radarSize","wordSizeRange","wordSpacing"],label:{fontSize:"",seriesLabelFormatter:["fontSize"],proportionSeriesFormatter:["fontSize"]},tooltip:{fontSize:"",seriesTooltipFormatter:["fontSize"]},indicator:["fontSize","suffixFontSize"],indicatorName:["fontSize","nameValueSpacing"]},Q={text:["fontSize"],legend:["fontSize"],xAxis:{fontSize:"fontSize",axisLabel:["fontSize"],splitLine:{lineStyle:["width"]},axisLine:{lineStyle:["width"]}},yAxis:{fontSize:"fontSize",axisLabel:["fontSize"],splitLine:{lineStyle:["width"]},axisLine:{lineStyle:["width"]}},yAxisExt:{fontSize:"fontSize",axisLabel:["fontSize"],splitLine:{lineStyle:["width"]},axisLine:{lineStyle:["width"]}},misc:{fontSize:"fontSize",axisLine:{lineStyle:["width"]},axisTick:{lineStyle:["width"]},axisLabel:["margin","fontSize"],splitLine:{lineStyle:["width"]}}},m={legend:["color"],xAxis:{color:"color",axisLabel:["color"]},yAxis:{color:"",axisLabel:["color"]},yAxisExt:{color:"",axisLabel:["color"]},misc:{color:"color",axisTick:{lineStyle:["color"]},axisLabel:["color"]}},A={xAxis:{splitLine:{lineStyle:["color"]}},yAxis:{splitLine:{lineStyle:["color"]}},yAxisExt:{splitLine:{lineStyle:["color"]}},misc:{splitLine:{lineStyle:["color"]},axisLine:{lineStyle:["color"]}}},u={label:{color:"color",proportionSeriesFormatter:["color"]},tooltip:["color"],misc:{bullet:{bar:{target:["fill"]}}}},_={tooltip:["backgroundColor"]},x={lineWidth:2,lineSymbolSize:8};function d(e,o){if(e instanceof Array)return e.forEach((a,i)=>{const n=Math.round(a*o);e[i]=n>1?n:1}),e;const t=Math.round(e*o);return t>1?t:1}function L(e,o){var t,a,i,n;(a=(t=e.label)==null?void 0:t.seriesLabelFormatter)==null||a.forEach(l=>{l.color=o}),(n=(i=e.label)==null?void 0:i.seriesTooltipFormatter)==null||n.forEach(l=>{l.color=o})}function V(e,o,t,a){for(const i in e)e[i]instanceof Array?e[i].filter(n=>n!=="wordSizeRange").forEach(n=>{o[i]&&(o[i][n]||o[i].length)&&(a==="mobile"&&x[n]!==void 0?o[i][n]=x[n]:o[i]instanceof Array?o[i].forEach(l=>{l[n]=d(l[n],t)}):o[i][n]=d(o[i][n],t))}):typeof e[i]=="string"?o[i]=d(o[i],t):o[i]&&V(e[i],o[i],t,a)}function s(e,o,t){for(const a in e)e[a]instanceof Array?e[a].forEach(i=>{o[a]&&(o[a][i]=t)}):typeof e[a]=="string"?o[a]=t:o[a]&&s(e[a],o[a],t)}function N(e,o){const t=r.canvasStyleData;t.dashboard.themeColor==="light"?(s(m,e,c),s(A,e,R),s(u,o,c),s(_,o,v),L(o,c),E(o,z,t.component.chartColor)):(s(m,e,S),s(A,e,M),s(u,o,S),s(_,o,H),L(o,S),E(o,p,t.component.chartColor)),e.text={...t.component.chartTitle,title:e.text.title,show:e.text.show,remarkShow:e.text.remarkShow,remark:e.text.remark}}function h(e,o){if(o){const t=w(b[e],e);o.customStyle.text.fontFamily=t,o.type==="indicator"&&(o.customAttr.indicator.fontFamily=e,o.customAttr.indicator.suffixFontFamily=e,o.customAttr.indicatorName.fontFamily=e)}}function q(e){r.componentData.forEach(t=>{var a;if(t.component==="UserView"){const i=r.canvasViewInfo[t.id];h(e,i),f().emitter.emit("renderChart-"+t.id,i)}else t.component==="Group"?t.propValue.forEach(i=>{if(i.component==="UserView"){const n=r.canvasViewInfo[i.id];h(e,n),f().emitter.emit("renderChart-"+i.id,n)}}):t.component==="DeTabs"&&((a=t.propValue)==null||a.forEach(i=>{var n;(n=i.componentData)==null||n.forEach(l=>{if(l.component==="UserView"){const y=r.canvasViewInfo[l.id];h(e,y),f().emitter.emit("renderChart-"+l.id,y)}})}))})}function C(e){var o;if(["DeTabs"].includes(e.component)&&(e.commonBackground.innerPadding=0),r.dvInfo.type==="dataV"&&["CanvasBoard","CanvasIcon","Picture","Group","SvgTriangle","SvgStar","RectShape","CircleShape","DeDecoration","DynamicBackground"].includes(e.component))e.commonBackground.backgroundColorSelect=!1,e.commonBackground.innerPadding=0;else{const t=r.canvasStyleData.component.chartCommonStyle;for(const a in t)e.commonBackground[a]=t[a]}if(e.style.color&&(r.canvasStyleData.dashboard.themeColor==="light"?e.style.color=c:e.style.color=S),e.component==="UserView"){const t=r.canvasViewInfo[e.id];N(t.customStyle,t.customAttr),f().emitter.emit("renderChart-"+e.id,t)}else if(e.component==="Group")e.propValue.forEach(t=>{C(t)});else if(["DeTabs","DeScreen"].includes(e.component))r.canvasStyleData.dashboard.themeColor==="light"?(e.style.headFontColor=c,e.style.headFontActiveColor=c):(e.style.headFontColor=S,e.style.headFontActiveColor=S),(o=e.propValue)==null||o.forEach(t=>{var a;(a=t.componentData)==null||a.forEach(i=>{C(i)})});else if(e.component==="VQuery"){const t=r.canvasViewInfo[e.id];t&&B(t)}return e}function J(){r.componentData.forEach(o=>{C(o)})}const T=["labelColor","borderColor","text","bgColor"],D=["borderShow","textColorShow","bgColorShow"];function B(e){if(F(e.type)){const o=r.canvasStyleData.component.filterStyle;T.forEach(t=>{e.customStyle.component[t]=o[t];const a=T.indexOf(t);a!==-1&&(e.customStyle.component[D[a]]=!0)})}}function P(e){const o=Object.values(r.canvasViewInfo),t=r.canvasStyleData.component.filterStyle;o.forEach(a=>{if(F(a.type)){a.customStyle.component[e]=t[e];const i=T.indexOf(e);i!==-1&&(a.customStyle.component[D[i]]=!0)}})}function F(e){return["VQuery"].includes(e)}export{W as D,K as L,q as a,C as b,J as c,P as d,Y as e,Q as f,V as r};
