import{P as I,Q as P}from"./element-plus-secondary-0.0.0-dataease.js";import{p as E}from"./index-0.0.0-dataease.js";import{f as F}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import D from"./ApiVariable-0.0.0-dataease.js";import{_ as T}from"./CodeEdit.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{Q as b,y as $,R as J,S as L,w as U,T as Y,q as K}from"./lodash-es-0.0.0-dataease.js";import{B as _,K as X}from"./ApiTestModel-0.0.0-dataease.js";import{d as Q,t as q,w as G,a7 as H,o as g,c as w,W as c,U as j,u as i,_ as R,Y as S,R as C}from"./@vue-0.0.0-dataease.js";import{_ as z}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./vuedraggable-0.0.0-dataease.js";import"./vue3-ace-editor-0.0.0-dataease.js";import"./ace-builds-0.0.0-dataease.js";import"./resize-observer-polyfill-0.0.0-dataease.js";const A=Array.isArray;class Z{constructor(){this._option={$id:"http://example.com/root.json",$schema:"http://json-schema.org/draft-07/schema#"},this._object=null}format(a,p={}){if(!b(a))throw new TypeError("传入参数只能是对象或数组");this._option=Object.assign(this._option,p),this._object=a;let r;return A(a)?r=this._arrayToSchema():r=this._objectToSchema(),this._object=null,r}_arrayToSchema(){const a=this._value2object(this._object,this._option.$id,"",!0);if(this._object.length>0){const p=[];for(let r=0;r<this._object.length;r++){const n=this._object[r];let s=this._value2object(n,"#/items","items");if(b(n)&&!$(n)){const u=this._json2schema(n,"#/items");s=Object.assign(s,u)}p.push(s)}a.items=p}return a}_objectToSchema(){let a=this._value2object(this._object,this._option.$id,"",!0);const p=this._json2schema(this._object);return a=Object.assign(a,p),a}_json2schema(a,p=""){if(!b(a))return;(p===""||p===void 0)&&(p="#");const r={};A(a)?r.items={}:r.properties={};for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n)){const s=a[n];if(s===void 0)continue;const u=`${p}/properties/${n}`;if(!r.properties)continue;if(b(s))if(r.properties[n]=this._value2object(s,u,n),A(s)){if(s.length>0){const t=[];for(let y=0;y<s.length;y++){const f=s[y];let v=this._value2object(f,`${u}/items`,n+"items");b(f)&&!$(f)&&(v=Object.assign(v,this._json2schema(f,`${u}/items`))),t.push(v)}r.properties[n].items=t}}else r.properties[n]=Object.assign(r.properties[n],this._json2schema(s,u));else r.properties&&(r.properties[n]=this._value2object(s,u,n))}return r}_value2object(a,p,r="",n=!1){const s={$id:p,title:`The ${r} Schema`,mock:{mock:a}};return n&&(s.$schema=this._option.$schema,s.title="The Root Schema",s.mock=void 0),J(a)?s.type="boolean":L(a)?s.type="integer":U(a)?s.type="number":Y(a)?s.type="string":K(a)?s.type="null":A(a)?(s.type="array",s.mock=void 0):b(a)&&(s.type="object",s.mock=void 0),s}}const ee=Z,te={class:"radio-group_api"},oe={key:0,style:{"padding-top":"16px"}},se={key:1,class:"ms-body"},ae={key:2,class:"ms-body"},ie={key:3,class:"ms-body"},re=Q({__name:"ApiBody",props:{isReadOnly:E.bool.def(!1),isShowEnable:E.bool.def(!1),body:{type:Object,default:()=>({raw:"",typeChange:"",format:"",jsonSchema:"",type:"",kvs:[]})},headers:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]}},emits:["headersChange"],setup(m,{emit:a}){const p=m,{t:r}=F(),n=["text","json","xml","html"],s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,{body:t,headers:y}=q(p);G(()=>t.value.raw,()=>{if(t.value.format!=="JSON-SCHEMA"&&t.value.raw)try{const o=new ee().format(JSON.parse(t.value.raw));t.value.jsonSchema?t.value.jsonSchema=N(o):t.value.jsonSchema=o}catch{t.value.jsonSchema=""}}),H(()=>{t.value.type||(t.value.type=_.FORM_DATA),t.value.kvs&&t.value.kvs.forEach(e=>{e.type||(e.type="text")})});const f=e=>{const o=typeof e;return e!==null&&(o==="object"||o==="function")},v=e=>{if(e!=null)return Object(e)},k=(e,o,l)=>{const d=o[l];d!=null&&(!s.call(e,l)||!f(d)?e[l]=d:e[l]=V(Object(e[l]),o[l]))},V=(e,o)=>{if(e===o)return e;o=Object(o);for(const l in o)s.call(o,l)&&k(e,o,l);if(Object.getOwnPropertySymbols){const l=Object.getOwnPropertySymbols(o);for(let d=0;d<l.length;d++)u.call(o,l[d])&&k(e,o,l[d])}return e},N=function(e){e=v(e);for(let o=1;o<arguments.length;o++)V(e,arguments[o]);return e},O=()=>{switch(t.value.type){case"JSON":x("application/json");break;case"XML":x("text/xml");break;case"WWW_FORM":x("application/x-www-form-urlencoded");break;case"BINARY":x("application/octet-stream");break;default:B();break}},x=e=>{let o=!1;y.value.forEach(l=>{l.name==="Content-Type"&&(l.value=e,o=!0)}),o||y.value.unshift(new X({name:"Content-Type",value:e}))},B=()=>{for(const e in y.value)if(y.value[e].name==="Content-Type"){y.value.splice(parseInt(e),1),W("headersChange");return}},M=e=>{isNaN(e)?t.value.kvs.push(e):t.value.kvs.splice(e,1)},W=a;return(e,o)=>{const l=I,d=P;return g(),w("div",te,[c(d,{modelValue:i(t).type,"onUpdate:modelValue":o[0]||(o[0]=h=>i(t).type=h)},{default:j(()=>[c(l,{disabled:m.isReadOnly,label:i(_).FORM_DATA,onChange:O},{default:j(()=>[R(S(i(r)("datasource.body_form_data")),1)]),_:1},8,["disabled","label"]),c(l,{disabled:m.isReadOnly,label:i(_).WWW_FORM,onChange:O},{default:j(()=>[R(S(i(r)("datasource.body_x_www_from_urlencoded")),1)]),_:1},8,["disabled","label"]),c(l,{disabled:m.isReadOnly,label:i(_).JSON,onChange:O},{default:j(()=>[R(S(i(r)("datasource.body_json")),1)]),_:1},8,["disabled","label"]),c(l,{disabled:m.isReadOnly,label:i(_).XML,onChange:O},{default:j(()=>[R(S(i(r)("datasource.body_xml")),1)]),_:1},8,["disabled","label"]),c(l,{disabled:m.isReadOnly,label:i(_).RAW,onChange:O},{default:j(()=>[R(S(i(r)("datasource.body_raw")),1)]),_:1},8,["disabled","label"])]),_:1},8,["modelValue"]),i(t).type=="Form_Data"||i(t).type=="WWW_FORM"?(g(),w("div",oe,[c(D,{"is-read-only":m.isReadOnly,parameters:i(t).kvs,"is-show-enable":m.isShowEnable,type:"body",onChangeParameters:M,"value-list":m.valueList},null,8,["is-read-only","parameters","is-show-enable","value-list"])])):C("",!0),i(t).type=="JSON"?(g(),w("div",se,[c(T,{ref:"codeEdit","read-only":m.isReadOnly,modelValue:i(t).raw,"onUpdate:modelValue":o[1]||(o[1]=h=>i(t).raw=h),class:"api-body-code",data:i(t).raw,modes:n,mode:"json",height:"200px"},null,8,["read-only","modelValue","data"])])):C("",!0),i(t).type=="XML"?(g(),w("div",ae,[c(T,{ref:"codeEdit","read-only":m.isReadOnly,class:"api-body-code",modelValue:i(t).raw,"onUpdate:modelValue":o[2]||(o[2]=h=>i(t).raw=h),data:i(t).raw,height:"200px",mode:"xml",modes:n},null,8,["read-only","modelValue","data"])])):C("",!0),i(t).type=="Raw"?(g(),w("div",ie,[c(T,{ref:"codeEdit","read-only":m.isReadOnly,modelValue:i(t).raw,"onUpdate:modelValue":o[3]||(o[3]=h=>i(t).raw=h),data:i(t).raw,height:"200px",class:"api-body-code",modes:n},null,8,["read-only","modelValue","data"])])):C("",!0)])}}});const Ot=z(re,[["__scopeId","data-v-d24e55ee"]]);export{Ot as default};
