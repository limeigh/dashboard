import{k as z}from"./DeShortcutKey-0.0.0-dataease.js";import{e as E}from"./eventBus-0.0.0-dataease.js";import{d as $}from"./dvMain-0.0.0-dataease.js";import{s as N}from"./pinia-0.0.0-dataease.js";import{d as j,r as i,t as A,k as _,e as U,b as Z,u as d,o as x,c as g,a as k,z as F,Z as h,n as G}from"./@vue-0.0.0-dataease.js";import{_ as J}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./element-plus-secondary-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./chart-0.0.0-dataease.js";import"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./canvasStyle-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./canvasUtils-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";const Q=["contenteditable","innerHTML"],X=["innerHTML"],Y=j({__name:"Component",props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default(){return{id:null,propValue:""}}},showPosition:{required:!1,type:String,default:"preview"}},emits:["input"],setup(C,{emit:M}){const o=i(!1),v=i(17),m=i(!1),T=M,n=i(null),l=i(null),s=i("100%"),u=i("100%");let a=null;const c=i(200),S=C,{element:e,showPosition:f}=A(S),w=$(),{editMode:V,curComponent:b}=N(w),L=()=>{b.value.id!==e.value.id&&(o.value=!1)},B=t=>{T("input",e.value,t.target.innerHTML)},H=t=>{o.value&&t.stopPropagation(),t.keyCode==v.value?m.value=!0:(m.value&&o.value&&z.includes(t.keyCode)||t.keyCode==46)&&t.stopPropagation()},I=t=>{o.value&&t.stopPropagation(),t.keyCode==v.value&&(m.value=!1)},P=t=>{o.value&&t.stopPropagation()},D=t=>{t.preventDefault();const p=t.clipboardData.getData("text/plain")||"";p!==""&&document.execCommand("insertText",!1,p)},O=t=>{e.value.propValue=t.target.innerHTML||"",t.target.innerHTML!==""?e.value.propValue=t.target.innerHTML:(e.value.propValue="",G(function(){e.value.propValue=""})),o.value=!1},q=_(()=>!o.value&&!e.value.resizing&&!e.value.dragging),K=()=>{["canvas","canvasDataV","edit"].includes(f.value)&&!e.value.isLock&&(o.value=!0,R(n.value))},R=t=>{const r=window.getSelection(),p=document.createRange();p.selectNodeContents(t),r.removeAllRanges(),r.addRange(p)};U(()=>{E.off("componentClick",L),a&&(clearInterval(a),a=null)});const y=_(()=>[{"--scroll-speed":`${e.value.style.scrollSpeed===0||!l.value?0:(c.value+n.value.clientWidth)/e.value.style.scrollSpeed}s`,"--scroll-scale0":`${s.value}`,"--scroll-scale100":`${u.value}`}]),W=()=>{a=setInterval(()=>{const t=["canvas","canvasDataV","edit"].includes(f.value)?"shape-id-"+e.value.id:"wrapper-outer-id-"+e.value.id,r=document.getElementById(t);if(r&&n.value){const p=n.value.clientWidth;c.value=r.clientWidth,s.value=c.value*100/p+"%",u.value="-100%"}else s.value="100%",u.value="-100%"},1e3)};return Z(()=>{W()}),(t,r)=>d(V)=="edit"?(x(),g("div",{key:0,style:h(y.value),class:"v-text",ref_key:"textOut",ref:l,onKeydown:H,onKeyup:I,onDblclick:K},[k("div",{ref_key:"text",ref:n,contenteditable:o.value,class:F({"can-edit":o.value,"marquee-txt":q.value}),tabindex:"0",onPaste:D,onMousedown:P,onBlur:O,onInput:B,innerHTML:d(e).propValue},null,42,Q)],36)):(x(),g("div",{key:1,class:"v-text preview",ref_key:"textOut",ref:l,style:h(y.value)},[k("div",{class:"marquee-txt",ref_key:"text",ref:n,innerHTML:d(e).propValue},null,8,X)],4))}});const So=J(Y,[["__scopeId","data-v-262be76f"]]);export{So as default};
