tinymce.PluginManager.add("letterspacing",function(t,a){function s(e){var l=t.dom,r=t.selection.getSelectedBlocks();u.each(r,function(n){if(l.getStyle(n,"text-indent")){var i="";n&&n.children[0]&&n.children[0].attributes&&n.children[0].attributes.style&&(i=(i=(i=n.children[0].attributes.style.textContent.match(/font-size:?(.+?)"?[;}]/))?i[1]:!1)?2*(parseInt(i)+parseInt(e||0))+"px":2*(parseInt(e||0)+16)+"px"),l.setStyle(n,"text-indent",i||"2em")}}),t.undoManager.transact(function(){t.focus(),t.formatter.apply("letterspacing",{value:e})})}var u=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=t.getParam("letterspacing","0px 1px 2px 4px 6px 8px 10px 20px 40px");return t.on("init",function(){t.formatter.register({letterspacing:{inline:"span",toggle:!1,styles:{"letter-spacing":"%value"},clear_child_styles:!0}})}),t.ui.registry.getAll().icons.letterspacing||t.ui.registry.addIcon("letterspacing",'<svg t="1610616201691" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="969" width="24" height="24"><path d="M682.666667 704l128 106.666667-128 106.666666v-85.333333H341.333333v85.333333L213.333333 810.666667l128-106.666667v85.333333h341.333334v-85.333333zM170.666667 170.666667v682.666666H85.333333V170.666667h85.333334z m768 0v682.666666h-85.333334V170.666667h85.333334z m-394.666667 0l202.666667 469.333333h-89.6l-38.4-93.866667h-213.333334L366.933333 640H277.333333l202.666667-469.333333h64zM512 255.146667L432.213333 469.333333h159.573334L512 255.146667z" p-id="970" fill="#222f3e"></path></svg>'),t.ui.registry.addMenuButton("letterspacing",{icon:"letterspacing",tooltip:"设置间距",fetch:function(e){var l=o.split(" ").map(function(r){return{type:"togglemenuitem",text:r,onAction:function(){s(r)}}});e(l)}}),{getMetadata:function(){return{name:"设置间距",url:"https://github.com/Five-great/tinymce-plugins"}}}});
