import"./index-0.0.0-dataease.js";import{E as W}from"./el-col-0.0.0-dataease.js";import{o as X,n as A,y as H,G as Q,j as Y}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{a as Z,E as ee,b as le}from"./el-select-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import{d as te,t as ae,r as oe,X as ie,w as ne,f as u,O as d,j as o,i as r,u as t,P as p,a4 as c,a3 as b,_ as g,R as x,U as T,W as f,a6 as v,T as re,a8 as S,g as k}from"./vue-0.0.0-dataease.js";import{i as se}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as ue}from"./icon_add_outlined-0.0.0-dataease.js";import{L as pe}from"./dataset-0.0.0-dataease.js";import{E as de,a as ce}from"./index-0.0.0-dataease27.js";import{_ as _e}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";const me={key:0},fe={key:1},ve={style:{display:"flex",padding:"10px 0","align-items":"center"}},he={style:{"max-height":"50vh","overflow-y":"auto"},class:"addition-style"},ye={class:"name-title"},be={style:{width:"164px","margin-right":"8px"}},ge={style:{flex:"1"}},xe={key:2},Te={style:{"margin-right":"10px"}},ke=te({__name:"ResultFilterEditor",props:{chart:{type:Object,required:!0},item:{type:Object,required:!0}},setup(R){const{t:l}=X(),O=R,{item:e}=ae(O),V=oe(!0),a=ie({textOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"like",label:l("chart.filter_like")},{value:"not like",label:l("chart.filter_not_like")}]},{label:"",options:[{value:"null",label:l("chart.filter_null")},{value:"not_null",label:l("chart.filter_not_null")}]},{label:"",options:[{value:"empty",label:l("chart.filter_empty")},{value:"not_empty",label:l("chart.filter_not_empty")}]}],dateOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"lt",label:l("chart.filter_lt")},{value:"gt",label:l("chart.filter_gt")}]},{label:"",options:[{value:"le",label:l("chart.filter_le")},{value:"ge",label:l("chart.filter_ge")}]},{label:"",options:[{value:"not_null",label:l("chart.filter_not_null")}]}],valueOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"lt",label:l("chart.filter_lt")},{value:"gt",label:l("chart.filter_gt")}]},{label:"",options:[{value:"le",label:l("chart.filter_le")},{value:"ge",label:l("chart.filter_ge")}]},{label:"",options:[{value:"not_null",label:l("chart.filter_not_null")}]}],options:[],logic:"",filterType:"",enumCheckField:[],fieldOptions:[]});ne([O.item],()=>{C()},{deep:!0});const C=()=>{e!=null&&e.value&&(e.value.deType===0||e.value.deType===5?a.options=JSON.parse(JSON.stringify(a.textOptions)):e.value.deType===1?a.options=JSON.parse(JSON.stringify(a.dateOptions)):a.options=JSON.parse(JSON.stringify(a.valueOptions)))},U=()=>{a.logic=e.value.logic,a.filterType=e.value.filterType,a.enumCheckField=e.value.enumCheckField,e.value.filterType==="enum"&&E()},E=()=>{(e.value.deType===0||e.value.deType===5)&&pe({fieldIds:[e.value.id]}).then(s=>{a.fieldOptions=I(s.data),V.value=!1})},I=s=>s?s.filter(n=>!!n).map(n=>({id:n,text:n})):null,J=()=>{e.value.filter.push({fieldId:e.value.id,term:"eq",value:""})},B=s=>{e.value.filter.splice(s,1)},j=s=>{e.value.logic=s},z=s=>{e.value.filterType=s,s==="enum"&&V.value&&E()},D=()=>{e.value.enumCheckField=a.enumCheckField};return C(),U(),(s,n)=>{const q=de,G=ce,m=Z,h=ee,K=le,L=Q,w=A,P=Y,F=H,$=W;return u(),d("div",{onKeydown:n[3]||(n[3]=S(()=>{},["stop"])),onKeyup:n[4]||(n[4]=S(()=>{},["stop"]))},[o($,null,{default:r(()=>[t(e).deType===0||t(e).deType===5?(u(),d("div",me,[p("div",null,c(t(l)("chart.slc_logic"))+":",1),o(G,{modelValue:a.filterType,"onUpdate:modelValue":n[0]||(n[0]=i=>a.filterType=i),size:"small",style:{margin:"6px 0 10px 0"},onChange:z},{default:r(()=>[o(q,{style:{"min-width":"80px"},label:"logic"},{default:r(()=>[b(c(t(l)("chart.logic_exp")),1)]),_:1}),o(q,{style:{"min-width":"80px"},label:"enum"},{default:r(()=>[b(c(t(l)("chart.enum_exp")),1)]),_:1})]),_:1},8,["modelValue"])])):g("",!0),(t(e).deType===0||t(e).deType===5)&&a.filterType==="logic"||t(e).deType===1||t(e).deType===2||t(e).deType===3?(u(),d("div",fe,[x(p("div",ve,[p("span",null,c(t(l)("chart.conform_below")),1),o(h,{modelValue:a.logic,"onUpdate:modelValue":n[1]||(n[1]=i=>a.logic=i),onChange:j,size:"small",style:{width:"60px",margin:"0 6px"}},{default:r(()=>[o(m,{style:{"min-width":"80px"},label:t(l)("chart.logic_and"),value:"and"},null,8,["label"]),o(m,{style:{"min-width":"80px"},label:t(l)("chart.logic_or"),value:"or"},null,8,["label"])]),_:1},8,["modelValue"]),p("span",null,c(t(l)("chart.addition")),1)],512),[[T,t(e).filter&&t(e).filter.length>0]]),x(p("div",he,[p("div",ye,[p("span",null,c(t(e).name),1)]),(u(!0),d(f,null,v(t(e).filter,(i,N)=>(u(),d("div",{key:N,class:"filter-item"},[p("div",be,[o(h,{modelValue:i.term,"onUpdate:modelValue":_=>i.term=_},{default:r(()=>[(u(!0),d(f,null,v(a.options,(_,M)=>(u(),k(K,{key:M,label:_.label},{default:r(()=>[(u(!0),d(f,null,v(_.options,y=>(u(),k(m,{key:y.value,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),p("div",ge,[x(o(L,{modelValue:i.value,"onUpdate:modelValue":_=>i.value=_,class:"value-item",placeholder:t(l)("chart.condition"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]),[[T,!i.term.includes("null")&&!i.term.includes("empty")]])]),o(F,{class:"m-del-icon-btn",text:"",onClick:_=>B(N)},{default:r(()=>[o(P,{size:"20px"},{default:r(()=>[o(w,{name:"icon_delete-trash_outlined"},{default:r(()=>[o(t(se),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["onClick"])]))),128))],512),[[T,t(e).filter&&t(e).filter.length>0]]),o(F,{text:"",class:"circle-button",onClick:J,style:re({marginTop:t(e).filter&&t(e).filter.length>0?"10px":0})},{default:r(()=>[o(w,{name:"icon_add_outlined"},{default:r(()=>[o(t(ue),{style:{width:"14px"},class:"svg-icon"})]),_:1}),b(" "+c(t(l)("chart.add_addition")),1)]),_:1},8,["style"])])):g("",!0),(t(e).deType===0||t(e).deType===5)&&a.filterType==="enum"?(u(),d("div",xe,[p("span",Te,c(t(l)("chart.filter_exp")),1),o(h,{modelValue:a.enumCheckField,"onUpdate:modelValue":n[2]||(n[2]=i=>a.enumCheckField=i),filterable:"","collapse-tags":"",multiple:"",placeholder:t(l)("chart.pls_slc"),onChange:D,clearable:!0},{default:r(()=>[(u(!0),d(f,null,v(a.fieldOptions,i=>(u(),k(m,{key:i.id,label:i.text,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])):g("",!0)]),_:1})],32)}}});const He=_e(ke,[["__scopeId","data-v-fb97f20c"]]);export{He as default};
