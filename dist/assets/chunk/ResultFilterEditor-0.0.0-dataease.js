import{P as M,Q,A as W,y as X,i as Y,C as Z,a6 as H,r as ee,e as le}from"./element-plus-secondary-0.0.0-dataease.js";import{h as te,f as oe}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as ie,t as ae,r as ne,l as re,w as se,o as p,c as d,W as i,U as r,u as t,a as u,Y as m,_ as b,R as g,$ as x,a0 as T,S as f,a8 as v,Z as pe,X as N,T as k}from"./@vue-0.0.0-dataease.js";import{i as ue}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as de}from"./icon_add_outlined-0.0.0-dataease.js";import{K as me}from"./dataset-0.0.0-dataease.js";import{_ as ce}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";const _e={key:0},fe={key:1},ve={style:{display:"flex",padding:"10px 0","align-items":"center"}},he={style:{"max-height":"50vh","overflow-y":"auto"},class:"addition-style"},ye={class:"name-title"},be={style:{width:"164px","margin-right":"8px"}},ge={style:{flex:"1"}},xe={key:2},Te={style:{"margin-right":"10px"}},ke=ie({__name:"ResultFilterEditor",props:{chart:{type:Object,required:!0},item:{type:Object,required:!0}},setup(R){const{t:l}=te(),V=R,{item:e}=ae(V),C=ne(!0),o=re({textOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"like",label:l("chart.filter_like")},{value:"not like",label:l("chart.filter_not_like")}]},{label:"",options:[{value:"null",label:l("chart.filter_null")},{value:"not_null",label:l("chart.filter_not_null")}]},{label:"",options:[{value:"empty",label:l("chart.filter_empty")},{value:"not_empty",label:l("chart.filter_not_empty")}]}],dateOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"lt",label:l("chart.filter_lt")},{value:"gt",label:l("chart.filter_gt")}]},{label:"",options:[{value:"le",label:l("chart.filter_le")},{value:"ge",label:l("chart.filter_ge")}]},{label:"",options:[{value:"not_null",label:l("chart.filter_not_null")}]}],valueOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"lt",label:l("chart.filter_lt")},{value:"gt",label:l("chart.filter_gt")}]},{label:"",options:[{value:"le",label:l("chart.filter_le")},{value:"ge",label:l("chart.filter_ge")}]},{label:"",options:[{value:"not_null",label:l("chart.filter_not_null")}]}],options:[],logic:"",filterType:"",enumCheckField:[],fieldOptions:[]});se([V.item],()=>{O()},{deep:!0});const O=()=>{e!=null&&e.value&&(e.value.deType===0||e.value.deType===5?o.options=JSON.parse(JSON.stringify(o.textOptions)):e.value.deType===1?o.options=JSON.parse(JSON.stringify(o.dateOptions)):o.options=JSON.parse(JSON.stringify(o.valueOptions)))},U=()=>{o.logic=e.value.logic,o.filterType=e.value.filterType,o.enumCheckField=e.value.enumCheckField,e.value.filterType==="enum"&&q()},q=()=>{(e.value.deType===0||e.value.deType===5)&&me({fieldIds:[e.value.id]}).then(s=>{o.fieldOptions=I(s.data),C.value=!1})},I=s=>s?s.filter(n=>!!n).map(n=>({id:n,text:n})):null,J=()=>{e.value.filter.push({fieldId:e.value.id,term:"eq",value:""})},B=s=>{e.value.filter.splice(s,1)},z=s=>{e.value.logic=s},D=s=>{e.value.filterType=s,s==="enum"&&C.value&&q()},K=()=>{e.value.enumCheckField=o.enumCheckField};return O(),U(),(s,n)=>{const w=M,$=Q,_=W,h=X,j=H,G=ee,E=oe,P=le,F=Y,A=Z;return p(),d("div",{onKeydown:n[3]||(n[3]=N(()=>{},["stop"])),onKeyup:n[4]||(n[4]=N(()=>{},["stop"]))},[i(A,null,{default:r(()=>[t(e).deType===0||t(e).deType===5?(p(),d("div",_e,[u("div",null,m(t(l)("chart.slc_logic"))+":",1),i($,{modelValue:o.filterType,"onUpdate:modelValue":n[0]||(n[0]=a=>o.filterType=a),size:"small",style:{margin:"6px 0 10px 0"},onChange:D},{default:r(()=>[i(w,{style:{"min-width":"80px"},label:"logic"},{default:r(()=>[b(m(t(l)("chart.logic_exp")),1)]),_:1}),i(w,{style:{"min-width":"80px"},label:"enum"},{default:r(()=>[b(m(t(l)("chart.enum_exp")),1)]),_:1})]),_:1},8,["modelValue"])])):g("",!0),(t(e).deType===0||t(e).deType===5)&&o.filterType==="logic"||t(e).deType===1||t(e).deType===2||t(e).deType===3?(p(),d("div",fe,[x(u("div",ve,[u("span",null,m(t(l)("chart.conform_below")),1),i(h,{modelValue:o.logic,"onUpdate:modelValue":n[1]||(n[1]=a=>o.logic=a),onChange:z,size:"small",style:{width:"60px",margin:"0 6px"}},{default:r(()=>[i(_,{style:{"min-width":"80px"},label:t(l)("chart.logic_and"),value:"and"},null,8,["label"]),i(_,{style:{"min-width":"80px"},label:t(l)("chart.logic_or"),value:"or"},null,8,["label"])]),_:1},8,["modelValue"]),u("span",null,m(t(l)("chart.addition")),1)],512),[[T,t(e).filter&&t(e).filter.length>0]]),x(u("div",he,[u("div",ye,[u("span",null,m(t(e).name),1)]),(p(!0),d(f,null,v(t(e).filter,(a,S)=>(p(),d("div",{key:S,class:"filter-item"},[u("div",be,[i(h,{modelValue:a.term,"onUpdate:modelValue":c=>a.term=c},{default:r(()=>[(p(!0),d(f,null,v(o.options,(c,L)=>(p(),k(j,{key:L,label:c.label},{default:r(()=>[(p(!0),d(f,null,v(c.options,y=>(p(),k(_,{key:y.value,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),u("div",ge,[x(i(G,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:"value-item",placeholder:t(l)("chart.condition"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]),[[T,!a.term.includes("null")&&!a.term.includes("empty")]])]),i(F,{class:"m-del-icon-btn",text:"",onClick:c=>B(S)},{default:r(()=>[i(P,{size:"20px"},{default:r(()=>[i(E,{name:"icon_delete-trash_outlined"},{default:r(()=>[i(t(ue),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["onClick"])]))),128))],512),[[T,t(e).filter&&t(e).filter.length>0]]),i(F,{text:"",class:"circle-button",onClick:J,style:pe({marginTop:t(e).filter&&t(e).filter.length>0?"10px":0})},{default:r(()=>[i(E,{name:"icon_add_outlined"},{default:r(()=>[i(t(de),{style:{width:"14px"},class:"svg-icon"})]),_:1}),b(" "+m(t(l)("chart.add_addition")),1)]),_:1},8,["style"])])):g("",!0),(t(e).deType===0||t(e).deType===5)&&o.filterType==="enum"?(p(),d("div",xe,[u("span",Te,m(t(l)("chart.filter_exp")),1),i(h,{modelValue:o.enumCheckField,"onUpdate:modelValue":n[2]||(n[2]=a=>o.enumCheckField=a),filterable:"","collapse-tags":"",multiple:"",placeholder:t(l)("chart.pls_slc"),onChange:K,clearable:!0},{default:r(()=>[(p(!0),d(f,null,v(o.fieldOptions,a=>(p(),k(_,{key:a.id,label:a.text,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])):g("",!0)]),_:1})],32)}}});const Fl=ce(ke,[["__scopeId","data-v-fb97f20c"]]);export{Fl as default};
