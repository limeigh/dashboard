import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{o as $,G as B}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as D}from"./el-color-picker-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import{E as j,a as J}from"./el-form-item-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import{d as M,X as _,w as P,o as q,f as g,g as G,i as s,O as c,j as o,u as i,S as f,a3 as C,a4 as w,P as L,_ as y,W,a6 as X,a8 as H}from"./vue-0.0.0-dataease.js";import{a as K,R as Q}from"./chart-0.0.0-dataease.js";import{e as x,D as Y}from"./lodash-0.0.0-dataease.js";import{E as Z}from"./index-0.0.0-dataease20.js";import{E as ee,a as te}from"./index-0.0.0-dataease27.js";const ae={key:0},le={key:0},ne={style:{flex:"1",display:"flex"}},oe={key:1},re={style:{flex:"1",display:"flex"}},xe=M({__name:"BulletRangeSelector",props:{chart:{type:Object,required:!0},themes:{type:String,default:"dark"},propertyInner:{type:Array},selectorType:{type:String}},emits:["onBasicStyleChange","onMiscChange"],setup(n,{emit:S}){const{t:m}=$(),R=n,V=K,e=_({bulletRangeForm:{bar:{ranges:{fill:"rgba(0,128,255,0.5)",size:20,showType:"dynamic",fixedRange:[],fixedRangeNumber:3,symbol:"circle",symbolSize:10,name:""}}},rangeList:[]}),E=S;P(()=>R.chart.customAttr.misc,()=>{F()},{deep:!0});const p=a=>{e.bulletRangeForm.bar.ranges.showType==="fixed"&&e.rangeList.length&&(e.bulletRangeForm.bar.ranges.fixedRange=x(e.rangeList)),E("onMiscChange",{data:{bullet:{...e.bulletRangeForm}},requestData:!0},a)},z=()=>{if(e.bulletRangeForm.bar.ranges.fixedRangeNumber===null&&(e.bulletRangeForm.bar.ranges.fixedRangeNumber=1),e.rangeList.length>e.bulletRangeForm.bar.ranges.fixedRangeNumber)e.rangeList=e.rangeList.slice(0,e.bulletRangeForm.bar.ranges.fixedRangeNumber);else for(let a=e.rangeList.length;a<e.bulletRangeForm.bar.ranges.fixedRangeNumber;a++)e.rangeList.push({name:m("chart.symbolic_range")+(a+1),fixedRangeValue:void 0,fill:"rgba(0,128,255,0.44)"});b()},b=()=>{k()&&p()},k=()=>e.rangeList.every(a=>a.name&&a.fixedRangeValue!==null&&a.fixedRangeValue!==void 0),F=()=>{const a=JSON.parse(JSON.stringify(R.chart));if(a.customAttr){let t=null;Object.prototype.toString.call(a.customAttr)==="[object Object]"?t=JSON.parse(JSON.stringify(a.customAttr)):t=JSON.parse(a.customAttr),e.bulletRangeForm=Y(t.misc.bullet,x(Q.bullet)),T()}},T=()=>{var t,d;const a=[];if((d=(t=e.bulletRangeForm.bar.ranges)==null?void 0:t.fixedRange)!=null&&d.length)e.rangeList=e.bulletRangeForm.bar.ranges.fixedRange;else{for(let r=0;r<e.bulletRangeForm.bar.ranges.fixedRangeNumber;r++)a.push({name:"区间"+(r+1),fixedRangeValue:void 0,fill:"rgba(0,128,255,0)"});e.rangeList=x(a)}},O=()=>{e.bulletRangeForm.bar.ranges.showType==="dynamic"?p():b()};return q(()=>{F()}),(a,t)=>{const d=Z,r=j,N=ee,U=te,v=D,A=B,I=J;return g(),G(I,{ref:"bulletRangeForm",model:e.bulletRangeForm,size:"small","label-position":"top",onSubmit:t[11]||(t[11]=H(()=>{},["prevent"]))},{default:s(()=>[n.selectorType==="range"?(g(),c("div",ae,[o(r,{label:i(m)("chart.radar_size"),class:f(["form-item","form-item-"+n.themes]),style:{"padding-left":"4px",width:"100%"}},{default:s(()=>[o(d,{effect:R.themes,modelValue:e.bulletRangeForm.bar.ranges.size,"onUpdate:modelValue":t[0]||(t[0]=l=>e.bulletRangeForm.bar.ranges.size=l),min:1,size:"small","controls-position":"right",onChange:t[1]||(t[1]=l=>p("bar.ranges.size"))},null,8,["effect","modelValue"])]),_:1},8,["label","class"]),o(r,{class:f(["form-item","form-item-"+n.themes])},{default:s(()=>[o(U,{effect:n.themes,modelValue:e.bulletRangeForm.bar.ranges.showType,"onUpdate:modelValue":t[2]||(t[2]=l=>e.bulletRangeForm.bar.ranges.showType=l),onChange:t[3]||(t[3]=l=>O())},{default:s(()=>[o(N,{effect:n.themes,label:"dynamic"},{default:s(()=>[C(w(i(m)("chart.dynamic")),1)]),_:1},8,["effect"]),o(N,{effect:n.themes,label:"fixed"},{default:s(()=>[C(w(i(m)("chart.fix")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),e.bulletRangeForm.bar.ranges.showType==="dynamic"?(g(),c("div",le,[L("div",ne,[o(r,{label:i(m)("visualization.backgroundColor"),class:f(["form-item","form-item-"+n.themes]),style:{"padding-right":"4px"}},{default:s(()=>[o(v,{modelValue:e.bulletRangeForm.bar.ranges.fill,"onUpdate:modelValue":t[4]||(t[4]=l=>e.bulletRangeForm.bar.ranges.fill=l),predefine:i(V),effect:n.themes,onChange:t[5]||(t[5]=l=>p("bar.ranges.fill")),"show-alpha":"","is-custom":""},null,8,["modelValue","predefine","effect"])]),_:1},8,["label","class"])])])):y("",!0),e.bulletRangeForm.bar.ranges.showType==="fixed"?(g(),c("div",oe,[L("div",re,[o(r,{style:{width:"100%"},class:f(["form-item","form-item-"+n.themes]),label:i(m)("chart.range_num")},{default:s(()=>[o(d,{effect:n.themes,modelValue:e.bulletRangeForm.bar.ranges.fixedRangeNumber,"onUpdate:modelValue":t[6]||(t[6]=l=>e.bulletRangeForm.bar.ranges.fixedRangeNumber=l),precision:0,min:1,max:9,step:1,controls:!0,"controls-position":"right",onChange:t[7]||(t[7]=l=>z())},null,8,["effect","modelValue"])]),_:1},8,["class","label"])]),(g(!0),c(W,null,X(e.rangeList,(l,h)=>(g(),c("div",{style:{flex:"1",display:"flex"},key:h},[o(r,{label:h===0?i(m)("chart.threshold_value"):" ",style:{width:"170px"},class:f(["form-item","form-item-"+n.themes])},{default:s(()=>[o(d,{effect:n.themes,modelValue:l.fixedRangeValue,"onUpdate:modelValue":u=>l.fixedRangeValue=u,min:0,size:"small","controls-position":"right",onChange:t[8]||(t[8]=u=>b())},null,8,["effect","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","class"]),o(r,{label:h===0?i(m)("chart.show_name"):" ",class:f(["form-item","form-item-"+n.themes]),style:{"padding-left":"4px"}},{default:s(()=>[o(A,{effect:n.themes,modelValue:l.name,"onUpdate:modelValue":u=>l.name=u,size:"small",onChange:t[9]||(t[9]=u=>b())},null,8,["effect","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","class"]),o(r,{label:h===0?i(m)("visualization.backgroundColor"):" ",class:f(["form-item","form-item-"+n.themes]),style:{"padding-left":"4px"}},{default:s(()=>[o(v,{modelValue:l.fill,"onUpdate:modelValue":u=>l.fill=u,predefine:i(V),effect:n.themes,onChange:t[10]||(t[10]=u=>b()),"show-alpha":"","is-custom":""},null,8,["modelValue","onUpdate:modelValue","predefine","effect"])]),_:2},1032,["label","class"])]))),128))])):y("",!0)])):y("",!0)]),_:1},8,["model"])}}});export{xe as _};
