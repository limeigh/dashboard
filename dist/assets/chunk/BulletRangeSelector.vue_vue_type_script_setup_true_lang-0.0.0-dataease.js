import{B as I,w as $,P as D,Q as J,N as M,x as _,r as j}from"./element-plus-secondary-0.0.0-dataease.js";import{d as P,l as q,w as G,b as Q,o as g,T as W,U as o,c,W as s,u as i,z as f,_ as C,Y as w,a as L,R as y,S as X,a8 as Y,X as H}from"./@vue-0.0.0-dataease.js";import{a as K,V as Z}from"./chart-0.0.0-dataease.js";import{f as ee}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{h as x,E as te}from"./lodash-es-0.0.0-dataease.js";const ae={key:0},le={key:0},ne={style:{flex:"1",display:"flex"}},se={key:1},re={style:{flex:"1",display:"flex"}},de=P({__name:"BulletRangeSelector",props:{chart:{type:Object,required:!0},themes:{type:String,default:"dark"},propertyInner:{type:Array},selectorType:{type:String}},emits:["onBasicStyleChange","onMiscChange"],setup(n,{emit:S}){const{t:m}=ee(),R=n,V=K,e=q({bulletRangeForm:{bar:{ranges:{fill:"rgba(0,128,255,0.5)",size:20,showType:"dynamic",fixedRange:[],fixedRangeNumber:3,symbol:"circle",symbolSize:10,name:""}}},rangeList:[]}),z=S;G(()=>R.chart.customAttr.misc,()=>{F()},{deep:!0});const p=a=>{e.bulletRangeForm.bar.ranges.showType==="fixed"&&e.rangeList.length&&(e.bulletRangeForm.bar.ranges.fixedRange=x(e.rangeList)),z("onMiscChange",{data:{bullet:{...e.bulletRangeForm}},requestData:!0},a)},T=()=>{if(e.bulletRangeForm.bar.ranges.fixedRangeNumber===null&&(e.bulletRangeForm.bar.ranges.fixedRangeNumber=1),e.rangeList.length>e.bulletRangeForm.bar.ranges.fixedRangeNumber)e.rangeList=e.rangeList.slice(0,e.bulletRangeForm.bar.ranges.fixedRangeNumber);else for(let a=e.rangeList.length;a<e.bulletRangeForm.bar.ranges.fixedRangeNumber;a++)e.rangeList.push({name:m("chart.symbolic_range")+(a+1),fixedRangeValue:void 0,fill:"rgba(0,128,255,0.44)"});b()},b=()=>{k()&&p()},k=()=>e.rangeList.every(a=>a.name&&a.fixedRangeValue!==null&&a.fixedRangeValue!==void 0),F=()=>{const a=JSON.parse(JSON.stringify(R.chart));if(a.customAttr){let t=null;Object.prototype.toString.call(a.customAttr)==="[object Object]"?t=JSON.parse(JSON.stringify(a.customAttr)):t=JSON.parse(a.customAttr),e.bulletRangeForm=te(t.misc.bullet,x(Z.bullet)),U()}},U=()=>{var t,d;const a=[];if((d=(t=e.bulletRangeForm.bar.ranges)==null?void 0:t.fixedRange)!=null&&d.length)e.rangeList=e.bulletRangeForm.bar.ranges.fixedRange;else{for(let r=0;r<e.bulletRangeForm.bar.ranges.fixedRangeNumber;r++)a.push({name:"区间"+(r+1),fixedRangeValue:void 0,fill:"rgba(0,128,255,0)"});e.rangeList=x(a)}},E=()=>{e.bulletRangeForm.bar.ranges.showType==="dynamic"?p():b()};return Q(()=>{F()}),(a,t)=>{const d=I,r=$,N=D,O=J,v=M,A=j,B=_;return g(),W(B,{ref:"bulletRangeForm",model:e.bulletRangeForm,size:"small","label-position":"top",onSubmit:t[11]||(t[11]=H(()=>{},["prevent"]))},{default:o(()=>[n.selectorType==="range"?(g(),c("div",ae,[s(r,{label:i(m)("chart.radar_size"),class:f(["form-item","form-item-"+n.themes]),style:{"padding-left":"4px",width:"100%"}},{default:o(()=>[s(d,{effect:R.themes,modelValue:e.bulletRangeForm.bar.ranges.size,"onUpdate:modelValue":t[0]||(t[0]=l=>e.bulletRangeForm.bar.ranges.size=l),min:1,size:"small","controls-position":"right",onChange:t[1]||(t[1]=l=>p("bar.ranges.size"))},null,8,["effect","modelValue"])]),_:1},8,["label","class"]),s(r,{class:f(["form-item","form-item-"+n.themes])},{default:o(()=>[s(O,{effect:n.themes,modelValue:e.bulletRangeForm.bar.ranges.showType,"onUpdate:modelValue":t[2]||(t[2]=l=>e.bulletRangeForm.bar.ranges.showType=l),onChange:t[3]||(t[3]=l=>E())},{default:o(()=>[s(N,{effect:n.themes,label:"dynamic"},{default:o(()=>[C(w(i(m)("chart.dynamic")),1)]),_:1},8,["effect"]),s(N,{effect:n.themes,label:"fixed"},{default:o(()=>[C(w(i(m)("chart.fix")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),e.bulletRangeForm.bar.ranges.showType==="dynamic"?(g(),c("div",le,[L("div",ne,[s(r,{label:i(m)("visualization.backgroundColor"),class:f(["form-item","form-item-"+n.themes]),style:{"padding-right":"4px"}},{default:o(()=>[s(v,{modelValue:e.bulletRangeForm.bar.ranges.fill,"onUpdate:modelValue":t[4]||(t[4]=l=>e.bulletRangeForm.bar.ranges.fill=l),predefine:i(V),effect:n.themes,onChange:t[5]||(t[5]=l=>p("bar.ranges.fill")),"show-alpha":"","is-custom":""},null,8,["modelValue","predefine","effect"])]),_:1},8,["label","class"])])])):y("",!0),e.bulletRangeForm.bar.ranges.showType==="fixed"?(g(),c("div",se,[L("div",re,[s(r,{style:{width:"100%"},class:f(["form-item","form-item-"+n.themes]),label:i(m)("chart.range_num")},{default:o(()=>[s(d,{effect:n.themes,modelValue:e.bulletRangeForm.bar.ranges.fixedRangeNumber,"onUpdate:modelValue":t[6]||(t[6]=l=>e.bulletRangeForm.bar.ranges.fixedRangeNumber=l),precision:0,min:1,max:9,step:1,controls:!0,"controls-position":"right",onChange:t[7]||(t[7]=l=>T())},null,8,["effect","modelValue"])]),_:1},8,["class","label"])]),(g(!0),c(X,null,Y(e.rangeList,(l,h)=>(g(),c("div",{style:{flex:"1",display:"flex"},key:h},[s(r,{label:h===0?i(m)("chart.threshold_value"):" ",style:{width:"170px"},class:f(["form-item","form-item-"+n.themes])},{default:o(()=>[s(d,{effect:n.themes,modelValue:l.fixedRangeValue,"onUpdate:modelValue":u=>l.fixedRangeValue=u,min:0,size:"small","controls-position":"right",onChange:t[8]||(t[8]=u=>b())},null,8,["effect","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","class"]),s(r,{label:h===0?i(m)("chart.show_name"):" ",class:f(["form-item","form-item-"+n.themes]),style:{"padding-left":"4px"}},{default:o(()=>[s(A,{effect:n.themes,modelValue:l.name,"onUpdate:modelValue":u=>l.name=u,size:"small",onChange:t[9]||(t[9]=u=>b())},null,8,["effect","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","class"]),s(r,{label:h===0?i(m)("visualization.backgroundColor"):" ",class:f(["form-item","form-item-"+n.themes]),style:{"padding-left":"4px"}},{default:o(()=>[s(v,{modelValue:l.fill,"onUpdate:modelValue":u=>l.fill=u,predefine:i(V),effect:n.themes,onChange:t[10]||(t[10]=u=>b()),"show-alpha":"","is-custom":""},null,8,["modelValue","onUpdate:modelValue","predefine","effect"])]),_:2},1032,["label","class"])]))),128))])):y("",!0)])):y("",!0)]),_:1},8,["model"])}}});export{de as _};
