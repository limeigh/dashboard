import{A as te,x as _e,r as Z,y as f,w as ue,n as de,d as ne,X as Ce,t as ge,f as P,O as p,j as Le,i as Se,P as Q,a4 as Ie,u as t,S as F,T as J,C as ke,h as pe,s as Fe,o as Xe,L as Ke,g as me,_ as se,W as ie,a6 as ve,a8 as Ye}from"./vue-0.0.0-dataease.js";import{l as be,q as le,a2 as Ee,a3 as Re,B as ae,G as ce,i as he,_ as Me,t as We,a7 as Be,E as $e,w as Ue}from"./index-0.0.0-dataease.js";import{E as Oe}from"./index-0.0.0-dataease20.js";import{a as Ne,E as Ae}from"./index-0.0.0-dataease4.js";import{a3 as oe,al as ye,ah as Te,E as R,a5 as je,a6 as He,a2 as Ge}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{h as xe}from"./lodash-0.0.0-dataease.js";const ze=Symbol("sliderContextKey"),qe=be({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Ee,inputSize:Ee,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ne,default:"top"},marks:{type:le(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Re(["ariaLabel"])}),fe=e=>ae(e)||te(e)&&e.every(ae),Je={[oe]:fe,[ye]:fe,[Te]:fe},Qe=be({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ne,default:"top"}}),Ze={[oe]:e=>ae(e)},De=(e,l,d)=>{const a=Z(),i=Z(!1),m=f(()=>l.value instanceof Function),u=f(()=>m.value&&l.value(e.modelValue)||e.modelValue),b=xe(()=>{d.value&&(i.value=!0)},50),h=xe(()=>{d.value&&(i.value=!1)},50);return{tooltip:a,tooltipVisible:i,formatValue:u,displayTooltip:b,hideTooltip:h}},el=(e,l,d)=>{const{disabled:a,min:i,max:m,step:u,showTooltip:b,persistent:h,precision:c,sliderSize:v,formatTooltip:n,emitChange:V,resetSize:T,updateDragging:W}=_e(ze),{tooltip:z,tooltipVisible:C,formatValue:_,displayTooltip:S,hideTooltip:X}=De(e,n,b),E=Z(),k=f(()=>`${(e.modelValue-i.value)/(m.value-i.value)*100}%`),L=f(()=>e.vertical?{bottom:k.value}:{left:k.value}),$=()=>{l.hovering=!0,S()},re=()=>{l.hovering=!1,l.dragging||X()},U=o=>{a.value||(o.preventDefault(),I(o),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),window.addEventListener("contextmenu",x),E.value.focus())},K=o=>{a.value||(l.newPosition=Number.parseFloat(k.value)+o/(m.value-i.value)*100,M(l.newPosition),V())},O=()=>{K(-u.value)},s=()=>{K(u.value)},y=()=>{K(-u.value*4)},w=()=>{K(u.value*4)},H=()=>{a.value||(M(0),V())},G=()=>{a.value||(M(100),V())},q=o=>{let g=!0;switch(o.code){case R.left:case R.down:O();break;case R.right:case R.up:s();break;case R.home:H();break;case R.end:G();break;case R.pageDown:y();break;case R.pageUp:w();break;default:g=!1;break}g&&o.preventDefault()},A=o=>{let g,N;return o.type.startsWith("touch")?(N=o.touches[0].clientY,g=o.touches[0].clientX):(N=o.clientY,g=o.clientX),{clientX:g,clientY:N}},I=o=>{l.dragging=!0,l.isClick=!0;const{clientX:g,clientY:N}=A(o);e.vertical?l.startY=N:l.startX=g,l.startPosition=Number.parseFloat(k.value),l.newPosition=l.startPosition},B=o=>{if(l.dragging){l.isClick=!1,S(),T();let g;const{clientX:N,clientY:Y}=A(o);e.vertical?(l.currentY=Y,g=(l.startY-l.currentY)/v.value*100):(l.currentX=N,g=(l.currentX-l.startX)/v.value*100),l.newPosition=l.startPosition+g,M(l.newPosition)}},x=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||X(),l.isClick||M(l.newPosition),V()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),window.removeEventListener("contextmenu",x))},M=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const g=100/((m.value-i.value)/u.value);let Y=Math.round(o/g)*g*(m.value-i.value)*.01+i.value;Y=Number.parseFloat(Y.toFixed(c.value)),Y!==e.modelValue&&d(oe,Y),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await de(),l.dragging&&S(),z.value.updatePopper()};return ue(()=>l.dragging,o=>{W(o)}),ce(E,"touchstart",U,{passive:!1}),{disabled:a,button:E,tooltip:z,tooltipVisible:C,showTooltip:b,persistent:h,wrapperStyle:L,formatValue:_,handleMouseEnter:$,handleMouseLeave:re,onButtonDown:U,onKeyDown:q,setPosition:M}},ll=ne({name:"ElSliderButton"}),tl=ne({...ll,props:Qe,emits:Ze,setup(e,{expose:l,emit:d}){const a=e,i=he("slider"),m=Ce({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),u=f(()=>v.value?n.value:!1),{disabled:b,button:h,tooltip:c,showTooltip:v,persistent:n,tooltipVisible:V,wrapperStyle:T,formatValue:W,handleMouseEnter:z,handleMouseLeave:C,onButtonDown:_,onKeyDown:S,setPosition:X}=el(a,m,d),{hovering:E,dragging:k}=ge(m);return l({onButtonDown:_,onKeyDown:S,setPosition:X,hovering:E,dragging:k}),(L,$)=>(P(),p("div",{ref_key:"button",ref:h,class:F([t(i).e("button-wrapper"),{hover:t(E),dragging:t(k)}]),style:J(t(T)),tabindex:t(b)?-1:0,onMouseenter:t(z),onMouseleave:t(C),onMousedown:t(_),onFocus:t(z),onBlur:t(C),onKeydown:t(S)},[Le(t(Ae),{ref_key:"tooltip",ref:c,visible:t(V),placement:L.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":L.tooltipClass,disabled:!t(v),persistent:t(u)},{content:Se(()=>[Q("span",null,Ie(t(W)),1)]),default:Se(()=>[Q("div",{class:F([t(i).e("button"),{hover:t(E),dragging:t(k)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Pe=Me(tl,[["__file","button.vue"]]);const al=be({mark:{type:le([String,Object]),default:void 0}});var nl=ne({name:"ElSliderMarker",props:al,setup(e){const l=he("slider"),d=f(()=>ke(e.mark)?e.mark:e.mark.label),a=f(()=>ke(e.mark)?void 0:e.mark.style);return()=>pe("div",{class:l.e("marks-text"),style:a.value},d.value)}});const ol=(e,l,d)=>{const{form:a,formItem:i}=je(),m=Fe(),u=Z(),b=Z(),h={firstButton:u,secondButton:b},c=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(l.firstValue,l.secondValue)),n=f(()=>Math.max(l.firstValue,l.secondValue)),V=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),T=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),W=f(()=>e.vertical?{height:e.height}:{}),z=f(()=>e.vertical?{height:V.value,bottom:T.value}:{width:V.value,left:T.value}),C=()=>{m.value&&(l.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},_=s=>{const y=e.min+s*(e.max-e.min)/100;if(!e.range)return u;let w;return Math.abs(v.value-y)<Math.abs(n.value-y)?w=l.firstValue<l.secondValue?"firstButton":"secondButton":w=l.firstValue>l.secondValue?"firstButton":"secondButton",h[w]},S=s=>{const y=_(s);return y.value.setPosition(s),y},X=s=>{l.firstValue=s??e.min,k(e.range?[v.value,n.value]:s??e.min)},E=s=>{l.secondValue=s,e.range&&k([v.value,n.value])},k=s=>{d(oe,s),d(ye,s)},L=async()=>{await de(),d(Te,e.range?[v.value,n.value]:e.modelValue)},$=s=>{var y,w,H,G,q,A;if(c.value||l.dragging)return;C();let I=0;if(e.vertical){const B=(H=(w=(y=s.touches)==null?void 0:y.item(0))==null?void 0:w.clientY)!=null?H:s.clientY;I=(m.value.getBoundingClientRect().bottom-B)/l.sliderSize*100}else{const B=(A=(q=(G=s.touches)==null?void 0:G.item(0))==null?void 0:q.clientX)!=null?A:s.clientX,x=m.value.getBoundingClientRect().left;I=(B-x)/l.sliderSize*100}if(!(I<0||I>100))return S(I)};return{elFormItem:i,slider:m,firstButton:u,secondButton:b,sliderDisabled:c,minValue:v,maxValue:n,runwayStyle:W,barStyle:z,resetSize:C,setPosition:S,emitChange:L,onSliderWrapperPrevent:s=>{var y,w;((y=h.firstButton.value)!=null&&y.dragging||(w=h.secondButton.value)!=null&&w.dragging)&&s.preventDefault()},onSliderClick:s=>{$(s)&&L()},onSliderDown:async s=>{const y=$(s);y&&(await de(),y.value.onButtonDown(s))},onSliderMarkerDown:s=>{c.value||l.dragging||S(s)},setFirstValue:X,setSecondValue:E}},rl=(e,l,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const u=(e.max-e.min)/e.step,b=100*e.step/(e.max-e.min),h=Array.from({length:u-1}).map((c,v)=>(v+1)*b);return e.range?h.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):h.filter(c=>c>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:u=>e.vertical?{bottom:`${u}%`}:{left:`${u}%`}}),sl=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),il=(e,l,d,a,i,m)=>{const u=c=>{i(oe,c),i(ye,c)},b=()=>e.range?![d.value,a.value].every((c,v)=>c===l.oldValue[v]):e.modelValue!==l.oldValue,h=()=>{var c,v;e.min>e.max&&We("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&te(n)?n[1]<e.min?u([e.min,e.min]):n[0]>e.max?u([e.max,e.max]):n[0]<e.min?u([e.min,n[1]]):n[1]>e.max?u([n[0],e.max]):(l.firstValue=n[0],l.secondValue=n[1],b()&&(e.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(V=>Be())),l.oldValue=n.slice())):!e.range&&ae(n)&&!Number.isNaN(n)&&(n<e.min?u(e.min):n>e.max?u(e.max):(l.firstValue=n,b()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(V=>Be())),l.oldValue=n)))};h(),ue(()=>l.dragging,c=>{c||h()}),ue(()=>e.modelValue,(c,v)=>{l.dragging||te(c)&&te(v)&&c.every((n,V)=>n===v[V])&&l.firstValue===c[0]&&l.secondValue===c[1]||h()},{deep:!0}),ue(()=>[e.min,e.max],()=>{h()})},ul=(e,l,d)=>{const a=Z();return Xe(async()=>{e.range?(te(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),ce(window,"resize",d),await de(),d()}),{sliderWrapper:a}},dl=ne({name:"ElSlider"}),cl=ne({...dl,props:qe,emits:Je,setup(e,{expose:l,emit:d}){const a=e,i=he("slider"),{t:m}=$e(),u=Ce({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:b,slider:h,firstButton:c,secondButton:v,sliderDisabled:n,minValue:V,maxValue:T,runwayStyle:W,barStyle:z,resetSize:C,emitChange:_,onSliderWrapperPrevent:S,onSliderClick:X,onSliderDown:E,onSliderMarkerDown:k,setFirstValue:L,setSecondValue:$}=ol(a,u,d),{stops:re,getStopStyle:U}=rl(a,u,V,T),{inputId:K,isLabeledByFormItem:O}=He(a,{formItemContext:b}),s=Ge(),y=f(()=>a.inputSize||s.value),w=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),H=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):w.value),G=f(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),q=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),A=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),I=f(()=>[i.b(),i.m(s.value),i.is("vertical",a.vertical),{[i.m("with-input")]:a.showInput}]),B=sl(a);il(a,u,V,T,d,b);const x=f(()=>{const r=[a.min,a.max,a.step].map(Ve=>{const D=`${Ve}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,r)}),{sliderWrapper:M}=ul(a,u,C),{firstValue:o,secondValue:g,sliderSize:N}=ge(u),Y=r=>{u.dragging=r};return ce(M,"touchstart",S,{passive:!1}),ce(M,"touchmove",S,{passive:!1}),Ke(ze,{...ge(a),sliderSize:N,disabled:n,precision:x,emitChange:_,resetSize:C,updateDragging:Y}),l({onSliderClick:X}),(r,Ve)=>{var D,we;return P(),p("div",{id:r.range?t(K):void 0,ref_key:"sliderWrapper",ref:M,class:F(t(I)),role:r.range?"group":void 0,"aria-label":r.range&&!t(O)?t(w):void 0,"aria-labelledby":r.range&&t(O)?(D=t(b))==null?void 0:D.labelId:void 0},[Q("div",{ref_key:"slider",ref:h,class:F([t(i).e("runway"),{"show-input":r.showInput&&!r.range},t(i).is("disabled",t(n))]),style:J(t(W)),onMousedown:t(E),onTouchstartPassive:t(E)},[Q("div",{class:F(t(i).e("bar")),style:J(t(z))},null,6),Le(Pe,{id:r.range?void 0:t(K),ref_key:"firstButton",ref:c,"model-value":t(o),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":r.range||!t(O)?t(H):void 0,"aria-labelledby":!r.range&&t(O)?(we=t(b))==null?void 0:we.labelId:void 0,"aria-valuemin":r.min,"aria-valuemax":r.range?t(g):r.max,"aria-valuenow":t(o),"aria-valuetext":t(G),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t(L)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),r.range?(P(),me(Pe,{key:0,ref_key:"secondButton",ref:v,"model-value":t(g),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":t(q),"aria-valuemin":t(o),"aria-valuemax":r.max,"aria-valuenow":t(g),"aria-valuetext":t(A),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t($)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):se("v-if",!0),r.showStops?(P(),p("div",{key:1},[(P(!0),p(ie,null,ve(t(re),(j,ee)=>(P(),p("div",{key:ee,class:F(t(i).e("stop")),style:J(t(U)(j))},null,6))),128))])):se("v-if",!0),t(B).length>0?(P(),p(ie,{key:2},[Q("div",null,[(P(!0),p(ie,null,ve(t(B),(j,ee)=>(P(),p("div",{key:ee,style:J(t(U)(j.position)),class:F([t(i).e("stop"),t(i).e("marks-stop")])},null,6))),128))]),Q("div",{class:F(t(i).e("marks"))},[(P(!0),p(ie,null,ve(t(B),(j,ee)=>(P(),me(t(nl),{key:ee,mark:j.mark,style:J(t(U)(j.position)),onMousedown:Ye(vl=>t(k)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):se("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),r.showInput&&!r.range?(P(),me(t(Oe),{key:0,ref:"input","model-value":t(o),class:F(t(i).e("input")),step:r.step,disabled:t(n),controls:r.showInputControls,min:r.min,max:r.max,precision:t(x),debounce:r.debounce,size:t(y),"onUpdate:modelValue":t(L),onChange:t(_)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):se("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var ml=Me(cl,[["__file","slider.vue"]]);const wl=Ue(ml);export{wl as E};
