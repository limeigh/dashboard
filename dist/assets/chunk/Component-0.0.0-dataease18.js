import{k as B}from"./DeShortcutKey-0.0.0-dataease.js";import{e as P}from"./eventBus-0.0.0-dataease.js";import{d as S}from"./dvMain-0.0.0-dataease.js";import{d as A,r,t as D,af as K,a as R,u as i,f as u,O as m,P as d,S as E,T as v,n as I}from"./vue-0.0.0-dataease.js";import{_ as O}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./canvasStyle-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./tslib.es6-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./canvasUtils-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";const z=["contenteditable","innerHTML"],N={key:1,class:"v-text preview"},j=["innerHTML"],q=A({__name:"Component",props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default(){return{id:null,propValue:""}}}},emits:["input"],setup(f,{emit:_}){const o=r(!1),s=r(17),l=r(!1),p=_,c=r(null),y=f,{element:t}=D(y),g=S(),{editMode:k,curComponent:x}=K(g),C=()=>{x.value.id!==t.value.id&&(o.value=!1)},T=e=>{p("input",t.value,e.target.innerHTML)},M=e=>{o.value&&e.stopPropagation(),e.keyCode==s.value?l.value=!0:(l.value&&o.value&&B.includes(e.keyCode)||e.keyCode==46)&&e.stopPropagation()},h=e=>{o.value&&e.stopPropagation(),e.keyCode==s.value&&(l.value=!1)},b=e=>{o.value&&e.stopPropagation()},L=e=>{e.preventDefault();const a=e.clipboardData.getData("text/plain")||"";a!==""&&document.execCommand("insertText",!1,a),p("input",t.value,e.target.innerHTML)},V=e=>{t.value.propValue=e.target.innerHTML||"&nbsp;",e.target.innerHTML!==""?t.value.propValue=e.target.innerHTML:(t.value.propValue="",I(function(){t.value.propValue="&nbsp;"})),o.value=!1},H=()=>{t.value.isLock||(o.value=!0,w(c.value))},w=e=>{const n=window.getSelection(),a=document.createRange();a.selectNodeContents(e),n.removeAllRanges(),n.addRange(a)};return R(()=>{P.off("componentClick",C)}),(e,n)=>i(k)=="edit"?(u(),m("div",{key:0,class:"v-text",onKeydown:M,onKeyup:h},[d("div",{ref_key:"text",ref:c,contenteditable:o.value,class:E({"can-edit":o.value}),tabindex:"0",style:v({verticalAlign:i(t).style.verticalAlign}),onDblclick:H,onPaste:L,onMousedown:b,onBlur:V,onInput:T,innerHTML:i(t).propValue},null,46,z)],32)):(u(),m("div",N,[d("div",{style:v({verticalAlign:i(t).style.verticalAlign}),innerHTML:i(t).propValue},null,12,j)]))}});const Pe=O(q,[["__scopeId","data-v-2f5b7359"]]);export{Pe as default};
