import{l as _e,m as le,j as U,E as z,a3 as re}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{l as D,q as J,t as Q,i as K,o as Z,_ as ie,an as ge,ao as Te,I as Ce,m as Ne,H as Pe,ap as we,U as se,B as Ee,a5 as ne,w as Se,x as $e}from"./index-0.0.0-dataease.js";import{c as A}from"./strings-0.0.0-dataease.js";import{s as xe,ak as Be,d as M,x as ee,r as N,w as F,n as te,a as Oe,f as ce,O as ue,S as de,u as k,T as ke,q as ae,y as V,o as be,Y as Re,j as d,L as ze,Z as G,C as Ae,am as Le,X as Fe,ai as Me,R as Ve,U as Ie,_ as Ue}from"./vue-0.0.0-dataease.js";const De=(e,o,b)=>_e(e.subTree).filter(s=>{var u;return Be(s)&&((u=s.type)==null?void 0:u.name)===o&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ke=(e,o)=>{const b={},v=xe([]);return{children:v,addChild:u=>{b[u.uid]=u,v.value=De(e,o,b)},removeChild:u=>{delete b[u],v.value=v.value.filter(f=>f.uid!==u)}}},q=Symbol("tabsRootContextKey"),qe=D({tabs:{type:J(Array),default:()=>le([])}}),ve="ElTabBar",je=M({name:ve}),He=M({...je,props:qe,setup(e,{expose:o}){const b=e,v=ae(),t=ee(q);t||Q(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=K("tabs"),u=N(),f=N(),y=()=>{let l=0,_=0;const m=["top","bottom"].includes(t.props.tabPosition)?"width":"height",O=m==="width"?"x":"y",n=O==="x"?"left":"top";return b.tabs.every(S=>{var P,x;const T=(x=(P=v.parent)==null?void 0:P.refs)==null?void 0:x[`tab-${S.uid}`];if(!T)return!1;if(!S.active)return!0;l=T[`offset${A(n)}`],_=T[`client${A(m)}`];const $=window.getComputedStyle(T);return m==="width"&&(_-=Number.parseFloat($.paddingLeft)+Number.parseFloat($.paddingRight),l+=Number.parseFloat($.paddingLeft)),!1}),{[m]:`${_}px`,transform:`translate${A(O)}(${l}px)`}},C=()=>f.value=y(),g=[],i=()=>{var l;g.forEach(m=>m.stop()),g.length=0;const _=(l=v.parent)==null?void 0:l.refs;if(_){for(const m in _)if(m.startsWith("tab-")){const O=_[m];O&&g.push(Z(O,C))}}};F(()=>b.tabs,async()=>{await te(),C(),i()},{immediate:!0});const p=Z(u,()=>C());return Oe(()=>{g.forEach(l=>l.stop()),g.length=0,p.stop()}),o({ref:u,update:C}),(l,_)=>(ce(),ue("div",{ref_key:"barRef",ref:u,class:de([k(s).e("active-bar"),k(s).is(k(t).props.tabPosition)]),style:ke(f.value)},null,6))}});var We=ie(He,[["__file","tab-bar.vue"]]);const Xe=D({panes:{type:J(Array),default:()=>le([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ye={tabClick:(e,o,b)=>b instanceof Event,tabRemove:(e,o)=>o instanceof Event},oe="ElTabNav",Ze=M({name:oe,props:Xe,emits:Ye,setup(e,{expose:o,emit:b}){const v=ee(q);v||Q(oe,"<el-tabs><tab-nav /></el-tabs>");const t=K("tabs"),s=ge(),u=Te(),f=N(),y=N(),C=N(),g=N(),i=N(!1),p=N(0),l=N(!1),_=N(!0),m=V(()=>["top","bottom"].includes(v.props.tabPosition)?"width":"height"),O=V(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${p.value}px)`})),n=()=>{if(!f.value)return;const r=f.value[`offset${A(m.value)}`],c=p.value;if(!c)return;const a=c>r?c-r:0;p.value=a},S=()=>{if(!f.value||!y.value)return;const r=y.value[`offset${A(m.value)}`],c=f.value[`offset${A(m.value)}`],a=p.value;if(r-a<=c)return;const w=r-a>c*2?a+c:r-c;p.value=w},P=async()=>{const r=y.value;if(!i.value||!C.value||!f.value||!r)return;await te();const c=C.value.querySelector(".is-active");if(!c)return;const a=f.value,w=["top","bottom"].includes(v.props.tabPosition),h=c.getBoundingClientRect(),E=a.getBoundingClientRect(),I=w?r.offsetWidth-E.width:r.offsetHeight-E.height,R=p.value;let B=R;w?(h.left<E.left&&(B=R-(E.left-h.left)),h.right>E.right&&(B=R+h.right-E.right)):(h.top<E.top&&(B=R-(E.top-h.top)),h.bottom>E.bottom&&(B=R+(h.bottom-E.bottom))),B=Math.max(B,0),p.value=Math.min(B,I)},x=()=>{var r;if(!y.value||!f.value)return;e.stretch&&((r=g.value)==null||r.update());const c=y.value[`offset${A(m.value)}`],a=f.value[`offset${A(m.value)}`],w=p.value;a<c?(i.value=i.value||{},i.value.prev=w,i.value.next=w+a<c,c-w<a&&(p.value=c-a)):(i.value=!1,w>0&&(p.value=0))},T=r=>{let c=0;switch(r.code){case z.left:case z.up:c=-1;break;case z.right:case z.down:c=1;break;default:return}const a=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let h=a.indexOf(r.target)+c;h<0?h=a.length-1:h>=a.length&&(h=0),a[h].focus({preventScroll:!0}),a[h].click(),$()},$=()=>{_.value&&(l.value=!0)},j=()=>l.value=!1;return F(s,r=>{r==="hidden"?_.value=!1:r==="visible"&&setTimeout(()=>_.value=!0,50)}),F(u,r=>{r?setTimeout(()=>_.value=!0,50):_.value=!1}),Z(C,x),be(()=>setTimeout(()=>P(),0)),Re(()=>x()),o({scrollToActiveTab:P,removeFocus:j}),()=>{const r=i.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!i.value.prev)],onClick:n},[d(U,null,{default:()=>[d(Ce,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!i.value.next)],onClick:S},[d(U,null,{default:()=>[d(Ne,null,null)]})])]:null,c=e.panes.map((a,w)=>{var h,E,I,R;const B=a.uid,H=a.props.disabled,W=(E=(h=a.props.name)!=null?h:a.index)!=null?E:`${w}`,X=!H&&(a.isClosable||e.editable);a.index=`${w}`;const me=X?d(U,{class:"is-icon-close",onClick:L=>b("tabRemove",a,L)},{default:()=>[d(Pe,null,null)]}):null,he=((R=(I=a.slots).label)==null?void 0:R.call(I))||a.props.label,ye=!H&&a.active?0:-1;return d("div",{ref:`tab-${B}`,class:[t.e("item"),t.is(v.props.tabPosition),t.is("active",a.active),t.is("disabled",H),t.is("closable",X),t.is("focus",l.value)],id:`tab-${W}`,key:`tab-${B}`,"aria-controls":`pane-${W}`,role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>$(),onBlur:()=>j(),onClick:L=>{j(),b("tabClick",a,W,L)},onKeydown:L=>{X&&(L.code===z.delete||L.code===z.backspace)&&b("tabRemove",a,L)}},[he,me])});return d("div",{ref:C,class:[t.e("nav-wrap"),t.is("scrollable",!!i.value),t.is(v.props.tabPosition)]},[r,d("div",{class:t.e("nav-scroll"),ref:f},[d("div",{class:[t.e("nav"),t.is(v.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(v.props.tabPosition))],ref:y,style:O.value,role:"tablist",onKeydown:T},[e.type?null:d(We,{ref:g,tabs:[...e.panes]},null),c])])])}}}),Ge=D({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:J(Function),default:()=>!0},stretch:Boolean}),Y=e=>Ae(e)||Ee(e),Je={[re]:e=>Y(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>Y(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>Y(e),tabAdd:()=>!0},Qe=M({name:"ElTabs",props:Ge,emits:Je,setup(e,{emit:o,slots:b,expose:v}){var t;const s=K("tabs"),u=V(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:y,removeChild:C}=Ke(ae(),"ElTabPane"),g=N(),i=N((t=e.modelValue)!=null?t:"0"),p=async(n,S=!1)=>{var P,x;if(!(i.value===n||se(n)))try{let T;if(e.beforeLeave){const $=e.beforeLeave(n,i.value);T=$ instanceof Promise?await $:$}else T=!0;T!==!1&&(i.value=n,S&&(o(re,n),o("tabChange",n)),(x=(P=g.value)==null?void 0:P.removeFocus)==null||x.call(P))}catch{}},l=(n,S,P)=>{n.props.disabled||(p(S,!0),o("tabClick",n,P))},_=(n,S)=>{n.props.disabled||se(n.props.name)||(S.stopPropagation(),o("edit",n.props.name,"remove"),o("tabRemove",n.props.name))},m=()=>{o("edit",void 0,"add"),o("tabAdd")};F(()=>e.modelValue,n=>p(n)),F(i,async()=>{var n;await te(),(n=g.value)==null||n.scrollToActiveTab()}),ze(q,{props:e,currentName:i,registerPane:n=>{f.value.push(n)},sortPane:y,unregisterPane:C}),v({currentName:i});const O=({render:n})=>n();return()=>{const n=b["add-icon"],S=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:T=>{[z.enter,z.numpadEnter].includes(T.code)&&m()}},[n?G(b,"add-icon"):d(U,{class:s.is("icon-plus")},{default:()=>[d(we,null,null)]})]):null,P=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(O,{render:()=>{const T=f.value.some($=>$.slots.label);return d(Ze,{ref:g,currentName:i.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:l,onTabRemove:_},{$stable:!T})}},null),S]),x=d("div",{class:s.e("content")},[G(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[x,P])}}});var et=Qe;const tt=D({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",at=M({name:fe}),st=M({...at,props:tt,setup(e){const o=e,b=ae(),v=Le(),t=ee(q);t||Q(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=K("tab-pane"),u=N(),f=V(()=>o.closable||t.props.closable),y=ne(()=>{var l;return t.currentName.value===((l=o.name)!=null?l:u.value)}),C=N(y.value),g=V(()=>{var l;return(l=o.name)!=null?l:u.value}),i=ne(()=>!o.lazy||C.value||y.value);F(y,l=>{l&&(C.value=!0)});const p=Fe({uid:b.uid,slots:v,props:o,paneName:g,active:y,index:u,isClosable:f});return t.registerPane(p),be(()=>{t.sortPane(p)}),Me(()=>{t.unregisterPane(p.uid)}),(l,_)=>k(i)?Ve((ce(),ue("div",{key:0,id:`pane-${k(g)}`,class:de(k(s).b()),role:"tabpanel","aria-hidden":!k(y),"aria-labelledby":`tab-${k(g)}`},[G(l.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ie,k(y)]]):Ue("v-if",!0)}});var pe=ie(st,[["__file","tab-pane.vue"]]);const it=Se(et,{TabPane:pe}),ct=$e(pe);export{ct as E,it as a,Ke as u};
