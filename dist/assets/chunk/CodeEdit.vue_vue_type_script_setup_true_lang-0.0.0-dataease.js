import{p as c}from"./index-0.0.0-dataease.js";import{V as U}from"./vue3-ace-editor-0.0.0-dataease.js";import{a as f,t as w,m as A,b as $,c as C}from"./ace-builds-0.0.0-dataease.js";import{d as M,r as x,w as p,b as S,o as T,T as V,Z as F,u as J}from"./@vue-0.0.0-dataease.js";function O(n){let s=0,t=0;const l="    ";let a="",o=0,r=!1,e=null,i=!1;for(s=0,t=n.length;s<t;s+=1)switch(e=n.charAt(s),e){case"{":s!==0&&n.charAt(s-1)==="$"?(a+=e,i=!0):r?a+=e:(a+=e+`
`+u(l,o+1),o+=1);break;case"[":r?a+=e:(a+=e+`
`+u(l,o+1),o+=1);break;case"}":i?(a+=e,i=!1):r?a+=e:(o-=1,a+=`
`+u(l,o)+e);break;case"]":r?a+=e:(o-=1,a+=`
`+u(l,o)+e);break;case",":r?a+=e:a+=`,
`+u(l,o);break;case":":r?a+=e:a+=": ";break;case" ":case`
`:case"	":r&&(a+=e);break;case'"':s>0&&n.charAt(s-1)!=="\\"&&(r=!r),a+=e;break;default:a+=e;break}return a}function u(n,s){return new Array(s+1).join(n)}function j(n){n=`
`+n.replace(/(<\w+)(\s.*?>)/g,function(o,r,e){return r+" "+e.replace(/\s+(\w+=)/g," $1")}),n=n.replace(/<!--(.+?)-->/g,function(o,r){var e="<!--"+escape(r)+"-->";return e});var s=/\n(<(([^\?]).+?)(?:\s|\s*?>|\s*?(\/)>)(?:.*?(?:(?:(\/)>)|(?:<(\/)\2>)))?)/gm,t=[],l=n.replace(s,function(o,r,e,i,d,h,v,b){var k=d==="/"||h==="/"||v==="/"||b==="/",m="";i==="!"?m=g(t.length):i!=="/"?(m=g(t.length),k||t.push(e)):(t.pop(),m=g(t.length));var y=`
`+m+r;return y}),a=l.substring(1);return a=a.replace(/(\s*)<!--(.+?)-->/g,function(o,r,e){r.charAt(0)==="\r"&&(r=r.substring(1)),e=unescape(e).replace(/\r/g,`
`);var i=`
`+r+"<!--"+e.replace(/^\s*/gm,r)+"-->";return i}),a.replace(/\s+$/g,"").replace(/\r/g,`\r
`)}function g(n){for(var s=" ",t=[],l=0;l<n;++l)t.push(s);return t.join("")}f.config.setModuleUrl("ace/theme/chrome",w);f.config.setModuleUrl("ace/mode/json",A);f.config.setModuleUrl("ace/mode/xml",$);f.config.setModuleUrl("ace/mode/text",C);f.require("ace/ext/language_tools");const z=M({__name:"CodeEdit",props:{height:[String,Number],data:c.string.def(""),theme:c.string.def("chrome"),init:Function,enableFormat:c.bool.def(!0),readOnly:c.bool.def(!0),modes:{type:Array,default:()=>["text","json","xml"]},mode:c.string.def("text")},emits:["update:modelValue"],setup(n,{emit:s}){const t=n,l=x("");p(l,()=>{r("update:modelValue",l.value)}),p([t.theme],()=>{o()}),S(()=>{o()});const a=e=>{t.readOnly&&e.setReadOnly(!0),t.init&&t.init(e)},o=()=>{if(t.enableFormat){if(t.data)switch(t.mode){case"json":l.value=O(t.data);break;case"xml":l.value=j(t.data);break;default:l.value=t.data}}else l.value=t.data},r=s;return(e,i)=>(T(),V(J(U),{value:l.value,"onUpdate:value":i[0]||(i[0]=d=>l.value=d),lang:n.mode,theme:n.theme,style:F({height:n.height}),onInit:a},null,8,["value","lang","theme","style"]))}});export{z as _};
