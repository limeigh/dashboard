import"./index-0.0.0-dataease.js";import{t as d,n as T,d as m}from"./option-0.0.0-dataease.js";import{o as R,n as L,v as S,j as U}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as A}from"./datasource-list-0.0.0-dataease.js";import{d as V,s as X,y as j,f as c,O as p,W as f,a6 as v,P as y,a4 as x,j as D,i as C,g as _,l as M,u as k}from"./vue-0.0.0-dataease.js";import{_ as W}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";const Z={class:"ds-type-list"},$={class:"title-form_primary"},H={class:"item-container"},J=["onClick"],z={class:"db-name"},F=V({__name:"DsTypeList",props:{currentType:{type:String,default:"OLTP"},filterText:{type:String,default:""},latestUseTypes:{type:Array}},emits:["selectDsType"],setup(E,{emit:b}){const n=E,{t:w}=R(),i=X([]),I=j(()=>{if(n.currentType=="all")return d.map((e,a)=>({name:T[e],dbList:i.value[a].filter(t=>t.name.toLowerCase().includes(n.filterText.trim()))}));if(n.currentType==="latestUse"){let e=[],a=[];n.latestUseTypes.forEach(s=>{m.forEach(r=>{r.type===s&&e.indexOf(r.catalog)===-1&&e.push(r.catalog)})});let t=[];return e.forEach(s=>{n.latestUseTypes.forEach(r=>{m.forEach(l=>{l.type===r&&l.catalog===s&&t.push(l)})})}),t=t.filter(s=>s.name.toLowerCase().includes(n.filterText.trim())),a.push({name:w("data_source.recently_created"),dbList:t}),a}const o=d.findIndex(e=>n.currentType===e);return[{name:T[n.currentType],dbList:i.value[o].filter(e=>e.name.toLowerCase().includes(n.filterText.trim()))}]});(()=>{const o=[[],[],[],[],[]];m.forEach(e=>{const a=d.findIndex(t=>t===e.catalog);a!==-1&&o[a].push(e)}),i.value=o.map(e=>e.sort((a,t)=>a.name.toLowerCase().charCodeAt(0)-t.name.toLowerCase().charCodeAt(0)))})();const P=o=>{o.forEach(e=>{const{name:a,category:t,type:s,icon:r,extraParams:l,staticMap:O}=e,h={name:a,catalog:t,type:s,icon:r,extraParams:l,isPlugin:!0,staticMap:O},g=d.findIndex(u=>u===h.catalog);if(g!==-1){let u=JSON.parse(JSON.stringify(i.value));u[g].push(h),i.value=u}})},N=b,B=({type:o})=>{N("selectDsType",o)};return(o,e)=>{const a=U;return c(),p("div",Z,[(c(!0),p(f,null,v(I.value,t=>(c(),p(f,{key:t.name},[y("div",$,x(t.name),1),y("div",H,[(c(!0),p(f,null,v(t.dbList,s=>(c(),p("div",{key:s.type,class:"db-card",onClick:r=>B(s)},[D(a,{class:"icon-border"},{default:C(()=>[s.isPlugin?(c(),_(L,{key:0,"static-content":s.icon},null,8,["static-content"])):(c(),_(L,{key:1},{default:C(()=>[(c(),_(M(k(A)[s.type]),{class:"svg-icon"}))]),_:2},1024))]),_:2},1024),y("p",z,x(s.name),1)],8,J))),128))])],64))),128)),D(k(S),{jsname:"L2NvbXBvbmVudC9wbHVnaW5zLWhhbmRsZXIvRHNDYXRlZ29yeUhhbmRsZXI=",onLoadDsPlugin:P})])}}});const ce=W(F,[["__scopeId","data-v-e1a321f8"]]);export{ce as default};
