import{C as oe}from"./CommonAttr-0.0.0-dataease.js";import{d as j}from"./dvMain-0.0.0-dataease.js";import{s as M}from"./pinia-0.0.0-dataease.js";import{e as ae,L as re,C as ie,p as N,P as le,Q as se,w as F,D as me,E as Z,z as ne,A as pe,y as ue,r as ce}from"./element-plus-secondary-0.0.0-dataease.js";import{s as B}from"./snapshot-0.0.0-dataease.js";import{b as de,u as fe,i as he}from"./imgUtils-0.0.0-dataease.js";import{e as q}from"./eventBus-0.0.0-dataease.js";import ve from"./ImgViewDialog-0.0.0-dataease.js";import{h as W,j as _e}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{u as T,f as ge,a as be,g as ye}from"./index-0.0.0-dataease.js";import{d as L,t as $,r as x,w as Ve,b as H,e as we,ae as Ce,o as y,T as S,U as r,W as a,z as C,u as e,a as Se,Y as E,_ as z,R as U,l as ke,c as J,S as xe,n as Q,L as Ie,aa as Ee}from"./@vue-0.0.0-dataease.js";import{_ as P}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import{B as X}from"./chart-0.0.0-dataease.js";import Te from"./DatasetSelect-0.0.0-dataease.js";import{g as Ue}from"./chart-0.0.0-dataease2.js";import{useAppStoreWithOut as De}from"./app-0.0.0-dataease.js";import{b as ze}from"./vue-router_2-0.0.0-dataease.js";import{_ as Le}from"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import Pe from"./Threshold-0.0.0-dataease.js";import{C as Oe}from"./CollapseSwitchItem-0.0.0-dataease.js";import"./CommonBorderSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./lodash-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./canvasUtils-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./BackgroundOverallCommon-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./board-list-0.0.0-dataease.js";import"./icon_italic_outlined-0.0.0-dataease.js";import"./icon_right-alignment_outlined-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./icon_dataset-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./field-list-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";const Ae=L({__name:"PictureGroupUploadAttr",props:{themes:{type:String,default:"dark"},element:{type:Object,default(){return{propValue:{urlList:[]}}}},view:{type:Object,required:!0}},setup(t){const{t:u}=W(),i=t,_=j(),o=B(),{element:s}=$(i),{curComponent:g}=M(_),f=x([]),b=x(""),l=x(!1),c=x(!1),m=x(null),I=v=>{b.value=v.url,l.value=!0},h=v=>{c.value=!1;let w=v.url.split("static-resource/")[1],D=s.value.propValue.urlList.findIndex(O=>O.url.split("static-resource/")[1]===w);D!==-1&&(s.value.propValue.urlList.splice(D,1),T().emitter.emit("calcData-"+s.value.id)),o.recordSnapshotCache("picture-handleRemove")};async function k(v){s.value.propValue.urlList.length<10&&fe(v.file,w=>{o.recordSnapshotCache("pic-upload"),s.value.propValue.urlList.unshift({name:v.file.name,url:w}),T().emitter.emit("calcData-"+s.value.id)})}const d=()=>{o.recordSnapshotCache("pic-onStyleChange")},n=()=>{m.value.click()},V=()=>{f.value=[],s.value.propValue.urlList&&s.value.propValue.urlList.length>0&&s.value.propValue.urlList.forEach(v=>{f.value.push({name:v.name,url:he(v.url)})})},p=()=>{V()};return Ve(()=>s.value.propValue.urlList,()=>{p()}),H(()=>{p(),q.on("uploadImg",n)}),we(()=>{q.off("uploadImg",n)}),(v,w)=>{const D=Ce("Plus"),O=re,Y=ie,A=N,G=le,K=se,ee=F,te=me;return y(),S(te,{effect:t.themes,title:e(u)("visualization.pic_group"),name:"picture"},{default:r(()=>[a(A,{class:C(["img-area",`img-area_${t.themes}`])},{default:r(()=>[a(Y,{style:{width:"130px !important"}},{default:r(()=>[a(O,{themes:t.themes,limit:10,action:"",accept:".jpeg,.jpg,.png,.gif,.svg",class:C(["avatar-uploader",{disabled:c.value}]),"list-type":"picture-card","on-preview":I,"on-remove":h,"before-upload":e(de),"http-request":k,multiple:"","file-list":f.value},{default:r(()=>[a(e(ae),null,{default:r(()=>[a(D)]),_:1})]),_:1},8,["themes","class","before-upload","file-list"]),a(ve,{modelValue:l.value,"onUpdate:modelValue":w[0]||(w[0]=R=>l.value=R),"image-url":b.value},null,8,["modelValue","image-url"])]),_:1})]),_:1},8,["class"]),a(A,null,{default:r(()=>[Se("span",{style:{"margin-top":"2px"},class:C(["image-hint",`image-hint_${t.themes}`])},E(e(u)("visualization.pic_upload_tips2")),3)]),_:1}),a(A,{class:"pic-adaptor"},{default:r(()=>[e(g).style.adaptation?(y(),S(ee,{key:0,class:C(["form-item form-item-custom","form-item-"+t.themes]),label:e(u)("visualization.pic_adaptor_type"),size:"small",effect:t.themes},{default:r(()=>[a(K,{size:"small",modelValue:e(g).style.adaptation,"onUpdate:modelValue":w[1]||(w[1]=R=>e(g).style.adaptation=R),onChange:d,effect:t.themes},{default:r(()=>[a(G,{label:"adaptation",effect:t.themes},{default:r(()=>[z(E(e(u)("visualization.pic_adaptation")),1)]),_:1},8,["effect"]),a(G,{label:"original",effect:t.themes},{default:r(()=>[z(E(e(u)("visualization.pic_original")),1)]),_:1},8,["effect"]),a(G,{label:"equiratio",effect:t.themes},{default:r(()=>[z(E(e(u)("visualization.pic_equiratio")),1)]),_:1},8,["effect"])]),_:1},8,["modelValue","effect"])]),_:1},8,["class","label","effect"])):U("",!0)]),_:1})]),_:1},8,["effect","title"])}}});const Ge=P(Ae,[["__scopeId","data-v-ec42953c"]]),Re=L({__name:"PictureGroupDatasetSelect",props:{themes:{type:String,default:"dark"},view:{type:Object,required:!1,default(){return{...X}}}},setup(t){const u=B(),i=j(),{t:_}=W(),o=ge(),s=De(),g=ze(),{wsCache:f}=be("localStorage"),b=t,{view:l}=$(b),c=ke({}),m=()=>{Q(()=>{l.value.tableId&&l.value.id?Ue(l.value.tableId,l.value.id,{type:"table-info"}).then(d=>{l.value.xAxis=[],d.quotaList.pop(),l.value.xAxis.push(...d.dimensionList,...d.quotaList);const n=l.value;T().emitter.emit("calcData-"+n.id,n),u.recordSnapshotCache("calc",l.value.id)}).catch(()=>{}):l.value.xAxis=[]})},I=()=>{if(!i.dvInfo.id){Z.warning(_("visualization.save_page_tips"));return}const d=o.getToken&&s.getIsIframe?"dataset-embedded-form":"/dataset-form";let n=g.resolve(d);const V=f.get(ye("open-backend"))==="1"?"_self":"_blank",p=window.open(n.href,V);k(p)},h=x(null),k=d=>{if(h!=null&&h.value){const n={methodName:"initOpenHandler",args:d};h.value.invokeMethod(n)}};return(d,n)=>(y(),J(xe,null,[a(Te,{ref:"datasetSelector",modelValue:e(l).tableId,"onUpdate:modelValue":n[0]||(n[0]=V=>e(l).tableId=V),style:{flex:"1"},"view-id":e(l).id,themes:t.themes,disabled:!e(l).senior.threshold.enable,onOnDatasetChange:m,onAddDsWindow:I,"state-obj":c},null,8,["modelValue","view-id","themes","disabled","state-obj"]),a(e(_e),{ref_key:"openHandler",ref:h,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512)],64))}});const je=P(Re,[["__scopeId","data-v-9d58ee90"]]),Be=L({__name:"PictureGroupThreshold",props:{themes:{type:String,default:"dark"},element:{type:Object,default(){return{propValue:{urlList:[]}}}},view:{type:Object,required:!1,default(){return{...X}}}},setup(t){const u=B(),{t:i}=W(),_=t,{view:o,element:s}=$(_),g=c=>{o.value.senior.threshold=c,c.enable&&(s.value.carousel.enable=!1),Q(()=>{T().emitter.emit("calcData-"+s.value.id)}),u.recordSnapshotCache("calcData",o.value.id)},f=()=>{u.recordSnapshotCache("onStyleChange")},b=c=>{if(f(),c===""||parseFloat(c).toString()==="NaN"||parseFloat(c)<1){Z.error(i("chart.only_input_number"));return}},l=()=>{o.value.senior.threshold.enable=!1};return H(()=>{T({name:"carouselValueChange",callback:()=>l()})}),(c,m)=>{const I=ne,h=F,k=pe,d=ue,n=ce,V=N;return y(),S(e(Oe),{effect:t.themes,title:e(i)("chart.threshold"),"change-model":e(o).senior.threshold,modelValue:e(o).senior.threshold.enable,"onUpdate:modelValue":m[5]||(m[5]=p=>e(o).senior.threshold.enable=p),name:"threshold",onModelChange:g},{default:r(()=>[Ie(c.$slots,"dataset",{},void 0,!0),a(Pe,{themes:t.themes,chart:e(o),"property-inner":["tableThreshold"],onOnThresholdChange:g},null,8,["themes","chart"]),e(o)?(y(),S(V,{key:0,class:"refresh-area"},{default:r(()=>[a(h,{style:{width:"100%"},class:C(["form-item no-margin-bottom","form-item-"+t.themes])},{default:r(()=>[a(I,{modelValue:e(o).refreshViewEnable,"onUpdate:modelValue":m[0]||(m[0]=p=>e(o).refreshViewEnable=p),effect:t.themes,size:"small",onChange:m[1]||(m[1]=p=>f())},{default:r(()=>[z(E(e(i)("visualization.refresh_frequency")),1)]),_:1},8,["modelValue","effect"])]),_:1},8,["class"]),e(o).refreshViewEnable?(y(),S(V,{key:0,style:{width:"100%"}},{default:r(()=>[a(h,{class:C(["form-item no-margin-bottom select-append","form-item-"+t.themes])},{default:r(()=>[a(n,{modelValue:e(o).refreshTime,"onUpdate:modelValue":m[4]||(m[4]=p=>e(o).refreshTime=p),modelModifiers:{number:!0},effect:t.themes,class:C([t.themes==="dark"&&"dv-dark"]),size:"small",min:1,max:3600,disabled:!e(o).refreshViewEnable,onChange:b},{append:r(()=>[a(d,{modelValue:e(o).refreshUnit,"onUpdate:modelValue":m[2]||(m[2]=p=>e(o).refreshUnit=p),effect:t.themes,size:"small",placeholder:"Select",style:{width:"80px"},onChange:m[3]||(m[3]=p=>f())},{default:r(()=>[a(k,{effect:t.themes,label:e(i)("visualization.minute"),value:"minute"},null,8,["effect","label"]),a(k,{effect:t.themes,label:e(i)("visualization.second"),value:"second"},null,8,["effect","label"])]),_:1},8,["modelValue","effect"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"])]),_:1})):U("",!0)]),_:1})):U("",!0)]),_:3},8,["effect","title","change-model","modelValue"])}}});const We=P(Be,[["__scopeId","data-v-d73cd9fe"]]),$e={class:"attr-list de-collapse-style"},qe=L({__name:"Attr",props:{themes:{type:String,default:"dark"}},setup(t){const u=j(),{curComponent:i,canvasViewInfo:_,mobileInPc:o,batchOptStatus:s}=M(u);return(g,f)=>(y(),J("div",$e,[a(oe,{themes:t.themes,element:e(i),"background-color-picker-width":197,"background-border-select-width":197},Ee({default:r(()=>[!e(o)&&!e(s)?(y(),S(Ge,{key:0,themes:t.themes,element:e(i),view:e(_)[e(i)?e(i).id:"default"]},null,8,["themes","element","view"])):U("",!0)]),_:2},[e(o)?void 0:{name:"carousel",fn:r(()=>{var b;return[((b=e(i))==null?void 0:b.innerType)==="picture-group"?(y(),S(Le,{key:0,element:e(i),themes:t.themes},null,8,["element","themes"])):U("",!0)]}),key:"0"},e(o)?void 0:{name:"threshold",fn:r(()=>[a(We,{themes:t.themes,element:e(i),view:e(_)[e(i)?e(i).id:"default"]},{dataset:r(()=>[a(je,{themes:t.themes,view:e(_)[e(i)?e(i).id:"default"]},null,8,["themes","view"])]),_:1},8,["themes","element","view"])]),key:"1"}]),1032,["themes","element"])]))}});const Ba=P(qe,[["__scopeId","data-v-4374ba36"]]);export{Ba as default};
