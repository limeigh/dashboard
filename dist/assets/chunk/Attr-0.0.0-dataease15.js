import{C as oe}from"./CommonAttr-0.0.0-dataease.js";import{d as R}from"./dvMain-0.0.0-dataease.js";import{d as L,t as B,af as M,r as E,w as ae,o as N,a as le,e as re,f as y,g as S,i as l,j as a,S as C,u as e,P as se,a4 as I,a3 as z,_ as D,X as ie,O as F,W as ne,n as Z,Z as me,at as ue}from"./vue-0.0.0-dataease.js";import{a as T,c as pe,y as ce,b as de}from"./index-0.0.0-dataease.js";import{E as fe}from"./el-collapse-item-0.0.0-dataease.js";import{E as X}from"./el-form-item-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import{E as H}from"./el-row-0.0.0-dataease.js";import{E as he}from"./el-col-0.0.0-dataease.js";import{E as ve}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{s as W}from"./snapshot-0.0.0-dataease.js";import{b as _e,u as ge,i as be}from"./imgUtils-0.0.0-dataease.js";import{e as q}from"./eventBus-0.0.0-dataease.js";import ye from"./ImgViewDialog-0.0.0-dataease.js";import{j as Ve,o as $,v as we,D as J,G as Ce}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as Se,a as ke}from"./index-0.0.0-dataease27.js";import{_ as O}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import{B as Q}from"./chart-0.0.0-dataease.js";import Ee from"./DatasetSelect-0.0.0-dataease.js";import{g as xe}from"./chart-0.0.0-dataease2.js";import{useAppStoreWithOut as Ie}from"./app-0.0.0-dataease.js";import{_ as De}from"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{a as Te,E as Ue}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as ze}from"./el-checkbox-0.0.0-dataease.js";import Le from"./Threshold-0.0.0-dataease.js";import{C as Oe}from"./CollapseSwitchItem-0.0.0-dataease.js";import"./CommonBorderSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./lodash-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./canvasUtils-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./index-0.0.0-dataease20.js";import"./index-0.0.0-dataease18.js";import"./el-color-picker-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./position-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./BackgroundOverallCommon-0.0.0-dataease.js";import"./board-list-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./icon_italic_outlined-0.0.0-dataease.js";import"./icon_right-alignment_outlined-0.0.0-dataease.js";import"./el-tabs-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./index-0.0.0-dataease22.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import"./el-tree-0.0.0-dataease.js";import"./token-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./icon_dataset-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./index-0.0.0-dataease6.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./field-list-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";const Pe=L({__name:"PictureGroupUploadAttr",props:{themes:{type:String,default:"dark"},element:{type:Object,default(){return{propValue:{urlList:[]}}}},view:{type:Object,required:!0}},setup(t){const{t:p}=$(),r=t,_=R(),o=W(),{element:i}=B(r),{curComponent:g}=M(_),f=E([]),b=E(""),s=E(!1),c=E(!1),n=E(null),x=v=>{b.value=v.url,s.value=!0},h=v=>{c.value=!1;let w=v.url.split("static-resource/")[1],U=i.value.propValue.urlList.findIndex(P=>P.url.split("static-resource/")[1]===w);U!==-1&&(i.value.propValue.urlList.splice(U,1),T().emitter.emit("calcData-"+i.value.id)),o.recordSnapshotCache("picture-handleRemove")};async function k(v){i.value.propValue.urlList.length<10&&ge(v.file,w=>{o.recordSnapshotCache("pic-upload"),i.value.propValue.urlList.unshift({name:v.file.name,url:w}),T().emitter.emit("calcData-"+i.value.id)})}const d=()=>{o.recordSnapshotCache("pic-onStyleChange")},m=()=>{n.value.click()},V=()=>{f.value=[],i.value.propValue.urlList&&i.value.propValue.urlList.length>0&&i.value.propValue.urlList.forEach(v=>{f.value.push({name:v.name,url:be(v.url)})})},u=()=>{V()};return ae(()=>i.value.propValue.urlList,()=>{u()}),N(()=>{u(),q.on("uploadImg",m)}),le(()=>{q.off("uploadImg",m)}),(v,w)=>{const U=re("Plus"),P=ve,K=he,G=H,A=Se,Y=ke,ee=X,te=fe;return y(),S(te,{effect:t.themes,title:e(p)("visualization.pic_group"),name:"picture"},{default:l(()=>[a(G,{class:C(["img-area",`img-area_${t.themes}`])},{default:l(()=>[a(K,{style:{width:"130px !important"}},{default:l(()=>[a(P,{themes:t.themes,limit:10,action:"",accept:".jpeg,.jpg,.png,.gif,.svg",class:C(["avatar-uploader",{disabled:c.value}]),"list-type":"picture-card","on-preview":x,"on-remove":h,"before-upload":e(_e),"http-request":k,multiple:"","file-list":f.value},{default:l(()=>[a(e(Ve),null,{default:l(()=>[a(U)]),_:1})]),_:1},8,["themes","class","before-upload","file-list"]),a(ye,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=j=>s.value=j),"image-url":b.value},null,8,["modelValue","image-url"])]),_:1})]),_:1},8,["class"]),a(G,null,{default:l(()=>[se("span",{style:{"margin-top":"2px"},class:C(["image-hint",`image-hint_${t.themes}`])},I(e(p)("visualization.pic_upload_tips2")),3)]),_:1}),a(G,{class:"pic-adaptor"},{default:l(()=>[e(g).style.adaptation?(y(),S(ee,{key:0,class:C(["form-item form-item-custom","form-item-"+t.themes]),label:e(p)("visualization.pic_adaptor_type"),size:"small",effect:t.themes},{default:l(()=>[a(Y,{size:"small",modelValue:e(g).style.adaptation,"onUpdate:modelValue":w[1]||(w[1]=j=>e(g).style.adaptation=j),onChange:d,effect:t.themes},{default:l(()=>[a(A,{label:"adaptation",effect:t.themes},{default:l(()=>[z(I(e(p)("visualization.pic_adaptation")),1)]),_:1},8,["effect"]),a(A,{label:"original",effect:t.themes},{default:l(()=>[z(I(e(p)("visualization.pic_original")),1)]),_:1},8,["effect"]),a(A,{label:"equiratio",effect:t.themes},{default:l(()=>[z(I(e(p)("visualization.pic_equiratio")),1)]),_:1},8,["effect"])]),_:1},8,["modelValue","effect"])]),_:1},8,["class","label","effect"])):D("",!0)]),_:1})]),_:1},8,["effect","title"])}}});const Ge=O(Pe,[["__scopeId","data-v-ec42953c"]]),Ae=L({__name:"PictureGroupDatasetSelect",props:{themes:{type:String,default:"dark"},view:{type:Object,required:!1,default(){return{...Q}}}},setup(t){const p=W(),r=R(),{t:_}=$(),o=pe(),i=Ie(),g=ce(),{wsCache:f}=de("localStorage"),b=t,{view:s}=B(b),c=ie({}),n=()=>{Z(()=>{s.value.tableId&&s.value.id?xe(s.value.tableId,s.value.id,{type:"table-info"}).then(d=>{s.value.xAxis=[],d.quotaList.pop(),s.value.xAxis.push(...d.dimensionList,...d.quotaList);const m=s.value;T().emitter.emit("calcData-"+m.id,m),p.recordSnapshotCache("calc",s.value.id)}).catch(()=>{}):s.value.xAxis=[]})},x=()=>{if(!r.dvInfo.id){J.warning(_("visualization.save_page_tips"));return}const d=o.getToken&&i.getIsIframe?"dataset-embedded-form":"/dataset-form";let m=g.resolve(d);const V=f.get("open-backend")==="1"?"_self":"_blank",u=window.open(m.href,V);k(u)},h=E(null),k=d=>{if(h!=null&&h.value){const m={methodName:"initOpenHandler",args:d};h.value.invokeMethod(m)}};return(d,m)=>(y(),F(ne,null,[a(Ee,{ref:"datasetSelector",modelValue:e(s).tableId,"onUpdate:modelValue":m[0]||(m[0]=V=>e(s).tableId=V),style:{flex:"1"},"view-id":e(s).id,themes:t.themes,disabled:!e(s).senior.threshold.enable,onOnDatasetChange:n,onAddDsWindow:x,"state-obj":c},null,8,["modelValue","view-id","themes","disabled","state-obj"]),a(e(we),{ref_key:"openHandler",ref:h,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512)],64))}});const je=O(Ae,[["__scopeId","data-v-c014f742"]]),Re=L({__name:"PictureGroupThreshold",props:{themes:{type:String,default:"dark"},element:{type:Object,default(){return{propValue:{urlList:[]}}}},view:{type:Object,required:!1,default(){return{...Q}}}},setup(t){const p=W(),{t:r}=$(),_=t,{view:o,element:i}=B(_),g=c=>{o.value.senior.threshold=c,c.enable&&(i.value.carousel.enable=!1),Z(()=>{T().emitter.emit("calcData-"+i.value.id)}),p.recordSnapshotCache("calcData",o.value.id)},f=()=>{p.recordSnapshotCache("onStyleChange")},b=c=>{if(f(),c===""||parseFloat(c).toString()==="NaN"||parseFloat(c)<1){J.error(r("chart.only_input_number"));return}},s=()=>{o.value.senior.threshold.enable=!1};return N(()=>{T({name:"carouselValueChange",callback:()=>s()})}),(c,n)=>{const x=ze,h=X,k=Te,d=Ue,m=Ce,V=H;return y(),S(e(Oe),{effect:t.themes,title:e(r)("chart.threshold"),"change-model":e(o).senior.threshold,modelValue:e(o).senior.threshold.enable,"onUpdate:modelValue":n[5]||(n[5]=u=>e(o).senior.threshold.enable=u),name:"threshold",onModelChange:g},{default:l(()=>[me(c.$slots,"dataset",{},void 0,!0),a(Le,{themes:t.themes,chart:e(o),"property-inner":["tableThreshold"],onOnThresholdChange:g},null,8,["themes","chart"]),e(o)?(y(),S(V,{key:0,class:"refresh-area"},{default:l(()=>[a(h,{style:{width:"100%"},class:C(["form-item no-margin-bottom","form-item-"+t.themes])},{default:l(()=>[a(x,{modelValue:e(o).refreshViewEnable,"onUpdate:modelValue":n[0]||(n[0]=u=>e(o).refreshViewEnable=u),effect:t.themes,size:"small",onChange:n[1]||(n[1]=u=>f())},{default:l(()=>[z(I(e(r)("visualization.refresh_frequency")),1)]),_:1},8,["modelValue","effect"])]),_:1},8,["class"]),e(o).refreshViewEnable?(y(),S(V,{key:0,style:{width:"100%"}},{default:l(()=>[a(h,{class:C(["form-item no-margin-bottom select-append","form-item-"+t.themes])},{default:l(()=>[a(m,{modelValue:e(o).refreshTime,"onUpdate:modelValue":n[4]||(n[4]=u=>e(o).refreshTime=u),modelModifiers:{number:!0},effect:t.themes,class:C([t.themes==="dark"&&"dv-dark"]),size:"small",min:1,max:3600,disabled:!e(o).refreshViewEnable,onChange:b},{append:l(()=>[a(d,{modelValue:e(o).refreshUnit,"onUpdate:modelValue":n[2]||(n[2]=u=>e(o).refreshUnit=u),effect:t.themes,size:"small",placeholder:"Select",style:{width:"80px"},onChange:n[3]||(n[3]=u=>f())},{default:l(()=>[a(k,{effect:t.themes,label:e(r)("visualization.minute"),value:"minute"},null,8,["effect","label"]),a(k,{effect:t.themes,label:e(r)("visualization.second"),value:"second"},null,8,["effect","label"])]),_:1},8,["modelValue","effect"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"])]),_:1})):D("",!0)]),_:1})):D("",!0)]),_:3},8,["effect","title","change-model","modelValue"])}}});const Be=O(Re,[["__scopeId","data-v-d73cd9fe"]]),We={class:"attr-list de-collapse-style"},$e=L({__name:"Attr",props:{themes:{type:String,default:"dark"}},setup(t){const p=R(),{curComponent:r,canvasViewInfo:_,mobileInPc:o,batchOptStatus:i}=M(p);return(g,f)=>(y(),F("div",We,[a(oe,{themes:t.themes,element:e(r),"background-color-picker-width":197,"background-border-select-width":197},ue({default:l(()=>[!e(o)&&!e(i)?(y(),S(Ge,{key:0,themes:t.themes,element:e(r),view:e(_)[e(r)?e(r).id:"default"]},null,8,["themes","element","view"])):D("",!0)]),_:2},[e(o)?void 0:{name:"carousel",fn:l(()=>{var b;return[((b=e(r))==null?void 0:b.innerType)==="picture-group"?(y(),S(De,{key:0,element:e(r),themes:t.themes},null,8,["element","themes"])):D("",!0)]}),key:"0"},e(o)?void 0:{name:"threshold",fn:l(()=>[a(Be,{themes:t.themes,element:e(r),view:e(_)[e(r)?e(r).id:"default"]},{dataset:l(()=>[a(je,{themes:t.themes,view:e(_)[e(r)?e(r).id:"default"]},null,8,["themes","view"])]),_:1},8,["themes","element","view"])]),key:"1"}]),1032,["themes","element"])]))}});const Bo=O($e,[["__scopeId","data-v-4374ba36"]]);export{Bo as default};
