import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{o as Y,D as E,n as H,j as K,G as Q}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as Z}from"./el-slider-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as ee}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{E as te}from"./el-row-0.0.0-dataease.js";import{E as le}from"./el-col-0.0.0-dataease.js";import{E as ae,a as oe}from"./el-form-item-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as se,a as me}from"./el-select-0.0.0-dataease.js";import{b as x,$ as V}from"./chart-0.0.0-dataease.js";import{h as ie,e as U,D as ne}from"./lodash-0.0.0-dataease.js";import{E as re}from"./index-0.0.0-dataease4.js";import{d as ce,X as pe,r as ue,y as de,w as fe,o as ye,e as L,f as g,g as O,i as o,O as v,j as a,S as r,P as c,a4 as b,u as S,at as be,W as Se,a6 as _e,_ as F}from"./vue-0.0.0-dataease.js";import{_ as he}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./index-0.0.0-dataease20.js";import"./index-0.0.0-dataease18.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";const ge={key:0,class:"map-flow-style"},ve={class:"data-area-label"},Fe={style:{"margin-right":"4px"}},Ie={class:"alpha-setting"},ke={class:"alpha-setting"},Ee={key:1,class:"alpha-setting"},Ve={key:2,class:"alpha-setting"},ze=ce({__name:"SymbolicStyleSelector",props:{chart:{},themes:{default:"dark"},propertyInner:{}},emits:["onBasicStyleChange","onMiscChange"],setup(B,{emit:W}){const u=B,{t:m}=Y(),$=t=>{var e;return(e=u.propertyInner)==null?void 0:e.includes(t)},A=W,l=pe({basicStyleForm:JSON.parse(JSON.stringify(x)),customColor:null,colorIndex:0,fieldColumnWidth:{fieldId:"",width:0},fileList:[]}),d=(t,e=!1)=>{A("onBasicStyleChange",{data:l.basicStyleForm,requestData:e},t)},z=ue(),D=["image/svg+xml","image/jpeg","image/png"],N=[{name:m("chart.line_symbol_circle"),value:"circle"},{name:m("chart.line_symbol_rect"),value:"square"},{name:m("chart.line_symbol_triangle"),value:"triangle"},{name:m("chart.map_symbol_pentagon"),value:"pentagon"},{name:m("chart.map_symbol_hexagon"),value:"hexagon"},{name:m("chart.map_symbol_octagon"),value:"octogon"},{name:m("chart.line_symbol_diamond"),value:"rhombus"},{name:m("commons.custom"),value:"custom"}],R=async t=>{var f;const e=t.raw;let i=!0;if(D.includes(e.type)||(E.error(m("chart.symbolic_error_icon")),i=!1),e.size/1024/1024>1&&(E.error(m("chart.symbolic_error_size")),i=!1),i)if(e.type==="image/svg+xml")l.basicStyleForm.customIcon=await e.text(),d("customIcon");else{const n=new FileReader;n.onloadend=()=>{l.basicStyleForm.customIcon=n.result,d("customIcon")},n.readAsDataURL(e)}else{(f=z.value)==null||f.clearFiles(),l.fileList.splice(0);const n=l.basicStyleForm.customIcon;if(n){let _="";n.startsWith("data")?_=n:_=V(n),_&&(l.fileList[0]={url:_})}}},j=()=>{const{mapSymbol:t,customIcon:e}=l.basicStyleForm;if(t==="custom"&&e){let i;e.startsWith("data")?i=e:i=V(l.basicStyleForm.customIcon),i&&(l.fileList[0]={url:i})}d("mapSymbol")},I=de(()=>{let{extBubble:t}=JSON.parse(JSON.stringify(u.chart));return["symbolic-map"].includes(u.chart.type)&&(t==null?void 0:t.length)>0}),C=t=>{const{mapSymbolSizeMax:e="0",mapSymbolSizeMin:i="1"}=l.basicStyleForm;let f=parseInt(e),n=parseInt(i);if(l.basicStyleForm.mapSymbolSizeMin=Math.max(n,0),l.basicStyleForm.mapSymbolSizeMax=Math.max(f,1),f<n){E.warning(m("chart.symbolic_error_range"));return}d(t)},M=()=>{var e;const t=U(u.chart.customAttr.basicStyle);if(t.mapSymbol==="custom"&&l.basicStyleForm.customIcon!==t.customIcon){let i;(e=t.customIcon)!=null&&e.startsWith("data")?i=t.customIcon:i=V(t.customIcon),i&&(l.fileList[0]={url:i})}l.basicStyleForm=ne(t,U(x)),l.customColor||(l.customColor=l.basicStyleForm.colors[0],l.colorIndex=0)},T=ie(M,500);return fe([()=>u.chart.customAttr.basicStyle,()=>u.chart.xAxis,()=>u.chart.yAxis],T,{deep:!0}),ye(()=>{M()}),(t,e)=>{const i=L("icon_info_outlined"),f=H,n=K,_=re,J=me,P=se,y=ae,p=le,h=te,q=L("Plus"),G=ee,k=Z,w=Q,X=oe;return g(),O(X,{size:"small",style:{width:"100%"}},{default:o(()=>[$("symbolicMapStyle")?(g(),v("div",ge,[a(h,{style:{flex:"1"}},{default:o(()=>[a(p,null,{default:o(()=>[a(y,{class:r(["form-item","form-item-"+t.themes])},{label:o(()=>[c("span",ve,[c("span",Fe,b(S(m)("chart.symbolic_shape")),1),a(_,{class:"item",effect:"dark",placement:"bottom"},be({default:o(()=>[a(n,{class:r(["hint-icon",{"hint-icon--dark":t.themes==="dark"}])},{default:o(()=>[a(f,{name:"icon_info_outlined"},{default:o(()=>[a(i,{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:2},[l.basicStyleForm.mapSymbol==="custom"?{name:"content",fn:o(()=>[c("div",null,b(S(m)("chart.symbolic_upload_hint")),1)]),key:"0"}:void 0]),1024)])]),default:o(()=>[a(P,{effect:t.themes,modelValue:l.basicStyleForm.mapSymbol,"onUpdate:modelValue":e[0]||(e[0]=s=>l.basicStyleForm.mapSymbol=s),onChange:e[1]||(e[1]=s=>j())},{default:o(()=>[(g(),v(Se,null,_e(N,s=>a(J,{key:s.name,label:s.name,value:s.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1}),l.basicStyleForm.mapSymbol==="custom"?(g(),O(h,{key:0,style:{flex:"1"}},{default:o(()=>[a(p,null,{default:o(()=>[a(y,{class:r(["form-item uploader","form-item-"+t.themes])},{default:o(()=>[c("div",{class:r(["avatar-uploader-container",`img-area_${t.themes}`])},[a(G,{action:"#",accept:".svg,.png,.jpeg,.jpg",class:"avatar-uploader","list-type":"picture-card",ref_key:"iconUpload",ref:z,effect:t.themes,"auto-upload":!1,"file-list":l.fileList,"on-change":R,limit:1},{default:o(()=>[a(n,null,{default:o(()=>[a(q)]),_:1})]),_:1},8,["effect","file-list"])],2)]),_:1},8,["class"])]),_:1})]),_:1})):F("",!0),c("div",Ie,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("chart.size")),3),a(h,{style:{flex:"1"}},{default:o(()=>[a(p,null,{default:o(()=>[a(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[a(k,{effect:t.themes,min:1,max:40,modelValue:l.basicStyleForm.mapSymbolSize,"onUpdate:modelValue":e[2]||(e[2]=s=>l.basicStyleForm.mapSymbolSize=s),onChange:e[3]||(e[3]=s=>d("mapSymbolSize")),disabled:I.value},null,8,["effect","modelValue","disabled"])]),_:1},8,["class"])]),_:1})]),_:1})]),c("div",ke,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("chart.size"))+b(S(m)("chart.symbolic_range")),3),a(h,{style:{flex:"1"}},{default:o(()=>[a(p,{span:11},{default:o(()=>[a(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[a(w,{type:"number",effect:t.themes,modelValue:l.basicStyleForm.mapSymbolSizeMin,"onUpdate:modelValue":e[4]||(e[4]=s=>l.basicStyleForm.mapSymbolSizeMin=s),class:"basic-input-number",controls:!1,onBlur:e[5]||(e[5]=s=>C("mapSymbolSizeMin")),disabled:!I.value},null,8,["effect","modelValue","disabled"])]),_:1},8,["class"])]),_:1}),a(p,{span:1.2},{default:o(()=>[...e[12]||(e[12]=[c("span",null,"-",-1)])]),_:1}),a(p,{span:11},{default:o(()=>[a(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[a(w,{type:"number",effect:t.themes,modelValue:l.basicStyleForm.mapSymbolSizeMax,"onUpdate:modelValue":e[6]||(e[6]=s=>l.basicStyleForm.mapSymbolSizeMax=s),class:"basic-input-number",controls:!1,onBlur:e[7]||(e[7]=s=>C("mapSymbolSizeMax")),disabled:!I.value},null,8,["effect","modelValue","disabled"])]),_:1},8,["class"])]),_:1})]),_:1})]),l.basicStyleForm.mapSymbol!=="custom"?(g(),v("div",Ee,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("chart.not_alpha")),3),a(h,{style:{flex:"1"}},{default:o(()=>[a(p,null,{default:o(()=>[a(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[a(k,{effect:t.themes,min:1,max:10,modelValue:l.basicStyleForm.mapSymbolOpacity,"onUpdate:modelValue":e[8]||(e[8]=s=>l.basicStyleForm.mapSymbolOpacity=s),onChange:e[9]||(e[9]=s=>d("mapSymbolOpacity"))},null,8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})])):F("",!0),l.basicStyleForm.mapSymbol!=="custom"?(g(),v("div",Ve,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("visualization.borderWidth")),3),a(h,{style:{flex:"1"}},{default:o(()=>[a(p,null,{default:o(()=>[a(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[a(k,{effect:t.themes,min:1,max:5,modelValue:l.basicStyleForm.mapSymbolStrokeWidth,"onUpdate:modelValue":e[10]||(e[10]=s=>l.basicStyleForm.mapSymbolStrokeWidth=s),onChange:e[11]||(e[11]=s=>d("mapSymbolStrokeWidth"))},null,8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})])):F("",!0)])):F("",!0)]),_:1})}}});const rt=he(ze,[["__scopeId","data-v-57165102"]]);export{rt as default};
