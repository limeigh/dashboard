import{l as Le,B as ze,i as Ae,_ as Be,ai as Oe,H as Je,w as ga,x as ba,z as wa}from"./index-0.0.0-dataease.js";import{E as ka}from"./el-drawer-0.0.0-dataease.js";import{ah as Re,k as Sa,j as I,o as Ea,n as pe,Q as me,D as x,G as Na,y as Ca}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./el-virtual-list-0.0.0-dataease.js";import{E as Va,a as xa}from"./el-table-v2-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import{E as Pa}from"./el-checkbox-0.0.0-dataease.js";import{E as Ta}from"./el-row-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{a as $a,E as ja}from"./el-table-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{a as Fa,E as qa}from"./el-select-0.0.0-dataease.js";import{E as Ua,a as Da}from"./el-form-item-0.0.0-dataease.js";import{d as oe,w as Ce,L as Qe,f as m,O as C,Z as ee,S as v,u as e,q as Ge,r as _,x as Oa,o as Ja,a as Ma,y as F,X as R,_ as q,P as h,g as k,i,l as he,j as u,a4 as y,a3 as T,T as fe,W as ve,s as Se,R as P,U as O,a6 as Ee,n as Me}from"./vue-0.0.0-dataease.js";import{i as Ke}from"./icon_expand-right_filled-0.0.0-dataease.js";import Ka from"./ApiHttpRequestForm-0.0.0-dataease.js";import{g as Z}from"./dataset-0.0.0-dataease.js";import{E as Ia}from"./EmptyBackground-0.0.0-dataease.js";import{c as Ne}from"./datasource-0.0.0-dataease.js";import{f as Y}from"./attr-0.0.0-dataease23.js";import{i as Ie}from"./field-list-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import{_ as La}from"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{e as za}from"./lodash-0.0.0-dataease.js";import{u as Aa}from"./el-tabs-0.0.0-dataease.js";import{E as Ba}from"./index-0.0.0-dataease20.js";const Ra=Le({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},circle:{type:Boolean},custom:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Qa={[Re]:(Q,z)=>[Q,z].every(ze)},Ga=oe({name:"ElSteps"}),Ha=oe({...Ga,props:Ra,emits:Qa,setup(Q,{emit:z}){const d=Q,n=Ae("steps"),{children:J,addChild:$,removeChild:p}=Aa(Ge(),"ElStep");return Ce(J,()=>{J.value.forEach((w,a)=>{w.setIndex(a)})}),Qe("ElSteps",{props:d,steps:J,addStep:$,removeStep:p}),Ce(()=>d.active,(w,a)=>{z(Re,w,a)}),(w,a)=>(m(),C("div",{class:v([e(n).b(),e(n).m(w.simple?"simple":w.direction)])},[ee(w.$slots,"default")],2))}});var Wa=Be(Ha,[["__file","steps.vue"]]);const Xa=Le({title:{type:String,default:""},icon:{type:Sa},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Za=oe({name:"ElStep"}),Ya=oe({...Za,props:Xa,setup(Q){const z=Q,d=Ae("step"),n=_(-1),J=_({}),$=_(""),p=Oa("ElSteps"),w=Ge();Ja(()=>{Ce([()=>p.props.active,()=>p.props.processStatus,()=>p.props.finishStatus],([c])=>{_e(c)},{immediate:!0})}),Ma(()=>{p.removeStep(se.uid)});const a=F(()=>z.status||$.value),G=F(()=>{const c=p.steps.value[n.value-1];return c?c.currentStatus:"wait"}),ae=F(()=>p.props.alignCenter),H=F(()=>p.props.direction==="vertical"),S=F(()=>p.props.simple),N=F(()=>p.props.circle),W=F(()=>p.props.custom),j=F(()=>p.steps.value.length),te=F(()=>{var c;return((c=p.steps.value[j.value-1])==null?void 0:c.uid)===(w==null?void 0:w.uid)}),M=F(()=>S.value?"":p.props.space),le=F(()=>[d.b(),d.is(S.value?"simple":p.props.direction),d.is("flex",te.value&&!M.value&&!ae.value),d.is("center",ae.value&&!H.value&&!S.value),W.value&&d.b("custom"),d.is("circle",N.value)]),A=F(()=>{const c={flexBasis:ze(M.value)?`${M.value}px`:M.value?M.value:`${100/(j.value-(ae.value?0:1))}%`};return H.value||te.value&&(c.maxWidth=`${100/j.value}%`),c}),b=c=>{n.value=c},re=c=>{const K=c==="wait",B={transitionDelay:`${K?"-":""}${150*n.value}ms`},U=c===p.props.processStatus||K?0:100;B.borderWidth=U&&!S.value?"1px":0,B[p.props.direction==="vertical"?"height":"width"]=`${U}%`,J.value=B},_e=c=>{c>n.value?$.value=p.props.finishStatus:c===n.value&&G.value!=="error"?$.value=p.props.processStatus:$.value="wait";const K=p.steps.value[n.value-1];K&&K.calcProgress($.value)},se=R({uid:w.uid,currentStatus:a,setIndex:b,calcProgress:re});return p.addStep(se),(c,K)=>(m(),C("div",{style:fe(e(A)),class:v(e(le))},[q(" icon & line "),e(W)?(m(),C("div",{key:0,class:v([e(d).e("head"),e(d).is(e(a))])},[h("div",{class:v([e(d).e("icon"),e(d).is(c.icon||c.$slots.icon?"icon":"text")])},[ee(c.$slots,"icon",{},()=>[c.icon?(m(),k(e(I),{key:0,class:v(e(d).e("icon-inner"))},{default:i(()=>[(m(),k(he(c.icon)))]),_:1},8,["class"])):["success","finish"].includes(e(a))?(m(),k(e(I),{key:1,class:v([e(d).e("icon-inner"),e(d).is("status")])},{default:i(()=>[u(e(Oe))]),_:1},8,["class"])):e(a)==="error"?(m(),k(e(I),{key:2,class:v([e(d).e("icon-inner"),e(d).is("status")])},{default:i(()=>[u(e(Je))]),_:1},8,["class"])):e(S)?q("v-if",!0):(m(),C("div",{key:3,class:v(e(d).e("icon-inner"))},y(e(N)?"":n.value+1),3))])],2),h("div",{class:v(e(d).e("main"))},[h("div",{class:v([e(d).e("title"),e(d).is(e(a))])},[ee(c.$slots,"title",{},()=>[T(y(c.title),1)])],2)],2),e(S)?q("v-if",!0):(m(),C("div",{key:0,class:v(e(d).e("line"))},[h("i",{class:v(e(d).e("line-inner")),style:fe(J.value)},null,6)],2))],2)):(m(),C(ve,{key:1},[q(" icon & line "),h("div",{class:v([e(d).e("head"),e(d).is(e(a))])},[e(S)?q("v-if",!0):(m(),C("div",{key:0,class:v(e(d).e("line"))},[h("i",{class:v(e(d).e("line-inner")),style:fe(J.value)},null,6)],2)),h("div",{class:v([e(d).e("icon"),e(d).is(c.icon||c.$slots.icon?"icon":"text")])},[ee(c.$slots,"icon",{},()=>[c.icon?(m(),k(e(I),{key:0,class:v(e(d).e("icon-inner"))},{default:i(()=>[(m(),k(he(c.icon)))]),_:1},8,["class"])):e(a)==="success"?(m(),k(e(I),{key:1,class:v([e(d).e("icon-inner"),e(d).is("status")])},{default:i(()=>[u(e(Oe))]),_:1},8,["class"])):e(a)==="error"?(m(),k(e(I),{key:2,class:v([e(d).e("icon-inner"),e(d).is("status")])},{default:i(()=>[u(e(Je))]),_:1},8,["class"])):e(S)?q("v-if",!0):(m(),C("div",{key:3,class:v(e(d).e("icon-inner"))},y(n.value+1),3))])],2)],2),q(" title & description "),h("div",{class:v(e(d).e("main"))},[h("div",{class:v([e(d).e("title"),e(d).is(e(a))])},[ee(c.$slots,"title",{},()=>[T(y(c.title),1)])],2),e(S)?(m(),C("div",{key:0,class:v(e(d).e("arrow"))},null,2)):(m(),C("div",{key:1,class:v([e(d).e("description"),e(d).is(e(a))])},[ee(c.$slots,"description",{},()=>[T(y(c.description),1)])],2))],2)],64)),q(" title & description ")],6))}});var He=Be(Ya,[["__file","item.vue"]]);const et=ga(Wa,{Step:He}),at=ba(He);const tt={style:{display:"flex",width:"100%","justify-content":"center"}},lt={class:"title-form_primary base-info"},st={class:"title-form_primary request-info"},nt={class:"title-form_primary request-info"},ot={class:"title-form_primary request-info"},rt={class:"table-container de-svg-in-table"},it={class:"name"},ut={class:"de-svg-in-table"},dt=["title"],ct={style:{float:"left"}},pt={style:{float:"left","font-size":"12px",color:"#8492a6"}},mt={class:"name"},At=oe({__name:"ApiHttpRequestDraw",emits:["returnItem"],setup(Q,{expose:z,emit:d}){const{t:n}=Ea(),J=R({jsonFields:[],fields:[]});let $=R([]),p=R([]),w=R([]),a=R({status:"",name:"",type:"table",url:"",method:"GET",request:{changeId:"",rest:[],headers:[],arguments:[],body:{typeChange:"",raw:"",kvs:[]},authManager:{verification:"",username:"",password:""}},fields:[],jsonFields:[],useJsonPath:!1,apiQueryTimeout:10,showApiStructure:!1,jsonPath:"",serialNumber:-1}),G=[];const ae=_(),H=_(!1),S=_(!1),N=_(1),W=_(!1),j=_(!1),te=Se([]),M=Se([]),le=Se([]),A=_(),b=_(),re=_(!1),_e=(l,t,s)=>{if(!t){s(new Error(n("datasource.please_input_query_timeout")));return}let o=!1;var f=/^\d+$/;if(o=f.test(t),!o){s(new Error(n("datasource.please_input_query_timeout")));return}if(t<=0||t>300){s(new Error(n("datasource.please_input_query_timeout")));return}s()},se=R({name:[{required:!0,message:n("datasource.input_name"),trigger:"blur"},{min:2,max:64,message:n("datasource.input_limit_2_25",[2,64]),trigger:"blur"}],apiQueryTimeout:[{required:!0,validator:_e,trigger:["blur","change"]}],url:[{required:!0,message:n("data_source.the_request_address"),trigger:"blur"}],desc:[{required:!0,trigger:"blur"}]}),c=_("table"),K=_(!1),B=_(!1),U=_("API"),Ve=_(""),L=_(!1),ye=_([]),ge=_(""),be=_(!1);Qe("api-active-name",c);const We=(l,t,s,o,f,V,ne,X)=>{if(ye.value=V,ge.value=ne,X)L.value=X;else{const E=ye.value.filter(D=>D.type===t.type);E&&E.length>0&&(L.value=!0)}if(B.value=l.copy,be.value=t.copy,U.value=t.type,re.value=f,c.value=s,K.value=o,$=t.apiConfiguration,w=l.fields,t.paramsConfiguration&&(p=t.paramsConfiguration),L.value&&(Ve.value=ma()),M.value=[],p)for(let E=0;E<p.length;E++)M.value=M.value.concat(p[E].fields);Object.assign(a,l),S.value=!0,N.value=0,Me(()=>{var E,D;L.value?((E=b==null?void 0:b.value)==null||E.invokeMethod({methodName:"clearForm",args:[]}),(D=b==null?void 0:b.value)==null||D.invokeMethod({methodName:"initForm",args:[]})):A.value.clearValidate()})},Xe=()=>{A.value.validate(l=>{var t,s;if(l){const o=Z.encode(JSON.stringify(a)),f=Z.encode(JSON.stringify(p));W.value=!0,(s=(t=me)["/datasource/checkApiDatasource"])==null||s.call(t),Ne({dsType:U.value,data:o,type:"apiStructure",paramsList:f}).then(V=>{J.jsonFields=V.data.jsonFields}).catch(V=>{console.warn(V==null?void 0:V.message)}),W.value=!1}else return!1})},Ze=[{id:"GET",label:"GET"},{id:"POST",label:"POST"}],Ye=[{id:!0,label:n("common.yes")},{id:!1,label:n("common.no")}],ea=[{label:n("dataset.text"),value:0},{label:n("dataset.value"),value:2},{label:n("dataset.value")+"("+n("dataset.float")+")",value:3}],ie=_(!1),aa=()=>{var l;if(a.type!=="params"&&a.fields.length===0){x.error(n("datasource.api_field_not_empty"));return}if(a.type==="params"){for(let t=0;t<a.fields.length;t++)for(let s=0;s<p.length;s++)for(let o=0;o<p[s].fields.length;o++)if(a.fields[t].name===p[s].fields[o].name&&a.serialNumber!==p[s].serialNumber){x.error(n("data_source.name_already_exists")+a.fields[t].name);return}}for(let t=0;t<a.fields.length-1;t++)for(let s=t+1;s<a.fields.length;s++)if(a.fields[t].name===a.fields[s].name){x.error(a.fields[t].name+", "+n("datasource.has_repeat_field_name"));return}if(K.value){let t="";for(let s=0;s<a.fields.length;s++)if(a.fields[s].primaryKey){let o=!1;for(let f=0;f<w.length;f++)w[f].name===a.fields[s].name&&w[f].primaryKey&&(o=!0);o||(t=t+" "+a.fields[s].name)}for(let s=0;s<w.length;s++)if(w[s].primaryKey){let o=!1;for(let f=0;f<a.fields.length;f++)w[s].name===a.fields[f].name&&a.fields[f].primaryKey&&(o=!0);o||(t=t+" "+w[s].name)}if(t!==""&&!(be.value||B.value)){x.error(n("datasource.primary_key_change")+t);return}for(let s=0;s<a.fields.length;s++)if(a.fields[s].primaryKey&&!a.fields[s].length&&a.fields[s].deExtractType===0){x.error(n("datasource.primary_key_length")+a.fields[s].name);return}}else for(let t=0;t<a.fields.length;t++)if(a.fields[t].primaryKey&&!a.fields[t].length&&a.fields[t].deExtractType===0){x.error(n("datasource.primary_key_length")+a.fields[t].name);return}fa("returnItem",za(a)),L.value&&((l=b==null?void 0:b.value)==null||l.invokeMethod({methodName:"resetForm",args:[]})),S.value=!1},ta=()=>{N.value-=1},la=()=>{var l;L.value?(l=b==null?void 0:b.value)==null||l.invokeMethod({methodName:"submitForm",args:[{eventName:"stepNext",args:a}]}):A.value.validate(t=>{t&&xe()})},xe=()=>{var t,s;if(a.useJsonPath&&!a.jsonPath){x.error(n("datasource.please_input_dataPath"));return}if(a.type==="params"){for(let o=0;o<p.length;o++)if(p[o].name===a.name&&a.serialNumber!==p[o].serialNumber){x.error(n("data_source.name_already_exists_de"));return}}else for(let o=0;o<$.length;o++)if($[o].name===a.name&&a.serialNumber!==$[o].serialNumber){x.error(n("datasource.has_repeat_name"));return}(s=(t=me)["/datasource/checkApiDatasource"])==null||s.call(t);const l=Z.encode(JSON.stringify(p));ie.value=!0,j.value=!0,Ne({dsType:U.value,data:Z.encode(JSON.stringify(a)),paramsList:l}).then(o=>{ie.value=!1,j.value=!1,a.jsonFields=o.data.jsonFields,a.fields=[],a.name=o.data.name,we(a),ue(),N.value+=1}).catch(o=>{ie.value=!1,j.value=!1,console.warn(o==null?void 0:o.message)})},sa=()=>{var l;L.value?(l=b==null?void 0:b.value)==null||l.invokeMethod({methodName:"submitForm",args:[{eventName:"validateItem",args:a}]}):A.value.validate(t=>{if(t)Pe();else return})},Pe=()=>{var t,s;if(a.useJsonPath&&!a.jsonPath){x.error(n("datasource.please_input_dataPath"));return}(s=(t=me)["/datasource/checkApiDatasource"])==null||s.call(t);const l=Z.encode(JSON.stringify(p));j.value=!0,Ne({dsType:U.value,data:Z.encode(JSON.stringify(a)),paramsList:l}).then(o=>{j.value=!1,a.jsonFields=o.data.jsonFields,a.fields=[],a.name=o.data.name,we(a),ue(),x.success(n("datasource.validate_success"))}).catch(()=>{j.value=!1,x.error(n("data_source.verification_failed"))})},na=l=>{const t=l.validate;t(s=>{s&&(l.eventName==="validateItem"?Pe():xe())})},Te=()=>{var l,t,s;(t=(l=me)["/datasource/checkApiDatasource"])==null||t.call(l),L.value&&((s=b==null?void 0:b.value)==null||s.invokeMethod({methodName:"resetForm",args:[]})),S.value=!1},oa=l=>!!(l.hasOwnProperty("children")&&l.children.length>0),ra=l=>l.hasOwnProperty("children")&&l.children.length>0?!0:l.deExtractType!==0,ia=l=>l.hasOwnProperty("children")&&l.children.length>0?!0:B.value||be.value?!1:!!(K.value||!l.checked),ua=l=>!!(a.type=="params"||l.hasOwnProperty("children")&&l.children.length>0),da=l=>{l.deExtractType!==0&&(l.length="")},ue=()=>{H.value=!1;const l=[],t=[];let s=0;for(let o=0;o<a.fields.length;o++)a.fields[o].value&&a.fields[o].value.length>s&&(s=a.fields[o].value.length);for(let o=0;o<s;o++)l.push({});for(let o=0;o<a.fields.length;o++){for(let f=0;f<a.fields[o].value.length;f++)l[f][a.fields[o].name]=a.fields[o].value[f];t.push({key:a.fields[o].name,dataKey:a.fields[o].name,title:a.fields[o].name,width:150})}le.value=l,te.value=t,H.value=a.fields.length===0},$e=(l,t)=>{var s;(s=t.children)!=null&&s.length&&t.children.forEach(o=>{o.checked=t.checked,$e(l,o)})},we=l=>{for(var t=0;t<l.jsonFields.length;t++)l.jsonFields[t].checked&&l.jsonFields[t].children===void 0&&l.fields.push(l.jsonFields[t]),l.jsonFields[t].children!==void 0&&je(l,l.jsonFields[t].children)},je=(l,t)=>{var f;for(var s=0;s<t.length;s++){if(t[s].checked&&t[s].children===void 0){for(var o=0;o<l.fields.length;o++)l.fields[o].name===t[s].name&&(t[s].checked=!1,Me(()=>{t[s].checked=!1}),G.push(t[s].name));l.fields.push(t[s])}(f=t[s].children)!=null&&f.length&&je(l,t[s].children)}},ca=l=>{G=[],$e(a,l),a.fields=[],we(a),ue(),G.length&&x.error([...new Set(G)].join(",")+", "+n("datasource.has_repeat_field_name"))},pa=l=>{a.request.body.typeChange=l},de=_(!0),ce=_(!0),ma=()=>{var t;const l=ye.value.filter(s=>s.type===U.value);return ge.value?ge.value:l&&l.length>0?(t=l[0].staticMap)==null?void 0:t.index:null},fa=d;return z({initApiItem:We}),(l,t)=>{const s=at,o=et,f=Na,V=Ua,ne=Fa,X=qa,E=Ca,D=$a,Fe=ja,qe=Da,ke=Ta,Ue=Pa,va=Ba,ha=Va,_a=xa,ya=ka,De=wa;return m(),k(ya,{title:c.value==="table"?e(n)("datasource.data_table"):e(n)("data_source.interface_parameters"),modelValue:S.value,"onUpdate:modelValue":t[9]||(t[9]=r=>S.value=r),"modal-class":"api-datasource-drawer",size:"1000px","before-close":Te,direction:"rtl"},{footer:i(()=>[u(E,{secondary:"",onClick:Te},{default:i(()=>[T(y(e(n)("common.cancel")),1)]),_:1}),P(u(E,{disabled:j.value,secondary:"",onClick:sa},{default:i(()=>[T(y(e(n)("commons.validate")),1)]),_:1},8,["disabled"]),[[O,N.value===0]]),P(u(E,{type:"primary",disabled:ie.value,onClick:la},{default:i(()=>[T(y(e(n)("common.next")),1)]),_:1},8,["disabled"]),[[O,N.value===0]]),P(u(E,{secondary:"",onClick:ta},{default:i(()=>[T(y(e(n)("common.prev")),1)]),_:1},512),[[O,N.value===1]]),P(u(E,{type:"primary",onClick:aa},{default:i(()=>[T(y(e(n)("commons.save")),1)]),_:1},512),[[O,N.value===1]])]),default:i(()=>[h("div",tt,[u(o,{custom:"",style:{"max-width":"400px",flex:"1"},active:N.value,"align-center":""},{default:i(()=>[u(s,null,{title:i(()=>[T(y(e(n)("datasource.api_step_1")),1)]),_:1}),u(s,null,{title:i(()=>[T(y(c.value==="table"?e(n)("datasource.api_step_2"):e(n)("data_source.extract_parameters")),1)]),_:1})]),_:1},8,["active"])]),P(u(ke,null,{default:i(()=>[P((m(),k(qe,{ref_key:"apiItemBasicInfo",ref:A,model:e(a),"label-position":"top","label-width":"100px","require-asterisk-position":"right",rules:se},{default:i(()=>[h("div",lt,[h("span",null,y(e(n)("datasource.base_info")),1)]),u(V,{label:e(n)("common.name"),prop:"name"},{default:i(()=>[u(f,{modelValue:e(a).name,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).name=r),placeholder:e(n)("common.input_name"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(V,{label:e(n)("datasource.request"),prop:"url"},{default:i(()=>[u(f,{modelValue:e(a).url,"onUpdate:modelValue":t[2]||(t[2]=r=>e(a).url=r),placeholder:e(n)("datasource.path_all_info"),class:"input-with-select"},{prepend:i(()=>[u(X,{modelValue:e(a).method,"onUpdate:modelValue":t[1]||(t[1]=r=>e(a).method=r)},{default:i(()=>[(m(),C(ve,null,Ee(Ze,r=>u(ne,{key:r.id,label:r.label,value:r.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),P((m(),C("div",null,[h("div",st,[h("span",null,y(e(n)("datasource.req_param")),1)]),u(V,{class:"line-height_18"},{default:i(()=>[S.value?(m(),k(Ka,{key:0,request:e(a).request,"value-list":M.value,onChangeId:pa},null,8,["request","value-list"])):q("",!0)]),_:1})])),[[De,W.value]]),u(V,{label:l.$t("datasource.query_timeout"),prop:"apiQueryTimeout"},{default:i(()=>[u(f,{modelValue:e(a).apiQueryTimeout,"onUpdate:modelValue":t[3]||(t[3]=r=>e(a).apiQueryTimeout=r),autocomplete:"off",type:"number",min:0},{append:i(()=>[T(y(l.$t("chart.second")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),h("div",nt,[h("span",null,y(e(n)("datasource.isUseJsonPath")),1)]),u(V,null,{default:i(()=>[u(f,{modelValue:e(a).jsonPath,"onUpdate:modelValue":t[5]||(t[5]=r=>e(a).jsonPath=r),placeholder:e(n)("datasource.jsonpath_info"),class:"input-with-select"},{prepend:i(()=>[u(X,{modelValue:e(a).useJsonPath,"onUpdate:modelValue":t[4]||(t[4]=r=>e(a).useJsonPath=r),style:{width:"100px"}},{default:i(()=>[(m(),C(ve,null,Ee(Ye,r=>u(ne,{key:r.label,label:r.label,value:r.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),append:i(()=>[u(E,{onClick:Xe},{default:i(()=>[T(y(e(n)("data_source.view_data_structure")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),P(h("div",ot,[h("span",null,y(e(n)("datasource.column_info")),1)],512),[[O,e(a).useJsonPath]]),P(h("div",rt,[u(Fe,{data:J.jsonFields,style:{width:"100%"},"row-key":"jsonPath"},{default:i(()=>[u(D,{"class-name":"checkbox-table",prop:"originName",label:e(n)("datasource.parse_filed"),"show-overflow-tooltip":""},{default:i(r=>[T(y(r.row.originName),1)]),_:1},8,["label"])]),_:1},8,["data"])],512),[[O,e(a).useJsonPath]])]),_:1},8,["model","rules"])),[[De,j.value]])]),_:1},512),[[O,N.value===0&&U.value==="API"]]),P(u(ke,null,{default:i(()=>[U.value!=="API"?(m(),k(e(La),{key:0,jsname:Ve.value,"api-item":e(a),ref_key:"xpackApiItemBasicInfo",ref:b,onSubmitForm:na},null,8,["jsname","api-item"])):q("",!0)]),_:1},512),[[O,N.value===0&&U.value!=="API"]]),P(u(ke,null,{default:i(()=>[u(qe,{style:{width:"100%"},ref_key:"apiItemForm",ref:ae,model:e(a),"label-position":"top","label-width":"100px",rules:se},{default:i(()=>[h("p",{class:v([de.value?"active":"deactivate","column-info-title"]),onClick:t[6]||(t[6]=r=>de.value=!de.value)},[u(e(I),{style:{"font-size":"10px"}},{default:i(()=>[u(e(pe),{name:"icon_expand-right_filled"},{default:i(()=>[u(e(Ke),{class:"svg-icon"})]),_:1})]),_:1}),h("span",it,y(e(n)("datasource.column_info")),1)],2),P(h("div",ut,[u(Fe,{"header-cell-class-name":"header-cell",data:e(a).jsonFields,style:{width:"100%"},"row-key":"jsonPath"},{default:i(()=>[u(D,{"class-name":"checkbox-table",prop:"originName",label:e(n)("datasource.parse_filed"),width:"200"},{default:i(r=>[(m(),k(Ue,{style:{display:"inline-block","max-width":"80px","white-space":"nowrap"},key:r.row.jsonPath,modelValue:r.row.checked,"onUpdate:modelValue":g=>r.row.checked=g,disabled:e(a).useJsonPath,onChange:g=>ca(r.row)},{default:i(()=>[h("span",{title:r.row.originName,class:"ellipsis",style:{display:"inline-block","max-width":"80px"}},y(r.row.originName),9,dt)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"]))]),_:1},8,["label"]),u(D,{prop:"name",label:e(n)("datasource.field_rename")},{default:i(r=>[u(f,{modelValue:r.row.name,"onUpdate:modelValue":g=>r.row.name=g,disabled:oa(r.row),text:"",onChange:t[7]||(t[7]=g=>ue())},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1},8,["label"]),u(D,{prop:"deExtractType",label:e(n)("datasource.field_type"),disabled:e(a).type==="params"},{default:i(r=>[u(X,{modelValue:r.row.deExtractType,"onUpdate:modelValue":g=>r.row.deExtractType=g,disabled:ua(r.row),class:"select-type",style:{display:"inline-block",width:"120px"},onChange:g=>da(r.row)},{prefix:i(()=>[u(e(I),null,{default:i(()=>[u(e(pe),{className:`field-icon-${e(Y)[r.row.deExtractType]}`},{default:i(()=>[(m(),k(he(e(Ie)[e(Y)[r.row.deExtractType]]),{class:v(["svg-icon",`field-icon-${e(Y)[r.row.deExtractType]}`])},null,8,["class"]))]),_:2},1032,["className"])]),_:2},1024)]),default:i(()=>[(m(),C(ve,null,Ee(ea,g=>u(ne,{key:g.value,label:g.label,value:g.value},{default:i(()=>[h("span",ct,[u(e(I),null,{default:i(()=>[u(e(pe),{className:`field-icon-${e(Y)[g.value]}`},{default:i(()=>[(m(),k(he(e(Ie)[e(Y)[g.value]]),{class:v(["svg-icon",`field-icon-${e(Y)[g.value]}`])},null,8,["class"]))]),_:2},1032,["className"])]),_:2},1024)]),h("span",pt,y(g.label),1)]),_:2},1032,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1},8,["label","disabled"]),e(a).type!=="params"?(m(),k(D,{key:0,prop:"length",label:e(n)("datasource.length")},{default:i(r=>[u(va,{disabled:ra(r.row),modelValue:r.row.length,"onUpdate:modelValue":g=>r.row.length=g,autocomplete:"off","step-strictly":"",class:"text-left edit-all-line",min:1,max:512,placeholder:e(n)("common.inputText"),"controls-position":"right",type:"number"},null,8,["disabled","modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"])):q("",!0),e(a).type!=="params"&&re.value?(m(),k(D,{key:1,prop:"primaryKey","class-name":"checkbox-table",label:e(n)("datasource.set_key"),width:"100"},{default:i(r=>[(m(),k(Ue,{key:r.row.jsonPath,modelValue:r.row.primaryKey,"onUpdate:modelValue":g=>r.row.primaryKey=g,disabled:ia(r.row)},null,8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1},8,["label"])):q("",!0)]),_:1},8,["data"])],512),[[O,de.value]]),h("p",{class:v([ce.value?"active":"deactivate","column-info-title"]),onClick:t[8]||(t[8]=r=>ce.value=!ce.value)},[u(e(I),{style:{"font-size":"10px"}},{default:i(()=>[u(e(pe),{name:"icon_expand-right_filled"},{default:i(()=>[u(e(Ke),{class:"svg-icon"})]),_:1})]),_:1}),h("span",mt,y(e(n)("datasource.data_preview")),1)],2),P(h("div",{class:"info-table",style:fe({height:Math.min(le.value.length,20)*40+"px"})},[H.value?(m(),k(Ia,{key:0,description:e(n)("data_source.the_data_structure"),"img-type":"select"},null,8,["description"])):(m(),k(_a,{key:1},{default:i(({height:r,width:g})=>[u(ha,{columns:te.value,"header-class":"header-cell",data:le.value,width:g,height:r,fixed:""},null,8,["columns","data","width","height"])]),_:1}))],4),[[O,ce.value]])]),_:1},8,["model","rules"])]),_:1},512),[[O,N.value===1]])]),_:1},8,["title","modelValue"])}}});export{at as E,At as _,et as a};
