import{n as He,o as c,c as T,a as C,T as z,V as wa,d as Be,t as ft,S as Ke,a8 as Pt,u as e,U as y,_ as _e,Y,r as I,W as h,k as w,l as At,b as bt,e as Zt,w as Ct,ae as ba,R as F,X as Rt,z as Xe,h as da,$ as Qe,Z as Pe,L as vn,a0 as pt,p as pn,aa as Ao,aU as zo,M as Oo,a7 as Bn}from"./@vue-0.0.0-dataease.js";import{b as ta,d as Eo,a as Sn,t as $o,g as La,e as Ga,f as Fn,s as Ca,h as Aa,i as Ln}from"./style-0.0.0-dataease.js";import{i as Mt,e as Dt,M as ma,f as Jt,z as An,G as Wa,H as Za,I as Na,g as qo,E as va,v as Sa,h as Yt,y as Ro,R as fn,S as zn,A as Go,a6 as Wo,p as On,x as Zo,B as No,w as En,r as $n,s as jo}from"./element-plus-secondary-0.0.0-dataease.js";import{e as ne}from"./eventBus-0.0.0-dataease.js";import Uo from"./Component-0.0.0-dataease18.js";import{d as Xo,V as Yo}from"./Component-0.0.0-dataease17.js";import Jo from"./Attr-0.0.0-dataease22.js";import{d as ot,f as Qo}from"./dvMain-0.0.0-dataease.js";import{s as at,d as qn}from"./pinia-0.0.0-dataease.js";import{i as Rn}from"./icon_replace_outlined-0.0.0-dataease.js";import{g as Qt,c as Ue,m as ln,a as za,t as Ma}from"./translate-0.0.0-dataease.js";import{l as Kt,u as ze,m as Gn,i as pa,o as Wn,z as kn,A as Ko,_ as el,p as tl,f as al,w as nl,r as ol,g as ll}from"./index-0.0.0-dataease.js";import{s as Nt}from"./snapshot-0.0.0-dataease.js";import{d as Zn,c as ja,a as hn,e as ua,f as _a,l as il,h as Da,i as Nn}from"./DeShortcutKey-0.0.0-dataease.js";import{i as Ua,a as mn}from"./imgUtils-0.0.0-dataease.js";import{j as gn,f as Tt,e as gt,i as fa,m as sl,u as rl,r as Lt}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as ul}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as cl}from"./icon_add_outlined-0.0.0-dataease.js";import{i as dl}from"./chart-list-0.0.0-dataease.js";import{i as vl}from"./icon_more_outlined-0.0.0-dataease.js";import{i as ca}from"./icon_download_outlined-0.0.0-dataease.js";import{af as jn}from"./chart-0.0.0-dataease.js";import{_ as Re}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import{t as Un}from"./@element-plus-0.0.0-dataease.js";import{d as pl}from"./vuedraggable-0.0.0-dataease.js";import{e as Xn,C as ea,s as fl}from"./index-0.0.0-dataease12.js";import"./web-storage-cache-0.0.0-dataease.js";import{u as Ve,v as hl,w as ml,n as sn,t as rn,x as st,k as Yn,y as In,z as Vn,A as gl,j as yl,d as Mn,B as Oa,C as Jn,m as Qn,D as _l,i as wl,o as Cl,E as bl,F as xl}from"./canvasUtils-0.0.0-dataease.js";import{B as ha,_ as Sl}from"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{a as ka,r as Kn}from"./watermark-0.0.0-dataease2.js";import{$ as un}from"./jquery-0.0.0-dataease.js";import{_ as Ft}from"./lodash-0.0.0-dataease.js";import{g as Ia}from"./util-0.0.0-dataease.js";import{t as kl}from"./html-to-image-0.0.0-dataease.js";import cn from"./ChartComponentS2-0.0.0-dataease.js";import{E as Ea}from"./EmptyBackground-0.0.0-dataease.js";import{M as Dn,d as eo}from"./lodash-es-0.0.0-dataease.js";import{L as Il,a as Vl}from"./LinkageSet-0.0.0-dataease.js";import{b as yn}from"./canvasStyle-0.0.0-dataease.js";import{m as Ml,d as dn}from"./mathjs-0.0.0-dataease.js";import{c as Dl,i as Pl}from"./dataVisualization-0.0.0-dataease2.js";import{_ as Tl}from"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import Hl from"./Component-0.0.0-dataease16.js";import{_ as Bl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import Fl from"./Component-0.0.0-dataease13.js";import Ll from"./Attr-0.0.0-dataease16.js";import Al from"./Component-0.0.0-dataease10.js";import{_ as zl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import Ol from"./Component-0.0.0-dataease5.js";import{_ as El}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease3.js";import $l from"./Attr-0.0.0-dataease.js";import ql from"./Component-0.0.0-dataease3.js";import{_ as Rl}from"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import{e as to}from"./element-resize-detector-0.0.0-dataease.js";import Gl from"./Attr-0.0.0-dataease9.js";import Wl from"./Component-0.0.0-dataease6.js";import Zl from"./Attr-0.0.0-dataease6.js";import Nl from"./Component-0.0.0-dataease4.js";import{_ as jl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease4.js";import Ul from"./Component-0.0.0-dataease14.js";import{_ as Xl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease5.js";import{C as Yl}from"./CommonAttr-0.0.0-dataease.js";import{_ as Jl}from"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import Ql from"./Attr-0.0.0-dataease10.js";import Kl from"./Component-0.0.0-dataease11.js";import{_ as ei}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease6.js";import{_ as ti}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease7.js";import{g as Pn}from"./js-base64-0.0.0-dataease.js";import{u as ai}from"./vue-router_2-0.0.0-dataease.js";import{e as ni}from"./dataVisualization-0.0.0-dataease.js";import{d as oi}from"./dv-dashboard-spine-0.0.0-dataease.js";import{d as li}from"./dv-folder-0.0.0-dataease.js";import ii from"./Attr-0.0.0-dataease7.js";import si from"./Component-0.0.0-dataease9.js";import{_ as ri}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease8.js";import ui from"./Component-0.0.0-dataease7.js";import{_ as ci}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease9.js";import di from"./Component-0.0.0-dataease15.js";import vi from"./Attr-0.0.0-dataease19.js";import{_ as pi}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease10.js";import fi from"./Component-0.0.0-dataease12.js";import hi from"./Attr-0.0.0-dataease15.js";import{_ as mi}from"./index-0.0.0-dataease17.js";import gi from"./Component-0.0.0-dataease2.js";import{i as yi}from"./icon_left_outlined-0.0.0-dataease.js";import{i as _i}from"./ModelUtil-0.0.0-dataease.js";const Ha=ot(),{componentData:Tn,curComponentIndex:Hn,canvasStyleData:$a}=at(Ha),qa={width:["left","width","fontSize","activeFontSize","letterSpacing"],height:["top","height"]};function Id(t){return ao(t)}function Vd(t){return ao(t)}function Ba(t,n){!t||!Array.isArray(t)||t==null||t.forEach(r=>{if(Object.keys(r.style).forEach(o=>{qa.width.includes(o)?r.style[o]&&(r.style[o]=xa(Ra(r.style[o],$a.value.scale),n)):qa.height.includes(o)&&(r.style[o]=xa(Ra(r.style[o],$a.value.scaleHeight),n))}),["Group"].includes(r.component)){ta(r);const o=r.style;r.propValue.forEach(_=>{["DeTabs"].includes(_.component)?_.propValue.forEach(f=>{Ba(f.componentData,n)}):(Ba(_.propValue,n),Eo(_,o))})}else["DeTabs"].includes(r.component)&&r.propValue.forEach(o=>{Ba(o.componentData,n)});if(["Group","DeTabs"].includes(r.component))try{He(()=>ta(r))}catch(o){console.error("group adaptor error:"+o)}})}function ao(t){const n=Kt(Tn.value);Ba(n,t),Ha.setComponentData(n),Ha.setCurComponent({component:Tn.value[Hn.value],index:Hn.value}),Ha.setCanvasStyle({...$a.value,scaleWidth:t,scaleHeight:t,scale:t})}function no(t,n,r,o,_){t.forEach(f=>{Object.keys(f.style).forEach(d=>{qa.width.includes(d)?f.style[d]=xa(Ra(f.style[d],n.scale||_),r):qa.height.includes(d)&&(f.style[d]=xa(Ra(f.style[d],n.scaleHeight||_),o))}),f.component==="Group"&&no(f.propValue,n,r,o,_)})}function wi(t,n,r,o,_){no(t,n,r,o,_),n.scale=r,n.scaleWidth=r,n.scaleHeight=o}const Ci=["width","height","fontSize"];function bi(t,n=$a.value.scale){Object.keys(t.style).forEach(r=>{if(Ci.includes(r)){if(r==="fontSize"&&t.style[r]==="")return;t.style[r]=xa(t.style[r],n)}})}function xa(t,n){return Ml(t,dn(parseFloat(n),100))}function Ra(t=0,n){return t||(t=0),dn(t,dn(parseFloat(n),100))}function Md(t){return gn.get({url:"/outerParams/queryWithVisualizationId/"+t})}function Dd(t){return gn.post({url:"/outerParams/updateOuterParamsSet",data:t,loading:!0})}function xi(t){return gn.get({url:"/outerParams/getOuterParamsInfo/"+t,method:"get",loading:!1})}const Si={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function ki(t,n){return c(),T("svg",Si,[...n[0]||(n[0]=[C("path",{d:"M0 2C0 0.895431 0.895431 0 2 0H14C15.1046 0 16 0.895431 16 2V14C16 15.1046 15.1046 16 14 16H2C0.895431 16 0 15.1046 0 14V2Z"},null,-1),C("path",{d:"M11.5881 4.90381L12.3966 5.71231C12.4291 5.74481 12.4549 5.78339 12.4725 5.82586C12.4901 5.86833 12.4992 5.91384 12.4992 5.95981C12.4992 6.00577 12.4901 6.05129 12.4725 6.09375C12.4549 6.13622 12.4291 6.17481 12.3966 6.20731L7.17813 11.4258C7.14563 11.4583 7.10705 11.4841 7.06458 11.5017C7.02212 11.5193 6.9766 11.5283 6.93063 11.5283C6.88467 11.5283 6.83915 11.5193 6.79669 11.5017C6.75422 11.4841 6.71564 11.4583 6.68313 11.4258L3.70213 8.44481C3.66963 8.41231 3.64385 8.37372 3.62625 8.33126C3.60866 8.28879 3.59961 8.24327 3.59961 8.19731C3.59961 8.15134 3.60866 8.10583 3.62625 8.06336C3.64385 8.0209 3.66963 7.98231 3.70213 7.94981L4.51063 7.14181C4.54314 7.1093 4.58172 7.08352 4.62419 7.06593C4.66665 7.04834 4.71217 7.03928 4.75813 7.03928C4.8041 7.03928 4.84962 7.04834 4.89208 7.06593C4.93455 7.08352 4.97313 7.1093 5.00563 7.14181L6.93063 9.06631L11.0936 4.90331C11.1261 4.8708 11.1647 4.84502 11.2072 4.82743C11.2497 4.80984 11.2952 4.80078 11.3411 4.80078C11.3871 4.80078 11.4326 4.80984 11.4751 4.82743C11.5175 4.84502 11.5556 4.8713 11.5881 4.90381Z",fill:"white"},null,-1)])])}const Ii={render:ki},Vi={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Mi(t,n){return c(),T("svg",Vi,[...n[0]||(n[0]=[C("path",{d:"M3.79167 4.66602V4.37435C3.79167 2.60102 5.22842 1.16602 7 1.16602C8.77158 1.16602 10.2083 2.60102 10.2083 4.37435V4.66602H11.6667C11.9887 4.66602 12.25 4.92852 12.25 5.24935V12.2493C12.25 12.5702 11.9887 12.8327 11.6667 12.8327H2.33333C2.01075 12.8327 1.75 12.5702 1.75 12.2493V5.24935C1.75 4.92852 2.01075 4.66602 2.33333 4.66602H3.79167ZM9.04167 4.37435C9.04167 3.2456 8.12758 2.33268 7 2.33268C6.73186 2.33261 6.46634 2.38536 6.2186 2.48794C5.97086 2.59052 5.74575 2.7409 5.55615 2.9305C5.36655 3.1201 5.21617 3.34521 5.11359 3.59295C5.01101 3.84069 4.95826 4.10621 4.95833 4.37435V4.66602H9.04167V4.37435Z",fill:"#A6A6A6"},null,-1)])])}const Di={render:Mi},Pi={lt:Ti,t:Li,rt:Hi,r:Ai,rb:Bi,b:zi,lb:Fi,l:Oi};function Ti(t,n,r,o,_){const{symmetricPoint:f}=_;let d=Qt(n,f),i=Ue(n,d,-t.rotate),l=Ue(f,d,-t.rotate),s=l.x-i.x,v=l.y-i.y;if(o){s/v>r?(i.x+=Math.abs(s-v*r),s=v*r):(i.y+=Math.abs(v-s/r),v=s/r);const u=Ue(i,d,t.rotate);d=Qt(u,f),i=Ue(u,d,-t.rotate),l=Ue(f,d,-t.rotate),s=l.x-i.x,v=l.y-i.y}s>0&&v>0&&(t.width=Math.round(s),t.height=Math.round(v),t.left=Math.round(i.x),t.top=Math.round(i.y))}function Hi(t,n,r,o,_){const{symmetricPoint:f}=_;let d=Qt(n,f),i=Ue(n,d,-t.rotate),l=Ue(f,d,-t.rotate),s=i.x-l.x,v=l.y-i.y;if(o){s/v>r?(i.x-=Math.abs(s-v*r),s=v*r):(i.y+=Math.abs(v-s/r),v=s/r);const u=Ue(i,d,t.rotate);d=Qt(u,f),i=Ue(u,d,-t.rotate),l=Ue(f,d,-t.rotate),s=i.x-l.x,v=l.y-i.y}s>0&&v>0&&(t.width=Math.round(s),t.height=Math.round(v),t.left=Math.round(l.x),t.top=Math.round(i.y))}function Bi(t,n,r,o,_){const{symmetricPoint:f}=_;let d=Qt(n,f),i=Ue(f,d,-t.rotate),l=Ue(n,d,-t.rotate),s=l.x-i.x,v=l.y-i.y;if(o){s/v>r?(l.x-=Math.abs(s-v*r),s=v*r):(l.y-=Math.abs(v-s/r),v=s/r);const u=Ue(l,d,t.rotate);d=Qt(u,f),i=Ue(f,d,-t.rotate),l=Ue(u,d,-t.rotate),s=l.x-i.x,v=l.y-i.y}s>0&&v>0&&(t.width=Math.round(s),t.height=Math.round(v),t.left=Math.round(i.x),t.top=Math.round(i.y))}function Fi(t,n,r,o,_){const{symmetricPoint:f}=_;let d=Qt(n,f),i=Ue(f,d,-t.rotate),l=Ue(n,d,-t.rotate),s=i.x-l.x,v=l.y-i.y;if(o){s/v>r?(l.x+=Math.abs(s-v*r),s=v*r):(l.y-=Math.abs(v-s/r),v=s/r);const u=Ue(l,d,t.rotate);d=Qt(u,f),i=Ue(f,d,-t.rotate),l=Ue(u,d,-t.rotate),s=i.x-l.x,v=l.y-i.y}s>0&&v>0&&(t.width=Math.round(s),t.height=Math.round(v),t.left=Math.round(l.x),t.top=Math.round(i.y))}function Li(t,n,r,o,_){const{symmetricPoint:f,curPoint:d}=_,i=Ue(n,d,-t.rotate),l=Ue({x:d.x,y:i.y},d,t.rotate),s=Math.sqrt((l.x-f.x)**2+(l.y-f.y)**2),v={x:l.x-(l.x-f.x)/2,y:l.y+(f.y-l.y)/2};let u=t.width;o&&(u=s*r),t.width=u,t.height=Math.round(s),t.top=Math.round(v.y-s/2),t.left=Math.round(v.x-t.width/2)}function Ai(t,n,r,o,_){const{symmetricPoint:f,curPoint:d}=_,i=Ue(n,d,-t.rotate),l=Ue({x:i.x,y:d.y},d,t.rotate),s=Math.sqrt((l.x-f.x)**2+(l.y-f.y)**2),v={x:l.x-(l.x-f.x)/2,y:l.y+(f.y-l.y)/2};let u=t.height;o&&(u=s/r),t.height=u,t.width=Math.round(s),t.top=Math.round(v.y-t.height/2),t.left=Math.round(v.x-s/2)}function zi(t,n,r,o,_){const{symmetricPoint:f,curPoint:d}=_,i=Ue(n,d,-t.rotate),l=Ue({x:d.x,y:i.y},d,t.rotate),s=Math.sqrt((l.x-f.x)**2+(l.y-f.y)**2),v={x:l.x-(l.x-f.x)/2,y:l.y+(f.y-l.y)/2};let u=t.width;o&&(u=s*r),t.width=u,t.height=Math.round(s),t.top=Math.round(v.y-s/2),t.left=Math.round(v.x-t.width/2)}function Oi(t,n,r,o,_){const{symmetricPoint:f,curPoint:d}=_,i=Ue(n,d,-t.rotate),l=Ue({x:i.x,y:d.y},d,t.rotate),s=Math.sqrt((l.x-f.x)**2+(l.y-f.y)**2),v={x:l.x-(l.x-f.x)/2,y:l.y+(f.y-l.y)/2};let u=t.height;o&&(u=s/r),t.height=u,t.width=Math.round(s),t.top=Math.round(v.y-t.height/2),t.left=Math.round(v.x-s/2)}function Ei(t,n,r,o,_,f){Pi[t](n,r,o,_,f)}function $i(t,n,r){["b"].includes(t)?(n.left=Math.round(r.x-n.width/2),n.top=r.y):["t"].includes(t)?(n.left=Math.round(r.x-n.width/2),n.top=r.y-n.height):["l"].includes(t)?(n.left=r.x-n.width,n.top=Math.round(r.y-n.height/2)):["r"].includes(t)?(n.left=r.x,n.top=Math.round(r.y-n.height/2)):["lt"].includes(t)?(n.left=r.x-n.width,n.top=r.y-n.height):["lb"].includes(t)?(n.left=r.x-n.width,n.top=r.y):["rt"].includes(t)?(n.left=r.x,n.top=r.y-n.height):["rb"].includes(t)&&(n.left=r.x,n.top=r.y)}const qi={t:"1688563367121",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4587","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function Ri(t,n){return c(),T("svg",qi,[...n[0]||(n[0]=[C("path",{d:"M470.624 553.376a32 32 0 0 1 2.656 42.24l-2.656 3.008L269.28 800l145.984 0.032a32 32 0 0 1 31.776 28.256l0.224 3.744a32 32 0 0 1-28.288 31.776l-3.712 0.224H192l-2.4-0.096-4.032-0.544-3.552-0.96-3.552-1.408-3.136-1.664-3.072-2.144-2.88-2.56a32.32 32.32 0 0 1-3.104-3.584l-2.272-3.52-1.728-3.648-1.12-3.36-0.96-4.8L160 832V607.872a32 32 0 0 1 63.776-3.712l0.224 3.712-0.032 146.848 201.408-201.344a32 32 0 0 1 45.248 0zM608.736 160H832l2.4 0.096 4.032 0.544 3.552 0.96 3.552 1.408 3.136 1.664 3.072 2.144 2.88 2.56c1.152 1.12 2.176 2.336 3.104 3.584l2.272 3.52 1.728 3.648 1.12 3.36 0.96 4.8L864 192v224.128a32 32 0 0 1-63.776 3.712l-0.224-3.712v-146.88L598.624 470.624a32 32 0 0 1-47.904-42.24l2.656-3.008L754.688 224h-145.92a32 32 0 0 1-31.808-28.256l-0.224-3.744a32 32 0 0 1 28.288-31.776l3.712-0.224z","p-id":"4588"},null,-1)])])}const Gi={render:Ri},Wi={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function Zi(t,n){return c(),T("svg",Wi,[...n[0]||(n[0]=[C("path",{d:"M3.33333 1.99935V13.9993H12.6667V1.99935H3.33333ZM2.66667 0.666016H13.3333C13.7015 0.666016 14 0.978706 14 1.36443V14.6343C14 15.02 13.7015 15.3327 13.3333 15.3327H2.66667C2.29848 15.3327 2 15.02 2 14.6343V1.36443C2 0.978706 2.29848 0.666016 2.66667 0.666016ZM5 4.66602H7.66667C7.85076 4.66602 8 4.81525 8 4.99935V5.66602C8 5.85011 7.85076 5.99935 7.66667 5.99935H5C4.81591 5.99935 4.66667 5.85011 4.66667 5.66602V4.99935C4.66667 4.81525 4.81591 4.66602 5 4.66602ZM5 7.33268H11C11.1841 7.33268 11.3333 7.48192 11.3333 7.66602V8.33268C11.3333 8.51678 11.1841 8.66602 11 8.66602H5C4.81591 8.66602 4.66667 8.51678 4.66667 8.33268V7.66602C4.66667 7.48192 4.81591 7.33268 5 7.33268ZM5 9.99935H11C11.1841 9.99935 11.3333 10.1486 11.3333 10.3327V10.9993C11.3333 11.1834 11.1841 11.3327 11 11.3327H5C4.81591 11.3327 4.66667 11.1834 4.66667 10.9993V10.3327C4.66667 10.1486 4.81591 9.99935 5 9.99935Z"},null,-1)])])}const Ni={render:Zi},ji={t:"1689603006162",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4590","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function Ui(t,n){return c(),T("svg",ji,[...n[0]||(n[0]=[C("path",{d:"M611.754667 710.613333a38.144 38.144 0 0 1 0 53.930667l-123.818667 123.818667c-95.530667 95.530667-256.341333 95.530667-351.872 0-95.488-95.488-95.488-256.341333 0-351.829334l123.818667-123.818666a38.144 38.144 0 1 1 53.973333 53.930666L190.037333 590.506667c-70.528 73.685333-74.069333 177.28-3.626666 247.637333 70.4 70.4 170.453333 72.234667 247.594666-3.669333l123.818667-123.818667a38.144 38.144 0 0 1 53.930667 0z m-199.509334-397.226666a38.144 38.144 0 0 1 0-53.930667l123.818667-123.818667c95.488-95.530667 256.341333-95.530667 351.872 0 95.488 95.488 95.488 256.341333 0 351.829334l-123.818667 123.818666a38.144 38.144 0 1 1-53.930666-53.930666l123.776-123.818667c70.528-73.685333 74.069333-177.28 3.669333-247.637333-70.357333-70.4-170.453333-72.234667-247.594667 3.669333l-123.861333 123.818667a38.144 38.144 0 0 1-53.930667 0z m232.362667 512.426666a32.682667 32.682667 0 0 1 65.408 0v65.450667a32.682667 32.682667 0 1 1-65.408 0v-65.408z m208.042667 27.434667a33.621333 33.621333 0 0 1-47.445334-0.554667l-45.482666-46.421333a33.28 33.28 0 0 1 47.36-46.890667l45.909333 45.994667a33.621333 33.621333 0 0 1-0.341333 47.872z m-55.466667-176.384c0-20.053333 16.298667-36.309333 36.352-36.309333H891.733333a36.352 36.352 0 0 1 0 72.661333h-58.154666a36.352 36.352 0 0 1-36.309334-36.352zM317.013333 130.773333a32.682667 32.682667 0 1 1 65.408 0v65.408a32.682667 32.682667 0 0 1-65.408 0V130.773333z m-142.677333 37.973334A33.621333 33.621333 0 0 1 221.866667 169.386667l45.482666 46.421333a33.28 33.28 0 0 1-47.36 46.848L173.994667 216.704a33.621333 33.621333 0 0 1 0.341333-47.914667zM98.986667 345.173333c0-20.053333 16.256-36.352 36.352-36.352h58.112a36.352 36.352 0 0 1 0 72.704H135.338667a36.352 36.352 0 0 1-36.352-36.352z","p-id":"4591"},null,-1)])])}const oo={render:Ui},Xi={t:"1574649229600",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3752","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function Yi(t,n){return c(),T("svg",Xi,[C("defs",null,[(c(),z(wa("style"),{type:"text/css"}))]),n[0]||(n[0]=C("path",{d:"M942 191.9C939.8 128.9 748.1 78 512 78S84.2 128.9 82 191.9V831c0 63.5 192.5 115 430 115s430-51.5 430-115V191.9z m-56.7 393.8c-4.6 3.3-11.6 7.4-21.9 12.2-21.3 9.8-50.5 19.1-84.4 26.8-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 0.1-0.1 0.2-0.1 0.3-0.2h-7v-123c72.2 36.4 215.3 61.1 380 61.1s307.8-24.8 380-61.1v122.9h-7l0.3 0.3z m0-177c-4.6 3.3-11.6 7.4-21.9 12.2-21.3 9.8-50.5 19.1-84.4 26.8-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 0.1-0.1 0.2-0.1 0.3-0.2h-7V246.9c72.2 36.4 215.3 61.1 380 61.1s307.8-24.8 380-61.1v161.6h-7c0.1 0 0.2 0.1 0.3 0.2zM160.7 180.8C182 171 211.2 161.7 245 154c74-16.8 168.8-26 267-26s193 9.2 267 26c33.9 7.7 63.1 16.9 84.4 26.8 10.3 4.8 17.3 8.9 21.9 12.2-4.6 3.3-11.6 7.4-21.9 12.2C842 215 812.8 224.3 779 232c-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 4.7-3.3 11.7-7.4 22-12.2zM885.3 831c-4.6 3.3-11.6 7.4-21.9 12.2C842 853 812.8 862.3 779 870c-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 0.1-0.1 0.2-0.1 0.3-0.2h-7V639.5c72.2 36.4 215.3 61.1 380 61.1s307.8-24.8 380-61.1v191.3h-7c0.1 0.1 0.2 0.1 0.3 0.2z","p-id":"3753"},null,-1))])}const Ji={render:Yi},Qi=Be({__name:"FieldsList",props:{fields:{type:Array,default:()=>[]},element:{type:Object,default:null}},setup(t){const n=t,{fields:r,element:o}=ft(n),_=d=>{ze().emitter.emit("fieldSelect-"+o.value.id,d)},f=d=>{d.preventDefault()};return(d,i)=>{const l=Mt;return c(),T("div",{onMousedown:f,class:"field-main"},[(c(!0),T(Ke,null,Pt(e(r),s=>(c(),z(l,{key:s.id,title:s.name,size:"mini",class:"field-area",onClick:v=>_(s)},{default:y(()=>[_e(Y(s.name),1)]),_:2},1032,["title","onClick"]))),128))],32)}}});const Ki=Re(Qi,[["__scopeId","data-v-5d4da404"]]),es=["title"],ts={class:"item-span"},as={class:"dialog-footer"},ns=Be({__name:"CustomTabsSort",setup(t,{expose:n}){const r=Nt(),o=I(null),_=I([]),f=I(!1),d=u=>{i(u),f.value=!0},i=u=>{o.value=u,_.value=Kt(o.value.propValue)},l=()=>{f.value=!1},s=()=>{o.value.propValue=Kt(_.value),r.recordSnapshotCache("tab-sort-save"),ne.emit("onTabSortChange-"+o.value.id),l()},{t:v}=Tt();return n({sortInit:d}),(u,p)=>{const P=gt,O=Dt,b=ma;return c(),z(b,{ref:"enlargeDialog","destroy-on-close":"","append-to-body":!0,title:e(v)("visualization.custom_sort"),modelValue:f.value,"onUpdate:modelValue":p[0]||(p[0]=S=>f.value=S),width:"30vw",top:"10vh"},{footer:y(()=>[C("div",as,[h(e(Mt),{onClick:l},{default:y(()=>[...p[1]||(p[1]=[_e("取消",-1)])]),_:1}),h(e(Mt),{type:"primary",onClick:s},{default:y(()=>[...p[2]||(p[2]=[_e("确认",-1)])]),_:1})])]),default:y(()=>[C("div",null,[h(e(pl),{list:_.value,animation:"300",class:"drag-list"},{item:y(({element:S})=>[(c(),T("span",{key:S.name,class:"item-dimension",title:S.title},[h(O,{size:"20px"},{default:y(()=>[h(P,{name:"drag"},{default:y(()=>[h(e(Xo),{class:"svg-icon"})]),_:1})]),_:1}),C("span",ts,Y(S.title),1)],8,es))]),_:1},8,["list"])])]),_:1},8,["title","modelValue"])}}});const os=Re(ns,[["__scopeId","data-v-b38ecb32"]]),ls=["title"],is=["title"],ss={key:5,class:"bar-checkbox-area"},rs=["title"],us={key:7,class:"bar-checkbox-area"},cs={class:"flex-align-center",style:{position:"relative",width:"100%",padding:"5px 32px 5px 16px","line-height":"24px"}},ds=Be({__name:"ComponentEditBar",props:{element:{type:Object,required:!0},active:{type:Boolean,required:!1,default:!1},index:{required:!0,type:[Number,String],default:0},showPosition:{required:!1,type:String,default:"canvas"},canvasId:{type:String,default:"canvas-main"}},emits:["userViewEnlargeOpen","datasetParamsInit","closePreview","showViewDetails","amRemoveItem","linkJumpSetOpen","linkageSetOpen","componentImageDownload"],setup(t,{expose:n,emit:r}){const o=ot(),_=Nt(),f=Zn(),d=I(null),i=w(()=>Gn(ie.value.weight,ie.value.ext)),l=r,{t:s}=Tt(),{emitter:v}=ze(),u={canvas:["datasetParams","enlarge","hidden","details","setting","copy","delete","download","unLinkage","linkageSetting","linkJumpSetting"],preview:["enlarge","details","download","unLinkage","previewDownload","datasetParams"],multiplexing:["multiplexing"],batchOpt:["batchOpt"],linkage:["linkage"]},p={UserView:["datasetParams","enlarge","hidden","details","setting","copy","download","previewDownload","delete","multiplexing","batchOpt","linkage","unLinkage","linkageSetting","linkJumpSetting"],default:["setting","delete","copy","multiplexing","batchOpt","hidden"]},P=H=>u[U.value]&&u[U.value].includes(H)&&(p[S.value.component]?p[S.value.component]:p.default).includes(H),O=w(()=>!["batchOpt","multiplexing"].includes(U.value)),b=t,{element:S,index:D,showPosition:U,canvasId:he}=ft(b),{batchOptStatus:Q,pcMatrixCount:J,curComponent:G,componentData:N,canvasViewInfo:ve,mobileInPc:ce,dvInfo:ie,isPopWindow:ge,hiddenListStatus:se}=at(o),B=At({systemOS:"Mac",maxImageSize:15e6,boardSetVisible:!1,linkJumpSetVisible:!1,linkJumpSetViewId:null,curFields:[],multiplexingCheckModel:!1,curMultiplexingComponents:{},barWidth:24,componentType:null,linkageActiveStatus:!1,editFilter:["view","custom","custom-button"],timer:null,viewXArray:[],batchOptCheckModel:!1}),pe=w(()=>se.value&&Ve(he.value)),X=()=>{d.value.sortInit(S.value)},de=()=>{o.setCurComponent({component:S.value,index:D.value})},xe=()=>{v.emit(`addQueryCriteria${S.value.id}`)},Me=()=>{v.emit(`editQueryCriteria${S.value.id}`)},Oe=w(()=>{if(U.value==="canvas"){const H=S.value.x-1,E=J.value.x-(S.value.x+S.value.sizeX-1);return H===0&&E===0||E<0?pe.value?"bar-main-left-inner":"bar-main-right-inner":E===0?"bar-main-left-outer":"bar-main-right"}else return U.value==="preview"?"bar-main-right-inner":U.value==="canvasDataV"?"bar-main-right":"bar-main-preview-right-inner"}),Ee=w(()=>Oe.value.indexOf("right")>=0?"right":"left"),De=H=>{const E="el-icon-loading",ke="de-message-loading de-message-export";va({message:da("p",null,["后台导出中,可前往",da(Mt,{text:!0,size:"small",class:"btn-text",onClick:()=>{H()}},s("data_export.export_center")),"查看进度，进行下载"]),iconClass:E,icon:da(Un),showClose:!0,customClass:ke})},$e=()=>{ze().emitter.emit("data-export-center",{activeName:"IN_PROGRESS"})},x=()=>{const H=o.getViewInstanceInfo(S.value.id);if(!H)return;const E=o.getViewDetails(S.value.id);Xn(H,E)},ee=()=>{const H=o.getViewDataDetails(S.value.id),E=o.getLastViewRequestInfo(S.value.id),me={...o.getViewDetails(S.value.id),chartExtRequest:E,data:H,busiFlag:ie.value.type};jn(me,ie.value.name,()=>{De($e)})},oe=()=>{l("componentImageDownload")},R=()=>{ne.emit("removeMatrixItem-"+he.value,D.value),o.setCurComponent({component:null,index:null}),_.recordSnapshotCache("deleteComponent")},te=()=>{l("datasetParamsInit")},le=()=>{f.copy(),f.paste(!1)},q=(H,E)=>{H.preventDefault(),H.stopPropagation(),l("userViewEnlargeOpen",E)},ae=()=>{G.value&&(G.value.dashboardHidden=!0,ne.emit("removeMatrixItemPosition-"+he.value,G.value),o.setHiddenListStatus(!0),_.recordSnapshotCache("hide"),o.setLastHiddenComponent(G.value.id))},Fe=()=>{B.multiplexingCheckModel=!B.multiplexingCheckModel,Se(B.multiplexingCheckModel)},Se=H=>{H?o.addCurMultiplexingComponent({component:S.value,componentId:S.value.id}):o.removeCurMultiplexingComponentWithId(S.value.id)},Le=()=>{U.value==="batchOpt"&&(B.batchOptCheckModel=!B.batchOptCheckModel,Ze(B.batchOptCheckModel))},Ze=H=>{H?o.addCurBatchComponent(S.value):o.removeCurBatchComponentWithId(S.value.id)},et=H=>{let E=!1;return H.linkageFilters&&H.linkageFilters.length>0&&H.linkageFilters.forEach(ke=>{S.value.id===ke.sourceViewId&&(E=!0)}),E},je=w(()=>{let H=0;return N.value.forEach(E=>{E.component==="UserView"&&E.innerType!="VQuery"?et(E)&&H++:E.component==="Group"?E.propValue.forEach(ke=>{et(ke)&&H++}):E.component==="DeTabs"&&E.propValue.forEach(ke=>{var me;(me=ke.componentData)==null||me.forEach(we=>{et(we)&&H++})})}),H}),Ge=()=>{o.clearViewLinkage(S.value.id),ze().emitter.emit("clearPanelLinkage",{viewId:S.value.id})},Te=H=>{H.stopPropagation(),H.preventDefault()},lt=w(()=>{var H;return["canvasDataV","canvas"].includes(U.value)&&((H=G.value)==null?void 0:H.innerType)==="rich-text"&&G.value.editing&&B.curFields.length>0}),rt=()=>{if(S.value.component==="UserView"){const H=ve.value[S.value.id];H&&(B.curFields=[],H.type==="rich-text"&&H.curFields&&(B.curFields=H.curFields))}},W=w(()=>{var H;return((H=ve.value[S.value.id])==null?void 0:H.dataFrom)!=="template"&&!ge.value}),j=w(()=>{var H,E;return((E=(H=ve.value[S.value.id])==null?void 0:H.calParams)==null?void 0:E.length)>0}),V=I(),M=()=>{V.value.handleClose()};return bt(()=>{S.value.component==="UserView"&&ne.on("initCurFields-"+S.value.id,rt),rt()}),Zt(()=>{S.value.component==="UserView"&&ne.off("initCurFields-"+S.value.id,rt)}),n({multiplexingCheckOut:Fe,batchOptCheckOut:Le}),Ct(()=>Q.value,()=>{B.batchOptCheckModel=!1}),(H,E)=>{const ke=ba("Sort"),me=Dt,we=gt,ut=An,L=gt,ue=Wa,We=ba("ArrowRight"),Ce=Za,kt=Na,Et=qo;return!e(ce)&&!e(pa)()?(c(),T("div",{key:0,class:Xe(["bar-main",[Oe.value,{"bar-main-background":O.value}]]),onMousedown:Te},[e(S).component==="DeTabs"&&e(U)==="canvas"?(c(),z(e(Jt),{key:0,effect:"dark",placement:"top",content:e(s)("visualization.sort")},{default:y(()=>[h(me,{class:"bar-base-icon",onClick:X},{default:y(()=>[h(ke)]),_:1})]),_:1},8,["content"])):F("",!0),e(S).component==="VQuery"&&e(U)==="canvas"?(c(),T(Ke,{key:1},[C("span",{title:e(s)("visualization.add_query_filter")},[h(me,{class:"bar-base-icon",onClick:xe},{default:y(()=>[h(we,{name:"icon_add_outlined"},{default:y(()=>[h(e(cl),{class:"svg-icon"})]),_:1})]),_:1})],8,ls),C("span",{title:e(s)("visualization.edit_query_filter")},[h(me,{class:"bar-base-icon",onClick:Me},{default:y(()=>[h(we,{name:"icon_edit_outlined"},{default:y(()=>[h(e(ul),{class:"svg-icon"})]),_:1})]),_:1})],8,is)],64)):F("",!0),e(S).innerType!=="rich-text"&&P("enlarge")?(c(),z(e(Jt),{key:2,effect:"dark",placement:"top",content:e(s)("visualization.enlarge")},{default:y(()=>[C("span",null,[h(me,{class:"bar-base-icon",onClick:E[0]||(E[0]=dt=>q(dt,"enlarge"))},{default:y(()=>[h(we,{name:"dv-bar-enlarge"},{default:y(()=>[h(e(Gi),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["content"])):F("",!0),!["picture-group","rich-text"].includes(e(S).innerType)&&P("details")?(c(),z(e(Jt),{key:3,effect:"dark",placement:Ee.value,content:e(s)("visualization.show_data_info")},{default:y(()=>[C("span",null,[h(me,{class:"bar-base-icon",onClick:E[1]||(E[1]=dt=>q(dt,"details"))},{default:y(()=>[h(we,{name:"dv-details"},{default:y(()=>[h(e(Ni),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["placement","content"])):F("",!0),P("datasetParams")&&j.value?(c(),z(e(Jt),{key:4,effect:"dark",placement:"top",content:e(s)("visualization.input_calc_data")},{default:y(()=>[C("span",null,[h(me,{class:"bar-base-icon",onClick:te},{default:y(()=>[h(we,{name:"icon_params_setting"},{default:y(()=>[h(e(dl),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["content"])):F("",!0),P("multiplexing")?(c(),T("div",ss,[h(ut,{onClick:E[2]||(E[2]=Rt(()=>{},["stop"])),style:{height:"26px",padding:"5px"},modelValue:B.multiplexingCheckModel,"onUpdate:modelValue":E[3]||(E[3]=dt=>B.multiplexingCheckModel=dt),onChange:Se},null,8,["modelValue"])])):F("",!0),P("unLinkage")&&je.value?(c(),T("span",{key:6,title:e(s)("visualization.cancel_linkage")},[h(me,{class:"bar-base-icon",onClick:Ge},{default:y(()=>[h(we,{name:"dv-bar-unLinkage"},{default:y(()=>[h(e(oo),{class:"svg-icon"})]),_:1})]),_:1})],8,rs)):F("",!0),P("batchOpt")?(c(),T("div",us,[h(ut,{modelValue:B.batchOptCheckModel,"onUpdate:modelValue":E[4]||(E[4]=dt=>B.batchOptCheckModel=dt),onChange:Ze},null,8,["modelValue"])])):F("",!0),P("setting")?(c(),z(kt,{key:8,trigger:"click",placement:"right-start",ref_key:"curDropdown",ref:V},{dropdown:y(()=>[h(Ce,null,{default:y(()=>[P("copy")?(c(),z(ue,{key:0,onClick:le},{default:y(()=>[_e(Y(e(s)("visualization.copy")),1)]),_:1})):F("",!0),e(S).innerType!=="rich-text"&&P("enlarge")?(c(),T(Ke,{key:1},[h(ue,{divided:e(U)==="canvas",onClick:E[5]||(E[5]=dt=>q(dt,"enlarge"))},{default:y(()=>[_e(Y(e(s)("visualization.enlarge")),1)]),_:1},8,["divided"]),!["picture-group","rich-text"].includes(e(S).innerType)&&P("details")?(c(),z(ue,{key:0,onClick:E[6]||(E[6]=dt=>q(dt,"details"))},{default:y(()=>[_e(Y(e(s)("visualization.show_data_info")),1)]),_:1})):F("",!0),!["picture-group","rich-text"].includes(e(S).innerType)&&P("download")&&W.value&&(i.value[0]||i.value[1])?(c(),z(ue,{key:1,style:{padding:"0"},onClick:E[7]||(E[7]=Rt(()=>{},["prevent"]))},{default:y(()=>[h(kt,{style:{width:"100%"},trigger:"hover",placement:"right-start"},{dropdown:y(()=>[h(Ce,null,{default:y(()=>[i.value[1]?(c(),z(ue,{key:0,onClick:ee},{default:y(()=>[...E[8]||(E[8]=[_e("Excel",-1)])]),_:1})):F("",!0),i.value[1]&&e(S).innerType==="table-pivot"?(c(),z(ue,{key:1,onClick:x},{default:y(()=>[C("span",null,Y(e(s)("visualization.excel_with_format")),1)]),_:1})):F("",!0),i.value[0]?(c(),z(ue,{key:2,onClick:oe},{default:y(()=>[_e(Y(e(s)("visualization.image")),1)]),_:1})):F("",!0)]),_:1})]),default:y(()=>[C("div",cs,[_e(Y(e(s)("visualization.export_as"))+" ",1),h(me,{size:"16px",style:{position:"absolute",right:"8px","margin-right":"0"}},{default:y(()=>[h(We)]),_:1})])]),_:1})]),_:1})):F("",!0)],64)):F("",!0),P("hidden")&&e(Ve)(e(he))?(c(),z(ue,{key:2,onClick:ae},{default:y(()=>[_e(Y(e(s)("visualization.hidden")),1)]),_:1})):F("",!0),h(e(fa),{chart:e(S),"resource-table":"snapshot",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9FZGl0QmFySGFuZGxlcg==",onCloseItem:M},null,8,["chart"]),P("delete")?(c(),z(ue,{key:3,divided:"",onClick:R},{default:y(()=>[_e(Y(e(s)("visualization.delete")),1)]),_:1})):F("",!0)]),_:1})]),default:y(()=>[h(me,{class:"bar-base-icon"},{default:y(()=>[h(e(Jt),{content:e(s)("visualization.more"),effect:"dark",placement:"bottom"},{default:y(()=>[h(L,{name:"icon_more_outlined"},{default:y(()=>[h(e(vl),{class:"svg-icon"})]),_:1})]),_:1},8,["content"])]),_:1})]),_:1},512)):F("",!0),!["picture-group","rich-text"].includes(e(S).innerType)&&P("previewDownload")&&W.value&&(i.value[0]||i.value[1])?(c(),z(kt,{key:9,trigger:"click",placement:"right-start"},{dropdown:y(()=>[h(Ce,{style:{width:"118px"}},{default:y(()=>[i.value[1]?(c(),z(ue,{key:0,onClick:ee},{default:y(()=>[...E[9]||(E[9]=[_e("Excel",-1)])]),_:1})):F("",!0),i.value[1]&&e(S).innerType==="table-pivot"?(c(),z(ue,{key:1,onClick:x},{default:y(()=>[C("span",null,Y(e(s)("visualization.excel_with_format")),1)]),_:1})):F("",!0),i.value[0]?(c(),z(ue,{key:2,onClick:oe},{default:y(()=>[_e(Y(e(s)("visualization.image")),1)]),_:1})):F("",!0)]),_:1})]),default:y(()=>[h(me,{onClick:de,class:"bar-base-icon"},{default:y(()=>[h(e(Jt),{content:e(s)("chart.export"),effect:"dark",placement:"bottom"},{default:y(()=>[h(L,{name:"dv-preview-download"},{default:y(()=>[h(e(ca),{class:"svg-icon"})]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})):F("",!0),lt.value?(c(),z(Et,{key:10,width:"200",trigger:"click",onMousedown:Te},{reference:y(()=>[h(me,{class:"bar-base-icon"},{default:y(()=>[h(we,{name:"database"},{default:y(()=>[h(e(Ji),{class:"svg-icon"})]),_:1})]),_:1})]),default:y(()=>[h(Ki,{fields:B.curFields,element:e(S)},null,8,["fields","element"])]),_:1})):F("",!0),h(os,{ref_key:"customTabsSortRef",ref:d},null,512)],34)):F("",!0)}}});const lo=Re(ds,[["__scopeId","data-v-d61f4648"]]),vs=Be({__name:"ComposeShow",props:{element:{required:!0,type:Object},elementIndex:{required:!1},showBorder:{required:!1,type:Boolean,default:!0}},setup(t){const n=ja(),{areaData:r}=at(n),o=t,_=w(()=>r.value.components.includes(o.element)),f=d=>{if(d.buttons===2)return;const i=r.value.components.findIndex(l=>l===o.element);i!=-1&&o.element.component!=="GroupArea"&&(r.value.components.splice(i,1),d.stopPropagation())};return(d,i)=>_.value?(c(),T("div",{key:0,class:Xe(["compose-shadow",{"shadow-border":o.showBorder}]),onMousedown:f},null,34)):F("",!0)}});const ps=Re(vs,[["__scopeId","data-v-f67210ce"]]),fs={t:"1738739001616",class:"icon",viewBox:"0 0 1175 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8488","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"229.4921875",height:"200"};function hs(t,n){return c(),T("svg",fs,[...n[0]||(n[0]=[C("path",{d:"M587.83008 276.574053a235.132032 235.132032 0 0 1 235.132033 235.132032 249.533869 249.533869 0 0 1-1.469576 25.864523l170.470724 170.764639A1046.631458 1046.631458 0 0 0 1175.660161 511.706085c-161.065442-220.43628-365.336395-352.698048-587.830081-352.698048a562.553387 562.553387 0 0 0-129.616532 15.577497l103.752009 103.458094a249.533869 249.533869 0 0 1 25.864523-1.469575zM76.123995 83.177956L255.706085 262.760046A987.554535 987.554535 0 0 0 0 511.706085c161.065442 220.730195 365.336395 352.698048 587.83008 352.698048a575.485649 575.485649 0 0 0 223.375431-46.144661l205.740528 205.740528L1099.536165 940.528129l-940.528128-940.528129zM352.698048 511.706085a231.311137 231.311137 0 0 1 32.918485-119.035591l88.174512 88.174512a113.745121 113.745121 0 0 0-4.408726 29.391504 117.566016 117.566016 0 0 0 117.566016 117.566016 111.98163 111.98163 0 0 0 29.391504-4.408726l45.850747 45.850746L705.396096 712.743972a235.132032 235.132032 0 0 1-352.698048-202.507462z","p-id":"8489"},null,-1)])])}const ms={render:hs},gs=["id"],ys=["title"],_s=["id"],ws=["onMousedown"],Cs=Be({__name:"Shape",props:{element:{required:!0,type:Object,default(){return{component:null,propValue:null,request:null,linkage:null,type:null,events:null,style:null,id:null}}},defaultStyle:{required:!0,type:Object,default(){return{}}},baseCellInfo:{required:!0,type:Object,default(){return{baseWidth:0,baseHeight:0,curGap:0}}},index:{required:!0,type:[Number,String],default:0},isTabMoveCheck:{type:Boolean,default:!0},canvasId:{type:String,default:"canvas-main"},scale:{type:Number,required:!1,default:1},canvasActive:{type:Boolean,required:!1,default:!0}},emits:["userViewEnlargeOpen","datasetParamsInit","onStartResize","onStartMove","onDragging","onResizing","onMouseUp","linkJumpSetOpen","linkageSetOpen"],setup(t,{emit:n}){const{t:r}=Tt(),o=ot(),_=Nt(),f=hn(),d=ja(),i=I(null),l=I(null),s=I(null),v=I(null),u=I(!1),p=w(()=>"enlarge-inner-shape-"+x.value.id),{curComponent:P,dvInfo:O,editMode:b,batchOptStatus:S,curBatchOptComponents:D,linkageSettingStatus:U,curLinkageView:he,tabCollisionActiveId:Q,tabMoveInActiveId:J,tabMoveOutComponentId:G,mobileInPc:N,mainScrollTop:ve,hiddenListStatus:ce,fullscreenFlag:ie}=at(o),{editorMap:ge,areaData:se,isCtrlOrCmdDown:B}=at(d),pe=n,X=w(()=>b.value==="edit"),de=At({seriesIdMap:{id:""},ignoreTabMoveComponent:["de-button","de-reset-button","DeTabs","GroupArea"],parentWidthTabOffset:40,canvasChangeTips:"none",tabMoveInYOffset:70,tabMoveInXOffset:40,collisionGap:10}),xe=k=>{k.preventDefault(),k.stopPropagation(),x.value&&(x.value.dashboardHidden=!0,ne.emit("removeMatrixItemPosition-"+le.value,x.value),_.recordSnapshotCache("hide"),o.setLastHiddenComponent(x.value.id))},Me=w(()=>ce.value&&Ve(le.value)),Oe=I(!0),Ee=w(()=>x.value.isLock&&X.value),De=w(()=>{let k;return la.value?k="batchOpt":X.value?k=O.value.type==="dashboard"?"canvas":"canvasDataV":k="preview",k}),$e=t,{element:x,defaultStyle:ee,baseCellInfo:oe,index:R,isTabMoveCheck:te,canvasId:le,scale:q,canvasActive:ae}=ft($e),Fe=hl(x.value,"pTabGroup"),Se=ml(x.value),Le=I("shape-id-"+x.value.id),Ze=["lt","t","rt","r","rb","b","lb","l"],et=["lt","rt","rb","lb"],je=["r","l"],Ge={lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},Te=I({}),lt=w(()=>Ve(le.value)&&x.value.freeze&&!N.value&&ve.value-ee.value.top>0),rt=w(()=>N.value&&x.value.canvasId==="canvas-main"),W=(k,K)=>{K==="syncPcDesign"&&(k.preventDefault(),k.stopPropagation()),ze().emitter.emit("onMobileStatusChange",{type:K,value:x.value.id})},j=[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],V=w(()=>{var k;return((k=P.value)==null?void 0:k.component)==="GroupArea"}),M=w(()=>{var k;return((k=P.value)==null?void 0:k.id)===x.value.id}),H=w(()=>{const k=["flow-map","map","bubble-map","table-info","table-normal","table-pivot","symbolic-map","heat-map","t-heatmap","circle-packing"];return x.value.isPlugin||k.includes(x.value.innerType)}),E=w(()=>O.value.type==="dashboard"),ke=()=>x.value.component==="line-shape"?je:Ze,me=()=>M.value&&!x.value.isLock&&X.value&&!lt.value,we=k=>{pe("userViewEnlargeOpen",k)},ut=k=>{pe("datasetParamsInit",k)},L=k=>{let{width:K,height:re}=ee.value;const{sizeX:Ne,sizeY:qe}=x.value;E.value&&!x.value.isPlayer?(K=Ne*oe.value.baseWidth-2*oe.value.curGap,re=qe*oe.value.baseHeight-2*oe.value.curGap):(K=K-2*oe.value.curGap,re=re-2*oe.value.curGap);const tt=/t/.test(k),be=/b/.test(k),nt=/l/.test(k),mt=/r/.test(k);let ct=0,it=0;return k.length===2?(ct=nt?0:K,it=tt?0:re):((tt||be)&&(ct=K/2,it=tt?0:re),(nt||mt)&&(ct=nt?0:K,it=Math.floor(re/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${ct}px`,top:`${it}px`,cursor:Te.value[k]}},ue=()=>{const k=ln(P.value.style.rotate),K={};let re=-1;return Ze.forEach(Ne=>{const qe=ln(Ge[Ne]+k),tt=j.length;for(;;){re=(re+1)%tt;const be=j[re];if(qe<23||qe>=338){K[Ne]="nw-resize";return}if(be.start<=qe&&qe<be.end){K[Ne]=be.cursor+"-resize";return}}}),K},We=k=>{ae.value&&(o.setCurComponent({component:x.value,index:R.value}),dt(k))},Ce=k=>{k&&!k.isLock&&k.isShow&&k.canvasId==="canvas-main"&&!["GroupArea"].includes(k.component)&&se.value.components.push(k)},kt=()=>{x.value.canvasId!=="canvas-main"&&o.setCurComponent({component:x.value,index:R.value})},Et=k=>{if(ae.value){if($(k),B.value&&!se.value.components.includes(x)){Ce(x.value),P.value&&P.value.id!==x.value.id&&Ce(P.value),k.stopPropagation();return}if(o.setCurComponent({component:x.value,index:R.value}),H.value){o.setInEditorStatus(!0),o.setClickComponentStatus(!0),k.stopPropagation();return}dt(k)}},dt=k=>{if(x.value.editing){k.stopPropagation();return}if(E.value&&pe("onStartMove",k),He(()=>ne.emit("componentClick")),o.setInEditorStatus(!0),o.setClickComponentStatus(!0),k.stopPropagation(),x.value.isLock||!X.value||lt.value)return;Te.value=ue();const K={...ee.value},re=k.clientY,Ne=k.clientX,qe=k.offsetY,tt=k.offsetX,be=Number(K.top),nt=Number(K.left);let mt=!1,ct=!0;const it=i.value.offsetWidth,vt=l.value.offsetWidth,It=l.value.offsetHeight;let xt=sn(le.value)?document.getElementById("shape-id-"+le.value.split("--")[0]):null;const $t=document.getElementById(Le.value),yt=_t=>{mt=!0;const Gt=_t.clientX,qt=_t.clientY,Ht=qt-re+be,Bt=Gt-Ne+nt;if(K.top=Ht,K.left=Bt,!Fe&&Se&&!Ve(le.value)&&!rn(le.value)&&!V.value&&(Ht<-30||Bt<-30||Bt+vt-it>30)){Oe.value=!1,o.setMousePointShadowMap({mouseX:!st()&&xt?xt.offsetLeft+$t.offsetLeft+tt:Gt,mouseY:!st()&&xt?xt.offsetTop+$t.offsetTop+qe+100:qt+ve.value,width:vt,height:It});const ia=x.value.canvasId.split("--")[0];o.setTabMoveOutComponentId(ia)}else o.setTabMoveOutComponentId(null),Oe.value=!0;ga(),E.value&&(ct||!J.value&&!Q.value)&&(x.value.dragging=!0,pe("onDragging",k)),["DeTabs","Group"].includes(x.value.component)&&ta(x.value),(rn(le.value)||sn(le.value))&&Sn(x.value,{width:i.value.offsetWidth,height:i.value.offsetHeight}),ct&&(ct=!1),o.setShapeStyle(K,se.value.components,"move"),V.value||He(()=>{ne.emit("move",{isDownward:qt-re>0,isRightward:Gt-Ne>0})})},Vt=()=>{E.value&&pe("onMouseUp"),x.value.dragging=!1,mt&&_.recordSnapshotCacheWithPositionChange("shape-handleMouseDownOnShape-up"),ne.emit("unMove"),document.removeEventListener("mousemove",yt),document.removeEventListener("mouseup",Vt),J.value&&(ne.emit("onTabMoveIn-"+J.value,x.value),o.setTabMoveInActiveId(null),o.setTabCollisionActiveId(null)),G.value&&(ne.emit("onTabMoveOut-"+G.value,Kt(x.value)),o.setTabMoveOutComponentId(null)),ya()};document.addEventListener("mousemove",yt),document.addEventListener("mouseup",Vt)},zt=k=>{ae.value&&O.value.type==="dataV"&&(k.stopPropagation(),k.preventDefault(),f.hideContextMenu())},$=k=>{if(la.value){v.value.batchOptCheckOut(),k.stopPropagation(),k.preventDefault();return}},fe=(k,K)=>{var Vt;if(!ae.value)return;E.value&&pe("onStartResize",K),o.setInEditorStatus(!0),o.setClickComponentStatus(!0),K.stopPropagation(),K.preventDefault();const re={...ee.value},Ne=re.width/re.height,qe={x:re.left+re.width/2,y:re.top+re.height/2},tt=(Vt=ge.value[le.value])==null?void 0:Vt.getBoundingClientRect();if(!tt)return;const be=K.target.getBoundingClientRect(),nt={x:Math.round(be.left-tt.left+K.target.offsetWidth/2+Je("x",k)/2),y:Math.round(be.top-tt.top+K.target.offsetHeight/2+Je("y",k)/2)},mt={x:qe.x-(nt.x-qe.x)-Je("x",k)/4,y:qe.y-(nt.y-qe.y)-Je("y",k)/4};let ct=!1,it=!0;const vt=ht(),It=P.value.aspectRatio,xt={};se.value.components.length>0&&se.value.components.forEach(_t=>{xt[_t.id]={topRadio:(_t.style.top-re.top)/re.height,leftRadio:(_t.style.left-re.left)/re.width,widthRadio:_t.style.width/re.width,heightRadio:_t.style.height/re.height}});const $t=_t=>{if(it){it=!1;return}ct=!0;const Gt={x:_t.clientX-Math.round(tt.left)+Je("x",k),y:_t.clientY-Math.round(tt.top)+Je("y",k)};if(Ei(k,re,Gt,Ne,vt,{center:qe,curPoint:nt,symmetricPoint:mt}),Ye(re,k),P.value.maintainRadio){const qt=re.height-ee.value.height,Ht=re.width-ee.value.width,Bt=qt*It;et.includes(k)||Math.abs(Ht)>Math.abs(Bt)?re.height=ee.value.width/It:re.width=ee.value.height*It}$i(k,re,mt),o.setShapeStyle(re,se.value.components,"resize",xt),E.value&&pe("onResizing",_t),x.value.resizing=!0,(["Group"].includes(x.value.component)||["DeTabs"].includes(x.value.component)&&!x.value.resizeInnerKeep)&&ta(x.value),(rn(le.value)||sn(le.value))&&Sn(x.value,{width:i.value.offsetWidth,height:i.value.offsetHeight})},yt=()=>{["DeTabs"].includes(x.value.component)&&x.value.resizeInnerKeep&&$o(x.value),E.value&&pe("onMouseUp"),x.value.resizing=!1,document.removeEventListener("mousemove",$t),document.removeEventListener("mouseup",yt),ct&&_.recordSnapshotCacheWithPositionChange("shape-handleMouseDownOnPoint-up"),ya()};document.addEventListener("mousemove",$t),document.addEventListener("mouseup",yt)},Ye=(k,K)=>{E.value||(K.indexOf("r")>-1&&(k.left=k.left+1),K.indexOf("b")>-1&&(k.top=k.top+1),K.indexOf("l")>-1&&(k.width=k.width+1),K.indexOf("t")>-1&&(k.height=k.height+1))},Je=(k,K)=>{const re=oe.value.curGap;return k==="x"?K.indexOf("r")>-1?re:-1*re:K.indexOf("b")>-1?re:-1*re},ht=()=>{if(x.value.component!="Group")return!1;const k=[0,90,180,360];for(const K of x.value.propValue)if(!k.includes(ln(parseInt(K.style.rotate))))return!0;return!1},Ot=w(()=>{const{backgroundImageEnable:k,backgroundType:K,innerImage:re}=x.value.commonBackground;return k&&K==="innerImage"&&typeof re=="string"}),jt=w(()=>Ot.value?x.value.commonBackground.innerImage.replace("board/","").replace(".svg",""):null),aa=w(()=>{if(x.value.commonBackground&&x.value.component!=="GroupArea"){const{backdropFilterEnable:k,backdropFilter:K,backgroundColorSelect:re,backgroundColor:Ne,backgroundImageEnable:qe,backgroundType:tt,outerImage:be,innerPadding:nt,borderRadius:mt}=x.value.commonBackground;let it={padding:(["Group"].includes(x.value.component)?0:nt)*q.value+"px",borderRadius:mt+"px"},vt="";return re&&Ne&&(vt=Ne),qe&&tt==="outerImage"&&typeof be=="string"?it.background=`url(${Ua(be)}) no-repeat ${vt}`:it["background-color"]=vt,x.value.component!=="UserView"&&(it.overflow="hidden"),k&&(it["backdrop-filter"]="blur("+K+"px)"),it}return{}}),na=w(()=>(M.value||la.value)&&["canvas","canvasDataV","batchOpt"].includes(De.value)||U.value),Ut=w(()=>U.value&&x.value.id===he.value.id),oa=()=>{pe("linkJumpSetOpen")},Qa=()=>{pe("linkageSetOpen")},Ka=()=>{l.value.setAttribute("tab-is-check",`${te.value}`),l.value.setAttribute("component-type",`${x.value.component}`),l.value.setAttribute("component-id",`${x.value.id}`)},ga=async()=>{const k=document.querySelector("#"+Le.value),K=k.offsetWidth,re=k.offsetHeight,Ne=k.offsetLeft,qe=k.offsetTop;if(Se&&te.value&&!de.ignoreTabMoveComponent.includes(x.value.component)){const tt=Array.from(i.value.childNodes);for(const be of tt)if(be.className!==void 0&&typeof be.className=="string"&&be.className.split(" ").includes("shape")&&be.getAttribute("component-id")!==Le.value&&be.getAttribute("tab-is-check")!==null&&be.getAttribute("tab-is-check")!=="false"&&be.getAttribute("component-type")==="DeTabs"){const nt=be.getAttribute("component-id"),mt=be.offsetWidth,ct=be.offsetHeight,it=be.offsetLeft,vt=be.offsetTop,It=vt+de.tabMoveInYOffset,xt=it+de.collisionGap-K,$t=mt+2*K-de.collisionGap,yt=ct+re-de.tabMoveInYOffset,Vt=It<=qe&&xt<=Ne,_t=It+yt>=qe+re&&xt<=Ne,Gt=It<=qe&&xt+$t>=Ne+K,qt=It+yt>=qe+re&&xt+$t>=Ne+K;Vt&&_t&&Gt&&qt?o.setTabCollisionActiveId(nt):Q.value===nt&&o.setTabCollisionActiveId(null);const Ht=vt+de.tabMoveInYOffset,Bt=it+de.collisionGap*10-K,ia=mt+2*K-de.collisionGap*20,Wt=ct+re-2*de.tabMoveInYOffset,an=Ht<=qe&&Bt<=Ne,nn=Ht+Wt>=qe+re&&Bt<=Ne,on=Ht<=qe&&Bt+ia>=Ne+K,sa=Ht+Wt>=qe+re&&Bt+ia>=Ne+K;an&&nn&&on&&sa?o.setTabMoveInActiveId(nt):J.value===nt&&o.setTabMoveInActiveId(null)}}},en=w(()=>{var k;if(x.value.multiDimensional&&((k=x.value.multiDimensional)!=null&&k.enable)){const K=ee.value.width,re=ee.value.height,Ne=x.value.multiDimensional.x,qe=x.value.multiDimensional.y,tt=Ne*Math.PI/180,be=qe*Math.PI/180,nt=Math.abs(K*Math.cos(be))+Math.abs(re*Math.sin(tt)),mt=Math.abs(re*Math.cos(tt))+Math.abs(K*Math.sin(be)),ct=(nt-K)/2;return{padding:`${(mt-re)/2}px ${ct}px`,transform:`rotateX(${x.value.multiDimensional.x}deg) rotateY(${x.value.multiDimensional.y}deg) rotateZ(${x.value.multiDimensional.z}deg)`}}else return{}}),la=w(()=>S.value&&E.value),tn=w(()=>M.value&&!!Q.value),Xt=()=>{u.value=!0,ze().emitter.emit("l7-prepare-picture",x.value.id),setTimeout(()=>{ka(p.value,"canvas-main",q.value);const k=document.getElementById(p.value);mn("img",k,"图表",()=>{Kn(p.value),u.value=!1,ze().emitter.emit("l7-unprepare-picture",x.value.id)})},200)},ya=()=>{x.value.canvasId.includes("Group")&&d.updateGroupBorder(x.value.canvasId)};return bt(()=>{var K;i.value=document.querySelector("#editor-"+le.value),P.value&&(Te.value=ue()),ne.on("runAnimation",()=>{x.value==P.value}),ne.on("stopAnimation",()=>{}),Ka();const k="componentImageDownload-"+x.value.id;(K=ze().emitter.all.get(k))!=null&&K.length||ze().emitter.on(k,()=>{Xt()})}),(k,K)=>{var tt;const re=Dt,Ne=Jt,qe=Sa;return Qe((c(),T("div",{class:Xe(["shape",{"shape-group-area":V.value,"freeze-component":lt.value,"freeze-component-fullscreen":lt.value&&e(ie)}]),ref_key:"shapeInnerRef",ref:l,id:Le.value,"element-loading-text":"导出中...","element-loading-background":"rgba(255, 255, 255, 1)",onDblclick:kt},[rt.value?(c(),T("div",{key:0,title:e(r)("visualization.sync_pc_design"),class:"refresh-from-pc",onClick:K[0]||(K[0]=be=>W(be,"syncPcDesign"))},[h(re,null,{default:y(()=>[h(gt,{name:"icon_replace_outlined"},{default:y(()=>[h(e(Rn),{class:"svg-icon"})]),_:1})]),_:1})],8,ys)):F("",!0),rt.value?(c(),T("div",{key:1,class:"del-from-mobile",onClick:K[1]||(K[1]=be=>W(be,"delFromMobile"))},[h(re,null,{default:y(()=>[h(gt,{name:"mobile-checkbox"},{default:y(()=>[h(e(Ii),{class:"svg-icon"})]),_:1})]),_:1})])):F("",!0),Me.value?(c(),T("div",{key:2,class:"del-from-mobile",onMousedown:Rt(xe,["stop"])},[h(Ne,{content:k.$t("visualization.hidden"),placement:"bottom"},{default:y(()=>[h(re,{onClick:K[3]||(K[3]=Rt(()=>{},["stop"]))},{default:y(()=>[h(gt,{onClick:K[2]||(K[2]=Rt(()=>{},["stop"])),name:"dvHidden"},{default:y(()=>[h(e(ms),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])],32)):F("",!0),Qe(C("div",{class:Xe(["shape-outer",{active:M.value,"shape-lock":Ee.value,"shape-edit":X.value&&!H.value,"linkage-setting":Ut.value,"drag-on-tab-collision":tn.value,"shape-selected":(tt=e(D))==null?void 0:tt.includes(e(x).id)}])},[h(lo,{ref_key:"componentEditBarRef",ref:v,class:Xe(["edit-bar",{"edit-bar-active":na.value}]),index:e(R),element:e(x),"show-position":De.value,"canvas-id":e(le),onComponentImageDownload:Xt,onUserViewEnlargeOpen:we,onDatasetParamsInit:ut,onLinkJumpSetOpen:oa,onLinkageSetOpen:Qa},null,8,["class","index","element","show-position","canvas-id"]),C("div",{class:"shape-inner",ref_key:"componentInnerRef",ref:s,id:p.value,style:Pe(aa.value),onClick:zt,onMousedown:Et},[Ee.value?(c(),z(gt,{key:0,name:"dv-lock"},{default:y(()=>[h(e(Di),{class:"svg-icon iconfont icon-suo"})]),_:1})):F("",!0),C("div",{class:"component-slot",style:Pe(en.value)},[vn(k.$slots,"default",{},void 0,!0)],4),Ot.value?(c(),z(ha,{key:1,style:Pe({color:e(x).commonBackground.innerImageColor,pointerEvents:"none"}),name:jt.value},null,8,["style","name"])):F("",!0)],44,_s),(c(!0),T(Ke,null,Pt(me()?ke():[],be=>(c(),T("div",{key:be,class:"shape-point",style:Pe(L(be)),onMousedown:nt=>fe(be,nt)},null,44,ws))),128)),Qe(C("div",{class:"shape-shadow",onMousedown:$},null,544),[[pt,la.value&&e(x).component!=="DeTabs"]]),H.value?(c(),T(Ke,{key:0},[Qe(C("div",{class:"de-drag-area de-drag-top",onMousedown:We},null,544),[[pt,!e(x).editing]]),Qe(C("div",{class:"de-drag-area de-drag-right",onMousedown:We},null,544),[[pt,!e(x).editing&&e(x).component!=="DeTabs"]]),Qe(C("div",{class:"de-drag-area de-drag-bottom",onMousedown:We},null,544),[[pt,!e(x).editing&&e(x).component!=="DeTabs"]]),Qe(C("div",{class:"de-drag-area de-drag-left",onMousedown:We},null,544),[[pt,!e(x).editing&&e(x).component!=="DeTabs"]])],64)):F("",!0)],2),[[pt,Oe.value]]),h(ps,{element:e(x)},null,8,["element"])],42,gs)),[[qe,u.value]])}}});const bs=Re(Cs,[["__scopeId","data-v-020b1ecf"]]),xs=ot(),{curComponentIndex:Pa,curComponent:Ss}=at(xs),ks=qn("layer",{actions:{upComponent(t){const n=ua(t);if(n){const{index:r,componentData:o}=n;r<o.length-1&&(kn(o,r,r+1),Pa.value=r+1)}},downComponent(t){const n=ua(t);if(n){const{index:r,componentData:o}=n;r>0&&(kn(o,r,r-1),Pa.value=r-1)}},topComponent(t){const n=ua(t);if(n){const{index:r,componentData:o,targetComponent:_}=n;r<o.length-1&&(o.splice(r,1),o.push(_),Pa.value=o.length-1)}},bottomComponent(t){const n=ua(t);if(n){const{index:r,componentData:o,targetComponent:_}=n;r>0&&(o.splice(r,1),o.unshift(_),Pa.value=0)}},hideComponentWithComponent(t){const n=_a(t);n&&(n.isShow=!1)},hideComponent(t){const n=_a(t);n&&(n.isShow=!1)},showComponent(t){var r,o;const n=_a(t);n&&(n.isShow=!0,n.component=="Group"?n.propValue.forEach(_=>{var f,d;(((f=_.innerType)==null?void 0:f.indexOf("table"))!==-1||((d=_==null?void 0:_.innerType)==null?void 0:d.indexOf("map"))!==-1)&&setTimeout(()=>{ze().emitter.emit("renderChart-"+_.id)},400)}):(((r=n==null?void 0:n.innerType)==null?void 0:r.indexOf("table"))!==-1||((o=n==null?void 0:n.innerType)==null?void 0:o.indexOf("map"))!==-1)&&setTimeout(()=>{ze().emitter.emit("renderChart-"+Ss.value.id)},400))},pausedTooltipCarousel(t){_a(t)&&ea.paused(t)},resumeTooltipCarousel(t){_a(t)&&ea.resume(t)}}}),Is=()=>ks(Wn),Vs=Be({__name:"ContextMenuDetails",props:{activePosition:{type:String,default:"canvas"}},emits:["close","rename"],setup(t,{emit:n}){const r=ot(),o=Zn(),_=il(),f=Nt(),d=Is(),i=ja(),{areaData:l}=at(i),{curComponent:s,componentData:v}=at(r),u=n,{emitter:p}=ze(),P=t,{activePosition:O}=ft(P),{t:b}=Tt(),S=w(()=>v.value.filter(R=>R.category==="hidden").length),D=()=>{s.value&&!ee.value?_.lock():l.value.components.length&&l.value.components.forEach(R=>{_.lock(R)}),f.recordSnapshotCache("lock"),Q("lock")},U=()=>{s.value&&!ee.value?_.unlock():l.value.components.length&&l.value.components.forEach(R=>{_.unlock(R)}),Q("unlock")},he=()=>{r.setClickComponentStatus(!0),O.value==="aside"&&u("close")},Q=R=>{const te={opt:R};O.value==="aside"&&u("close",te)},J=()=>{if(s.value){const R=ua();o.cut(R.componentData)}else l.value.components.length&&o.cut();Q("cut")},G=()=>{o.copy(),Q("copy")},N=()=>{s.value&&!ee.value?d.hideComponentWithComponent():l.value.components.length&&l.value.components.forEach(R=>{d.hideComponentWithComponent(R.id)}),f.recordSnapshotCache("hide"),Q("hide")},ve=()=>{s.value&&!ee.value?d.showComponent():l.value.components.length&&l.value.components.forEach(R=>{d.showComponent(R.id)}),f.recordSnapshotCache("show"),Q("show")},ce=w(()=>{var R,te;return((R=s==null?void 0:s.value)==null?void 0:R.canvasId)==="canvas-main"&&(s==null?void 0:s.value.category)==="base"&&((te=s.value)==null?void 0:te.component)==="VQuery"&&S.value===0}),ie=R=>{s.value&&(f.recordSnapshotCache("categoryChange"),s.value.category=R,R==="hidden"&&r.canvasStateChange({key:"curPointArea",value:"hidden"}))},ge=()=>{u("rename"),Q("rename")},se=()=>{o.paste(!0),f.recordSnapshotCache("renderChart"),Q("paste")},B=()=>{var R;if(s.value&&!ee.value){const te=ua();r.deleteComponentById((R=s.value)==null?void 0:R.id,te.componentData)}else l.value.components.length&&l.value.components.forEach(te=>{r.deleteComponentById(te.id)});ne.emit("hideArea-canvas-main"),f.recordSnapshotCache("deleteComponent"),Q("deleteComponent")},pe=()=>{s.value&&!ee.value?d.upComponent(s.value.id):l.value.components.length&&(Da(l.value.components),l.value.components.forEach(R=>{d.upComponent(R.id)})),f.recordSnapshotCache("upComponent"),Q("upComponent")},X=()=>{s.value&&!ee.value?d.downComponent(s.value.id):l.value.components.length&&(Da(l.value.components,"top"),l.value.components.forEach(R=>{d.downComponent(R.id)})),f.recordSnapshotCache("downComponent"),Q("downComponent")},de=()=>{s.value&&!ee.value?d.topComponent(s.value.id):l.value.components.length&&(Da(l.value.components,"top"),l.value.components.forEach(R=>{d.topComponent(R.id)})),f.recordSnapshotCache("topComponent"),Q("topComponent")},xe=()=>{s.value&&!ee.value?d.bottomComponent(s.value.id):l.value.components.length&&(Da(l.value.components),l.value.components.forEach(R=>{d.bottomComponent(R.id)})),f.recordSnapshotCache("bottomComponent"),Q("bottomComponent")},Me=()=>{ne.emit("tabSort")},Oe=()=>{i.compose(),f.recordSnapshotCache("componentCompose"),Q("componentCompose")},Ee=()=>{i.decompose(),f.recordSnapshotCache("decompose"),Q("decompose")},De=R=>{i.alignment(R),f.recordSnapshotCache("decompose")},$e=R=>{R.preventDefault(),R.stopPropagation()},x=w(()=>!(!s||s.isLock||s.component!="Group"||s.category==="hidden")),ee=w(()=>{var R;return((R=s.value)==null?void 0:R.component)==="GroupArea"}),oe=()=>{p.emit(`editQueryCriteria${s.value.id}`)};return(R,te)=>{const le=ba("ArrowRight"),q=Dt,ae=Wa,Fe=Za,Se=Na;return c(),T("div",{class:"context-menu-base context-menu-details",onMousedown:$e},[C("ul",{onMouseup:he},[e(l).components.length?(c(),T(Ke,{key:0},[C("li",{onMousedown:$e,onClick:Oe},Y(e(b)("visualization.view_group")),33),h(Se,{style:{width:"100%"},trigger:"hover",effect:"dark",placement:"right-start",teleported:!1,"popper-class":"context-menu-details"},{dropdown:y(()=>[h(Fe,null,{default:y(()=>[h(ae,{style:{width:"118px"},onClick:te[0]||(te[0]=Le=>De("left"))},{default:y(()=>[_e(Y(e(b)("visualization.left_justifying")),1)]),_:1}),h(ae,{style:{width:"118px"},onClick:te[1]||(te[1]=Le=>De("right"))},{default:y(()=>[_e(Y(e(b)("visualization.right_justifying")),1)]),_:1}),h(ae,{onClick:te[2]||(te[2]=Le=>De("top"))},{default:y(()=>[_e(Y(e(b)("visualization.top_justifying")),1)]),_:1}),h(ae,{onClick:te[3]||(te[3]=Le=>De("bottom"))},{default:y(()=>[_e(Y(e(b)("visualization.bottom_justifying")),1)]),_:1}),h(ae,{onClick:te[4]||(te[4]=Le=>De("transverse"))},{default:y(()=>[_e(Y(e(b)("visualization.horizontally_centered")),1)]),_:1}),h(ae,{onClick:te[5]||(te[5]=Le=>De("direction"))},{default:y(()=>[_e(Y(e(b)("visualization.vertically_centered")),1)]),_:1})]),_:1})]),default:y(()=>[C("li",null,[C("div",null,[C("span",null,Y(e(b)("visualization.alignment")),1),h(q,null,{default:y(()=>[h(le)]),_:1})])])]),_:1}),h(e(Yt),{class:"custom-divider"}),C("li",{onClick:G},Y(e(b)("visualization.copy")),1),C("li",{onClick:se},Y(e(b)("visualization.paste")),1),C("li",{onClick:J},Y(e(b)("visualization.cut")),1),h(e(Yt),{class:"custom-divider"}),C("li",{onClick:B},Y(e(b)("visualization.delete")),1)],64)):(c(),T(Ke,{key:1},[Qe(C("li",{onClick:te[6]||(te[6]=Le=>Ee())},Y(e(b)("visualization.cancel_group")),513),[[pt,!(!e(s)||e(s).isLock||e(s).component!="Group")]]),Qe(h(e(Yt),{class:"custom-divider"},null,512),[[pt,x.value]]),e(s)?(c(),T(Ke,{key:0},[!e(s).isLock&&e(s).category==="hidden"?(c(),T(Ke,{key:0},[C("li",{onClick:te[7]||(te[7]=Le=>ie("base"))},Y(e(b)("visualization.move_to_screen_show")),1),C("li",{onClick:oe},Y(e(b)("visualization.edit")),1),e(O)==="aside"?(c(),T("li",{key:0,onClick:ge},Y(e(b)("visualization.rename")),1)):F("",!0),C("li",{onClick:G},Y(e(b)("visualization.copy")),1),C("li",{onClick:se},Y(e(b)("visualization.paste")),1),h(e(Yt),{class:"custom-divider"}),C("li",{onClick:B},Y(e(b)("visualization.delete")),1)],64)):F("",!0),!e(s).isLock&&e(s).category!=="hidden"?(c(),T(Ke,{key:1},[e(s).component==="VQuery"?(c(),T("li",{key:0,onClick:oe},Y(e(b)("visualization.edit")),1)):F("",!0),C("li",{onClick:pe},Y(e(b)("visualization.up_component")),1),C("li",{onClick:X},Y(e(b)("visualization.down_component")),1),C("li",{onClick:de},Y(e(b)("visualization.top_component")),1),C("li",{onClick:xe},Y(e(b)("visualization.bottom_component")),1),e(s).component==="DeTabs"?(c(),T("li",{key:1,onClick:Me},Y(e(b)("visualization.sort")),1)):F("",!0),h(e(fa),{chart:e(s),"is-screen":"","resource-table":"snapshot",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9FZGl0QmFySGFuZGxlcg=="},null,8,["chart"]),Qe(C("li",{onClick:te[8]||(te[8]=Le=>ie("hidden"))},Y(e(b)("visualization.move_to_pop_area")),513),[[pt,ce.value]]),h(e(Yt),{class:"custom-divider"}),Qe(C("li",{onClick:N},Y(e(b)("visualization.hidden")),513),[[pt,e(s).isShow]]),Qe(C("li",{onClick:ve},Y(e(b)("visualization.cancel_hidden")),513),[[pt,!e(s).isShow||ee.value]]),C("li",{onClick:D},Y(e(b)("visualization.lock")),1),e(s).isLock||ee.value?(c(),T("li",{key:2,onClick:U},Y(e(b)("visualization.unlock")),1)):F("",!0),h(e(Yt),{class:"custom-divider"}),e(O)==="aside"?(c(),T("li",{key:3,onClick:ge},Y(e(b)("visualization.rename")),1)):F("",!0),C("li",{onClick:G},Y(e(b)("visualization.copy")),1),C("li",{onClick:se},Y(e(b)("visualization.paste")),1),C("li",{onClick:J},Y(e(b)("visualization.cut")),1),h(e(Yt),{class:"custom-divider"}),C("li",{onClick:B},Y(e(b)("visualization.delete")),1)],64)):F("",!0),e(s).isLock?(c(),T("li",{key:2,onClick:U},Y(e(b)("visualization.unlock")),1)):F("",!0)],64)):!e(s)&&!e(l).components.length?(c(),T("li",{key:1,onClick:se},Y(e(b)("visualization.paste")),1)):F("",!0)],64))],32)],32)}}});const Ms=Be({__name:"ContextMenu",props:{showPosition:{default:"canvasCore"}},setup(t){const n=t,r=hn(),{menuTop:o,menuLeft:_,menuShow:f,position:d}=at(r),i=w(()=>f.value&&n.showPosition===d.value);return(l,s)=>Qe((c(),z(Vs,{class:"contextmenu",style:Pe({top:e(o)+"px",left:e(_)+"px"})},null,8,["style"])),[[pt,i.value]])}});const Ds=Re(Ms,[["__scopeId","data-v-cc4f9e43"]]),Ps={class:"mark-line",id:"canvas-mark-line"},Ts=Be({__name:"MarkLine",setup(t){const n=I(["xt","xc","xb","yl","yc","yr"]),r=I(3),o=I({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),_=ot(),{curComponent:f,componentData:d}=at(_);let i;const l=()=>{Object.keys(o.value).forEach(P=>{o.value[P]=!1})},s=(P,O)=>{const b=i.proxy.$refs,S=d.value,D=La(f.value.style),U=D.width/2,he=D.height/2;l(),S.forEach(Q=>{try{if(Q===f.value)return;const J=La(Q.style),{top:G,left:N,bottom:ve,right:ce}=J,ie=J.width/2,ge=J.height/2,se={top:[{isNearly:p(D.top,G),lineNode:b.xt[0],line:"xt",dragShift:G,lineShift:G},{isNearly:p(D.bottom,G),lineNode:b.xt[0],line:"xt",dragShift:G-D.height,lineShift:G},{isNearly:p(D.top+he,G+ge),lineNode:b.xc[0],line:"xc",dragShift:G+ge-he,lineShift:G+ge},{isNearly:p(D.top,ve),lineNode:b.xb[0],line:"xb",dragShift:ve,lineShift:ve},{isNearly:p(D.bottom,ve),lineNode:b.xb[0],line:"xb",dragShift:ve-D.height,lineShift:ve}],left:[{isNearly:p(D.left,N),lineNode:b.yl[0],line:"yl",dragShift:N,lineShift:N},{isNearly:p(D.right,N),lineNode:b.yl[0],line:"yl",dragShift:N-D.width,lineShift:N},{isNearly:p(D.left+U,N+ie),lineNode:b.yc[0],line:"yc",dragShift:N+ie-U,lineShift:N+ie},{isNearly:p(D.left,ce),lineNode:b.yr[0],line:"yr",dragShift:ce,lineShift:ce},{isNearly:p(D.right,ce),lineNode:b.yr[0],line:"yr",dragShift:ce-D.width,lineShift:ce}]},B=[],{rotate:pe}=f.value.style;se&&Object.keys(se).forEach(X=>{se[X]&&se[X].forEach(de=>{de.isNearly&&(_.setShapeSingleStyle({key:X,value:pe!=0?v(X,de,D):de.dragShift}),de.lineNode&&(de.lineNode.style[X]=`${de.lineShift}px`),B.push(de.line))})}),B.length&&u(B,P,O)}catch{console.warn("markLine disabled")}})},v=(P,O,b)=>{const{width:S,height:D}=f.value.style;return P=="top"?Math.round(O.dragShift-(D-b.height)/2):Math.round(O.dragShift-(S-b.width)/2)},u=(P,O,b)=>{b?P.includes("yr")?o.value.yr=!0:P.includes("yc")?o.value.yc=!0:P.includes("yl")&&(o.value.yl=!0):P.includes("yl")?o.value.yl=!0:P.includes("yc")?o.value.yc=!0:P.includes("yr")&&(o.value.yr=!0),O?P.includes("xb")?o.value.xb=!0:P.includes("xc")?o.value.xc=!0:P.includes("xt")&&(o.value.xt=!0):P.includes("xt")?o.value.xt=!0:P.includes("xc")?o.value.xc=!0:P.includes("xb")&&(o.value.xb=!0)},p=(P,O)=>Math.abs(P-O)<=r.value;return bt(()=>{i=pn(),ne.on("move",({isDownward:P,isRightward:O})=>{s(P,O)}),ne.on("unMove",()=>{l()})}),(P,O)=>(c(),T("div",Ps,[(c(!0),T(Ke,null,Pt(n.value,b=>Qe((c(),T("div",{key:b,ref_for:!0,ref:b,class:Xe(["line",b.includes("x")?"xLine":"yLine"])},null,2)),[[pt,o.value[b]||!1]])),128))]))}});const Hs=Re(Ts,[["__scopeId","data-v-415f4511"]]),Bs=Be({__name:"Area",props:{start:{type:Object,default(){return{x:null,y:null}}},width:{type:Number,default:0},height:{type:Number,default:0}},setup(t){const n=t,{start:r,width:o,height:_}=ft(n);return(f,d)=>{var i,l;return c(),T("div",{style:Pe({left:((i=e(r))==null?void 0:i.x)+"px",top:((l=e(r))==null?void 0:l.y)+"px",width:e(o)+"px",height:e(_)+"px"}),class:"area"},null,4)}}});const Fs=Re(Bs,[["__scopeId","data-v-869b17df"]]),Ls=Be({__name:"DragShadow",props:{baseWidth:{required:!0,type:Number},baseHeight:{required:!0,type:Number},curGap:{required:!0,type:Number},element:{required:!0,type:Object,default(){return{component:null,propValue:null,request:null,linkage:null,type:null,events:null,style:null,id:null}}}},setup(t){const n=t,{element:r,baseWidth:o,baseHeight:_,curGap:f}=ft(n),d=w(()=>{const{x:i,y:l,sizeX:s,sizeY:v}=r.value;return{padding:f.value+"px",width:s*o.value+"px",height:v*_.value+"px",left:(i-1)*o.value+"px",top:(l-1)*_.value-3+"px"}});return(i,l)=>(c(),T("div",{class:"shadow-main",style:Pe(d.value)},[...l[0]||(l[0]=[C("div",{class:"shadow-background"},null,-1)])],4))}});const As=Re(Ls,[["__scopeId","data-v-f38d0bda"]]),zs={class:"header-title"},Os={class:"export-button"},Es=["element-loading-text"],$s={style:{flex:"1"}},qs=Be({__name:"UserViewEnlarge",setup(t,{expose:n}){const r=I(!1),o=ot(),_=I(!1),f=sl(),d=rl();let i=I(null);const l=I(null),s=I(null),{t:v}=Tt(),u=I(null),p=I(null),P=I(null),{dvInfo:O,isIframe:b,canvasStyleData:S}=at(o),D=I(!1),U=I(),he=I("left"),Q=I(!1),J={render:"antv",type:"table-info",customAttr:{basicStyle:{tableColumnMode:"dialog",tablePageMode:"pull"},tableHeader:{tableHeaderBgColor:"#F8F8F9",tableHeaderFontColor:"#7C7E81"},tableCell:{tableItemBgColor:"#FFFFFF",tableFontColor:"#7C7E81",enableTableCrossBG:!1,mergeCells:!1},tooltip:{show:!1}},senior:{scrollCfg:{open:!1}},showPosition:"dialog"},G=At({scale:.5,componentSourceType:null,dataFrom:null}),N={senior:{scrollCfg:{open:!1}},showPosition:"dialog"},ve=w(()=>Gn(O.value.weight,O.value.ext)),ce=w(()=>{const ee=S.value&&u.value==="enlarge"?Ga(S.value,"canvas-main"):{};if(r.value){const oe=ie.value.split(" * ");return ee.width=oe[0]+"px!important",ee.height=oe[1]+"px!important",ee}else return ee}),ie=I("1280 * 720"),ge=[{label:"Windows(16:9)",options:[{value:"1920 * 1080",label:"1920 * 1080"},{value:"1600 * 900",label:"1600 * 900"},{value:"1280 * 720",label:"1280 * 720"}]},{label:"MacOS(16:10)",options:[{value:"2560 * 1600",label:"2560 * 1600"},{value:"1920 * 1200",label:"1920 * 1200"},{value:"1680 * 1050",label:"1680 * 1050"}]}],se=(ee,oe,R,te,le={scale:.5})=>{var q;G.scale=le.scale,U.value=oe.type,Q.value=!1,u.value=te,_.value=!0,G.componentSourceType=oe.type,G.dataFrom=oe.dataFrom,i.value=Kt(oe),i.value.customStyle.text.show=!1,l.value=Kt(R),te==="details"&&((q=i.value.type)!=null&&q.includes("table")?Dn(i.value,N):(Dn(i.value,J),i.value.xAxis.forEach(ae=>ae.hide=!1),i.value.yAxis.forEach(ae=>ae.hide=!1)),B()),He(()=>{$e(),ea.paused()})},B=()=>{He(()=>{var oe,R;const ee=o.getViewDataDetails(i.value.id);ee?U.value.includes("chart-mix")?((oe=p.value)==null||oe.renderChartFromDialog(i.value,ee.left),(R=P.value)==null||R.renderChartFromDialog(i.value,ee.right)):p.value.renderChartFromDialog(i.value,ee):Q.value=!0})},pe=ee=>{He(()=>{var R,te;const oe=o.getViewDataDetails(i.value.id);ee==="left"?(R=p.value)==null||R.renderChartFromDialog(i.value,oe.left):ee==="right"&&((te=P.value)==null||te.renderChartFromDialog(i.value,oe.right))})},X=()=>{De()},de=(ee="view")=>{const oe=o.getViewDataDetails(i.value.id),R=o.getViewDetails(i.value.id);if(!oe){va.error(v("chart.field_is_empty_export_error"));return}const te=o.getLastViewRequestInfo(i.value.id),le={...R,chartExtRequest:te,data:oe,type:U.value,downloadType:ee,busiFlag:O.value.type};D.value=!0,jn(le,O.value.name,()=>{Oe(Me)}),D.value=!1},xe=()=>{const ee=o.getViewInstanceInfo(i.value.id);if(!ee)return;const oe=o.getViewDetails(i.value.id);Xn(ee,oe)},Me=()=>{ze().emitter.emit("data-export-center",{activeName:"IN_PROGRESS"})},Oe=ee=>{const oe="el-icon-loading",R="de-message-loading de-message-export";va({message:da("p",null,[v("data_fill.exporting"),da(Mt,{text:!0,size:"small",class:"btn-text",onClick:()=>{ee()}},v("data_export.export_center")),v("data_fill.progress_to_download")]),iconClass:oe,icon:da(Un),showClose:!0,customClass:R})},Ee=["bubble-map","flow-map","heat-map","map","symbolic-map"],De=()=>{var oe;r.value=!Ee.includes(i.value.type),ze().emitter.emit("renderChart-"+i.value.id),ze().emitter.emit("l7-prepare-picture",i.value.id);const ee=(oe=i.value.type)!=null&&oe.includes("table")||fl({type:i.value.type})?2e3:500;setTimeout(()=>{$e(),kl(s.value).then(R=>{r.value=!1;const te=document.createElement("a");te.setAttribute("download",i.value.title),te.href=R,te.click(),ze().emitter.emit("l7-unprepare-picture",i.value.id),ze().emitter.emit("renderChart-"+i.value.id),$e()}).catch(R=>{r.value=!1,$e(),ze().emitter.emit("l7-unprepare-picture",i.value.id),ze().emitter.emit("renderChart-"+i.value.id),console.error("oops, something went wrong!",R)})},ee)},$e=()=>{ka("enlarge-inner-content","canvas-main",G.scale)},x=()=>{ea.closeEnlargeDialogDestroy(i.value.id)};return n({dialogInit:se}),(ee,oe)=>{var et;const R=Go,te=Wo,le=Ro,q=Dt,ae=Yt,Fe=fn,Se=zn,Le=ma,Ze=Sa;return c(),z(Le,{ref:"enlargeDialog",title:(et=e(i))==null?void 0:et.title,"append-to-body":!0,modelValue:_.value,"onUpdate:modelValue":oe[4]||(oe[4]=je=>_.value=je),width:"70vw",trigger:"click",class:"userViewEnlarge-class",onClose:x},Ao({default:y(()=>{var je;return[_.value?Qe((c(),T("div",{key:0,"element-loading-text":e(v)("visualization.export_loading"),"element-loading-background":"rgba(122, 122, 122, 1)",class:"enlarge-outer"},[Qe((c(),T("div",{id:"enlarge-inner-content",class:Xe(["enlarge-inner",{"enlarge-inner-with-header":u.value==="details"&&U.value.includes("chart-mix")}]),ref_key:"viewContainer",ref:s,style:Pe(ce.value)},[u.value==="enlarge"?(c(),z(Ja,{key:0,class:"enlarge-wrapper","opt-type":u.value,"view-info":e(i),config:l.value,"dv-info":e(O),"font-family":(je=e(S))==null?void 0:je.fontFamily,"show-position":"viewDialog"},null,8,["opt-type","view-info","config","dv-info","font-family"])):F("",!0),u.value==="details"&&!U.value.includes("chart-mix")?(c(),T(Ke,{key:1},[Q.value?F("",!0):(c(),z(cn,{key:0,view:e(i),"show-position":"viewDialog",ref_key:"chartComponentDetails",ref:p},null,8,["view"])),Q.value?(c(),z(Ea,{key:1,description:e(v)("visualization.no_details"),"img-type":"noneWhite"},null,8,["description"])):F("",!0)],64)):u.value==="details"&&U.value.includes("chart-mix")?(c(),T(Ke,{key:2},[h(Se,{class:"tab-header",modelValue:he.value,"onUpdate:modelValue":oe[3]||(oe[3]=Ge=>he.value=Ge),onTabChange:pe},{default:y(()=>[h(Fe,{label:e(v)("chart.drag_block_value_axis_left"),name:"left"},null,8,["label"]),h(Fe,{label:e(v)("chart.drag_block_value_axis_right"),name:"right"},null,8,["label"])]),_:1},8,["modelValue"]),C("div",$s,[he.value==="left"?(c(),z(cn,{key:0,view:e(i),"show-position":"viewDialog",ref_key:"chartComponentDetails",ref:p},null,8,["view"])):he.value==="right"?(c(),z(cn,{key:1,view:e(i),"show-position":"viewDialog",ref_key:"chartComponentDetails2",ref:P},null,8,["view"])):F("",!0)])],64)):F("",!0)],6)),[[Ze,e(f).loadingMap[e(d).currentPath]]])],8,Es)),[[Ze,r.value]]):F("",!0)]}),_:2},[e(b)?void 0:{name:"header",fn:y(()=>{var je;return[C("div",zs,[C("div",null,Y((je=e(i))==null?void 0:je.title),1),C("div",Os,[u.value==="enlarge"&&ve.value[0]?(c(),z(le,{key:0,modelValue:ie.value,"onUpdate:modelValue":oe[0]||(oe[0]=Ge=>ie.value=Ge),class:"pixel-select",size:"small"},{default:y(()=>[(c(),T(Ke,null,Pt(ge,Ge=>h(te,{key:Ge.label,label:Ge.label},{default:y(()=>[(c(!0),T(Ke,null,Pt(Ge.options,Te=>(c(),z(R,{key:Te.value,label:Te.label,value:Te.value},null,8,["label","value"]))),128))]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])):F("",!0),u.value==="enlarge"&&ve.value[0]?(c(),z(e(Mt),{key:1,class:"m-button",link:"",size:"middle",onClick:X},{default:y(()=>[h(q,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:y(()=>[h(e(ca))]),_:1}),_e(" "+Y(e(v)("chart.export_img")),1)]),_:1})):F("",!0),u.value==="details"&&ve.value[1]?(c(),z(e(Mt),{key:2,class:"m-button",link:"",size:"middle",loading:D.value,disabled:e(f).loadingMap[e(d).currentPath]>0||G.dataFrom==="template",onClick:oe[1]||(oe[1]=Ge=>de("view"))},{default:y(()=>[h(q,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:y(()=>[h(e(ca))]),_:1}),_e(" "+Y(e(v)("chart.export_excel")),1)]),_:1},8,["loading","disabled"])):F("",!0),u.value==="details"&&ve.value[2]?(c(),z(e(Mt),{key:3,class:"m-button",link:"",size:"middle",loading:D.value,onClick:oe[2]||(oe[2]=Ge=>de("dataset")),disabled:e(f).loadingMap[e(d).currentPath]>0||G.dataFrom==="template"},{default:y(()=>[h(q,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:y(()=>[h(e(ca))]),_:1}),_e(" "+Y(e(v)("chart.export_raw_details")),1)]),_:1},8,["loading","disabled"])):F("",!0),u.value==="details"&&ve.value[2]&&e(i).type==="table-pivot"?(c(),z(e(Mt),{key:4,class:"m-button",link:"",size:"middle",loading:D.value,onClick:xe},{default:y(()=>[h(q,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:y(()=>[h(e(ca))]),_:1}),_e(" "+Y(e(v)("chart.export_excel_formatter")),1)]),_:1},8,["loading"])):F("",!0),ve.value[0]||ve.value[1]||ve.value[2]?(c(),z(ae,{key:5,class:"close-divider",direction:"vertical"})):F("",!0)])])]}),key:"0"}]),1032,["title","modelValue"])}}});const _n=Re(qs,[["__scopeId","data-v-bf3ff8f0"]]),Rs=Be({__name:"CanvasOptBar",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},isFixed:{type:Boolean,default:!1}},setup(t){const n=ot(),{fullscreenFlag:r}=at(n),o=t,_=l=>{l.preventDefault(),l.stopPropagation()},f=()=>{n.clearPanelLinkageInfo(),ze().emitter.emit("clearPanelLinkage",{viewId:"all"})},d=w(()=>n.dvInfo.type==="dataV"&&o.isFixed),i=w(()=>{if(Ve(o.canvasId)){let l=0;return o.componentData.forEach(s=>{s.component==="UserView"?s.linkageFilters&&s.linkageFilters.length>0&&l++:s.component==="Group"?s.propValue.forEach(v=>{v.linkageFilters&&v.linkageFilters.length>0&&l++}):s.component==="DeTabs"&&s.propValue.forEach(v=>{var u;(u=v.componentData)==null||u.forEach(p=>{p.linkageFilters&&p.linkageFilters.length>0&&l++})})}),l}else return!1});return(l,s)=>{const v=gt,u=Dt,p=Mt;return i.value&&(!e(n).mobileInPc||e(pa)())?(c(),T("div",{key:0,class:Xe(["bar-main-right",{"bar-main-preview-fixed":d.value,"bar-main-preview-fixed-fullscreen":e(r)}]),onMousedown:_},[h(p,{type:"warning",onClick:f},{default:y(()=>[h(u,{class:"bar-base-icon"},{default:y(()=>[h(v,{name:"dv-bar-unLinkage"},{default:y(()=>[h(e(oo),{class:"svg-icon"})]),_:1})]),_:1}),_e(Y(l.$t("visualization.remove_all_linkage")),1)]),_:1})],34)):F("",!0)}}});const Xa=Re(Rs,[["__scopeId","data-v-cb154bda"]]),Gs={class:"point-shadow-content"},Ws=Be({__name:"PointShadow",props:{canvasId:{type:String,required:!0}},setup(t){const n=ot(),{mousePointShadowMap:r,canvasStyleData:o}=at(n),_=w(()=>({fontSize:16*o.value.scale/100+"px",width:r.value.width+"px",height:r.value.height+"px"})),f=w(()=>({left:r.value.mouseX-r.value.width/2+"px",top:r.value.mouseY-r.value.height/2-60+"px",width:r.value.width+"px",height:r.value.height+"px"}));return(d,i)=>(c(),T("div",{class:"point-shadow",id:"point-shadow-main",style:Pe(f.value)},[C("div",Gs,[i[1]||(i[1]=C("div",{id:"point-shadow-component",class:"point-shadow-component"},null,-1)),C("div",{class:"point-shadow-tips",style:Pe(_.value)},[...i[0]||(i[0]=[C("div",{style:{width:"100%","text-align":"center"}},"组件将被移出Tab",-1)])],4)])],4))}});const Zs=Re(Ws,[["__scopeId","data-v-f48d4467"]]),Ns={width:"136",height:"96",viewBox:"0 0 136 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function js(t,n){return c(),T("svg",Ns,[...n[0]||(n[0]=[zo('<g filter="url(#filter0_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.3 9H125.7C126.97 9 128 9.77277 128 10.726V82.274C128 83.2272 126.97 84 125.7 84H15.3C14.0297 84 13 83.2272 13 82.274V10.726C13 9.77277 14.0297 9 15.3 9Z" fill="white" fill-opacity="0.8" shape-rendering="crispEdges"></path></g><g filter="url(#filter1_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.3 4H120.7C121.97 4 123 4.77277 123 5.72603V77.274C123 78.2272 121.97 79 120.7 79H10.3C9.02974 79 8 78.2272 8 77.274V5.72603C8 4.77277 9.02974 4 10.3 4Z" fill="white"></path></g><rect x="97" y="20" width="22" height="55" rx="1" fill="#F5F6F7"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M12 72.9821V74C12 74.5523 12.4477 75 13 75H14.0125V74H13L13 72.9821H12ZM12 70.9464H13V68.9107H12V70.9464ZM12 66.875H13V64.8393H12V66.875ZM12 62.8036H13V60.7679H12V62.8036ZM12 58.7321H13V56.6964H12V58.7321ZM12 54.6607H13V52.625H12V54.6607ZM12 50.5893H13V48.5536H12V50.5893ZM12 46.5179H13V44.4821H12V46.5179ZM12 42.4464H13V40.4107H12V42.4464ZM12 38.375H13V36.3393H12V38.375ZM12 34.3036H13V32.2679H12V34.3036ZM12 30.2321H13V28.1964H12V30.2321ZM12 26.0893H13V24.0536H12V26.0893ZM12 22.0179H13V21L14.0125 21V20H13C12.4477 20 12 20.4477 12 21V22.0179ZM16.0375 20V21H18.0625V20H16.0375ZM20.0875 20V21H22.1125V20H20.0875ZM24.1375 20V21H26.1625V20H24.1375ZM28.1875 20V21H30.2125V20H28.1875ZM32.2375 20V21H34.2625V20H32.2375ZM36.2875 20V21H38.3125V20H36.2875ZM40.3375 20V21H42.3625V20H40.3375ZM44.3875 20V21H46.4125V20H44.3875ZM48.4375 20V21H50.4625V20H48.4375ZM52.4875 20V21H54.5125V20H52.4875ZM56.5375 20V21H58.5625V20H56.5375ZM60.5875 20V21H62.6125V20H60.5875ZM64.6375 20V21H66.6625V20H64.6375ZM68.6875 20V21H70.7125V20H68.6875ZM72.7375 20V21H74.7625V20H72.7375ZM76.7875 20V21H78.8125V20H76.7875ZM80.8375 20V21H82.8625V20H80.8375ZM84.8875 20V21H86.9125V20H84.8875ZM88.9375 20V21H90.9625V20H88.9375ZM92.9875 20V21H94V22.0179H95V21C95 20.4477 94.5523 20 94 20H92.9875ZM95 24.0536H94V26.0893H95V24.0536ZM95 28.1964H94V30.2321H95V28.1964ZM95 32.2679H94V34.3036H95V32.2679ZM95 36.3393H94V38.375H95V36.3393ZM95 40.4107H94V42.4464H95V40.4107ZM95 44.4821H94V46.5179H95V44.4821ZM95 48.5536H94V50.5893H95V48.5536ZM95 52.625H94V54.6607H95V52.625ZM95 56.6964H94V58.7321H95V56.6964ZM95 60.7679H94V62.8036H95V60.7679ZM95 64.8393H94V66.875H95V64.8393ZM95 68.9107H94V70.9464H95V68.9107ZM95 72.9821H94V74H92.9875V75H94C94.5523 75 95 74.5523 95 74V72.9821ZM90.9625 75V74H88.9375V75H90.9625ZM86.9125 75V74H84.8875V75H86.9125ZM82.8625 75V74H80.8375V75H82.8625ZM78.8125 75V74H76.7875V75H78.8125ZM74.7625 75V74H72.7375V75H74.7625ZM70.7125 75V74H68.6875V75H70.7125ZM66.6625 75V74H64.6375V75H66.6625ZM62.6125 75V74H60.5875V75H62.6125ZM58.5625 75V74H56.5375V75H58.5625ZM54.5125 75V74H52.4875V75H54.5125ZM50.4625 75V74H48.4375V75H50.4625ZM46.4125 75V74H44.3875V75H46.4125ZM42.3625 75V74H40.3375V75H42.3625ZM38.3125 75V74H36.2875V75H38.3125ZM34.2625 75V74H32.2375V75H34.2625ZM30.2125 75V74H28.1875V75H30.2125ZM26.1625 75V74H24.1375V75H26.1625ZM22.1125 75V74H20.0875V75H22.1125ZM18.0625 75V74H16.0375V75H18.0625Z" fill="#DEE0E3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M31.3027 13.5121L30.4999 14.3149L29.697 13.5121C29.6522 13.4673 29.5797 13.4673 29.535 13.5121L29.4613 13.5857C29.4165 13.6305 29.4165 13.703 29.4613 13.7478L30.382 14.6685C30.4471 14.7336 30.5526 14.7336 30.6177 14.6685L31.5384 13.7478C31.5832 13.703 31.5832 13.6305 31.5384 13.5857L31.4648 13.5121C31.42 13.4673 31.3475 13.4673 31.3027 13.5121Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4H122C122.552 4 123 4.97005 123 6.16667V17C122.5 17 122.552 17 122 17H9C8.44772 17 8 17 8 17V6.16667C8 4.97005 8.44772 4 9 4Z" fill="#050E21"></path><g filter="url(#filter2_d_4811_19625)"><rect x="43" y="17" width="44" height="50" fill="white"></rect></g><rect x="45" y="19" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><path d="M51.0836 27.3737C51.0836 27.6253 50.8797 27.8293 50.628 27.8293C50.3764 27.8293 50.1724 27.6253 50.1724 27.3737V23.8396H49.5044C49.2496 23.8396 49.043 23.633 49.043 23.3781V23.3584C49.043 23.1076 49.2548 22.9142 49.4986 22.8553C49.6483 22.8143 49.7809 22.7469 49.8965 22.6532C50.0162 22.5536 50.1168 22.4247 50.1981 22.2665C50.2368 22.1911 50.2693 22.107 50.2954 22.0143C50.3482 21.8265 50.5062 21.6777 50.7013 21.6777C50.9125 21.6777 51.0836 21.8489 51.0836 22.0601V27.3737Z" fill="#3370FF"></path><path d="M52.7996 24.0417C52.5598 24.0417 52.3608 23.85 52.3782 23.6109C52.3921 23.4205 52.4188 23.239 52.4583 23.0662C52.5268 22.7616 52.6295 22.4979 52.7664 22.2753C52.9033 22.0468 53.0744 21.8711 53.2797 21.748C53.4894 21.6191 53.729 21.5547 53.9985 21.5547C54.2038 21.5547 54.3985 21.5986 54.5824 21.6865C54.7707 21.7744 54.9354 21.9003 55.0766 22.0644C55.2177 22.2284 55.329 22.4306 55.4103 22.6708C55.4958 22.911 55.5386 23.1805 55.5386 23.4793C55.5386 23.7898 55.5022 24.0563 55.4295 24.279C55.3568 24.5016 55.2605 24.7008 55.1407 24.8766C55.021 25.0465 54.8841 25.2017 54.73 25.3423C54.5803 25.4829 54.4284 25.6235 54.2744 25.7641C54.1204 25.8989 53.9707 26.0454 53.8252 26.2035C53.6798 26.3617 53.5514 26.5463 53.4402 26.7572H55.0643C55.3404 26.7572 55.5643 26.9811 55.5643 27.2572V27.3293C55.5643 27.6055 55.3404 27.8293 55.0643 27.8293H52.2658C52.2658 27.472 52.3022 27.1614 52.3749 26.8978C52.4519 26.6342 52.5546 26.3998 52.6829 26.1948C52.8113 25.9838 52.961 25.7905 53.1321 25.6148C53.3076 25.439 53.4915 25.2603 53.684 25.0787C53.7824 24.9849 53.8872 24.8912 53.9985 24.7975C54.1097 24.6979 54.2102 24.5895 54.3001 24.4723C54.3942 24.3551 54.4712 24.2233 54.5311 24.0768C54.5953 23.9304 54.6274 23.7634 54.6274 23.5759C54.6274 23.2771 54.5632 23.0457 54.4348 22.8817C54.3108 22.7118 54.1503 22.6268 53.9536 22.6268C53.8209 22.6268 53.7076 22.6708 53.6134 22.7586C53.5236 22.8407 53.4509 22.952 53.3953 23.0926C53.3396 23.2273 53.299 23.3797 53.2733 23.5496C53.2711 23.5667 53.269 23.5839 53.267 23.601C53.2387 23.8433 53.0435 24.0417 52.7996 24.0417Z" fill="#3370FF"></path><path d="M57.6919 24.4798C57.6919 24.3122 57.8396 24.1823 58.0064 24.1647C58.1176 24.153 58.2203 24.1208 58.3144 24.0681C58.4128 24.0095 58.4919 23.9275 58.5518 23.822C58.616 23.7165 58.6481 23.5759 58.6481 23.4002C58.6481 23.1365 58.5839 22.9344 58.4556 22.7938C58.3272 22.6532 58.1796 22.5829 58.0128 22.5829C57.7818 22.5829 57.6064 22.6883 57.4866 22.8993C57.4281 23.0031 57.3849 23.1212 57.3572 23.2536C57.3086 23.4853 57.1262 23.6814 56.8895 23.6814C56.6506 23.6814 56.4555 23.4836 56.4878 23.2469C56.5083 23.0967 56.5374 22.9544 56.5753 22.8202C56.6523 22.5565 56.7571 22.331 56.8898 22.1435C57.0267 21.956 57.1892 21.8125 57.3775 21.7129C57.5657 21.6074 57.7753 21.5547 58.0064 21.5547C58.1861 21.5547 58.3657 21.5928 58.5454 21.6689C58.7251 21.7392 58.8855 21.8476 59.0267 21.9941C59.1722 22.1406 59.2898 22.3192 59.3797 22.5302C59.4695 22.7411 59.5144 22.9842 59.5144 23.2596C59.5144 23.5584 59.4609 23.822 59.354 24.0505C59.2513 24.279 59.0952 24.4342 58.8855 24.5162V24.5338C59.1337 24.61 59.3283 24.774 59.4695 25.026C59.6107 25.2779 59.6813 25.5796 59.6813 25.9311C59.6813 26.2533 59.6342 26.5404 59.5401 26.7923C59.4502 27.0443 59.3283 27.2552 59.1743 27.4251C59.0203 27.595 58.8427 27.7239 58.6417 27.8118C58.4406 27.8996 58.231 27.9436 58.0128 27.9436C57.7604 27.9436 57.5294 27.8938 57.3197 27.7942C57.1144 27.6946 56.939 27.551 56.7935 27.3636C56.6481 27.1702 56.5347 26.9359 56.4534 26.6605C56.4093 26.5028 56.3785 26.3317 56.3611 26.1471C56.3383 25.9065 56.5388 25.7114 56.7805 25.7114C57.0199 25.7114 57.2107 25.9038 57.2582 26.1383C57.2614 26.1543 57.2648 26.1702 57.2684 26.186C57.3026 26.3324 57.3518 26.4613 57.416 26.5726C57.4802 26.6781 57.5593 26.7631 57.6534 26.8275C57.7518 26.8919 57.8673 26.9242 58 26.9242C58.2053 26.9242 58.3786 26.8392 58.5197 26.6693C58.6609 26.4936 58.7315 26.2563 58.7315 25.9575C58.7315 25.7231 58.6973 25.5444 58.6288 25.4214C58.5647 25.2984 58.4812 25.2105 58.3786 25.1578C58.2759 25.0992 58.1625 25.067 58.0385 25.0611C57.8477 25.0424 57.6919 24.8881 57.6919 24.6964V24.4798Z" fill="#3370FF"></path><path d="M59.1813 29.0078H49.543C49.2668 29.0078 49.043 29.2317 49.043 29.5078V29.7057C49.043 29.9819 49.2668 30.2057 49.543 30.2057H59.1813C59.4574 30.2057 59.6813 29.9819 59.6813 29.7057V29.5078C59.6813 29.2317 59.4574 29.0078 59.1813 29.0078Z" fill="#00D6B9"></path><rect x="66.2773" y="19" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><path d="M75.4301 24.6753C75.5122 24.4583 75.8143 24.465 75.8866 24.6855C76.1381 25.4531 76.5204 26.6799 76.5115 27.0164C76.4981 27.517 76.0819 27.9119 75.5818 27.8985C75.0817 27.8851 74.6871 27.4685 74.7005 26.968C74.7095 26.6317 75.1451 25.4287 75.4301 24.6753Z" fill="#00D6B9"></path><path d="M71.3832 26.453C71.3832 24.1007 73.2883 22.1937 75.6385 22.1937C77.9886 22.1937 79.8938 24.1007 79.8938 26.453C79.8938 27.6187 79.4265 28.6746 78.6678 29.4442C78.5646 29.5489 78.5546 29.7166 78.6526 29.8262L79.0073 30.2229C79.1053 30.3324 79.274 30.3422 79.3784 30.2389C80.3528 29.2743 80.9576 27.934 80.9576 26.453C80.9576 23.5126 78.5762 21.1289 75.6385 21.1289C72.7008 21.1289 70.3193 23.5126 70.3193 26.453C70.3193 27.9213 70.9138 29.2513 71.8735 30.2139C71.9773 30.318 72.146 30.3093 72.2447 30.2004L72.602 29.806C72.7007 29.6971 72.6918 29.5293 72.5894 29.424C71.8424 28.6562 71.3832 27.6086 71.3832 26.453Z" fill="#3370FF"></path><rect x="45" y="35.1855" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><path d="M48.6172 37.957C48.6172 37.6809 48.841 37.457 49.1172 37.457H59.4647C59.7408 37.457 59.9647 37.6809 59.9647 37.957V39.7286H48.6172V37.957Z" fill="#3370FF"></path><path d="M52.0214 40.2969H48.6172V42.0006H52.0214V40.2969Z" fill="#ADC6FF"></path><path d="M55.9931 40.2969H52.5888V42.0006H55.9931V40.2969Z" fill="#ADC6FF"></path><path d="M59.9647 40.2969H56.5604V42.0006H59.9647V40.2969Z" fill="#ADC6FF"></path><path d="M52.0214 44.8401H48.6172V46.2598C48.6172 46.4167 48.7442 46.5438 48.9009 46.5438H52.0214V44.8401Z" fill="#ADC6FF"></path><path d="M55.9931 44.8401H52.5888V46.5438H55.9931V44.8401Z" fill="#ADC6FF"></path><path d="M59.9647 44.8401H56.5604V46.5438H59.681C59.8377 46.5438 59.9647 46.4167 59.9647 46.2598V44.8401Z" fill="#ADC6FF"></path><path d="M52.0214 42.5685H48.6172V44.2722H52.0214V42.5685Z" fill="#ADC6FF"></path><path d="M55.9931 42.5685H52.5888V44.2722H55.9931V42.5685Z" fill="#ADC6FF"></path><path d="M59.9647 42.5685H56.5604V44.2722H59.9647V42.5685Z" fill="#ADC6FF"></path><path d="M66.2773 36.007C66.2773 35.5533 66.6504 35.1855 67.1107 35.1855H84.1674C84.6277 35.1855 85.0007 35.5533 85.0007 36.007V47.9937C85.0007 48.4474 84.6277 48.8152 84.1674 48.8152H67.1107C66.6504 48.8152 66.2773 48.4474 66.2773 47.9937V36.007Z" fill="#F5F6F7"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M84.1674 35.5141H67.1107C66.8345 35.5141 66.6107 35.7348 66.6107 36.007V47.9937C66.6107 48.2659 66.8345 48.4866 67.1107 48.4866H84.1674C84.4436 48.4866 84.6674 48.2659 84.6674 47.9937V36.007C84.6674 35.7348 84.4436 35.5141 84.1674 35.5141ZM67.1107 35.1855C66.6504 35.1855 66.2773 35.5533 66.2773 36.007V47.9937C66.2773 48.4474 66.6504 48.8152 67.1107 48.8152H84.1674C84.6277 48.8152 85.0007 48.4474 85.0007 47.9937V36.007C85.0007 35.5533 84.6277 35.1855 84.1674 35.1855H67.1107Z" fill="#3370FF"></path><path d="M70.1772 37.457C70.0206 37.457 69.8936 37.5842 69.8936 37.741V39.7286H81.2411V37.741C81.2411 37.5842 81.1141 37.457 80.9574 37.457H70.1772Z" fill="#3370FF"></path><path d="M69.8936 40.2965H72.1631V46.5435H70.1772C70.0206 46.5435 69.8936 46.4163 69.8936 46.2595V40.2965Z" fill="#3370FF"></path><path d="M81.2411 40.2969H72.7305V42.0006H81.2411V40.2969Z" fill="#ADC6FF"></path><path d="M81.2411 44.8401H72.7305V46.5438H80.9574C81.1141 46.5438 81.2411 46.4167 81.2411 46.2598V44.8401Z" fill="#ADC6FF"></path><path d="M81.2411 42.5685H72.7305V44.2722H81.2411V42.5685Z" fill="#ADC6FF"></path><rect x="45" y="51.3711" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><g clip-path="url(#clip0_4811_19625)"><path d="M53.8698 55.0398C53.7832 54.9532 53.6416 54.9573 53.5603 55.0489L53.2654 55.3809C53.1252 55.5387 52.9247 55.7643 52.6831 56.0361C52.2 56.5795 51.5529 57.3071 50.897 58.0434C49.5784 59.5238 48.2414 61.0202 48.1081 61.1536C47.9835 61.2784 47.9835 61.4806 48.1081 61.6054C48.2328 61.7301 48.4348 61.7301 48.5595 61.6054C48.7099 61.4548 50.068 59.9342 51.3734 58.4686C52.0296 57.732 52.6768 57.0043 53.16 56.4608C53.3988 56.1921 53.5975 55.9685 53.7375 55.8109L56.4011 58.477C56.4715 58.5475 56.5812 58.5597 56.6653 58.5064L61.3517 55.5377L61.3537 55.5362C61.4981 55.4351 61.5332 55.2359 61.4321 55.0914C61.3316 54.9476 61.1342 54.9121 60.99 55.0112L56.6002 57.7728L53.8698 55.0398Z" fill="#3370FF"></path><path d="M48.3338 57.8652C48.1575 57.8652 48.0146 58.0083 48.0146 58.1847C48.0146 58.3611 48.1575 58.5041 48.3338 58.5041H53.0087L54.9251 60.7648C54.9604 60.8064 55.0103 60.8329 55.0646 60.8387L61.0612 61.4833C61.2357 61.5046 61.3946 61.3805 61.4164 61.2058C61.4383 61.0307 61.3142 60.871 61.1393 60.8492L55.3045 60.2249L53.368 57.9404C53.3276 57.8927 53.2682 57.8652 53.2057 57.8652H48.3338Z" fill="#00D6B9"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M47.3404 52.6484V63.0831L62.0213 63.0831L62.0213 63.722H46.7021V52.6484H47.3404Z" fill="#DEE0E3"></path></g><rect x="66.2773" y="51.3711" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><g clip-path="url(#clip1_4811_19625)"><path d="M75.6521 56.2206L73.7532 57.4359C73.7053 57.4705 73.6362 57.4705 73.5817 57.4425L71.1894 56.1594C71.1282 56.1248 71.0458 56.1315 70.9979 56.1794C70.9979 56.1794 69.2559 57.9563 69.2559 57.9976V62.6588H82.6601V55.2051L75.6947 56.2007L75.6521 56.2206Z" fill="#ADC6FF"></path><path d="M82.829 55.2142C82.8043 55.0395 82.6428 54.9179 82.4682 54.9426L75.6027 55.9151L75.4979 55.9643L73.6552 57.1435L71.3425 55.9031C71.1759 55.811 70.935 55.8147 70.7723 55.9775L70.7718 55.9781L70.4978 56.2563C70.3337 56.4229 70.1145 56.6456 69.8938 56.8698C69.7988 56.9664 69.7033 57.0625 69.6079 57.1587C69.4466 57.3212 69.2853 57.4837 69.126 57.6481C69.0028 57.7752 69.0087 57.9783 69.1373 58.0999C69.265 58.2205 69.4659 58.2159 69.5888 58.0905C69.6332 58.0454 69.6775 58.0002 69.7219 57.9551L69.736 57.9407C69.9058 57.768 70.1279 57.5424 70.3485 57.3182C70.5692 57.094 70.7884 56.8714 70.9524 56.7048L71.1368 56.5176L73.4328 57.7491L73.4363 57.7509C73.5721 57.8205 73.7681 57.837 73.9307 57.7255L75.7937 56.5333L82.5577 55.5752C82.7322 55.5505 82.8537 55.3889 82.829 55.2142Z" fill="#3370FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M68.6168 52.6484V63.0831L83.2977 63.0831L83.2977 63.722H67.9785V52.6484H68.6168Z" fill="#DEE0E3"></path></g><rect x="43" y="5" width="11" height="11" rx="1" fill="white" fill-opacity="0.15"></rect><g clip-path="url(#clip2_4811_19625)"><path d="M48.374 14.123C50.1378 14.123 51.5968 12.8184 51.8388 11.1216C51.8778 10.8482 51.6502 10.623 51.374 10.623C50.374 10.623 49.374 10.623 48.374 10.623C48.374 9.46271 48.374 8.46265 48.374 7.62288C48.374 7.34673 48.1489 7.1193 47.8755 7.15828C46.1786 7.40026 44.874 8.8593 44.874 10.623C44.874 12.556 46.441 14.123 48.374 14.123Z" fill="#3370FF"></path><path d="M49.4592 9.87377C49.2741 9.87377 49.124 9.72371 49.124 9.53859V7.12221C49.124 6.98916 49.2392 6.88454 49.3703 6.90746C50.7554 7.14971 51.8481 8.24239 52.0903 9.62754C52.1132 9.7586 52.0086 9.87377 51.8756 9.87377H49.4592Z" fill="#00D6B9"></path></g><g filter="url(#filter3_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M90.0006 47.3536L94.1487 45.8794L83 39.75L86.2502 52.0504L88.6842 48.3821L91.5982 52.112L92.9147 51.0835L90.0006 47.3536Z" fill="#363B3E"></path></g><g filter="url(#filter4_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M96.5823 46.0764L91.6432 47.8317L94.3187 51.2563L91.4263 53.5161L88.7508 50.0915L85.8527 54.4592L81.4375 37.75L96.5823 46.0764ZM88.6846 48.3826L91.5987 52.1124L92.9151 51.0839L90.001 47.3541L94.1491 45.8798L83.0004 39.7504L86.2506 52.0508L88.6846 48.3826Z" fill="white" fill-opacity="0.8"></path></g><defs><filter id="filter0_d_4811_19625" x="5" y="5" width="131" height="91" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter1_d_4811_19625" x="0" y="0" width="131" height="91" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter2_d_4811_19625" x="35" y="13" width="60" height="66" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter3_d_4811_19625" x="80" y="37.75" width="17.1484" height="18.3613" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter4_d_4811_19625" x="78.4375" y="35.75" width="21.1445" height="22.709" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><clipPath id="clip0_4811_19625"><rect width="17.0213" height="11.9259" fill="white" transform="translate(45.8516 52.2227)"></rect></clipPath><clipPath id="clip1_4811_19625"><rect width="17.0213" height="11.9259" fill="white" transform="translate(67.1279 52.2227)"></rect></clipPath><clipPath id="clip2_4811_19625"><rect width="9" height="9" fill="white" transform="translate(44 6)"></rect></clipPath></defs>',42)])])}const Us={render:js},Xs={class:"drag-info-main"},Ys={key:1,class:"mobile-in-pc-tips"},Js=Be({__name:"DragInfo",setup(t){const{t:n}=Tt(),r=ot(),{dvInfo:o,mobileInPc:_}=at(r),f=n("visualization.resource_create_tips")+(o.value.type==="dashboard"?n("work_branch.dashboard"):n("work_branch.big_data_screen"));return(d,i)=>{const l=gt,s=On;return c(),T("div",Xs,[e(_)?(c(),T("div",Ys,"请从右侧添加可视化组件")):(c(),T(Ke,{key:0},[h(s,{style:{"justify-content":"center"}},{default:y(()=>[h(l,{name:"dv-drag-tips"},{default:y(()=>[h(e(Us),{class:"svg-icon",style:{width:"125px",height:"125px"}})]),_:1})]),_:1}),h(s,{class:"tips-info"},{default:y(()=>[_e(Y(f))]),_:1})],64))])}}});const Qs=Re(Js,[["__scopeId","data-v-6b284e56"]]),Ks={style:{width:"100%",height:"100%"}},er={key:0,class:"pop-content"},tr=Be({__name:"Component",props:{dvInfo:{type:Object,required:!0},canvasStyleData:{type:Object,required:!0},popComponentData:{type:Array,required:!0},canvasViewInfo:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},scale:{type:Number,required:!1,default:1},showPosition:{type:String,required:!1,default:"preview"},canvasState:{type:Object,required:!0}},setup(t){const n=ot(),r=Nt(),o=I(!1),{t:_}=Tt(),f=t,{canvasStyleData:d,popComponentData:i,canvasViewInfo:l,scale:s,canvasState:v}=ft(f),{curComponent:u}=at(n),p=w(()=>({fontSize:30*f.scale+"px",height:d.value.height*f.scale*.15+"px"})),P=w(()=>f.showPosition==="preview"?f.scale:f.scale*100),O=J=>{var G;return((G=u.value)==null?void 0:G.id)===J.id&&f.showPosition==="popEdit"},b=J=>{o.value=!0,J.preventDefault(),J.dataTransfer.dropEffect="copy"},S=()=>{o.value=!1},D=J=>{if(o.value=!1,!i.value||i.value.length===0){J.preventDefault(),J.stopPropagation();const G=J.dataTransfer.getData("id");if(G){const N=Yn(G);N.component==="VQuery"?(N.style.top=0,N.style.left=0,N.id=Ia(),N.category="hidden",N.commonBackground.backgroundColor="rgba(41, 41, 41, 1)",bi(N),n.addComponent({component:N,index:void 0}),yn(N),r.recordSnapshotCache("renderChart",N.id)):va.error(_("visualization.support_query"))}}},U=()=>{o.value=!1},he=w(()=>({width:"100%",height:"100%"})),Q=w(()=>{if(v.value.curPointArea==="hidden"){let J=0;return i.value.forEach(G=>{J=0+G.propValue.length}),{height:J<8?"15%":J*45*s.value/4+"px"}}else return{height:"0px!important",overflow:"hidden",border:"0!important"}});return bt(()=>{ne.on("handleDragEnd-canvas-main",U)}),Zt(()=>{ne.off("handleDragEnd-canvas-main",U)}),(J,G)=>(c(),T("div",{class:Xe(["pop-area",{"preview-pop":t.showPosition==="preview"}]),style:Pe(Q.value),onMousedown:G[0]||(G[0]=Rt(()=>{},["stop"])),onMousedup:G[1]||(G[1]=Rt(()=>{},["stop"]))},[C("div",Ks,[e(i)&&e(i).length>0?(c(),T("div",er,[(c(!0),T(Ke,null,Pt(e(i),(N,ve)=>(c(),z(Ja,{id:"component-pop-"+N.id,"view-info":e(l)[N.id],key:ve,config:N,index:ve,"dv-info":t.dvInfo,"pop-active":O(N),"show-position":t.showPosition,style:Pe(he.value),scale:P.value},null,8,["id","view-info","config","index","dv-info","pop-active","show-position","style","scale"]))),128))])):t.showPosition==="popEdit"?(c(),T("div",{key:1,class:Xe(["pop-area-main",{"pop-area-active":o.value}]),style:Pe(p.value),onDrop:D,onDragover:b,onDragleave:S},[C("span",null,Y(e(_)("visualization.pop_area_tips")),1)],38)):F("",!0)])],38))}});const Ya=Re(tr,[["__scopeId","data-v-ad79b399"]]),Pd=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"})),ar={class:"m-label"},nr=Be({__name:"DatasetParamsComponent",setup(t,{expose:n}){const r=I(!1),o=I(),_=I(!1),f=ot(),{canvasViewInfo:d}=at(f),i=At({viewId:null}),l=I([]),s=()=>{o.value.clearValidate(),_.value=!1},v=I(null),u=I({}),p=D=>{if(D){i.viewId=D.id;const U=d.value[i.viewId];l.value=Kt(U.calParams),_.value=!0}},P=()=>{if(O.value){va.error("请输入正确参数");return}d.value[i.viewId].calParams=l.value,ze().emitter.emit("calcData-"+i.viewId,d.value[i.viewId]),s()},O=w(()=>!l.value||l.value&&l.value.filter(D=>D.value===null||D.value===void 0).length>0),b=()=>_.value,S=D=>{D.preventDefault(),D.stopPropagation()};return n({optInit:p,statesCheck:b,resetForm:s}),(D,U)=>{const he=No,Q=En,J=Zo,G=Mt,N=ma,ve=Sa;return Qe((c(),z(N,{title:"计算参数输入",modelValue:_.value,"onUpdate:modelValue":U[3]||(U[3]=ce=>_.value=ce),width:"400px","before-close":s,onClick:S},{footer:y(()=>[h(G,{secondary:"",onClick:U[1]||(U[1]=ce=>s())},{default:y(()=>[...U[5]||(U[5]=[_e("取消",-1)])]),_:1}),h(G,{type:"primary",onClick:U[2]||(U[2]=ce=>P())},{default:y(()=>[...U[6]||(U[6]=[_e("确认",-1)])]),_:1})]),default:y(()=>[_.value?(c(),z(J,{key:0,"label-position":"top",ref_key:"subject",ref:o,model:v.value,rules:u.value,onSubmit:U[0]||(U[0]=Rt(()=>{},["prevent"]))},{default:y(()=>[(c(!0),T(Ke,null,Pt(l.value,ce=>(c(),z(Q,{key:ce,class:"form-item",prop:"value_"+ce.name},{label:y(()=>[C("label",ar,[_e(" 计算字段["+Y(ce.name)+"] ",1),U[4]||(U[4]=C("span",{style:{color:"red"}},"*",-1))])]),default:y(()=>[h(he,{style:{width:"100%"},modelValue:ce.value,"onUpdate:modelValue":ie=>ce.value=ie,placeholder:"请输入一个数字","controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]))),128))]),_:1},8,["model","rules"])):F("",!0)]),_:1},8,["modelValue"])),[[ve,r.value]])}}});const io=Re(nr,[["__scopeId","data-v-f014cb45"]]),or={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},lr=["width","height"],ir=["d"],sr=["width","height"],rr=["width","height"],ur=["d"],cr=["width","height"],dr=["width","height"],vr=["d"],Ta=2,pr=Be({__name:"DeGrid",props:{matrixStyle:{type:Object},themes:{type:String,default:"dark"}},setup(t){const n=t,r=w(()=>"M "+f.value+" 0 L 0 0 0 "+d.value),o=w(()=>"M "+i.value+" 0 L 0 0 0 "+l.value),_=w(()=>"M "+s.value+" 0 L 0 0 0 "+v.value),f=w(()=>n.matrixStyle.width*2*Ta),d=w(()=>n.matrixStyle.height*2*Ta),i=w(()=>n.matrixStyle.width*Ta),l=w(()=>n.matrixStyle.height*Ta),s=w(()=>n.matrixStyle.width),v=w(()=>n.matrixStyle.height);return(u,p)=>(c(),T("svg",or,[C("defs",null,[C("pattern",{id:"smallGrid",width:s.value,height:v.value,patternUnits:"userSpaceOnUse"},[C("path",{d:_.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"0.8"},null,8,ir)],8,lr),C("pattern",{id:"middleGrid",width:i.value,height:l.value,patternUnits:"userSpaceOnUse"},[C("rect",{width:i.value,height:l.value,fill:"url(#smallGrid)"},null,8,rr),C("path",{d:o.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"1"},null,8,ur)],8,sr),C("pattern",{id:"grid",width:f.value,height:d.value,patternUnits:"userSpaceOnUse"},[C("rect",{width:f.value,height:d.value,fill:"url(#middleGrid)"},null,8,dr),C("path",{d:r.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"1.2"},null,8,vr)],8,cr)]),p[0]||(p[0]=C("rect",{width:"100%",height:"100%",fill:"url(#grid)"},null,-1))]))}});const fr=Re(pr,[["__scopeId","data-v-4858d2f1"]]),hr={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},mr=["width","height"],gr=["width","height"],yr=["d"],_r=["width","height"],wr=["width","height"],Cr=["d"],br=Be({__name:"DeGridScreen",props:{matrixStyle:{type:Object},themes:{type:String,default:"dark"}},setup(t){const n=t,r=w(()=>"M "+o.value+" 0 L 0 0 0 "+_.value),o=w(()=>n.matrixStyle.width*5),_=w(()=>n.matrixStyle.height*5),f=w(()=>"M "+d.value+" 0 L 0 0 0 "+i.value),d=w(()=>n.matrixStyle.width),i=w(()=>n.matrixStyle.height);return(l,s)=>(c(),T("svg",hr,[C("defs",null,[C("pattern",{id:"grid",width:o.value,height:_.value,patternUnits:"userSpaceOnUse"},[C("rect",{width:o.value,height:_.value,fill:"url(#middleGrid)"},null,8,gr),C("path",{d:r.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"0.7"},null,8,yr)],8,mr),C("pattern",{id:"middleGrid",width:d.value,height:i.value,patternUnits:"userSpaceOnUse"},[C("rect",{width:d.value,height:i.value,fill:"url(#smallGrid)"},null,8,wr),C("path",{d:f.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"0.3"},null,8,Cr)],8,_r)]),s[0]||(s[0]=C("rect",{width:"100%",height:"100%",fill:"url(#grid)"},null,-1))]))}});const xr=Re(br,[["__scopeId","data-v-fb4384bd"]]);const Sr={},kr={class:"areaShadow"};function Ir(t,n){return c(),T("div",kr)}const Vr=Re(Sr,[["render",Ir],["__scopeId","data-v-65935e8f"]]),Mr=["id"],Dr=Be({__name:"CanvasCore",props:{themes:{type:String,default:"dark"},isEdit:{type:Boolean,default:!0},canvasStyleData:{type:Object,required:!0},componentData:{type:Array,required:!0},popComponentData:{type:Array,required:!1,default:()=>[]},canvasViewInfo:{type:Object,required:!0},canvasId:{type:String,default:"canvas-main"},dvModel:{type:String,default:"dv"},baseWidth:{required:!1,type:Number,default:100},baseHeight:{required:!1,type:Number,default:50},baseMarginLeft:{required:!1,type:Number,default:20},baseMarginTop:{required:!1,type:Number,default:20},draggable:{required:!1,default:!0,type:Boolean},dragStart:{required:!1,type:Function,default(){return{}}},dragging:{required:!1,type:Function,default(){return{}}},dragEnd:{required:!1,type:Function,default(){return{}}},resizable:{required:!1,type:Boolean,default:!0},resizeStart:{required:!1,type:Function,default(){return{}}},resizing:{required:!1,type:Function,default(){return{}}},resizeEnd:{required:!1,type:Function,default(){return{}}},scale:{type:Number,required:!1,default:1},canvasActive:{type:Boolean,required:!1,default:!0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(t,{expose:n}){const r=Nt(),o=ot(),_=ja(),f=hn(),{curComponent:d,dvInfo:i,editMode:l,tabMoveOutComponentId:s,canvasState:v,mainScrollTop:u}=at(o),{editorMap:p,areaData:P,isCtrlOrCmdDown:O}=at(_),b=t,{baseWidth:S,baseHeight:D,baseMarginLeft:U,baseMarginTop:he,draggable:Q,dragStart:J,dragging:G,dragEnd:N,resizable:ve,resizeStart:ce,resizing:ie,resizeEnd:ge,isEdit:se,canvasId:B,canvasStyleData:pe,componentData:X,canvasViewInfo:de,themes:xe}=ft(b),Me=Ve(B.value),Oe=I(0),Ee=I(0),De=I({x:0,y:0}),$e=I(0),x=I(0),ee=I(!1),oe=["width","height","top","left","rotate","backgroundColor","borderWidth","borderStyle","borderColor"],R=["width","height","top","left","rotate"],te=["width","height","top","left","rotate","borderActive","borderWidth","borderRadius","borderStyle","borderColor"],le=I(null),q=I(null),ae=I(null),Fe=I(null),Se=I("editor-"+B.value);Ct(()=>i.value,()=>{Ze()},{deep:!0}),Ct([()=>X.value.length,()=>pe.value],()=>{He(()=>{Ze()})},{deep:!0}),Ct(()=>P.value.components.length,()=>{Fo()});const Le=()=>{setTimeout(()=>{Ze()})},Ze=(a="editor-canvas-main")=>{try{i.value.watermarkInfo&&i.value.watermarkInfo.settingContent&&Ve(B.value)&&ka(a,B.value,lt.value)}catch{console.warn("Watermarks are not supported!")}},et=w(()=>({width:S.value,height:D.value})),je=w(()=>i.value.type==="dashboard"&&X.value.length===0&&B.value==="canvas-main"),Ge=w(()=>{var a;return((a=d.value)==null?void 0:a.id)||""}),{emitter:Te}=ze(),lt=w(()=>M.value?pe.value.scale*1.2/100:pe.value.scale/100),rt=w(()=>M.value?o.canvasStyleData.scale*1.2/100:o.canvasStyleData.scale/100),W=w(()=>B.value==="canvas-main"&&d.value&&d.value.canvasId!=="canvas-main"&&s.value),j=w(()=>{var a,m,g,A;return M.value&&((m=(a=pe.value)==null?void 0:a.dashboard)==null?void 0:m.gap)==="yes"?(A=(g=pe.value)==null?void 0:g.dashboard)==null?void 0:A.gapSize:0}),V=w(()=>({baseWidth:S.value,baseHeight:Ht.value?S.value*1.6:D.value,curGap:j.value})),M=w(()=>i.value.type==="dashboard"),H=w(()=>In(B.value)),E=I(!1),ke=I(!1),me=I(0),we=I(0),ut=I(0),L=I(null),ue=I(null),We=I([]),Ce=I([]);let kt,Et=!1,dt=100;const zt=I(0);let $=0,fe=I(null);const Ye=a=>{if(M.value||l.value==="preview"||a.buttons===2)return;!d.value||Ko(d.value.component),Je();const m=p.value[B.value].getBoundingClientRect();Oe.value=m.x,Ee.value=m.y;const g=a.clientX,A=a.clientY;De.value.x=g-Oe.value,De.value.y=A-Ee.value,ee.value=!0;const Z=Ae=>{$e.value=Math.abs(Ae.clientX-g),x.value=Math.abs(Ae.clientY-A),Ae.clientX<g&&(De.value.x=Ae.clientX-Oe.value),Ae.clientY<A&&(De.value.y=Ae.clientY-Ee.value)},Ie=Ae=>{if(document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",Ie),Ae.clientX==g&&Ae.clientY==A){Je();return}ht()};document.addEventListener("mousemove",Z),document.addEventListener("mouseup",Ie)},Je=()=>{ee.value=!1,$e.value=0,x.value=0,_.setAreaData({style:{left:0,top:0,width:0,height:0},components:[]})},ht=()=>{const a=Ot();if(a.length<=1){Je();return}let m=1/0,g=1/0,A=-1/0,Z=-1/0;a.forEach(Ae=>{let ye={left:0,top:0,right:0,bottom:0};Ae.component=="Group"?Ae.propValue.forEach(wt=>{const St=el(`#shape-id-${wt.id}`).getBoundingClientRect();ye.left=St.left-Oe.value,ye.top=St.top-Ee.value,ye.right=St.right-Oe.value,ye.bottom=St.bottom-Ee.value,ye.left<g&&(g=ye.left),ye.top<m&&(m=ye.top),ye.right>A&&(A=ye.right),ye.bottom>Z&&(Z=ye.bottom)}):ye=La(Ae.style),ye.left<g&&(g=ye.left),ye.top<m&&(m=ye.top),ye.right>A&&(A=ye.right),ye.bottom>Z&&(Z=ye.bottom)}),De.value.x=g,De.value.y=m,$e.value=A-g,x.value=Z-m;const Ie={left:g,top:m,width:$e.value,height:x.value};_.setAreaData({style:Ie,components:a}),a.length>0&&(o.setCurComponent({component:null,index:null}),ee.value=!1)},Ot=()=>{const a=[],{x:m,y:g}=De.value;return X.value.forEach(A=>{if(A.isLock||!A.isShow)return;const Z=La(A.style);m<=Z.left&&g<=Z.top&&Z.left+Z.width<=m+$e.value&&Z.top+Z.height<=g+x.value&&a.push(A)}),a},jt=a=>{if(M.value||l.value==="preview")return;a.stopPropagation(),a.preventDefault();const m=a.clientX,g=a.clientY,A=ue.value.getBoundingClientRect(),Z=A.left,Ie=A.top,Ae=m-Z;let ye=g-Ie;if(!d.value||d.value&&!d.value.editing){d.value&&["VQuery"].includes(d.value.component)&&(d==null?void 0:d.value.category)==="base"&&(ye=ye*rt.value+d.value.style.top*(1-rt.value)),f.showContextMenu({top:ye,left:Ae,position:"canvasCore"});const wt=document.getElementById("close-button");wt&&wt.click()}},aa=a=>Aa(a,a.borderActive?R:te),na=a=>Aa(a,oe),Ut=a=>Fn(a,{dvModel:i.value.type,cellWidth:me.value,cellHeight:we.value,curGap:j.value,showPosition:"edit"}),oa=(a,m)=>{a.component==="VText"&&o.setShapeStyle({top:null,left:null,width:null,height:Qa(a,m),rotate:null})},Qa=(a,m)=>{let{lineHeight:g,fontSize:A,height:Z}=a.style;g===""&&(g=1.5);const Ie=(m.split("<br>").length-1)*g*(A||pe.value.fontSize);return Z>Ie?Z:Ie},Ka=w(()=>In(B.value)?{width:"100%",height:"100%"}:M.value?{width:"100%",height:zt.value*we.value+"px"}:{...Ga(pe.value,B.value),width:za(pe.value.width)+"px",height:za(pe.value.height)+"px"});function ga(a,m){Et?kt=a:(function(g){Et=!0,setTimeout(function(){g(),setTimeout(function(){Et=!1,kt!=null&&ga(kt,m)},dt)},m)}(a),kt=void 0)}function en(a){if(a.clientY+50>=window.innerHeight){let m=un(document.body);m.scrollTop(m.scrollTop()+20)}else if(a.clientY<=150){let m=un(document.body);m.scrollTop(m.scrollTop()-20)}}function la(){$=ut.value;let a=36;for(let m=0;m<a;m++){let g=[];for(let A=0;A<ut.value;A++)g.push({el:!1});We.value.push(g)}}function tn(a){const m=a.sizeX;let g=1,A=-1,Z=We.value;if(!(m<=0)){if(X.value.forEach(Ie=>{const Ae=Ie.y+Ie.sizeY-2;A<Ae&&(A=Ae)}),A<0)return 1;{const Ie=Z[A];for(let Ae=0,ye=m-1;ye<Ie.length;Ae++,ye++){let wt=0;for(let St=0;St<m;St++)Ie[Ae+St].el||wt++;if(wt===m){g=Ae+1;break}}return g}}}function Xt(a){let m=We.value;if(!(a.x<=0||a.y<=0))for(let g=a.x-1;g<a.x-1+a.sizeX;g++)for(let A=a.y-1;A<a.y-1+a.sizeY;A++)try{m[A][g]&&(m[A][g].el=a)}catch(Z){console.warn("addItemToPositionBox-warn:",Z)}}function ya(a){let m=We.value;a+=2;for(let g=0;g<a;g++)if(m[g]==null){let A=[];for(let Z=0;Z<$;Z++)A.push({el:!1});m.push(A)}zt.value=a,un(ue.value).css("height",(zt.value+2)*we.value+"px")}function k(a){let m=We.value;if(!(a.x<=0||a.y<=0))for(let g=a.x-1;g<a.x-1+a.sizeX;g++)for(let A=a.y-1;A<a.y-1+a.sizeY;A++)try{m[A][g]&&(m[A][g].el=!1)}catch(Z){console.warn(Z)}}function K(){let a=ue.value.offsetWidth,m=Math.round(a/me.value);ut.value=m,$=ut.value}function re(a,m){k(a);let g=Vt(a);Ft.forEach(g,function(Z){let Ie=vt(Z);Ie>0&&yt(Z,Ie)}),a.sizeX=m.sizeX,a.sizeY=m.sizeY,a.sizeX+a.x-1>$&&(a.sizeX=$-a.x+1),a.sizeY+a.y>zt.value&&ya(a.y+a.sizeY),it(a),Xt(a),ct(a);let A=vt(a);A>0&&yt(a,A)}function Ne(a,m){m=m||{},m.x=m.x||a.x,m.y=m.y||a.y,a.x<1&&(a.x=1),a.sizeX>$&&(a.sizeX=$),a.sizeX<1&&(a.sizeX=1),a.x+a.sizeX-1>$&&(a.x=$-a.sizeX+1,a.x<1&&(a.x=1)),a.y<1&&(a.y=1),a.sizeY<1&&(a.sizeY=1),a.y+a.sizeY>zt.value-1&&ya(a.y+a.sizeY-1)}function qe(a,m){k(a);let g=Vt(a);Ft.forEach(g,function(Z){let Ie=vt(Z);Ie>0&&yt(Z,Ie)}),a.x=m.x,a.y=m.y,Ne(a,m),it(a),Xt(a),ct(a);let A=vt(a);A>0&&yt(a,A)}function tt(a){a&&(X.value.forEach((m,g)=>{a===m.id&&nt(g)}),Ve(B.value)||He(()=>{Wt()}))}function be(a){if(a&&Vn(a,B.value)){if(st()){k(a);let g=Vt(a);Ft.forEach(g,function(A){let Z=vt(A);Z>0&&yt(A,Z)})}let m=[];a.innerType==="VQuery"&&(a.propValue||[]).forEach(g=>{m=[...g.checkedFields,...m]}),m.length&&setTimeout(()=>{Array.from(new Set(m)).forEach(g=>{Te.emit(`query-data-${g}`)})},300),r.recordSnapshotCache("removeItem")}}function nt(a){let m=X.value[a];m&&Vn(m,B.value)&&(be(m),o.removeLinkageInfo(m.id),Ve(B.value)?o.deleteComponentById(m.id,void 0,!1):X.value.splice(a,1))}function mt(a,m){m<0&&(m=X.value.length),a._dragId=m,Ne(a,{x:a.x,y:a.y}),it(a),Xt(a);let g=vt(a);g>0&&yt(a,g)}function ct(a){let m=me.value*a.sizeX-U.value,g=we.value*a.sizeY-he.value,A=me.value*(a.x-1)+U.value,Z=we.value*(a.y-1)+he.value,Ie={x1:A,x2:A+m,y1:Z,y2:Z+g,c1:A+m/2,c2:Z+g/2,el:a},Ae=Ft.findIndex(Ce.value,function(ye){return ye.el._dragId==a._dragId});Ae!=-1&&Ce.value.splice(Ae,1,Ie)}function it(a){let m=Vt(a);Ft.forEach(m,function(g){if(g._dragId==a._dragId)return;let A=a.y+a.sizeY-g.y;A>0&&It(g,A)})}function vt(a){let m=0;for(let g=a.y-2;g>=0;g--){for(let A=a.x-1;A<a.x-1+a.sizeX;A++)if(We.value[g][A]&&We.value[g][A].el)return m;m++}return m}function It(a,m){k(a);let g=Vt(a);Ft.forEach(g,function(Z){if(Z._dragId==a._dragId)return;let Ie=$t(a,Z,m);Ie>0&&It(Z,Ie)});let A={y:a.y+m};xt(a,A),Ne(a,A),Xt(a),ct(a)}function xt(a,m){m=m||{};let g=m.x||a.x,A=m.y||a.y;a.x=g,a.y=A,a.y+a.sizeY>zt.value&&(zt.value=a.y+a.sizeY)}function $t(a,m,g){let A=[];for(let Ie=m.x-1;Ie<m.x-1+m.sizeX;Ie++){let Ae=0;for(let ye=a.y-1+a.sizeY;ye<m.y-1;ye++)We.value[ye][Ie]&&We.value[ye][Ie].el==!1&&Ae++;A.push(Ae)}let Z=Math.max.apply(Math,A);return g=g-Z,g>0?g:0}function yt(a,m){k(a);let g=Vt(a);xt(a,{y:a.y-m}),Xt(a),ct(a),Ft.forEach(g,function(A){let Z=vt(A);Z>0&&yt(A,Z)})}function Vt(a){let m={};for(let g=a.x-1;g<a.x-1+a.sizeX;g++)for(let A=a.y-1;A<We.value.length;A++){let Z=We.value[A][g];if(Z&&Z.el){m[Z.el._dragId]=Z.el;break}}return Ft.sortBy(Ft.values(m),"y")}const _t=(a,m,g)=>{o.setCurComponent({component:m,index:g}),o.setClickComponentStatus(!0),o.setInEditorStatus(!0)},Gt=(a,m,g)=>{_t(a,m,g),qt(a)},qt=a=>{Ft.isEmpty(L.value)||(L.value.cloneItem&&L.value.cloneItem.remove(),L.value.resizeItem&&(delete L.value.resizeItem.isPlayer,ge.value(a,L.value.resizeItem,L.value.resizeItem._dragId)),L.value.moveItem&&(N==null||N.value(null,a,L.value.moveItem,L.value.moveItem._dragId),L.value.moveItem.show=!0,delete L.value.moveItem.isPlayer),L.value={})},Ht=w(()=>{var a;return st()&&((a=pe.value)==null?void 0:a.dashboardAdaptor)==="withWidth"}),Bt=()=>{me.value=Math.floor((S.value+U.value)*1e3)/1e3,Ht.value?we.value=me.value*1.6:we.value=Math.floor((D.value+he.value)*1e3)/1e3},ia=()=>{Ve(B.value)&&Ze(),Bt(),K()},Wt=()=>{Bt(),We.value=[],Ce.value=[],kt=void 0,Et=!1,dt=200,zt.value=0,$=0,K(),la(),st()&&gl(X.value);let a=0,m=setInterval(function(){if(a>=X.value.length)clearInterval(m),He(()=>{ke.value=!0});else{let g=X.value[a];mt(g,a),a++}},1);E.value=!0},an=a=>{let m=setInterval(()=>{ke.value&&(clearInterval(m),a())},100)},nn=()=>{we.value=we.value+.001,He(function(){we.value=we.value-.001})},on=()=>X.value.length===0?1:X.value.filter(a=>a.y).map(a=>a.y+a.sizeY).reduce((a,m)=>Math.max(a,m),0),sa=a=>{a.y=a.y===void 0?on():a.y,Ca(a,S.value,D.value),nn(),He(()=>{mt(a,X.value.length-1)})},mo=(a,m,g)=>{Ca(m,me.value,we.value),ve.value&&(ce.value(a,m,g),L.value||(L.value={}),L.value.resizeItem=m,L.value.resizeItemIndex=g,L.value.moveItem=m,L.value.moveItemIndex=g,L.value.originX=0,L.value.originY=0,L.value.startX=0,L.value.startY=0,L.value.oldX=m.x,L.value.oldY=m.y,L.value.oldSizeX=m.sizex,L.value.oldSizeY=m.sizey)},go=(a,m,g)=>{Ca(m,me.value,we.value),L.value||(L.value={}),J.value.call(null,a,m,g),L.value.moveItem=m,L.value.moveItemIndex=g,L.value.originX=0,L.value.originY=0,L.value.startX=0,L.value.startY=0,L.value.oldX=m.x,L.value.oldY=m.y,L.value.oldSizeX=m.sizex,L.value.oldSizeY=m.sizey},Cn=(a,m)=>{const g=L.value;let A=Ft.get(g,"moveItem");if(en(a),!Q.value)return;G.value(a,A,A._dragId),A.isPlayer=!0;let Z=g.oldX,Ie=g.oldY,Ae=Math.floor(m.style.left/me.value+1),ye=Math.floor(m.style.top/we.value+1);Ae=Ae>0?Ae:1,ye=ye>0?ye:1,ga(function(wt,St,ra,Va){return function(){(wt!=St||Va!=ra)&&(qe(A,{x:wt,y:ra}),g.oldX=wt,g.oldY=ra)}}(Ae,Z,ye,Ie),10)},yo=(a,m)=>{const{width:g,height:A}=m.style,Z=L.value;let Ie=Ft.get(Z,"resizeItem");ie.value(a,Ie,Ie._dragId),Ie.isPlayer=!0;let Ae=g%me.value>me.value/4*3?Math.floor(g/me.value+1):Math.floor(g/me.value),ye=A%we.value>we.value/4*3?Math.floor(A/we.value+1):Math.floor(A/we.value),wt=Math.floor((m.style.left+5)/me.value+1),St=Math.floor((m.style.top+5)/we.value+1);wt=wt>0?wt:1,St=St>0?St:1,ga(function(ra,Va){return function(){re(Ie,{sizeX:Ae,sizeY:ye}),Z.oldSizeX=Ae,Z.oldSizeY=ye,qe(Ie,{x:ra,y:Va}),Z.oldX=ra,Z.oldY=Va}}(wt,St),10)},_o=a=>{Ft.isEmpty(L.value)||(L.value.cloneItem&&L.value.cloneItem.remove(),L.value.resizeItem&&(delete L.value.resizeItem.isPlayer,ge.value(a,L.value.resizeItem,L.value.resizeItem._dragId)),L.value.moveItem&&(N==null||N.value(null,a,L.value.moveItem,L.value.moveItem._dragId),L.value.moveItem.show=!0,delete L.value.moveItem.isPlayer),L.value={})},bn=a=>{const m=Yn(a);m.x=300/me.value,m.isShow=!1,m.id=Ia(),o.addComponent({component:m,index:void 0}),i.value.type==="dashboard"&&yn(m),sa(m),L.value||(L.value={}),L.value.moveItem=m,L.value.moveItemIndex=X.value.length-1,L.value.oldX=1,L.value.oldY=1},xn=a=>{L.value&&L.value.moveItem&&!L.value.moveItem.isShow&&(nt(X.value.length-1),qt(a))},wo=a=>{!L.value||!L.value.moveItem||(L.value.moveItem.style.left=a.pageX,L.value.moveItem.style.top=a.pageY+u.value,Cn(a,L.value.moveItem))},Co=()=>L.value.moveItem,bo=(a,m)=>{le.value.dialogInit(pe.value,de.value[m.id],m,a,{scale:rt.value})},xo=a=>{var m;(m=q.value)==null||m.optInit(a)},So=()=>{fe.value=setInterval(()=>{r.snapshotCatchToStore()},1e3)},ko=a=>{Mn(()=>{ae.value.dialogInit(a)})},Io=a=>{Mn(()=>{Fe.value.dialogInit(a)})},Vo=w(()=>Ve(B.value)),Mo=w(()=>Ve(B.value)),Do=w(()=>!!pe.value.dashboard.showGrid&&Ve(B.value)&&st()),Po=w(()=>!!pe.value.dashboard.showGrid&&Ve(B.value)&&!st()),To=()=>{o.setBatchOptStatus(!0),P.value.components.forEach(a=>{o.addCurBatchComponent(a)})},Ho=a=>a.isShow&&(a.component!=="GroupArea"||a.component==="GroupArea"&&!O.value),Bo=w(()=>X.value.length>0&&X.value[X.value.length-1].component==="GroupArea"&&O.value),Fo=async()=>{let a;const m=o.componentData.filter(g=>g.component==="GroupArea");m&&m.length>0&&(a=m[0]),P.value.components.length===0&&o.setBatchOptStatus(!1),P.value.components.length>1?(To(),_.calcComposeArea(),m.length===0&&(a=yl("GroupArea","GroupArea"),o.addComponent({component:a,index:void 0})),a.style.left=P.value.style.left,a.style.top=P.value.style.top,a.style.width=P.value.style.width,a.style.height=P.value.style.height,o.setClickComponentStatus(!0),o.setCurComponent({component:a,index:o.componentData.length-1})):a&&m.forEach(g=>{o.deleteComponentById(g.id)})},Lo=w(()=>{var a;return((a=pe.value)==null?void 0:a.popupAvailable)&&Ve(B.value)});return bt(()=>{Ve(B.value)&&(So(),Ze(),o.setEditMode("edit")),_.getEditor(B.value),ne.on("handleDragStartMoveIn-"+B.value,bn),ne.on("handleDragEnd-"+B.value,xn),ne.on("hideArea-"+B.value,Je),ne.on("removeMatrixItem-"+B.value,nt),ne.on("removeMatrixItemPosition-"+B.value,be),ne.on("removeMatrixItemById-"+B.value,tt),ne.on("addDashboardItem-"+B.value,sa),ne.on("snapshotChange-"+B.value,Wt),ne.on("doCanvasInit-"+B.value,Wt)}),Zt(()=>{fe.value&&(clearInterval(fe.value),fe.value=null),ne.off("handleDragStartMoveIn-"+B.value,bn),ne.off("handleDragEnd-"+B.value,xn),ne.off("hideArea-"+B.value,Je),ne.off("removeMatrixItem-"+B.value,nt),ne.off("removeMatrixItemPosition-"+B.value,be),ne.off("removeMatrixItemById-"+B.value,tt),ne.off("addDashboardItem-"+B.value,sa),ne.off("snapshotChange-"+B.value,Wt),ne.off("doCanvasInit"+B.value,Wt)}),n({canvasSizeInit:ia,canvasInit:Wt,afterInitOk:an,addItemBox:sa,handleDragOver:wo,getMoveItem:Co,handleMouseUp:Gt,handleMouseDown:Ye,findPositionX:tn,watermarkUpdate:Le}),(a,m)=>(c(),T("div",{id:Se.value,ref_key:"container",ref:ue,class:Xe(["editor",{edit:e(se),"dashboard-editor":M.value,"group-canvas":H.value}]),style:Pe(Ka.value),onContextmenu:jt},[vn(a.$slots,"canvasDragTips",{},void 0,!0),je.value?(c(),z(Qs,{key:0})):F("",!0),e(i).type==="dataV"?(c(),z(Xa,{key:1,"canvas-style-data":e(pe),"component-data":e(X),"canvas-id":e(B)},null,8,["canvas-style-data","component-data","canvas-id"])):F("",!0),Lo.value?(c(),z(Ya,{key:2,"dv-info":e(i),"canvas-id":e(B),"canvas-style-data":e(pe),canvasViewInfo:e(de),"pop-component-data":t.popComponentData,scale:rt.value,"canvas-state":e(v),"show-position":"popEdit"},null,8,["dv-info","canvas-id","canvas-style-data","canvasViewInfo","pop-component-data","scale","canvas-state"])):F("",!0),Do.value?(c(),z(fr,{key:3,"matrix-style":et.value,themes:e(xe)},null,8,["matrix-style","themes"])):F("",!0),Po.value?(c(),z(xr,{key:4,"matrix-style":et.value,themes:e(xe)},null,8,["matrix-style","themes"])):F("",!0),L.value&&L.value.moveItem&&e(l)!=="preview"?(c(),z(As,{key:5,"base-height":Ht.value?e(S)*1.6:e(D),"base-width":e(S),"cur-gap":j.value,element:L.value.moveItem},null,8,["base-height","base-width","cur-gap","element"])):F("",!0),W.value?(c(),z(Zs,{key:6,"canvas-id":e(B)},null,8,["canvas-id"])):F("",!0),Bo.value?(c(),z(Vr,{key:7,style:Pe(Ut(e(X)[e(X).length-1]))},null,8,["style"])):F("",!0),(c(!0),T(Ke,null,Pt(e(X),(g,A)=>Qe((c(),z(bs,{"canvas-id":e(B),scale:lt.value,key:g.id,"default-style":g.style,style:Pe(Ut(g)),element:g,index:A,class:Xe({lock:g.isLock&&e(l)==="edit"}),"base-cell-info":V.value,"canvas-active":t.canvasActive,"is-tab-move-check":e(Me),onOnStartResize:Z=>mo(Z,g,A),onOnStartMove:Z=>go(Z,g,A),onOnMouseUp:m[0]||(m[0]=Z=>_o(Z)),onOnDragging:Z=>Cn(Z,g),onOnResizing:Z=>yo(Z,g),onUserViewEnlargeOpen:Z=>bo(Z,g),onDatasetParamsInit:Z=>xo(g),onLinkJumpSetOpen:Z=>ko(g),onLinkageSetOpen:Z=>Io(g)},{default:y(()=>[g.component==="UserView"||g.isPlugin?(c(),z(wa(e(Fa)(g.component)),{key:0,class:"component",id:"component"+g.id,active:g.id===Ge.value,"dv-type":e(i).type,scale:rt.value,style:Pe(aa(g.style)),"prop-value":g.propValue,"is-edit":!0,view:e(de)[g.id],element:g,request:g.request,onInput:oa,"dv-info":e(i),"canvas-active":t.canvasActive,"show-position":"canvas","font-family":t.fontFamily},null,40,["id","active","dv-type","scale","style","prop-value","view","element","request","dv-info","canvas-active","font-family"])):g.component.includes("Svg")?(c(),z(wa(e(Fa)(g.component)),{key:1,id:"component"+g.id,scale:rt.value,class:"component","is-edit":!0,style:Pe(na(g.style)),"prop-value":g.propValue,element:g,request:g.request,"canvas-style-data":e(pe),"canvas-view-info":e(de),"dv-info":e(i),active:g.id===Ge.value,"canvas-active":t.canvasActive,"show-position":"edit","font-family":t.fontFamily},null,8,["id","scale","style","prop-value","element","request","canvas-style-data","canvas-view-info","dv-info","active","canvas-active","font-family"])):(c(),z(wa(e(Fa)(g.component)),{key:2,id:"component"+g.id,scale:rt.value,class:"component","is-edit":!0,style:Pe(aa(g.style)),curStyle:Ut(g),"prop-value":g.propValue,element:g,request:g.request,"canvas-style-data":e(pe),"canvas-view-info":e(de),"dv-info":e(i),active:g.id===Ge.value,"canvas-active":t.canvasActive,"show-position":"edit","font-family":t.fontFamily},null,8,["id","scale","style","curStyle","prop-value","element","request","canvas-style-data","canvas-view-info","dv-info","active","canvas-active","font-family"]))]),_:2},1032,["canvas-id","scale","default-style","style","element","index","class","base-cell-info","canvas-active","is-tab-move-check","onOnStartResize","onOnStartMove","onOnDragging","onOnResizing","onUserViewEnlargeOpen","onDatasetParamsInit","onLinkJumpSetOpen","onLinkageSetOpen"])),[[pt,Ho(g)]])),128)),Vo.value?(c(),z(Ds,{key:8,"show-position":"canvasCore"})):F("",!0),Mo.value?(c(),z(Hs,{key:9})):F("",!0),Qe(h(Fs,{start:De.value,width:$e.value,height:x.value},null,8,["start","width","height"]),[[pt,ee.value]]),h(_n,{ref_key:"userViewEnlargeRef",ref:le},null,512),h(Il,{ref_key:"linkJumpRef",ref:ae},null,512),h(Vl,{ref_key:"linkageRef",ref:Fe},null,512),h(io,{ref_key:"customDatasetParamsRef",ref:q},null,512)],46,Mr))}});const so=Re(Dr,[["__scopeId","data-v-873be1f8"]]),Pr={class:"group"},Tr=Be({__name:"GroupPreview",props:{propValue:{type:Array,default:()=>[]},element:{type:Object,default(){return{propValue:null}}},showPosition:{type:String,required:!1,default:"canvas"},dvInfo:{type:Object,required:!0},searchCount:{type:Number,required:!1,default:0},scale:{type:Number,required:!1,default:1},canvasViewInfo:{type:Object,required:!0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(t){const n=ot(),r=I(null),o=t,{propValue:_,dvInfo:f,searchCount:d,scale:i,canvasViewInfo:l}=ft(o),s=u=>({width:Ma(u.groupStyle.width),height:Ma(u.groupStyle.height),top:Ma(u.groupStyle.top),left:Ma(u.groupStyle.left)}),v=(u,p)=>{r.value.dialogInit(n.canvasStyleData,l.value[p.id],p,u,{scale:i.value})};return(u,p)=>(c(),T("div",Pr,[C("div",null,[(c(!0),T(Ke,null,Pt(e(_),(P,O)=>(c(),z(Ja,{id:"component"+P.id,"view-info":e(l)[P.id],key:O,config:P,index:O,"dv-info":e(f),"canvas-view-info":e(l),style:Pe(s(P)),"show-position":t.showPosition,"search-count":e(d),scale:e(i),"font-family":t.fontFamily,onUserViewEnlargeOpen:b=>v(b,P)},null,8,["id","view-info","config","index","dv-info","canvas-view-info","style","show-position","search-count","scale","font-family","onUserViewEnlargeOpen"]))),128))]),h(_n,{ref_key:"userViewEnlargeRef",ref:r},null,512)]))}});const Hr=Re(Tr,[["__scopeId","data-v-fb696fa6"]]),Br=Be({__name:"CanvasGroup",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Array,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},element:{type:Object,default(){return{propValue:[]}}},isEdit:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"canvas"},canvasId:{type:String,required:!0},searchCount:{type:Number,required:!1,default:0},scale:{type:Number,required:!1,default:1},fontFamily:{type:String,required:!1,default:"inherit"}},setup(t){const n=t,{element:r,isEdit:o,showPosition:_,canvasStyleData:f,canvasViewInfo:d,dvInfo:i,componentData:l}=ft(n);return(s,v)=>e(o)?(c(),z(so,{key:0,class:"canvas-area-shadow",ref:"canvasGroup","component-data":e(l),"canvas-style-data":e(f),"canvas-view-info":e(d),"canvas-id":t.canvasId,"canvas-active":e(r).canvasActive,"font-family":t.fontFamily},null,8,["component-data","canvas-style-data","canvas-view-info","canvas-id","canvas-active","font-family"])):(c(),z(Hr,{key:1,ref:"dashboardPreview","dv-info":e(i),element:e(r),"search-count":t.searchCount,"prop-value":e(r).propValue,"show-position":e(_),scale:t.scale*100,"canvas-view-info":e(d),"font-family":t.fontFamily},null,8,["dv-info","element","search-count","prop-value","show-position","scale","canvas-view-info","font-family"]))}}),Fr=Be({__name:"Component",props:{propValue:{type:Array,default:()=>[]},element:{type:Object,required:!0,default(){return{propValue:null}}},showPosition:{type:String,required:!1,default:"canvas"},dvInfo:{type:Object,required:!0},searchCount:{type:Number,required:!1,default:0},isEdit:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:1},active:{type:Boolean,default:!1},canvasViewInfo:{type:Object,required:!0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(t){const n=ot(),{canvasStyleData:r,curComponent:o}=at(n),_=Kt(Dl),f=t,{propValue:d,dvInfo:i,element:l,scale:s,canvasViewInfo:v,searchCount:u}=ft(f),p=w(()=>{const O=_;return O.scale=r.value.scale,O.width=l.value.style.width*100/O.scale,O.height=l.value.style.height*100/O.scale,O}),P=()=>{l.value.canvasActive=!0};return Ct(()=>f.active,()=>{He(()=>{!f.active&&(!o.value||o.value&&!o.value.canvasId.includes(l.value.id))&&(l.value.canvasActive=!1)})},{deep:!0}),bt(()=>{He(()=>{ta(l.value)})}),(O,b)=>(c(),T("div",{class:Xe(["group",{"canvas-active-custom":e(l).canvasActive}]),onDblclick:P},[h(Br,{"component-data":e(d),"dv-info":e(i),"show-position":t.showPosition,"canvas-id":"Group-"+e(l).id,"canvas-style-data":p.value,"canvas-view-info":e(v),"is-edit":t.isEdit,element:e(l),scale:e(s),"search-count":e(u),"font-family":t.fontFamily},null,8,["component-data","dv-info","show-position","canvas-id","canvas-style-data","canvas-view-info","is-edit","element","scale","search-count","font-family"])],34))}});const ro=Re(Fr,[["__scopeId","data-v-5b6ce0f4"]]),Td=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),Lr=["id"],Ar=["id"],zr=Be({__name:"DeCanvas",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Array,required:!0},canvasViewInfo:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},canvasActive:{type:Boolean,default:!0},outerScale:{type:Number,required:!1,default:1},fontFamily:{type:String,required:!1,default:"inherit"},canvasPosition:{type:String,required:!1,default:"main"}},setup(t,{expose:n}){const r=t,{canvasStyleData:o,componentData:_,canvasViewInfo:f,canvasId:d,canvasActive:i,canvasPosition:l}=ft(r),s=I("de-canvas-"+d.value),v=ot(),u=Nt(),{pcMatrixCount:p,curOriginThemes:P,mobileInPc:O}=at(v),b=I(null),S=I(null),D=I(!1),U=I(100),he=I(100),Q=I(100),J=At({screenWidth:1920,screenHeight:1080,curScrollTop:0}),G=I(0),N=I(0),ve=I(!1),ce=I(0),ie=I(0),ge=I(null),se=I("edit-"+d.value),B=w(()=>o.value&&Ve(d.value)?{...Ga(o.value)}:{}),pe=le=>{const{componentName:q,innerType:ae,staticMap:Fe}=le;if(q){const Se=Pl(q,ae,P,Fe);Ca(Se,G.value,N.value),Se.id=Ia(),Se.y=void 0,Se.x=ge.value.findPositionX(Se),v.addComponent({component:Se,index:void 0}),yn(Se),He(()=>{ge.value.addItemBox(Se),He(()=>{R(Se.y)})}),u.recordSnapshotCacheWithPositionChange("renderChart",Se.id)}},X=le=>{if(Ve(d.value)){le.preventDefault(),le.stopPropagation();const q=ge.value.getMoveItem();q.isShow=!0,Ca(q,G.value,N.value),ge.value.handleMouseUp(le,q,_.value.length-1),u.recordSnapshotCacheWithPositionChange("renderChart",q.id)}},de=le=>{Ve(d.value)&&(le.preventDefault(),le.dataTransfer.dropEffect="copy",ge.value.handleDragOver(le))},xe=le=>{Ve(d.value)&&(le.stopPropagation(),v.setClickComponentStatus(!1),v.setInEditorStatus(!0),v.setCurComponent({component:null,index:null}))},Me=()=>{ge.value.canvasInit()},Oe=(le=!0)=>{(i.value||l.value==="tab")&&(ve.value=!0,setTimeout(function(){b.value&&($e(),He(()=>{ge.value.canvasInit(),ge.value.afterInitOk(function(){ve.value=!1})})),v.setDataPrepareState(!0),Ve(d.value)&&le&&u.recordSnapshotCache("renderChart")},500))},Ee=()=>{He(()=>{b.value&&($e(),He(()=>{ge.value.canvasSizeInit(),De()}))})},De=()=>{He(()=>{if(b.value){let le=b.value.clientWidth,q=b.value.clientHeight;if(U.value=Math.floor(le*100/o.value.width),he.value=Math.floor(q*100/o.value.height),Q.value=Math.min(U.value,he.value),st()&&Ve(d.value)){const ae=O.value?4:1;v.setCanvasStyleScale(Q.value*ae)}}})},$e=()=>{J.screenWidth=b.value.clientWidth-4,J.screenHeight=b.value.clientHeight,G.value=J.screenWidth/p.value.x,N.value=J.screenHeight/p.value.y,ce.value=0,ie.value=0,D.value=!0,Ve(d.value)&&v.setBashMatrixInfo({baseWidth:G.value,baseHeight:N.value,baseMarginLeft:ce.value,baseMarginTop:ie.value})},x=le=>{ge.value.addItemBox(le)},ee=le=>{setTimeout(()=>{le.canvasId=d.value,v.addComponent({component:le,index:void 0,isFromGroup:!0}),x(le),Oe()},500)};bt(()=>{window.addEventListener("resize",Ee),to().listenTo(document.getElementById(s.value),()=>{Ee()}),Oe(),Ve(d.value)&&(ne.on("handleNew",pe),ne.on("event-canvas-size-init",Ee)),ne.on("moveOutFromTab-"+d.value,ee),ne.on("matrix-canvasInit",Oe)}),Zt(()=>{Ve(d.value)&&(ne.off("handleNew",pe),ne.off("event-canvas-size-init",Ee)),ne.off("moveOutFromTab-"+d.value,ee),ne.off("matrix-canvasInit",Oe)});const oe=()=>({baseWidth:G.value,baseHeight:N.value}),R=(le=1)=>{setTimeout(()=>{var q;S.value.scrollTo({top:(le-1)*N.value,behavior:"smooth"}),(q=ge.value)==null||q.watermarkUpdate()})},te=()=>{Ve(d.value)&&(v.mainScrollTop=S.value.scrollTop)};return Ct(()=>i.value,()=>{i.value&&Ee()}),n({addItemBox:x,canvasInit:Oe,canvasInitImmediately:Me,getBaseMatrixSize:oe}),(le,q)=>{const ae=Xa;return c(),T("div",{ref_key:"canvasOut",ref:b,id:se.value,class:Xe(["content",{"render-active":ve.value}])},[h(ae,{"canvas-style-data":e(o),"component-data":e(_),"canvas-id":e(d)},null,8,["canvas-style-data","component-data","canvas-id"]),C("div",{id:s.value,ref_key:"canvasInner",ref:S,class:Xe(["db-canvas",{"db-canvas-dashboard":!e(st)()}]),style:Pe(B.value),onDrop:X,onDragover:de,onMousedown:xe,onScroll:te},[D.value?(c(),z(so,{key:0,ref_key:"cyGridster",ref:ge,"component-data":e(_),"canvas-style-data":e(o),"canvas-view-info":e(f),"canvas-id":e(d),"base-margin-left":ce.value,"base-margin-top":ie.value,"base-width":G.value,"base-height":N.value,"font-family":t.fontFamily,onScrollCanvasAdjust:R},null,8,["component-data","canvas-style-data","canvas-view-info","canvas-id","base-margin-left","base-margin-top","base-width","base-height","font-family"])):F("",!0)],46,Ar)],10,Lr)}}});const uo=Re(zr,[["__scopeId","data-v-1d55defc"]]),Hd=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),co=Be({__name:"DeCustomTab",props:{hideTitle:Boolean,fontColor:String,activeColor:String,borderColor:String,borderActiveColor:String,styleType:{type:String,default:"",validator:t=>["","radioGroup"].includes(t)}},setup(t){const n=t,r=w(()=>[{"--de-font-color":n.fontColor},{"--de-active-color":n.activeColor},{"--de-border-color":n.borderColor},{"--de-border-active-color":n.borderActiveColor}]),o=w(()=>n.styleType?[n.styleType,n.fontColor&&"fontColor",n.activeColor&&"activeColor"]:[n.fontColor&&"fontColor",n.activeColor&&"activeColor",_.value?"noBorder":n.borderColor&&"borderColor",n.borderActiveColor&&"borderActiveColor",n.hideTitle&&"no-header"]),_=w(()=>n.borderColor==="none");return(f,d)=>{const i=zn;return c(),z(i,Oo({class:["de-tabs",...o.value],style:r.value},f.$attrs),{default:y(()=>[vn(f.$slots,"default")]),_:3},16,["class","style"])}}});const Or={key:0},Er={class:"el-dropdown-link"},$r={class:"dialog-footer"},qr=Be({__name:"Component",props:{canvasStyleData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},element:{type:Object,default(){return{propValue:[]}}},isEdit:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"canvas"},scale:{type:Number,required:!1,default:1},searchCount:{type:Number,required:!1,default:0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(t){const n=ot(),r=Nt(),{tabMoveInActiveId:o,bashMatrixInfo:_,editMode:f,mobileInPc:d}=at(n),i=I(null);let l=null;const{t:s}=Tt(),v=t,{element:u,isEdit:p,showPosition:P,canvasStyleData:O,canvasViewInfo:b,dvInfo:S,scale:D,searchCount:U}=ft(v),he=w(()=>u.value.titleBackground.active.innerImage.replace("board/","").replace(".svg","")),Q=w(()=>u.value.titleBackground.inActive.innerImage.replace("board/","").replace(".svg","")),J=W=>{var H;const{backgroundImageEnable:j,backgroundType:V,innerImage:M}=u.value.titleBackground.inActive;return u.value.editableTabsValue!==W&&!u.value.titleBackground.multiply&&((H=u.value.titleBackground)==null?void 0:H.enable)&&j&&V==="innerImage"&&typeof M=="string"},G=W=>{var H;const{backgroundImageEnable:j,backgroundType:V,innerImage:M}=u.value.titleBackground.active;return(u.value.editableTabsValue===W||u.value.titleBackground.multiply)&&((H=u.value.titleBackground)==null?void 0:H.enable)&&j&&V==="innerImage"&&typeof M=="string"},N=()=>{var W;(W=u.value.propValue)==null||W.forEach(j=>{var M;const V=u.value.editableTabsValue===j.name?ea.resume:ea.paused;(M=j.componentData)==null||M.forEach(H=>{V(H.id),H.component==="Group"&&H.propValue.forEach(E=>{V(E.id)})})})},ve=()=>{ie.hoverFlag=!0},ce=()=>{ie.hoverFlag=!1},ie=At({activeTabName:"",curItem:{},textarea:"",dialogVisible:!1,tabShow:!0,hoverFlag:!1}),ge=I(!1),se=I("none");let B;const pe=w(()=>{var W,j;return u.value&&u.value.style&&((W=u.value.style)==null?void 0:W.showTabTitle)===!1?!1:(j=u.value.style)==null?void 0:j.showTabTitle}),X=w(()=>f.value==="edit"&&p.value&&!d.value),de=st()?"light":"dark",xe=()=>{setTimeout(()=>{if(u.value.propValue.length>1){const W=document.getElementById("tab-"+u.value.propValue[u.value.propValue.length-1].name);ge.value=W.parentNode.clientWidth>i.value.clientWidth-100}else ge.value=!1})},Me=(W,j)=>({command:W,param:j}),Oe=w(()=>S.value.type==="dashboard"&&O.value.dashboard.gap==="yes"?O.value.dashboard.gapSize:0);function Ee(){ie.curItem.title=ie.textarea,ie.dialogVisible=!1,r.recordSnapshotCache("sureCurTitle")}function De(){const j={name:Ia(),title:s("visualization.new_tab"),componentData:[],closable:!0};u.value.propValue.push(j),u.value.editableTabsValue=j.name,r.recordSnapshotCache("addTab")}function $e(W){ie.curItem=W;let j=u.value.propValue.length;for(;j--;)if(u.value.propValue[j].name===W.name){u.value.propValue.splice(j,1);const V=(j-1+u.value.propValue.length)%u.value.propValue.length;u.value.editableTabsValue=u.value.propValue[V].name,ie.tabShow=!1,He(()=>{ie.tabShow=!0})}}function x(W){De();const j=u.value.propValue[u.value.propValue.length-1],V={},M=u.value.id+"--"+j.name;j.componentData=Nn(M,W.componentData,V),n.updateCopyCanvasView(V)}function ee(W){ie.activeTabName=W.name,ie.curItem=W,ie.textarea=W.title,ie.dialogVisible=!0}function oe(W){switch(W.command){case"editTitle":ee(W.param);break;case"deleteCur":$e(W.param),r.recordSnapshotCache("deleteCur");break;case"copyCur":x(W.param),r.recordSnapshotCache("copyCur");break}}const R=()=>{if(S.value.id){const W=["canvas","canvasDataV","edit"].includes(P.value)?"snapshot":"core";Qn(S.value.id,W).then(j=>{n.setNowPanelTrackInfo(j.data)})}},te=W=>{u.value.propValue.forEach((j,V)=>{if(u.value.editableTabsValue===j.name)if(st()){ne.emit("removeMatrixItemById-canvas-main",W.id),n.setCurComponent({component:null,index:null}),W.canvasId=u.value.id+"--"+j.name;const M=B.refs["tabCanvas_"+V][0];if(M){const H=M.getBaseMatrixSize();Oa(W,H),W.x=1,W.y=200,W.style.left=0,W.style.top=0,j.componentData.push(W),M.addItemBox(W),He(()=>{M.canvasInitImmediately()})}}else{const M=Jn(W.id);n.deleteComponent(M),n.setCurComponent({component:null,index:null}),W.canvasId=u.value.id+"--"+j.name,Ln(W,u.value),j.componentData.push(W)}}),R()},le=W=>{st()&&Oa(W,_.value,!0),ne.emit("removeMatrixItemById-"+W.canvasId,W.id),n.setCurComponent({component:null,index:null}),st()?ne.emit("moveOutFromTab-canvas-main",W):q(W),R()},q=W=>{const{left:j,top:V}=u.value.style;W.style.left=W.style.left+j,W.style.top=W.style.top+V,W.canvasId="canvas-main",n.addComponent({component:W,index:void 0,isFromGroup:!0})},ae=w(()=>o.value&&o.value===u.value.id),Fe=w(()=>ge.value?"tab-head-left":"tab-head-"+u.value.style.headHorizontalPosition),Se=W=>{if(W){const{backdropFilterEnable:j,backdropFilter:V,backgroundColorSelect:M,backgroundColor:H,backgroundImageEnable:E,backgroundType:ke,outerImage:me,innerPadding:we,borderRadius:ut}=W;let L={padding:we*D.value+"px",borderRadius:ut+"px"},ue="";return M&&H&&(ue=H),E&&ke==="outerImage"&&typeof me=="string"?L.background=`url(${Ua(me)}) no-repeat ${ue}`:L["background-color"]=ue,j&&(L["backdrop-filter"]="blur("+V+"px)"),L}return{}},Le=W=>{var V,M;let j={};return u.value.editableTabsValue===W?(j={textDecoration:u.value.style.textDecoration,fontStyle:u.value.style.fontStyle,fontWeight:u.value.style.fontWeight,fontSize:(u.value.style.activeFontSize||18)+"px",lineHeight:(u.value.style.activeFontSize||18)+"px"},(V=u.value.titleBackground)!=null&&V.enable&&(j={...j,...Se(u.value.titleBackground.active)})):(j={textDecoration:u.value.style.textDecoration,fontStyle:u.value.style.fontStyle,fontWeight:u.value.style.fontWeight,fontSize:(u.value.style.fontSize||16)+"px",lineHeight:(u.value.style.fontSize||16)+"px"},(M=u.value.titleBackground)!=null&&M.enable&&(j={...j,...Se(u.value.titleBackground.multiply?u.value.titleBackground.active:u.value.titleBackground.inActive)})),j},Ze=w(()=>u.value&&u.value.style&&u.value.style.headFontColor&&typeof u.value.style.headFontColor=="string"?u.value.style.headFontColor:"none"),et=w(()=>u.value&&u.value.style&&u.value.style.headFontActiveColor&&typeof u.value.style.headFontActiveColor=="string"?u.value.style.headFontActiveColor:"none"),je=w(()=>u.value&&u.value.style&&u.value.style.headBorderActiveColor&&typeof u.value.style.headBorderActiveColor=="string"?u.value.style.headBorderActiveColor:"none"),Ge=w(()=>!!ie.textarea&&!!ie.textarea.trim()),Te=eo(()=>{N()},500);Ct(()=>D.value,()=>{Te()}),Ct(()=>u.value,()=>{xe(),Te()},{deep:!0});const lt=()=>{ie.tabShow=!1,He(()=>{ie.tabShow=!0})};Ct(()=>X.value,()=>{rt()});const rt=()=>{var W;if(l&&clearInterval(l),l=null,!X.value&&(W=u.value.carousel)!=null&&W.enable){const j=(u.value.carousel.time||5)*1e3;let V=1;l=setInterval(()=>{if(!ie.hoverFlag){const M=V%u.value.propValue.length;V++,He(()=>{u.value.editableTabsValue=u.value.propValue[M].name})}},j)}};return bt(()=>{document.addEventListener("visibilitychange",N),u.value.propValue.length>0&&(u.value.editableTabsValue=u.value.propValue[0].name),xe(),["canvas","canvasDataV","edit"].includes(P.value)&&!d.value&&(ne.on("onTabMoveIn-"+u.value.id,te),ne.on("onTabMoveOut-"+u.value.id,le),ne.on("onTabSortChange-"+u.value.id,lt)),B=pn(),rt(),He(()=>{ta(u.value)}),setTimeout(()=>{N()},1e3)}),Zt(()=>{document.removeEventListener("visibilitychange",N),["canvas","canvasDataV","edit"].includes(P.value)&&!d.value&&(ne.off("onTabMoveIn-"+u.value.id,te),ne.off("onTabMoveOut-"+u.value.id,le),ne.off("onTabSortChange-"+u.value.id,lt))}),Bn(()=>{l&&(clearInterval(l),l=null)}),(W,j)=>{const V=ba("ArrowDown"),M=Dt,H=Wa,E=Za,ke=Na,me=fn,we=$n,ut=Mt,L=ma;return ie.tabShow?(c(),T("div",{key:0,style:{width:"100%",height:"100%"},class:Xe([[Fe.value,`ed-tabs-${e(de)}`,{"title-hidde-tab":!pe.value},{"title-show-tab":pe.value}],"custom-tabs-head"]),ref_key:"tabComponentRef",ref:i},[h(co,{modelValue:e(u).editableTabsValue,"onUpdate:modelValue":j[1]||(j[1]=ue=>e(u).editableTabsValue=ue),onTabAdd:De,addable:X.value,"font-color":Ze.value,"active-color":et.value,"border-color":se.value,"border-active-color":je.value,"hide-title":!pe.value},{default:y(()=>[(c(!0),T(Ke,null,Pt(e(u).propValue,ue=>(c(),z(me,{key:ue.name,class:"el-tab-pane-custom",lazy:X.value,label:ue.title,name:ue.name},{label:y(()=>[C("div",{class:"custom-tab-title",onMousedown:j[0]||(j[0]=Rt(()=>{},["stop"]))},[C("span",{class:"title-inner",style:Pe(Le(ue.name))},[_e(Y(ue.title)+" ",1),Qe(h(ha,{style:Pe({color:e(u).titleBackground.active.innerImageColor,pointerEvents:"none"}),name:he.value},null,8,["style","name"]),[[pt,G(ue.name)]]),Qe(h(ha,{style:Pe({color:e(u).titleBackground.inActive.innerImageColor,pointerEvents:"none"}),name:Q.value},null,8,["style","name"]),[[pt,J(ue.name)]]),X.value?(c(),T("span",Or,[h(ke,{"popper-class":"custom-de-tab-dropdown",effect:e(de),trigger:"click",onCommand:oe},{dropdown:y(()=>[h(E,{style:Pe({"font-family":t.fontFamily})},{default:y(()=>[h(H,{command:Me("editTitle",ue)},{default:y(()=>[_e(Y(e(s)("visualization.edit_title")),1)]),_:1},8,["command"]),h(H,{command:Me("copyCur",ue)},{default:y(()=>[_e(Y(e(s)("visualization.copy")),1)]),_:1},8,["command"]),e(u).propValue.length>1?(c(),z(H,{key:0,command:Me("deleteCur",ue)},{default:y(()=>[_e(Y(e(s)("visualization.delete")),1)]),_:1},8,["command"])):F("",!0)]),_:2},1032,["style"])]),default:y(()=>[C("span",Er,[e(p)?(c(),z(M,{key:0},{default:y(()=>[h(V)]),_:1})):F("",!0)])]),_:2},1032,["effect"])])):F("",!0)],4)],32)]),_:2},1032,["lazy","label","name"]))),128)),(c(!0),T(Ke,null,Pt(e(u).propValue,(ue,We)=>(c(),T("div",{class:Xe(["tab-content-custom",{"switch-hidden":e(u).editableTabsValue!==ue.name}]),key:ue.name+"-content",onMouseenter:ve,onMouseleave:ce},[e(p)&&!e(d)?(c(),z(uo,{key:0,ref_for:!0,ref:"tabCanvas_"+We,"component-data":ue.componentData,"canvas-style-data":e(O),"canvas-view-info":e(b),"canvas-id":e(u).id+"--"+ue.name,class:Xe(ae.value?"canvas-move-in":""),"canvas-position":"tab","canvas-active":e(u).editableTabsValue===ue.name,"font-family":t.fontFamily},null,8,["component-data","canvas-style-data","canvas-view-info","canvas-id","class","canvas-active","font-family"])):(c(),z(wn,{key:1,ref_for:!0,ref:"dashboardPreview","dv-info":e(S),"cur-gap":Oe.value,"component-data":ue.componentData,"canvas-style-data":{},"canvas-view-info":e(b),"canvas-id":e(u).id+"--"+ue.name,"preview-active":e(u).editableTabsValue===ue.name,"show-position":e(P),"outer-scale":e(D),"font-family":t.fontFamily,"outer-search-count":e(U)},null,8,["dv-info","cur-gap","component-data","canvas-view-info","canvas-id","preview-active","show-position","outer-scale","font-family","outer-search-count"]))],34))),128))]),_:1},8,["modelValue","addable","font-color","active-color","border-color","border-active-color","hide-title"]),h(L,{title:"编辑标题","append-to-body":!0,modelValue:ie.dialogVisible,"onUpdate:modelValue":j[4]||(j[4]=ue=>ie.dialogVisible=ue),width:"30%","show-close":!1,"close-on-click-modal":!1,center:""},{footer:y(()=>[C("span",$r,[h(ut,{onClick:j[3]||(j[3]=ue=>ie.dialogVisible=!1)},{default:y(()=>[...j[5]||(j[5]=[_e("取消",-1)])]),_:1}),h(ut,{disabled:!Ge.value,type:"primary",onClick:Ee},{default:y(()=>[...j[6]||(j[6]=[_e("确认",-1)])]),_:1},8,["disabled"])])]),default:y(()=>[h(we,{modelValue:ie.textarea,"onUpdate:modelValue":j[2]||(j[2]=ue=>ie.textarea=ue),maxlength:"50",placeholder:W.$t("dataset.input_content")},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue"])],2)):F("",!0)}}});const vo=Re(qr,[["__scopeId","data-v-cbd2f5e3"]]),Bd=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Rr={class:"svg-triangle-container"},Gr={version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"},Wr=["points","stroke","fill","stroke-width"],Zr=Be({__name:"Component",props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default(){return{propValue:null}}}},setup(t){const n=t,{element:r}=ft(n),o=I("");Ct(()=>r.value.style.width,()=>{f()}),Ct(()=>r.value.style.height,()=>{f()}),bt(()=>{f()});const _=w(()=>r.value.style.borderActive?r.value.style.borderWidth:0),f=()=>{const{width:i,height:l}=r.value.style;d(i,l)},d=(i,l)=>{const v=[[.5,.05],[1,.95],[0,.95]].map(u=>i*u[0]+" "+l*u[1]);o.value=v.toString()};return(i,l)=>(c(),T("div",Rr,[(c(),T("svg",Gr,[C("polygon",{ref:"star",points:o.value,stroke:e(r).style.borderColor,fill:e(r).style.backgroundColor,"stroke-width":_.value},null,8,Wr)]))]))}});const Nr=Re(Zr,[["__scopeId","data-v-ae1df061"]]),jr={class:"attr-list de-collapse-style"},Ur=Be({__name:"Attr",setup(t){const n=ot(),{curComponent:r}=at(n);return(o,_)=>(c(),T("div",jr,[h(Yl,{element:e(r)},null,8,["element"])]))}}),Xr={key:0,class:"main-frame"},Yr=["id","src"],Jr={key:1,class:"frame-mask edit-mask"},Qr={style:{opacity:"1"}},Kr={style:{"font-weight":"bold",color:"lawngreen"}},eu={key:2,class:"frame-mask preview-top-mask"},tu={key:3,class:"frame-mask preview-right-mask"},au={key:4,class:"frame-mask preview-left-mask"},nu={key:5,class:"frame-mask"},ou={key:1,class:"info-class"},lu=Be({__name:"ComponentFrame",props:{propValue:{type:String,require:!0},element:{type:Object},isEdit:{type:Boolean,require:!1,default:!0},active:{type:Boolean,require:!1,default:!1},screenShot:{type:Boolean,default:!1}},setup(t){const{t:n}=Tt(),r=t,{element:o,isEdit:_,screenShot:f}=ft(r),d=At({pOption:{},frameShow:!0}),i=()=>{d.frameShow=!1,He(()=>{d.frameShow=!0})};return bt(()=>{ze({name:"frameLinksChange-"+o.value.id,callback:function(){i()}})}),(l,s)=>{const v=On;return c(),z(v,{class:"main-frame"},{default:y(()=>[e(o).frameLinks.src?(c(),T("div",Xr,[d.frameShow?(c(),T("iframe",{key:0,id:"iframe-"+e(o).id,src:e(o).frameLinks.src,scrolling:"auto",frameborder:"0",class:"main-frame main-de-iframe"},null,8,Yr)):F("",!0),e(_)?(c(),T("div",Jr,[C("span",Qr,[C("span",Kr,Y(e(n)("visualization.edit_web_tips")),1)])])):F("",!0),e(_)?(c(),T("div",eu)):F("",!0),e(_)?(c(),T("div",tu)):F("",!0),e(_)?(c(),T("div",au)):F("",!0),e(f)?(c(),T("div",nu)):F("",!0)])):(c(),T("div",ou,[C("span",null,Y(e(n)("visualization.link_add_tips_pre")),1)]))]),_:1})}}});const iu=Re(lu,[["__scopeId","data-v-1ad3a219"]]),su=Be({__name:"DvPreview",props:{canvasStylePreview:{required:!0,type:Object},canvasDataPreview:{required:!0,type:Object},canvasViewInfoPreview:{required:!0,type:Object},dvInfo:{required:!0,type:Object},curPreviewGap:{required:!1,type:Number,default:0},showLinkageButton:{type:Boolean,default:!0},showPosition:{required:!1,type:String,default:"preview"},downloadStatus:{required:!1,type:Boolean,default:!1}},setup(t,{expose:n}){const r=ot(),{fullscreenFlag:o}=at(r),_=I(null),f=I(null),d=I(!0),i=I("heightFirst"),l=t,s=()=>{_.value.restore()},v=w(()=>p.value==="heightFirst"?"preview-content-inner-height-first":p.value==="full"?"preview-content-inner-full":p.value==="keep"?"preview-content-inner-size-keep":"preview-content-inner-width-first"),u=w(()=>({flexDirection:l.canvasStylePreview.screenAdaptor==="heightFirst"?"row":"column"})),p=w(()=>l.canvasStylePreview.screenAdaptor==="keepProportion"?i.value:l.canvasStylePreview.screenAdaptor),P=O=>{const{width:b,height:S}=O,{innerWidth:D,innerHeight:U}=_.value.getPreviewCanvasSize();b>D||S<U?i.value="heightFirst":i.value="widthFirst"};return bt(()=>{const O=new ResizeObserver(b=>{for(let S of b)console.log("元素新尺寸:",S.contentRect),P(S.contentRect)});f.value&&O.observe(f.value),Zt(()=>{O.disconnect()})}),n({restore:s}),(O,b)=>(c(),T("div",{id:"de-preview-content",ref_key:"dePreviewOuterRef",ref:f,class:Xe([{"de-screen-full":e(o)},"content-outer"]),style:Pe(u.value)},[C("div",{class:Xe(["content-inner",v.value])},[t.canvasStylePreview&&d.value?(c(),z(wn,{key:0,ref_key:"dePreviewRef",ref:_,"component-data":t.canvasDataPreview,"canvas-style-data":t.canvasStylePreview,"canvas-view-info":t.canvasViewInfoPreview,"dv-info":t.dvInfo,"cur-gap":t.curPreviewGap,"show-position":t.showPosition,"download-status":t.downloadStatus,"outer-screen-adaptor":p.value,"show-linkage-button":t.showLinkageButton},null,8,["component-data","canvas-style-data","canvas-view-info","dv-info","cur-gap","show-position","download-status","outer-screen-adaptor","show-linkage-button"])):F("",!0)],2)],6))}});const ru=Be({__name:"PreviewCanvas",props:{publicLinkStatus:{type:Boolean,required:!1,default:!1},isSelector:{type:Boolean,default:!1},outerId:{type:Boolean,default:!1},ticketArgs:tl.string.def(null)},setup(t,{expose:n}){const r=ai(),o=ot(),{t:_}=Tt(),f=al(),d=I(null),i=I(!1),l=At({canvasDataPreview:null,canvasStylePreview:null,canvasViewInfoPreview:null,dvInfo:null,curPreviewGap:0,initState:!0,editPreview:!1,showPosition:"preview",showOffset:{top:3,left:3},containerMainHeight:"1000px"}),s=t,v=async(J,G,N=!1)=>{const ve=f.jumpInfoParam||Lt.currentRoute.value.query.jumpInfoParam;let ce;if(ve){ce=JSON.parse(Pn.decode(decodeURIComponent(ve)));const X={sourceDvId:ce.sourceDvId,sourceViewId:ce.sourceViewId,sourceFieldId:null,targetDvId:J,resourceTable:l.editPreview?"snapshot":"core"};try{await _l(X).then(de=>{o.setNowTargetPanelJumpInfo(de.data)})}catch(de){console.error(de)}}let ie=null;try{ie=JSON.parse(s.ticketArgs)}catch(X){console.error(X)}const ge=ie&&Object.keys(ie);let se;await xi(J).then(X=>{o.setNowPanelOuterParamsInfoV2(X.data,J)});const B=Lt.currentRoute.value.query.attachParams;if(B||ge)try{B&&(se=JSON.parse(Pn.decode(decodeURIComponent(B)))),ge&&(se=Object.assign({},se,ie))}catch(X){console.error(X),va.error(_("visualization.outer_param_decode_error"))}const pe=()=>{if(l.canvasStylePreview.refreshBrowserEnable&&ol()){const X=l.canvasStylePreview.refreshBrowserUnit==="minute"?60:1,de=l.canvasStylePreview.refreshBrowserTime*X*1e3;setTimeout(()=>{window.location.reload()},de)}};await wl(J,{busiFlag:G,resourceTable:l.editPreview?"snapshot":"core",onlyPreview:!!s.outerId},async function({canvasDataResult:X,canvasStyleResult:de,dvInfo:xe,canvasViewInfoPreview:Me,curPreviewGap:Oe}){l.dvInfo=xe,l.dvInfo.status&&(ce||!N&&se)&&await Qo(X),l.canvasDataPreview=X,l.canvasStylePreview=de,l.canvasViewInfoPreview=Me,l.editPreview&&(l.dvInfo.status=1),l.curPreviewGap=Oe,l.dvInfo.status&&(ce&&o.addViewTrackFilter(ce),N||(l.initState=!1,o.addOuterParamsFilter(se),l.initState=!0)),s.publicLinkStatus&&(document.title=xe.name,nl(xe.name)),pe(),await He(()=>{Cl({resourceId:J})})})},u=J=>{i.value=!0,He(()=>{const G=d.value.querySelector(".canvas-container");mn(J,G,l.dvInfo.name,()=>{i.value=!1})})};Ct(()=>({path:r.path,params:r.params}),()=>{location.reload()},{deep:!0});let p=null,P=null;const O=()=>p(!0),b=()=>P(!0);bt(async()=>{ze({name:"canvasDownload",callback:function(B="img"){u(B)}}),await Promise.all([new Promise(B=>p=B),new Promise(B=>P=B)]);let J=s.outerId||f.dvId||Lt.currentRoute.value.query.dvId;Lt.currentRoute.value.query.jumpInfoParam&&Lt.currentRoute.value.query.dvId&&(J=Lt.currentRoute.value.query.dvId);const G=Lt.currentRoute.value.query.ignoreParams==="true",N=Lt.currentRoute.value.query.popWindow==="true",ve=window.self!==window.top;l.editPreview=Lt.currentRoute.value.query.editPreview==="true",o.setIframeFlag(ve),o.setIsPopWindow(N),l.showPosition=l.editPreview?"edit-preview":"preview";const{dvType:ce,callBackFlag:ie,taskId:ge,showWatermark:se}=Lt.currentRoute.value.query;if(ge&&o.setCanvasAttachInfo({taskId:ge,showWatermark:se}),J){await v(J,ce,G);return}o.setEmbeddedCallBack(ie||"no"),window.matchMedia("print").addListener(async B=>{B.matches&&await Q()})});const S=w(()=>{var J;return((J=l.canvasStylePreview)==null?void 0:J.screenAdaptor)==="keep"}),D=w(()=>[{"--top-show-offset":l.showOffset.top},{"--left-show-offset":l.showOffset.left},{"--print-height":l.containerMainHeight}]),U=I(null),he=async()=>{U.value&&(l.containerMainHeight=await U.value.getDownloadStatusMainHeightV2())},Q=async()=>{await he()};return n({loadCanvasDataAsync:v}),(J,G)=>{var ve,ce;const N=Sa;return c(),T(Ke,null,[Qe((c(),T("div",{class:Xe(["content",{"canvas_keep-size":S.value}]),ref_key:"previewCanvasContainer",ref:d,style:Pe(D.value)},[h(Xa,{style:{position:"fixed"},"canvas-id":"canvas-main","canvas-style-data":l.canvasStylePreview||{},"component-data":l.canvasDataPreview||[]},null,8,["canvas-style-data","component-data"]),l.canvasStylePreview&&l.initState&&((ve=l.dvInfo)==null?void 0:ve.type)==="dataV"?(c(),z(su,{key:0,ref:"dvPreviewRef",style:{height:"100vh"},"canvas-data-preview":l.canvasDataPreview,"canvas-style-preview":l.canvasStylePreview,"canvas-view-info-preview":l.canvasViewInfoPreview,"dv-info":l.dvInfo,"cur-preview-gap":l.curPreviewGap,"is-selector":s.isSelector,"download-status":i.value,"show-pop-bar":!0,"show-position":l.showPosition,"show-linkage-button":!1},null,8,["canvas-data-preview","canvas-style-preview","canvas-view-info-preview","dv-info","cur-preview-gap","is-selector","download-status","show-position"])):F("",!0),l.canvasStylePreview&&l.initState&&((ce=l.dvInfo)==null?void 0:ce.type)==="dashboard"?(c(),z(wn,{key:1,ref_key:"dvPreview",ref:U,"component-data":l.canvasDataPreview,"canvas-style-data":l.canvasStylePreview,"canvas-view-info":l.canvasViewInfoPreview,"dv-info":l.dvInfo,"cur-gap":l.curPreviewGap,"is-selector":s.isSelector,"download-status":i.value,"show-pop-bar":!0,"show-position":l.showPosition,"show-linkage-button":!1},null,8,["component-data","canvas-style-data","canvas-view-info","dv-info","cur-gap","is-selector","download-status","show-position"])):F("",!0),l.initState?F("",!0):(c(),z(Ea,{key:2,description:e(_)("visualization.no_params_tips"),"img-type":"noneWhite"},null,8,["description"]))],6)),[[N,!l.initState]]),h(e(fa),{jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvTmV3V2luZG93SGFuZGxlcg==",onLoaded:O,onLoadFail:O}),h(e(fa),{jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvRW50cmFuY2Vz",onInitIframe:b,onLoadFail:b})],64)}}});const po=Re(ru,[["__scopeId","data-v-1b66f04e"]]),Fd=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),uu={class:"label-content-details"},cu=["title"],du={class:"m-dialog-footer"},vu=Be({__name:"SelectScreenDialog",emits:["selectConfirm"],setup(t,{expose:n,emit:r}){const o=I(!1),_=()=>{o.value=!1},{t:f}=Tt(),d=r,i=At({panelList:[],dvSelectProps:{label:"name",children:"children",value:"id",isLeaf:"leaf",disabled:"disabled"},curScreenId:null,dvType:"dashboard"}),l=w(()=>i.dvType==="dataV"?f("work_branch.big_data_screen"):f("work_branch.dashboard")),s=O=>{const{dvType:b,screenId:S}=O;i.dvType=b,o.value=!0,i.curScreenId=S,v(b)},v=O=>{ni({busiFlag:O,resourceTable:"core"}).then(S=>{var D;S&&((D=S[0])==null?void 0:D.id)==="0"?i.panelList=S[0].children:i.panelList=S,i.panelList=bl(i.panelList)})},u=O=>{O.leaf&&O.id!==i.curScreenId&&(i.curScreenId=O.id)},p=()=>{o.value=!1},P=()=>{d("selectConfirm",i.curScreenId),p()};return n({init:s}),(O,b)=>{const S=gt,D=Dt,U=jo,he=En,Q=Mt,J=ma;return c(),z(J,{modelValue:o.value,"onUpdate:modelValue":b[1]||(b[1]=G=>o.value=G),"show-close":!0,"close-on-click-modal":!1,title:e(f)("visualization.select_resource",[l.value]),"append-to-body":"",onClose:_,width:"400"},{footer:y(()=>[C("span",du,[h(Q,{secondary:"",onClick:p},{default:y(()=>[_e(Y(e(f)("commons.close")),1)]),_:1}),h(Q,{type:"primary",onClick:P},{default:y(()=>[_e(Y(e(f)("commons.confirm")),1)]),_:1})])]),default:y(()=>[h(he,{style:{position:"relative"},prop:"rid"},{default:y(()=>[h(U,{modelValue:i.curScreenId,"onUpdate:modelValue":b[0]||(b[0]=G=>i.curScreenId=G),data:i.panelList,props:i.dvSelectProps,"render-after-expand":!1,filterable:"",onNodeClick:u,class:"dv-selector"},{default:y(({node:G,data:N})=>[C("div",uu,[N.leaf?(c(),z(D,{key:0,size:"18px",style:{display:"inline-block"}},{default:y(()=>[h(S,{name:"dv-dashboard-spine"},{default:y(()=>[h(e(oi),{class:"svg-icon"})]),_:1})]),_:1})):(c(),z(D,{key:1,size:"18px",style:{display:"inline-block"}},{default:y(()=>[h(S,{name:"dv-folder"},{default:y(()=>[h(e(li),{class:"svg-icon"})]),_:1})]),_:1})),C("span",{style:{"margin-left":"8px","font-size":"14px"},title:G.label},Y(G.label),9,cu)])]),_:1},8,["modelValue","data","props"])]),_:1})]),_:1},8,["modelValue","title"])}}});const pu=Re(vu,[["__scopeId","data-v-95b3877a"]]),fu={key:0},hu={class:"el-dropdown-link"},mu={key:1,class:"chose-screen"},gu={class:"dialog-footer"},yu=Be({__name:"Component",props:{canvasStyleData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},element:{type:Object,default(){return{propValue:[]}}},isEdit:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"canvas"},scale:{type:Number,required:!1,default:1},searchCount:{type:Number,required:!1,default:0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(t){const n=ot(),r=Nt(),{tabMoveInActiveId:o,bashMatrixInfo:_,editMode:f,mobileInPc:d}=at(n),i=I(null);let l=null;const{t:s}=Tt(),v=I(null),u=t,{element:p,isEdit:P,showPosition:O,canvasStyleData:b,canvasViewInfo:S,dvInfo:D,scale:U,searchCount:he}=ft(u),Q=D.value.type==="dataV"?s("work_branch.big_data_screen"):s("work_branch.dashboard"),J=w(()=>p.value.titleBackground.active.innerImage.replace("board/","").replace(".svg","")),G=w(()=>p.value.titleBackground.inActive.innerImage.replace("board/","").replace(".svg","")),N=V=>{var ke;const{backgroundImageEnable:M,backgroundType:H,innerImage:E}=p.value.titleBackground.inActive;return p.value.editableTabsValue!==V&&!p.value.titleBackground.multiply&&((ke=p.value.titleBackground)==null?void 0:ke.enable)&&M&&H==="innerImage"&&typeof E=="string"},ve=V=>{var ke;const{backgroundImageEnable:M,backgroundType:H,innerImage:E}=p.value.titleBackground.active;return(p.value.editableTabsValue===V||p.value.titleBackground.multiply)&&((ke=p.value.titleBackground)==null?void 0:ke.enable)&&M&&H==="innerImage"&&typeof E=="string"},ce=()=>{var V;(V=p.value.propValue)==null||V.forEach(M=>{var E;const H=p.value.editableTabsValue===M.name?ea.resume:ea.paused;(E=M.componentData)==null||E.forEach(ke=>{H(ke.id),ke.component==="Group"&&ke.propValue.forEach(me=>{H(me.id)})})})},ie=()=>{se.hoverFlag=!0},ge=()=>{se.hoverFlag=!1},se=At({activeTabName:"",curItem:{},textarea:"",dialogVisible:!1,tabShow:!0,hoverFlag:!1,panelList:[]}),B=I(!1),pe=I("none");let X;const de=w(()=>{var V,M;return p.value&&p.value.style&&((V=p.value.style)==null?void 0:V.showTabTitle)===!1?!1:(M=p.value.style)==null?void 0:M.showTabTitle}),xe=w(()=>f.value==="edit"&&P.value&&!d.value),Me=st()?"light":"dark",Oe=()=>{setTimeout(()=>{if(p.value.propValue.length>1){const V=document.getElementById("tab-"+p.value.propValue[p.value.propValue.length-1].name);B.value=V.parentNode.clientWidth>i.value.clientWidth-100}else B.value=!1})},Ee=(V,M)=>({command:V,param:M});w(()=>D.value.type==="dashboard"&&b.value.dashboard.gap==="yes"?b.value.dashboard.gapSize:0);function De(){se.curItem.title=se.textarea,se.dialogVisible=!1,r.recordSnapshotCache("sureCurTitle")}function $e(){const M={name:Ia(),title:s("visualization.new_screen_page"),screenId:null,closable:!0};p.value.propValue.push(M),p.value.editableTabsValue=M.name,r.recordSnapshotCache("addTab")}function x(V){se.curItem=V;let M=p.value.propValue.length;for(;M--;)if(p.value.propValue[M].name===V.name){p.value.propValue.splice(M,1);const H=(M-1+p.value.propValue.length)%p.value.propValue.length;p.value.editableTabsValue=p.value.propValue[H].name,se.tabShow=!1,He(()=>{se.tabShow=!0})}}function ee(V){$e();const M=p.value.propValue[p.value.propValue.length-1],H={},E=p.value.id+"--"+M.name;M.componentData=Nn(E,V.componentData,H),n.updateCopyCanvasView(H)}function oe(V){se.activeTabName=V.name,se.curItem=V,se.textarea=V.title,se.dialogVisible=!0}function R(V){switch(V.command){case"editTitle":oe(V.param);break;case"deleteCur":x(V.param),r.recordSnapshotCache("deleteCur");break;case"copyCur":ee(V.param),r.recordSnapshotCache("copyCur");break;case"changeScreen":lt(V.param.screenId);break}}const te=()=>{if(D.value.id){const V=["canvas","canvasDataV","edit"].includes(O.value)?"snapshot":"core";Qn(D.value.id,V).then(M=>{n.setNowPanelTrackInfo(M.data)})}},le=V=>{p.value.propValue.forEach((M,H)=>{if(p.value.editableTabsValue===M.name)if(st()){ne.emit("removeMatrixItemById-canvas-main",V.id),n.setCurComponent({component:null,index:null}),V.canvasId=p.value.id+"--"+M.name;const E=X.refs["tabCanvas_"+H][0];if(E){const ke=E.getBaseMatrixSize();Oa(V,ke),V.x=1,V.y=200,V.style.left=0,V.style.top=0,M.componentData.push(V),E.addItemBox(V),He(()=>{E.canvasInitImmediately()})}}else{const E=Jn(V.id);n.deleteComponent(E),n.setCurComponent({component:null,index:null}),V.canvasId=p.value.id+"--"+M.name,Ln(V,p.value),M.componentData.push(V)}}),te()},q=V=>{st()&&Oa(V,_.value,!0),ne.emit("removeMatrixItemById-"+V.canvasId,V.id),n.setCurComponent({component:null,index:null}),st()?ne.emit("moveOutFromTab-canvas-main",V):ae(V),te()},ae=V=>{const{left:M,top:H}=p.value.style;V.style.left=V.style.left+M,V.style.top=V.style.top+H,V.canvasId="canvas-main",n.addComponent({component:V,index:void 0,isFromGroup:!0})};w(()=>o.value&&o.value===p.value.id);const Fe=w(()=>B.value?"tab-head-left":"tab-head-"+p.value.style.headHorizontalPosition),Se=V=>{if(V){const{backdropFilterEnable:M,backdropFilter:H,backgroundColorSelect:E,backgroundColor:ke,backgroundImageEnable:me,backgroundType:we,outerImage:ut,innerPadding:L,borderRadius:ue}=V;let We={padding:L*U.value+"px",borderRadius:ue+"px"},Ce="";return E&&ke&&(Ce=ke),me&&we==="outerImage"&&typeof ut=="string"?We.background=`url(${Ua(ut)}) no-repeat ${Ce}`:We["background-color"]=Ce,M&&(We["backdrop-filter"]="blur("+H+"px)"),We}return{}},Le=V=>{var H,E;let M={};return p.value.editableTabsValue===V?(M={textDecoration:p.value.style.textDecoration,fontStyle:p.value.style.fontStyle,fontWeight:p.value.style.fontWeight,fontSize:(p.value.style.activeFontSize||18)+"px",lineHeight:(p.value.style.activeFontSize||18)+"px"},(H=p.value.titleBackground)!=null&&H.enable&&(M={...M,...Se(p.value.titleBackground.active)})):(M={textDecoration:p.value.style.textDecoration,fontStyle:p.value.style.fontStyle,fontWeight:p.value.style.fontWeight,fontSize:(p.value.style.fontSize||16)+"px",lineHeight:(p.value.style.fontSize||16)+"px"},(E=p.value.titleBackground)!=null&&E.enable&&(M={...M,...Se(p.value.titleBackground.multiply?p.value.titleBackground.active:p.value.titleBackground.inActive)})),M},Ze=w(()=>p.value&&p.value.style&&p.value.style.headFontColor&&typeof p.value.style.headFontColor=="string"?p.value.style.headFontColor:"none"),et=w(()=>p.value&&p.value.style&&p.value.style.headFontActiveColor&&typeof p.value.style.headFontActiveColor=="string"?p.value.style.headFontActiveColor:"none"),je=w(()=>p.value&&p.value.style&&p.value.style.headBorderActiveColor&&typeof p.value.style.headBorderActiveColor=="string"?p.value.style.headBorderActiveColor:"none"),Ge=w(()=>!!se.textarea&&!!se.textarea.trim()),Te=eo(()=>{ce()},500),lt=V=>{const M={screenId:V,dvType:D.value.type};v.value.init(M)};Ct(()=>U.value,()=>{Te()}),Ct(()=>p.value,()=>{Oe(),Te()},{deep:!0});const rt=()=>{se.tabShow=!1,He(()=>{se.tabShow=!0})},W=V=>{p.value.propValue.forEach(M=>{p.value.editableTabsValue===M.name&&(M.screenId=null,He(()=>{M.screenId=V,r.recordSnapshotCache("selectNewScreen")}))})};Ct(()=>xe.value,()=>{j()});const j=()=>{var V;if(l&&clearInterval(l),l=null,!xe.value&&(V=p.value.carousel)!=null&&V.enable){const M=(p.value.carousel.time||5)*1e3;let H=1;l=setInterval(()=>{if(!se.hoverFlag){const E=H%p.value.propValue.length;H++,He(()=>{p.value.editableTabsValue=p.value.propValue[E].name})}},M)}};return bt(()=>{document.addEventListener("visibilitychange",ce),p.value.propValue.length>0&&(p.value.editableTabsValue=p.value.propValue[0].name),Oe(),["canvas","canvasDataV","edit"].includes(O.value)&&!d.value&&(ne.on("onTabMoveIn-"+p.value.id,le),ne.on("onTabMoveOut-"+p.value.id,q),ne.on("onTabSortChange-"+p.value.id,rt)),X=pn(),j(),He(()=>{ta(p.value)}),setTimeout(()=>{ce()},1e3)}),Zt(()=>{document.removeEventListener("visibilitychange",ce),["canvas","canvasDataV","edit"].includes(O.value)&&!d.value&&(ne.off("onTabMoveIn-"+p.value.id,le),ne.off("onTabMoveOut-"+p.value.id,q),ne.off("onTabSortChange-"+p.value.id,rt))}),Bn(()=>{l&&(clearInterval(l),l=null)}),(V,M)=>{const H=ba("ArrowDown"),E=Dt,ke=Wa,me=Za,we=Na,ut=fn,L=Mt,ue=$n,We=ma;return se.tabShow?(c(),T("div",{key:0,style:{width:"100%",height:"100%"},class:Xe([[Fe.value,`ed-tabs-${e(Me)}`,{"title-hidde-tab":!de.value},{"title-show-tab":de.value}],"custom-tabs-head"]),ref_key:"tabComponentRef",ref:i},[h(co,{modelValue:e(p).editableTabsValue,"onUpdate:modelValue":M[1]||(M[1]=Ce=>e(p).editableTabsValue=Ce),onTabAdd:$e,addable:xe.value,"font-color":Ze.value,"active-color":et.value,"border-color":pe.value,"border-active-color":je.value,"hide-title":!de.value},{default:y(()=>[(c(!0),T(Ke,null,Pt(e(p).propValue,Ce=>(c(),z(ut,{key:Ce.name,class:"el-tab-pane-custom",lazy:xe.value,label:Ce.title,name:Ce.name},{label:y(()=>[C("div",{class:"custom-tab-title",onMousedown:M[0]||(M[0]=Rt(()=>{},["stop"]))},[C("span",{class:"title-inner",style:Pe(Le(Ce.name))},[_e(Y(Ce.title)+" ",1),Qe(h(ha,{style:Pe({color:e(p).titleBackground.active.innerImageColor,pointerEvents:"none"}),name:J.value},null,8,["style","name"]),[[pt,ve(Ce.name)]]),Qe(h(ha,{style:Pe({color:e(p).titleBackground.inActive.innerImageColor,pointerEvents:"none"}),name:G.value},null,8,["style","name"]),[[pt,N(Ce.name)]]),xe.value?(c(),T("span",fu,[h(we,{"popper-class":"custom-de-tab-dropdown",effect:e(Me),trigger:"click",onCommand:R},{dropdown:y(()=>[h(me,{style:Pe({"font-family":t.fontFamily})},{default:y(()=>[h(ke,{command:Ee("changeScreen",Ce)},{default:y(()=>[_e(Y(e(s)("visualization.change_screen_page",[e(Q)])),1)]),_:1},8,["command"]),h(ke,{command:Ee("editTitle",Ce)},{default:y(()=>[_e(Y(e(s)("visualization.edit_title")),1)]),_:1},8,["command"]),e(p).propValue.length>1?(c(),z(ke,{key:0,command:Ee("deleteCur",Ce)},{default:y(()=>[_e(Y(e(s)("visualization.delete")),1)]),_:1},8,["command"])):F("",!0)]),_:2},1032,["style"])]),default:y(()=>[C("span",hu,[e(P)?(c(),z(E,{key:0},{default:y(()=>[h(H)]),_:1})):F("",!0)])]),_:2},1032,["effect"])])):F("",!0)],4)],32)]),_:2},1032,["lazy","label","name"]))),128)),(c(!0),T(Ke,null,Pt(e(p).propValue,Ce=>(c(),T("div",{class:Xe(["tab-content-custom",{"switch-hidden":e(p).editableTabsValue!==Ce.name}]),key:Ce.name+"-content",onMouseenter:ie,onMouseleave:ge},[Ce.screenId?(c(),z(po,{key:0,"outer-id":Ce.screenId,ref_for:!0,ref:"dashboardPreview"},null,8,["outer-id"])):(c(),T("div",mu,[C("span",null,[h(L,{onClick:kt=>lt(Ce.screenId),text:"",style:{"font-family":"inherit",color:"#646a73"},icon:"Plus"},{default:y(()=>[_e(Y(e(D).type==="dataV"?e(s)("visualization.select_target_screen_tips"):e(s)("visualization.select_target_dashboard_tips")),1)]),_:1},8,["onClick"])])]))],34))),128))]),_:1},8,["modelValue","addable","font-color","active-color","border-color","border-active-color","hide-title"]),h(We,{title:"编辑标题","append-to-body":!0,modelValue:se.dialogVisible,"onUpdate:modelValue":M[4]||(M[4]=Ce=>se.dialogVisible=Ce),width:"30%","show-close":!1,"close-on-click-modal":!1,center:""},{footer:y(()=>[C("span",gu,[h(L,{onClick:M[3]||(M[3]=Ce=>se.dialogVisible=!1)},{default:y(()=>[...M[5]||(M[5]=[_e("取消",-1)])]),_:1}),h(L,{disabled:!Ge.value,type:"primary",onClick:De},{default:y(()=>[...M[6]||(M[6]=[_e("确认",-1)])]),_:1},8,["disabled"])])]),default:y(()=>[h(ue,{modelValue:se.textarea,"onUpdate:modelValue":M[2]||(M[2]=Ce=>se.textarea=Ce),maxlength:"50",placeholder:V.$t("dataset.input_content")},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue"]),h(pu,{ref_key:"selectScreenDialogRef",ref:v,onSelectConfirm:W},null,512)],2)):F("",!0)}}});const fo=Re(yu,[["__scopeId","data-v-2eb19012"]]),Ld=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),ho={VText:Uo,VQuery:Yo,VTextAttr:Jo,Group:ro,GroupAttr:Tl,UserView:Hl,UserViewAttr:Bl,Picture:Fl,PictureAttr:Ll,DynamicBackground:Al,DynamicBackgroundAttr:zl,CanvasBoard:Sl,CanvasBoardAttr:$l,CanvasIcon:ql,CanvasIconAttr:Rl,DeTabs:vo,DeTabsAttr:Gl,DeGraphical:Wl,DeGraphicalAttr:Zl,CircleShape:Nl,CircleShapeAttr:jl,RectShape:Ul,RectShapeAttr:Xl,SvgTriangle:Nr,SvgTriangleAttr:Ur,DeTimeClock:Jl,DeTimeClockAttr:Ql,GroupArea:Kl,GroupAreaAttr:ei,DeFrame:iu,DeFrameAttr:ti,DeVideo:si,DeVideoAttr:ri,DeStreamMedia:ui,DeStreamMediaAttr:ci,ScrollText:di,ScrollTextAttr:vi,PopArea:Ya,PopAreaAttr:pi,PictureGroup:fi,PictureGroupAttr:hi,DeDecoration:Ol,DeDecorationAttr:El,DeScreen:fo,DeScreenAttr:ii};function Fa(t){return ho[t]}function Ad(t){const n=t.component==="UserView"&&t.innerType==="picture-group"?"PictureGroupAttr":t.component+"Attr";return ho[n]}const _u=qn("viewSelectorStore",{state:()=>({enable:!1,viewIdList:[]}),getters:{getEnable(){return this.enable},getViewIdList(){return this.viewIdList}},actions:{setEnable(t){this.enable=t},remove(t){let n=this.viewIdList.length;if(n){if(!t){this.viewIdList=[];return}for(;n--;)this.viewIdList[n]===t&&this.viewIdList.splice(n,1)}},add(t){this.viewIdList.includes(t)||this.viewIdList.push(t)},clear(){this.enable=!1,this.viewIdList=[]}}}),wu=()=>_u(Wn),Cu={class:"bar-main"},bu=Be({__name:"ComponentSelector",props:{resourceId:{type:String,required:!1}},setup(t){const n=wu(),r=I(!1),o=t;bt(()=>{r.value=n.getViewIdList.includes(o.resourceId)});const _=f=>{f?n.add(o.resourceId):n.remove(o.resourceId)};return(f,d)=>{const i=An;return c(),T("div",Cu,[h(i,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=l=>r.value=l),onChange:_},null,8,["modelValue"])])}}});const xu=Re(bu,[["__scopeId","data-v-5e14b4cf"]]),Su=["title"],ku=["id"],Iu=Be({__name:"ComponentWrapper",props:{curStyle:{type:Object},active:{type:Boolean,default:!1},popActive:{type:Boolean,default:!1},canvasStyleData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},config:{type:Object,required:!0,default(){return{component:null,propValue:null,request:null,linkage:null,type:null,events:null,style:null,id:null,animations:null}}},viewInfo:{type:Object,required:!1},index:{required:!0,type:[Number,String],default:0},showPosition:{required:!1,type:String,default:"preview"},canvasId:{type:String,default:"canvas-main"},searchCount:{type:Number,required:!1,default:0},scale:{type:Number,required:!1,default:100},isSelector:{type:Boolean,default:!1},suffixId:{type:String,required:!1,default:"common"},fontFamily:{type:String,required:!1,default:"inherit"},optType:{type:String,required:!1},scrollMain:{type:Number,default:0}},emits:["userViewEnlargeOpen","datasetParamsInit","onPointClick"],setup(t,{emit:n}){const r=I(null),o=I(null),_=ot(),f=I(!1),d=["width","height","top","left","rotate"],i=I(null),l=["width","height","top","left","rotate","borderActive","borderWidth","borderRadius","borderStyle","borderColor"],s=t,{config:v,showPosition:u,index:p,canvasStyleData:P,canvasViewInfo:O,dvInfo:b,searchCount:S,scale:D,suffixId:U,scrollMain:he}=ft(s),Q=I(null),J=n,G="wrapper-outer-id-"+v.value.id,N=w(()=>"enlarge-inner-content-"+v.value.id),ve=()=>{ze().emitter.emit("l7-prepare-picture",v.value.id),f.value=!0,setTimeout(()=>{const q=document.getElementById(N.value);ka(N.value,"canvas-main",D.value/100),mn("img",q,"图表",()=>{Kn(N.value),f.value=!1,ze().emitter.emit("l7-unprepare-picture",v.value.id)})},1e3)},ce=q=>{var ae,Fe;if(u.value.includes("multiplexing")&&(o.value.multiplexingCheckOut(),q==null||q.stopPropagation(),q==null||q.preventDefault()),!["rich-text"].includes(v.value.innerType)&&["popEdit","preview"].includes(u.value)||_.mobileInPc){if(ie(),(Fe=(ae=q.target)==null?void 0:ae.className)!=null&&Fe.includes("ed-input__inner"))return;q==null||q.stopPropagation(),q==null||q.preventDefault()}},ie=()=>{ne.emit("componentClick"),_.setInEditorStatus(!0),_.setClickComponentStatus(!0),_.setCurComponent({component:v.value,index:p.value})},ge=q=>v.value.component.includes("Svg")?Aa(q,["top","left","width","height","rotate","backgroundColor","borderWidth","borderStyle","borderColor"]):Aa(q,q.borderActive?d:l),se=()=>{ne.emit("v-hover",v.value.id)},B=w(()=>{if(v.value.commonBackground){const{backdropFilterEnable:q,backdropFilter:ae,backgroundColorSelect:Fe,backgroundColor:Se,backgroundImageEnable:Le,backgroundType:Ze,outerImage:et,innerPadding:je,borderRadius:Ge}=v.value.commonBackground;let Te={padding:je*x.value+"px",borderRadius:Ge+"px"},lt="";return Fe&&Se&&(lt=Se),Le&&Ze==="outerImage"&&typeof et=="string"?Te.background=`url(${Ua(et)}) no-repeat ${lt}`:Te["background-color"]=lt,v.value.component!=="UserView"&&(Te.overflow="hidden"),q&&(Te["backdrop-filter"]="blur("+ae+"px)"),Te}return{}}),pe=w(()=>{const{backgroundImageEnable:q,backgroundType:ae,innerImage:Fe}=v.value.commonBackground;return q&&ae==="innerImage"&&typeof Fe=="string"}),X=w(()=>pe.value?v.value.commonBackground.innerImage.replace("board/","").replace(".svg",""):null),de=w(()=>{var q;if(v.value.multiDimensional&&((q=v.value.multiDimensional)!=null&&q.enable)){const ae=v.value.style.width,Fe=v.value.style.height,Se=v.value.multiDimensional.x,Le=v.value.multiDimensional.y,Ze=Se*Math.PI/180,et=Le*Math.PI/180,je=Math.abs(ae*Math.cos(et))+Math.abs(Fe*Math.sin(Ze)),Ge=Math.abs(Fe*Math.cos(Ze))+Math.abs(ae*Math.sin(et)),Te=(je-ae)/2;return{padding:`${(Ge-Fe)/2}px ${Te}px`,transform:`rotateX(${v.value.multiDimensional.x}deg) rotateY(${v.value.multiDimensional.y}deg) rotateZ(${v.value.multiDimensional.z}deg)`}}else return{}}),xe=q=>{J("onPointClick",q)},Me=w(()=>u.value.includes("preview")&&(["Picture","CanvasIcon","CircleShape","SvgTriangle","RectShape","ScrollText"].includes(v.value.component)||["indicator","rich-text"].includes(v.value.innerType))&&v.value.events&&v.value.events.checked&&(st()||!st()&&!pa())&&u.value!=="canvas-multiplexing"),Oe=q=>{["indicator"].includes(v.value.innerType)||Ee(q)},Ee=q=>{if(Me.value){if(v.value.events.type==="showHidden")He(()=>{_.popAreaActiveSwitch()});else if(v.value.events.type==="jump"){const ae=v.value.events.jump.value,Fe=v.value.events.jump.type;try{Fe==="newPop"?i.value.previewInit({url:ae,size:"middle"}):Fe==="_blank"?window.originOpen?window.originOpen(ae,"_blank"):window.open(ae,"_blank"):$e(window.open(ae,Fe))}catch{console.warn("url 格式错误:"+ae)}}else v.value.events.type==="refreshDataV"?ze().emitter.emit("componentRefresh"):v.value.events.type==="fullScreen"?ze().emitter.emit("canvasFullscreen"):v.value.events.type==="download"&&ze().emitter.emit("canvasDownload");q==null||q.preventDefault(),q==null||q.stopPropagation()}},De=I(null),$e=q=>{if(De!=null&&De.value){const ae={methodName:"initOpenHandler",args:q};De.value.invokeMethod(ae)}},x=w(()=>D.value/100),ee=w(()=>s.popActive||_.mobileInPc&&s.active),oe=w(()=>{var q;return Ve(s.canvasId)&&v.value.freeze&&!pa()&&he.value-((q=v.value.style)==null?void 0:q.top)>0}),R=w(()=>({eventEnable:Me.value,eventType:v.value.events.type})),te=w(()=>_.mobileInPc&&u.value==="edit"),le=(q,ae)=>{ae==="syncPcDesign"&&(q.preventDefault(),q.stopPropagation()),ze().emitter.emit("onMobileStatusChange",{type:ae,value:v.value.id})};return(q,ae)=>{var Le,Ze,et,je,Ge;const Fe=Dt,Se=Sa;return Qe((c(),T("div",{class:Xe(["wrapper-outer",[e(u)+"-"+e(v).component,{"freeze-component":oe.value}]]),id:G,onMousedown:ce,onMouseenter:se,"element-loading-text":"导出中...","element-loading-background":"rgba(255, 255, 255, 1)"},[te.value?(c(),T("div",{key:0,title:q.$t("visualization.sync_pc_design"),class:"refresh-from-pc",onClick:ae[0]||(ae[0]=Te=>le(Te,"syncPcDesign"))},[h(Fe,null,{default:y(()=>[h(gt,{name:"icon_replace_outlined"},{default:y(()=>[h(e(Rn),{class:"svg-icon"})]),_:1})]),_:1})],8,Su)):F("",!0),!e(u).includes("canvas")&&!s.isSelector?(c(),z(lo,{key:1,class:Xe(["wrapper-edit-bar",{"wrapper-edit-bar-active":t.active}]),ref_key:"componentEditBarRef",ref:o,"canvas-id":t.canvasId,index:e(p),element:e(v),"show-position":e(u),onComponentImageDownload:ve,onUserViewEnlargeOpen:ae[1]||(ae[1]=Te=>J("userViewEnlargeOpen",Te)),onDatasetParamsInit:ae[2]||(ae[2]=()=>J("datasetParamsInit"))},null,8,["canvas-id","index","element","show-position","class"])):F("",!0),s.isSelector&&e(v).component==="UserView"&&((Le=e(v).propValue)==null?void 0:Le.innerType)!=="rich-text"?(c(),z(xu,{key:2,"resource-id":e(v).id},null,8,["resource-id"])):F("",!0),C("div",{class:"wrapper-inner",ref_key:"componentWrapperInnerRef",ref:r,id:N.value,style:Pe(B.value)},[C("div",{class:Xe(["wrapper-inner-adaptor",{"pop-wrapper-inner":ee.value,"event-active":Me.value}]),style:Pe(de.value),onMousedown:Oe},[(c(),z(wa(e(Fa)(e(v).component)),{view:t.viewInfo,ref_key:"component",ref:Q,class:"component","canvas-style-data":e(P),"opt-type":t.optType,"dv-info":e(b),"dv-type":e(b).type,"canvas-view-info":e(O),style:Pe(ge((Ze=e(v))==null?void 0:Ze.style)),curStyle:t.curStyle,"prop-value":(et=e(v))==null?void 0:et.propValue,element:e(v),request:(je=e(v))==null?void 0:je.request,linkage:(Ge=e(v))==null?void 0:Ge.linkage,"show-position":e(u),"search-count":e(S),scale:x.value,disabled:!0,"is-edit":!1,"suffix-id":e(U),"font-family":t.fontFamily,active:t.active,"common-params":R.value,onOnPointClick:xe,onOnComponentEvent:Ee},null,40,["view","canvas-style-data","opt-type","dv-info","dv-type","canvas-view-info","style","curStyle","prop-value","element","request","linkage","show-position","search-count","scale","suffix-id","font-family","active","common-params"]))],38),pe.value?(c(),z(ha,{key:0,style:Pe({color:e(v).commonBackground.innerImageColor,pointerEvents:"none"}),name:X.value},null,8,["style","name"])):F("",!0)],12,ku),h(e(fa),{ref_key:"openHandler",ref:De,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512),h(mi,{ref_key:"dePreviewPopDialogRef",ref:i},null,512)],34)),[[Se,f.value]])}}});const Ja=Re(Iu,[["__scopeId","data-v-b453c4df"]]),Vu=Be({__name:"DeFullscreen",props:{themes:{type:String,default:"light"},componentType:{type:String,default:"button"},showPosition:{required:!1,type:String,default:"preview"}},setup(t,{expose:n}){const r=ot(),o=t,_=()=>{const i=!!document.fullscreenElement;r.setFullscreenFlag(i),o.showPosition==="edit"&&r.setEditMode(i?"preview":"edit"),o.showPosition==="dvEdit"&&ze().emitter.emit("canvasScrollRestore")},f=()=>{const i=document.querySelector("body");document.fullscreenElement?document.exitFullscreen():i==null||i.requestFullscreen()},d=i=>{i.key==="Escape"&&document.fullscreenElement&&document.exitFullscreen()};return bt(()=>{document.addEventListener("fullscreenchange",_),document.addEventListener("keydown",d)}),Zt(()=>{document.removeEventListener("fullscreenchange",_),document.removeEventListener("keydown",d)}),n({toggleFullscreen:f}),(i,l)=>(c(),T("span"))}}),Mu={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Du(t,n){return c(),T("svg",Mu,[...n[0]||(n[0]=[C("path",{d:"M2.85738 4.85729L9.98911 11.989L2.85738 19.1207C2.66212 19.316 2.66212 19.6326 2.85738 19.8279L3.56449 20.535C3.75975 20.7302 4.07634 20.7302 4.2716 20.535L12.1104 12.6961C12.501 12.3056 12.501 11.6724 12.1104 11.2819L4.2716 3.44308C4.07634 3.24782 3.75975 3.24782 3.56449 3.44308L2.85738 4.15018C2.66212 4.34545 2.66212 4.66203 2.85738 4.85729Z"},null,-1),C("path",{d:"M11.7431 4.85729L18.8749 11.989L11.7431 19.1207C11.5479 19.316 11.5479 19.6326 11.7431 19.8279L12.4502 20.535C12.6455 20.7302 12.9621 20.7302 13.1573 20.535L20.9962 12.6961C21.3867 12.3056 21.3867 11.6724 20.9962 11.2819L13.1573 3.44308C12.9621 3.24782 12.6455 3.24782 12.4502 3.44308L11.7431 4.15018C11.5479 4.34545 11.5479 4.66203 11.7431 4.85729Z"},null,-1)])])}const Pu={render:Du},Tu={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Hu(t,n){return c(),T("svg",Tu,[...n[0]||(n[0]=[C("path",{d:"M12.2496 19.1355L5.11783 12.0038L12.2496 4.87206C12.4448 4.6768 12.4448 4.36022 12.2496 4.16495L11.5424 3.45785C11.3472 3.26259 11.0306 3.26259 10.8353 3.45785L2.99651 11.2967C2.60598 11.6872 2.60598 12.3204 2.99651 12.7109L10.8353 20.5497C11.0306 20.745 11.3472 20.745 11.5424 20.5497L12.2496 19.8426C12.4448 19.6474 12.4448 19.3308 12.2496 19.1355Z"},null,-1),C("path",{d:"M21.1497 19.1355L14.018 12.0038L21.1497 4.87206C21.345 4.6768 21.345 4.36022 21.1497 4.16495L20.4426 3.45785C20.2473 3.26259 19.9307 3.26259 19.7355 3.45785L11.8967 11.2967C11.5061 11.6872 11.5061 12.3204 11.8967 12.7109L19.7355 20.5497C19.9307 20.745 20.2473 20.745 20.4426 20.5497L21.1497 19.8426C21.345 19.6474 21.345 19.3308 21.1497 19.1355Z"},null,-1)])])}const Bu={render:Hu},Fu={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Lu(t,n){return c(),T("svg",Fu,[...n[0]||(n[0]=[C("path",{d:"M9.00839 13.9974C9.28453 13.9974 9.53453 14.1093 9.71549 14.2903C9.89646 14.4712 10.0084 14.7212 10.0084 14.9974V20.1572C10.0084 20.4333 9.78453 20.6572 9.50839 20.6572H8.50839C8.23224 20.6572 8.00839 20.4333 8.00839 20.1572V17.4974L4.09289 21.4116C3.89762 21.6069 3.58104 21.6069 3.38578 21.4116L2.67867 20.7045C2.48341 20.5092 2.48341 20.1927 2.67867 19.9974L6.68001 15.9974H3.83559C3.55945 15.9974 3.33559 15.7735 3.33559 15.4974V14.4974C3.33559 14.2212 3.55945 13.9974 3.83559 13.9974H9.00839ZM19.919 2.58865C20.1142 2.39338 20.4308 2.39338 20.6261 2.58865L21.3332 3.29575C21.5284 3.49102 21.5284 3.8076 21.3332 4.00286L17.3318 8.00286H20.1763C20.4524 8.00286 20.6763 8.22672 20.6763 8.50286V9.50286C20.6763 9.779 20.4524 10.0029 20.1763 10.0029H15.0035C14.7273 10.0029 14.4773 9.89093 14.2964 9.70997C14.1154 9.529 14.0035 9.279 14.0035 9.00286V3.84309C14.0035 3.56695 14.2273 3.34309 14.5035 3.34309H15.5035C15.7796 3.34309 16.0035 3.56695 16.0035 3.84309V6.50281L19.919 2.58865Z"},null,-1)])])}const Au={render:Lu},zu={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Ou(t,n){return c(),T("svg",zu,[...n[0]||(n[0]=[C("path",{d:"M7.1518 11.5968C7.31452 11.4341 7.57834 11.4341 7.74106 11.5968L8.33031 12.186C8.49303 12.3487 8.49303 12.6126 8.33031 12.7753L4.99587 16.1086H7.36621C7.59633 16.1086 7.78288 16.2952 7.78288 16.5253V17.3586C7.78288 17.5887 7.59633 17.7753 7.36621 17.7753H3.05555C2.82544 17.7753 2.6171 17.682 2.4663 17.5312C2.3155 17.3804 2.22222 17.1721 2.22222 16.9419V12.6421C2.22222 12.412 2.40877 12.2255 2.63889 12.2255H3.47222C3.70234 12.2255 3.88889 12.412 3.88889 12.6421V14.8586L7.1518 11.5968ZM16.9367 2.22217C17.1668 2.22217 17.3751 2.31544 17.5259 2.46625C17.6767 2.61705 17.77 2.82538 17.77 3.0555V7.35531C17.77 7.58543 17.5835 7.77198 17.3533 7.77198H16.52C16.2899 7.77198 16.1033 7.58543 16.1033 7.35531V5.13888L12.8404 8.40068C12.6777 8.5634 12.4139 8.5634 12.2512 8.40068L11.6619 7.81142C11.4992 7.6487 11.4992 7.38489 11.6619 7.22217L14.9964 3.88883H12.626C12.3959 3.88883 12.2094 3.70229 12.2094 3.47217V2.63883C12.2094 2.40872 12.3959 2.22217 12.626 2.22217H16.9367Z"},null,-1)])])}const Eu={render:Ou},$u={class:"bar-first"},qu={class:"bar-content"},Ru={class:"link-icon-active"},Gu={class:"link-icon-active"},Wu={id:"fullscreenElement",class:"link-icon-active",style:{"padding-right":"4px"}},Zu=Be({__name:"LinkOptBar",props:{canvasStyleData:{type:Object,required:!0}},setup(t){var P;const n=ot(),r=t,{canvasStyleData:o}=ft(r),{fullscreenFlag:_}=at(n),{t:f}=Tt(),d=At({fullscreenElement:null,barActive:!1,fullWidth:((P=Lt.currentRoute.value.query)==null?void 0:P.fromLink)==="true"?126:94}),i=w(()=>{var b,S;let O="link-bar-main-light";return((S=(b=o.value)==null?void 0:b.dashboard)==null?void 0:S.themeColor)==="dark"&&(O="link-bar-main-dark"),O}),l=w(()=>{var O;return((O=Lt.currentRoute.value.query)==null?void 0:O.fromLink)==="true"}),s=()=>{d.barActive=!d.barActive},v=()=>{document.fullscreenElement?document.exitFullscreen().catch(O=>{console.error("Exit fullscreen failed:",O)}):ze().emitter.emit("canvasFullscreen")},u=()=>{const O=localStorage.getItem(ll("beforeJumpUrl"));localStorage.removeItem("beforeJumpUrl"),window.location.href=O,window.location.reload()},p=()=>{ze().emitter.emit("canvasDownload","pdf")};return(O,b)=>{const S=Jt;return c(),T("div",{id:"fullscreenElement",ref:"widget-div",class:Xe(["link-bar-main bar-light",[{"link-bar-main-active":d.barActive},i.value]]),style:Pe({"--fullWidth":d.fullWidth+"px","--fullContent":28-d.fullWidth+"px","--firstHoveMove":32-d.fullWidth+"px"})},[C("div",$u,[h(S,{content:d.barActive?e(f)("visualization.fold"):e(f)("visualization.expand")},{default:y(()=>[h(e(Dt),{style:{width:"16px",height:"16px"},onClick:s},{default:y(()=>[d.barActive?(c(),z(gt,{key:0,name:"icon_down_right_outlined"},{default:y(()=>[h(e(Pu))]),_:1})):(c(),z(gt,{key:1,name:"icon_up_left_outlined"},{default:y(()=>[h(e(Bu))]),_:1}))]),_:1})]),_:1},8,["content"])]),C("div",qu,[b[0]||(b[0]=C("div",{class:"bar-diver"},null,-1)),Qe(C("div",Ru,[h(S,{content:e(f)("visualization.back_parent")},{default:y(()=>[h(e(Dt),{style:{width:"16px",height:"16px"},onClick:u},{default:y(()=>[h(gt,{name:"icon_left_outlined"},{default:y(()=>[h(e(yi),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])],512),[[pt,l.value]]),C("div",Gu,[h(S,{content:e(f)("visualization.export_pdf")},{default:y(()=>[h(e(Dt),{style:{width:"16px",height:"16px"},onClick:p},{default:y(()=>[h(gt,{name:"icon_download_outlined"},{default:y(()=>[h(e(ca),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])]),C("div",Wu,[h(S,{content:e(_)?e(f)("visualization.ext_fullscreen"):e(f)("visualization.fullscreen")},{default:y(()=>[h(e(Dt),{style:{width:"16px",height:"16px"},onClick:v},{default:y(()=>[e(_)?(c(),z(gt,{key:0,name:"icon_minify_outlined"},{default:y(()=>[h(e(Au),{class:"svg-icon"})]),_:1})):(c(),z(gt,{key:1,name:"icon_magnify_outlined"},{default:y(()=>[h(e(Eu),{class:"svg-icon"})]),_:1}))]),_:1})]),_:1},8,["content"])])])],6)}}});const Nu=Re(Zu,[["__scopeId","data-v-52b22c48"]]),ju=Be({__name:"DePreview",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},showPosition:{required:!1,type:String,default:"preview"},previewActive:{type:Boolean,default:!0},downloadStatus:{type:Boolean,default:!1},userId:{type:String,require:!1},outerScale:{type:Number,required:!1,default:1},outerSearchCount:{type:Number,required:!1,default:0},isSelector:{type:Boolean,default:!1},showPopBar:{type:Boolean,default:!1},fontFamily:{type:String,required:!1,default:"inherit"},showLinkageButton:{type:Boolean,default:!0},outerScreenAdaptor:{type:String,required:!1,default:null}},emits:["onResetLayout"],setup(t,{expose:n,emit:r}){const o=ot(),{pcMatrixCount:_,curComponent:f,mobileInPc:d,canvasState:i,inMobile:l}=at(o),s=I(null),v=I(null),u=r,p=I(null),P=I(!1),O=_i(),{t:b}=Tt(),S=t,{canvasStyleData:D,componentData:U,dvInfo:he,canvasId:Q,canvasViewInfo:J,showPosition:G,previewActive:N,downloadStatus:ve,outerScale:ce,outerSearchCount:ie,showPopBar:ge,fontFamily:se,outerScreenAdaptor:B}=ft(S),pe="preview-"+Q.value,X=I(100),de=I(100),xe=I(100),Me=I(null),Oe=I(10),Ee=I(10),De=I(null),$e=I(0),x=I(null),ee=I(!1),oe=w(()=>he.value.type==="dashboard"),R=At({initState:!0,scrollMain:0}),te=w(()=>{var $;return B.value||(($=D.value)==null?void 0:$.screenAdaptor)}),le=w(()=>ie.value+$e.value),q=w(()=>te.value!=="full"),ae=w(()=>st()&&te.value==="withWidth"),Fe=w(()=>{var $;return!!(($=Lt.currentRoute.value.query)!=null&&$.report)}),Se=w(()=>U.value.filter($=>$.category&&$.category==="hidden"&&(!($!=null&&$.dashboardHidden)||($==null?void 0:$.dashboardHidden)&&pa()))),Le=w(()=>U.value.filter($=>($==null?void 0:$.category)!=="hidden"&&$.component!=="GroupArea"&&(!($!=null&&$.dashboardHidden)||($==null?void 0:$.dashboardHidden)&&pa()))),Ze=w(()=>{var fe,Ye,Je,ht,Ot,jt;let $={};return Ve(Q.value)&&!st()&&($.overflowY="hidden !important"),D.value&&D.value.width&&Ve(Q.value)&&($=Ga(D.value),te.value==="keep"?($.height=((fe=D.value)==null?void 0:fe.height)+"px",$.width=((Ye=D.value)==null?void 0:Ye.width)+"px",$.margin="auto"):te.value==="keepProportion"?($["aspect-ratio"]=((Je=D.value)==null?void 0:Je.width)/((ht=D.value)==null?void 0:ht.height),$.height="auto",$.width="auto"):($.height=oe.value?ve.value?je():"100%":!te.value||te.value==="widthFirst"?za((Ot=D.value)==null?void 0:Ot.height,xe.value)+"px":"100%",$.width=!oe.value&&te.value==="heightFirst"?za((jt=D.value)==null?void 0:jt.width,de.value)+"px":"100%")),$}),et=()=>{var Ye;if(!((Ye=Me.value)!=null&&Ye.childNodes))return He(()=>{Ze.value.height=je()}),"100%";const $=Me.value.childNodes;let fe=0;return $.forEach(Je=>{var Ut,oa;const ht=((Ut=Je.style)==null?void 0:Ut.top)||0,Ot=((oa=Je.style)==null?void 0:oa.height)||0,jt=parseFloat(ht)||0,aa=parseFloat(Ot)||0,na=jt+aa;na>fe&&(fe=na)}),`${fe}px`},je=()=>{var Ye;if(!((Ye=Me.value)!=null&&Ye.childNodes))return He(()=>{Ze.value.height=je()}),"100%";const $=Me.value.childNodes;let fe=0;return $.forEach(Je=>{const ht=(Je.offsetHeight||0)+(Je.offsetTop||0);ht>fe&&(fe=ht)}),`${fe}px!important`};Ct(()=>N.value,()=>{N.value&&Te()}),ze({name:"tabCanvasChange-"+Q.value,callback:function(){Te()}}),ze({name:"componentRefresh",callback:function(){Ve(Q.value)&&j()}}),ze({name:"canvasFullscreen",callback:function(){Ve(Q.value)&&p.value.toggleFullscreen()}});const Ge=()=>{ve.value||He(()=>{var $,fe,Ye;if(Me.value){let Je=Me.value.clientWidth,ht=Me.value.clientHeight;if(X.value=Je*100/D.value.width,ae.value?de.value=X.value*.7:de.value=ht*100/D.value.height,xe.value=st()&&!ae.value?Math.floor(Math.min(X.value,de.value)):X.value,oe.value)Oe.value=Je/_.value.x,ae.value?Ee.value=Oe.value*1.6:Ee.value=ht/_.value.y,xe.value=Ve(Q.value)?xe.value*1.2:ce.value*100;else{const Ot=q.value?xe.value:de.value;wi(Le.value,D.value,xe.value||ce.value*100,Ot||ce.value*100,ce.value*100),xe.value=Ve(Q.value)?xe.value:ce.value*100}ee.value=!0,u("onResetLayout"),P.value=!1,(($=Me.value)==null?void 0:$.clientHeight)-((Ye=(fe=Me.value)==null?void 0:fe.parentNode)==null?void 0:Ye.clientHeight)>0&&(P.value=!0)}})},Te=()=>{Fe.value||Ge()},lt=$=>Fn($,{dvModel:he.value.type,cellWidth:Oe.value,cellHeight:Ee.value,curGap:rt.value}),rt=w(()=>{var $,fe,Ye;return oe.value&&(($=o.canvasStyleData.dashboard)==null?void 0:$.gap)==="yes"?(Ye=(fe=o.canvasStyleData)==null?void 0:fe.dashboard)==null?void 0:Ye.gapSize:0}),W=()=>{if(D.value.refreshViewEnable&&G.value==="preview"){$e.value=0,x.value&&clearInterval(x.value);let $=3e5;D.value.refreshTime&&D.value.refreshTime>0&&(D.value.refreshUnit==="second"?$=D.value.refreshTime*1e3:$=D.value.refreshTime*6e4),x.value=setInterval(()=>{j()},$)}},j=()=>{$e.value++,Ve(Q.value)&&xl(he.value.id,he.value.type)},V=($="preview-canvas-main")=>{he.value.watermarkInfo&&Ve(Q.value)&&!ve.value&&ka($,Q.value,xe.value/100)},M=$=>{const fe=$.data;console.info("Received Message: "+JSON.stringify(fe)),(fe==null?void 0:fe.targetSourceId)===he.value.id+""&&Ve(Q.value)&&(fe.type==="attachParams"?E(fe):fe.type==="webParams"&&H(fe))},H=$=>{const fe=$.params;o.addWebParamsFilter(fe,Le.value)},E=$=>{const fe=$.params;R.initState=!1,o.addOuterParamsFilter(fe,Le.value,"outer"),R.initState=!0};bt(()=>{W(),Ge(),window.addEventListener("resize",Te),to().listenTo(document.getElementById(pe),()=>{Te(),V()}),window.addEventListener("message",M)}),Zt(()=>{o.canvasStateChange({key:"curPointArea",value:"base"}),clearInterval(x.value),window.removeEventListener("message",M)});const ke=($,fe)=>{De.value.dialogInit(D.value,J.value[fe.id],fe,$,{scale:xe.value/100})},me=()=>{G.value!=="viewDialog"&&(o.setCurComponent({component:null,index:null}),(!f.value||f.value&&f.value.category!=="hidden")&&o.canvasStateChange({key:"curPointArea",value:"base"}))},we=$=>{try{if(console.info("de_inner_params send"),window["dataease-embedded-host"]&&(s!=null&&s.value)){const fe={methodName:"embeddedInteractive",args:{eventName:"de_inner_params",args:$}};s.value.invokeMethod(fe)}else{console.info("de_inner_params send to host");const fe={type:"dataease-embedded-interactive",eventName:"de_inner_params",args:$};window.parent.postMessage(fe,"*")}}catch{console.warn("de_inner_params send error")}},ut=w(()=>{var $;return(($=D.value)==null?void 0:$.popupAvailable)&&Ve(Q.value)}),L=w(()=>ut.value&&Se.value&&Se.value.length>0&&!l.value&&D.value.popupButtonAvailable),ue=$=>{var fe;(fe=v.value)==null||fe.optInit($)},We=w(()=>he.value.type==="dataV"&&Q.value==="canvas-main"),Ce=w(()=>!!(D.value.suspensionButtonAvailable&&!l.value&&!d.value&&ge.value&&!O)),kt=()=>{},Et=()=>{R.scrollMain=Me.value.scrollTop},dt=w(()=>{var $;return(($=he.value)==null?void 0:$.status)===0&&Ve(Q.value)});return n({restore:Te,getPreviewCanvasSize:()=>({innerWidth:Me.value.clientWidth,innerHeight:Me.value.clientHeight}),getDownloadStatusMainHeightV2:et}),($,fe)=>(c(),T(Ke,null,[R.initState?(c(),T("div",{key:0,id:pe,class:Xe(["canvas-container",{"de-download-custom":e(ve),"datav-preview":We.value,"datav-preview-unpublish":dt.value}]),style:Pe(Ze.value),ref_key:"previewCanvas",ref:Me,onMousedown:me,onScroll:Et},[L.value?(c(),z(gi,{key:0,"is-fixed":P.value},null,8,["is-fixed"])):F("",!0),ut.value?(c(),z(Ya,{key:1,"dv-info":e(he),"canvas-id":e(Q),"canvas-style-data":e(D),canvasViewInfo:e(J),"pop-component-data":Se.value,scale:xe.value,"canvas-state":e(i),"show-position":"preview"},null,8,["dv-info","canvas-id","canvas-style-data","canvasViewInfo","pop-component-data","scale","canvas-state"])):F("",!0),t.showLinkageButton?(c(),z(Xa,{key:2,"canvas-id":e(Q),"canvas-style-data":e(D),"component-data":Le.value,"is-fixed":P.value},null,8,["canvas-id","canvas-style-data","component-data","is-fixed"])):F("",!0),ee.value&&!dt.value?(c(!0),T(Ke,{key:3},Pt(Le.value,(Ye,Je)=>Qe((c(),z(Ja,{active:Ye.id===(e(f)||{}).id,"canvas-id":e(Q),"canvas-style-data":e(D),"dv-info":e(he),"cur-style":lt(Ye),"canvas-view-info":e(J),"view-info":e(J)[Ye.id],key:Je,config:Ye,style:Pe(lt(Ye)),"show-position":e(G),"search-count":le.value,scale:e(d)&&e(st)()?100:xe.value,"is-selector":S.isSelector,"font-family":e(D).fontFamily||e(se),"scroll-main":R.scrollMain,onUserViewEnlargeOpen:ht=>ke(ht,Ye),onDatasetParamsInit:ht=>ue(Ye),onOnPointClick:we,index:Je},null,8,["active","canvas-id","canvas-style-data","dv-info","cur-style","canvas-view-info","view-info","config","style","show-position","search-count","scale","is-selector","font-family","scroll-main","onUserViewEnlargeOpen","onDatasetParamsInit","index"])),[[pt,Ye.isShow]])),128)):F("",!0),dt.value?(c(),z(Ea,{key:4,description:e(b)("visualization.resource_not_published"),"img-type":"none"},null,8,["description"])):F("",!0),h(_n,{ref_key:"userViewEnlargeRef",ref:De},null,512)],38)):F("",!0),R.initState?F("",!0):(c(),z(Ea,{key:1,description:"参数不能为空","img-type":"noneWhite"})),h(Vu,{ref_key:"fullScreeRef",ref:p},null,512),h(io,{ref_key:"customDatasetParamsRef",ref:v},null,512),h(e(fa),{ref_key:"openHandler",ref:s,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512),Ce.value?(c(),z(Nu,{key:2,ref:"link-opt-bar",terminal:"pc","canvas-style-data":e(D),onLinkExportPdf:kt},null,8,["canvas-style-data"])):F("",!0)],64))}});const wn=Re(ju,[["__scopeId","data-v-3931fc37"]]);export{ps as C,uo as D,po as P,Vu as _,Id as a,Vs as b,Vd as c,Di as d,so as e,Ad as f,su as g,os as h,bi as i,ms as j,Ja as k,Is as l,Xa as m,wn as n,xi as o,_n as p,Md as q,Pd as r,Td as s,Hd as t,Dd as u,Bd as v,Fd as w,Ld as x};
