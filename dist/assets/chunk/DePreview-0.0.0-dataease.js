import{af as $t,n as pt,f as x,O as ee,P as G,g as le,l as Za,d as vt,t as on,W as Bt,a6 as kn,u as l,i as A,a3 as Qe,a4 as _e,r as J,j as T,y as z,X as Bn,o as gn,a as ia,w as mn,e as Xa,_ as ae,a8 as Qn,S as Ht,h as Aa,R as Ft,T as ct,Z as ii,U as Kt,a1 as Di,q as ri,at as Ir,a5 as Mr,a2 as Tr,aj as Pi}from"./vue-0.0.0-dataease.js";import{b as xa,d as Vr,a as wi,t as Dr,g as yo,e as Io,f as Ai,s as Ua,h as bo,i as Ei}from"./style-0.0.0-dataease.js";import{a as yt,L as Hi,z as Ja,ag as Li,p as Pr,u as Ar,c as Er}from"./index-0.0.0-dataease.js";import{e as Te}from"./eventBus-0.0.0-dataease.js";import Hr from"./Component-0.0.0-dataease18.js";import{d as Lr,V as Or}from"./Component-0.0.0-dataease17.js";import Fr from"./Attr-0.0.0-dataease22.js";import{d as Rt,f as Br}from"./dvMain-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{i as Oi}from"./icon_replace_outlined-0.0.0-dataease.js";import{g as pa,c as Et,m as Ko,a as _o,t as co}from"./translate-0.0.0-dataease.js";import{N as va,x as li,y as xn,o as In,n as pn,j as Sn,O as Fi,i as Ea,v as Ha,D as La,at as Ci,C as zr,u as qr,au as Nr,av as $r,G as Bi,r as An,W as jr,aw as Rr}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{s as ra}from"./snapshot-0.0.0-dataease.js";import{d as zi,c as Mo,a as si,e as Da,f as Ga,l as Wr,h as fo,i as qi}from"./DeShortcutKey-0.0.0-dataease.js";import{i as To,a as ui,t as Gr}from"./imgUtils-0.0.0-dataease.js";import{E as Zr}from"./el-popover-0.0.0-dataease.js";import{E as Vo,a as Do,b as Po}from"./el-dropdown-menu-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import{E as Ni}from"./el-checkbox-0.0.0-dataease.js";import{i as Ur}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as Xr}from"./icon_add_outlined-0.0.0-dataease.js";import{i as Yr}from"./chart-list-0.0.0-dataease.js";import{i as Jr}from"./icon_more_outlined-0.0.0-dataease.js";import{i as Pa}from"./icon_download_outlined-0.0.0-dataease.js";import{af as $i}from"./chart-0.0.0-dataease.js";import{_ as Vt}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import{E as Fa}from"./el-dialog-0.0.0-dataease.js";import{d as Qr}from"./vuedraggable-es-0.0.0-dataease.js";import{e as ji,C as ha,s as Kr}from"./index-0.0.0-dataease21.js";import{u as lt,v as el,w as tl,n as ei,t as ti,x as Zt,k as Ri,y as xi,z as Si,A as nl,j as al,d as ki,B as wo,C as Wi,m as Gi,D as ol,i as il,o as rl,E as ll,F as sl}from"./canvasUtils-0.0.0-dataease.js";import{E as fa}from"./index-0.0.0-dataease4.js";import{B as Oa,_ as ul}from"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{a as Qa,r as Zi}from"./watermark-0.0.0-dataease2.js";import{c as cl,g as dl,P as Ii,_ as Pn,h as Ui}from"./lodash-0.0.0-dataease.js";import{E as da}from"./el-divider-0.0.0-dataease.js";import{g as Ka}from"./util-0.0.0-dataease.js";import{E as ci,a as Xi}from"./el-tabs-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as fl,a as pl,b as vl}from"./el-select-0.0.0-dataease.js";import ni from"./ChartComponentS2-0.0.0-dataease.js";import{E as Co}from"./EmptyBackground-0.0.0-dataease.js";import{L as hl,a as ml}from"./LinkageSet-0.0.0-dataease.js";import{b as di}from"./canvasStyle-0.0.0-dataease.js";import{E as Yi}from"./el-row-0.0.0-dataease.js";import{m as gl,d as oi}from"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{a as yl,E as Ji}from"./el-form-item-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import{E as bl}from"./index-0.0.0-dataease20.js";import{c as _l,i as wl}from"./dataVisualization-0.0.0-dataease2.js";import{_ as Cl}from"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import xl from"./Component-0.0.0-dataease16.js";import{_ as Sl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import kl from"./Component-0.0.0-dataease13.js";import Il from"./Attr-0.0.0-dataease16.js";import Ml from"./Component-0.0.0-dataease10.js";import{_ as Tl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import Vl from"./Component-0.0.0-dataease5.js";import{_ as Dl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease3.js";import Pl from"./Attr-0.0.0-dataease.js";import Al from"./Component-0.0.0-dataease3.js";import{_ as El}from"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import{e as Qi}from"./antv-0.0.0-dataease.js";import Hl from"./Attr-0.0.0-dataease9.js";import Ll from"./Component-0.0.0-dataease6.js";import Ol from"./Attr-0.0.0-dataease6.js";import Fl from"./Component-0.0.0-dataease4.js";import{_ as Bl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease4.js";import zl from"./Component-0.0.0-dataease14.js";import{_ as ql}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease5.js";import{C as Nl}from"./CommonAttr-0.0.0-dataease.js";import{_ as $l}from"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import jl from"./Attr-0.0.0-dataease10.js";import Rl from"./Component-0.0.0-dataease11.js";import{_ as Wl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease6.js";import{_ as Gl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease7.js";import{g as Mi}from"./dataset-0.0.0-dataease.js";import"./el-tree-0.0.0-dataease.js";import{E as Zl}from"./el-tree-select-0.0.0-dataease.js";import{e as Ul}from"./dataVisualization-0.0.0-dataease.js";import{d as Xl}from"./dv-dashboard-spine-0.0.0-dataease.js";import{d as Yl}from"./dv-folder-0.0.0-dataease.js";import Jl from"./Attr-0.0.0-dataease7.js";import Ql from"./Component-0.0.0-dataease9.js";import{_ as Kl}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease8.js";import es from"./Component-0.0.0-dataease7.js";import{_ as ts}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease9.js";import ns from"./Component-0.0.0-dataease15.js";import as from"./Attr-0.0.0-dataease19.js";import{_ as os}from"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease10.js";import is from"./Component-0.0.0-dataease12.js";import rs from"./Attr-0.0.0-dataease15.js";import{_ as ls}from"./index-0.0.0-dataease34.js";import ss from"./Component-0.0.0-dataease2.js";import{i as us}from"./icon_left_outlined-0.0.0-dataease.js";import{i as cs}from"./ModelUtil-0.0.0-dataease.js";const ho=Rt(),{componentData:Ti,curComponentIndex:Vi,canvasStyleData:xo}=$t(ho),So={width:["left","width","fontSize","activeFontSize","letterSpacing"],height:["top","height"]};function Dp(c){return Ki(c)}function Pp(c){return Ki(c)}function mo(c,u){!c||!Array.isArray(c)||c==null||c.forEach(b=>{if(Object.keys(b.style).forEach(p=>{So.width.includes(p)?b.style[p]&&(b.style[p]=Ya(ko(b.style[p],xo.value.scale),u)):So.height.includes(p)&&(b.style[p]=Ya(ko(b.style[p],xo.value.scaleHeight),u))}),["Group"].includes(b.component)){xa(b);const p=b.style;b.propValue.forEach(E=>{["DeTabs"].includes(E.component)?E.propValue.forEach(S=>{mo(S.componentData,u)}):(mo(E.propValue,u),Vr(E,p))})}else["DeTabs"].includes(b.component)&&b.propValue.forEach(p=>{mo(p.componentData,u)});if(["Group","DeTabs"].includes(b.component))try{pt(()=>xa(b))}catch(p){console.error("group adaptor error:"+p)}})}function Ki(c){const u=va(Ti.value);mo(u,c),ho.setComponentData(u),ho.setCurComponent({component:Ti.value[Vi.value],index:Vi.value}),ho.setCanvasStyle({...xo.value,scaleWidth:c,scaleHeight:c,scale:c})}function er(c,u,b,p,E){c.forEach(S=>{Object.keys(S.style).forEach(C=>{So.width.includes(C)?S.style[C]=Ya(ko(S.style[C],u.scale||E),b):So.height.includes(C)&&(S.style[C]=Ya(ko(S.style[C],u.scaleHeight||E),p))}),S.component==="Group"&&er(S.propValue,u,b,p,E)})}function ds(c,u,b,p,E){er(c,u,b,p,E),u.scale=b,u.scaleWidth=b,u.scaleHeight=p}const fs=["width","height","fontSize"];function ps(c,u=xo.value.scale){Object.keys(c.style).forEach(b=>{if(fs.includes(b)){if(b==="fontSize"&&c.style[b]==="")return;c.style[b]=Ya(c.style[b],u)}})}function Ya(c,u){return gl(c,oi(parseFloat(u),100))}function ko(c=0,u){return c||(c=0),oi(c,oi(parseFloat(u),100))}function Ap(c){return li.get({url:"/outerParams/queryWithVisualizationId/"+c})}function Ep(c){return li.post({url:"/outerParams/updateOuterParamsSet",data:c,loading:!0})}function vs(c){return li.get({url:"/outerParams/getOuterParamsInfo/"+c,method:"get",loading:!1})}const hs={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function ms(c,u){return x(),ee("svg",hs,[...u[0]||(u[0]=[G("path",{d:"M0 2C0 0.895431 0.895431 0 2 0H14C15.1046 0 16 0.895431 16 2V14C16 15.1046 15.1046 16 14 16H2C0.895431 16 0 15.1046 0 14V2Z"},null,-1),G("path",{d:"M11.5881 4.90381L12.3966 5.71231C12.4291 5.74481 12.4549 5.78339 12.4725 5.82586C12.4901 5.86833 12.4992 5.91384 12.4992 5.95981C12.4992 6.00577 12.4901 6.05129 12.4725 6.09375C12.4549 6.13622 12.4291 6.17481 12.3966 6.20731L7.17813 11.4258C7.14563 11.4583 7.10705 11.4841 7.06458 11.5017C7.02212 11.5193 6.9766 11.5283 6.93063 11.5283C6.88467 11.5283 6.83915 11.5193 6.79669 11.5017C6.75422 11.4841 6.71564 11.4583 6.68313 11.4258L3.70213 8.44481C3.66963 8.41231 3.64385 8.37372 3.62625 8.33126C3.60866 8.28879 3.59961 8.24327 3.59961 8.19731C3.59961 8.15134 3.60866 8.10583 3.62625 8.06336C3.64385 8.0209 3.66963 7.98231 3.70213 7.94981L4.51063 7.14181C4.54314 7.1093 4.58172 7.08352 4.62419 7.06593C4.66665 7.04834 4.71217 7.03928 4.75813 7.03928C4.8041 7.03928 4.84962 7.04834 4.89208 7.06593C4.93455 7.08352 4.97313 7.1093 5.00563 7.14181L6.93063 9.06631L11.0936 4.90331C11.1261 4.8708 11.1647 4.84502 11.2072 4.82743C11.2497 4.80984 11.2952 4.80078 11.3411 4.80078C11.3871 4.80078 11.4326 4.80984 11.4751 4.82743C11.5175 4.84502 11.5556 4.8713 11.5881 4.90381Z",fill:"white"},null,-1)])])}const gs={render:ms},ys={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function bs(c,u){return x(),ee("svg",ys,[...u[0]||(u[0]=[G("path",{d:"M3.79167 4.66602V4.37435C3.79167 2.60102 5.22842 1.16602 7 1.16602C8.77158 1.16602 10.2083 2.60102 10.2083 4.37435V4.66602H11.6667C11.9887 4.66602 12.25 4.92852 12.25 5.24935V12.2493C12.25 12.5702 11.9887 12.8327 11.6667 12.8327H2.33333C2.01075 12.8327 1.75 12.5702 1.75 12.2493V5.24935C1.75 4.92852 2.01075 4.66602 2.33333 4.66602H3.79167ZM9.04167 4.37435C9.04167 3.2456 8.12758 2.33268 7 2.33268C6.73186 2.33261 6.46634 2.38536 6.2186 2.48794C5.97086 2.59052 5.74575 2.7409 5.55615 2.9305C5.36655 3.1201 5.21617 3.34521 5.11359 3.59295C5.01101 3.84069 4.95826 4.10621 4.95833 4.37435V4.66602H9.04167V4.37435Z",fill:"#A6A6A6"},null,-1)])])}const _s={render:bs},ws={lt:Cs,t:Is,rt:xs,r:Ms,rb:Ss,b:Ts,lb:ks,l:Vs};function Cs(c,u,b,p,E){const{symmetricPoint:S}=E;let C=pa(u,S),m=Et(u,C,-c.rotate),v=Et(S,C,-c.rotate),y=v.x-m.x,I=v.y-m.y;if(p){y/I>b?(m.x+=Math.abs(y-I*b),y=I*b):(m.y+=Math.abs(I-y/b),I=y/b);const _=Et(m,C,c.rotate);C=pa(_,S),m=Et(_,C,-c.rotate),v=Et(S,C,-c.rotate),y=v.x-m.x,I=v.y-m.y}y>0&&I>0&&(c.width=Math.round(y),c.height=Math.round(I),c.left=Math.round(m.x),c.top=Math.round(m.y))}function xs(c,u,b,p,E){const{symmetricPoint:S}=E;let C=pa(u,S),m=Et(u,C,-c.rotate),v=Et(S,C,-c.rotate),y=m.x-v.x,I=v.y-m.y;if(p){y/I>b?(m.x-=Math.abs(y-I*b),y=I*b):(m.y+=Math.abs(I-y/b),I=y/b);const _=Et(m,C,c.rotate);C=pa(_,S),m=Et(_,C,-c.rotate),v=Et(S,C,-c.rotate),y=m.x-v.x,I=v.y-m.y}y>0&&I>0&&(c.width=Math.round(y),c.height=Math.round(I),c.left=Math.round(v.x),c.top=Math.round(m.y))}function Ss(c,u,b,p,E){const{symmetricPoint:S}=E;let C=pa(u,S),m=Et(S,C,-c.rotate),v=Et(u,C,-c.rotate),y=v.x-m.x,I=v.y-m.y;if(p){y/I>b?(v.x-=Math.abs(y-I*b),y=I*b):(v.y-=Math.abs(I-y/b),I=y/b);const _=Et(v,C,c.rotate);C=pa(_,S),m=Et(S,C,-c.rotate),v=Et(_,C,-c.rotate),y=v.x-m.x,I=v.y-m.y}y>0&&I>0&&(c.width=Math.round(y),c.height=Math.round(I),c.left=Math.round(m.x),c.top=Math.round(m.y))}function ks(c,u,b,p,E){const{symmetricPoint:S}=E;let C=pa(u,S),m=Et(S,C,-c.rotate),v=Et(u,C,-c.rotate),y=m.x-v.x,I=v.y-m.y;if(p){y/I>b?(v.x+=Math.abs(y-I*b),y=I*b):(v.y-=Math.abs(I-y/b),I=y/b);const _=Et(v,C,c.rotate);C=pa(_,S),m=Et(S,C,-c.rotate),v=Et(_,C,-c.rotate),y=m.x-v.x,I=v.y-m.y}y>0&&I>0&&(c.width=Math.round(y),c.height=Math.round(I),c.left=Math.round(v.x),c.top=Math.round(m.y))}function Is(c,u,b,p,E){const{symmetricPoint:S,curPoint:C}=E,m=Et(u,C,-c.rotate),v=Et({x:C.x,y:m.y},C,c.rotate),y=Math.sqrt((v.x-S.x)**2+(v.y-S.y)**2),I={x:v.x-(v.x-S.x)/2,y:v.y+(S.y-v.y)/2};let _=c.width;p&&(_=y*b),c.width=_,c.height=Math.round(y),c.top=Math.round(I.y-y/2),c.left=Math.round(I.x-c.width/2)}function Ms(c,u,b,p,E){const{symmetricPoint:S,curPoint:C}=E,m=Et(u,C,-c.rotate),v=Et({x:m.x,y:C.y},C,c.rotate),y=Math.sqrt((v.x-S.x)**2+(v.y-S.y)**2),I={x:v.x-(v.x-S.x)/2,y:v.y+(S.y-v.y)/2};let _=c.height;p&&(_=y/b),c.height=_,c.width=Math.round(y),c.top=Math.round(I.y-c.height/2),c.left=Math.round(I.x-y/2)}function Ts(c,u,b,p,E){const{symmetricPoint:S,curPoint:C}=E,m=Et(u,C,-c.rotate),v=Et({x:C.x,y:m.y},C,c.rotate),y=Math.sqrt((v.x-S.x)**2+(v.y-S.y)**2),I={x:v.x-(v.x-S.x)/2,y:v.y+(S.y-v.y)/2};let _=c.width;p&&(_=y*b),c.width=_,c.height=Math.round(y),c.top=Math.round(I.y-y/2),c.left=Math.round(I.x-c.width/2)}function Vs(c,u,b,p,E){const{symmetricPoint:S,curPoint:C}=E,m=Et(u,C,-c.rotate),v=Et({x:m.x,y:C.y},C,c.rotate),y=Math.sqrt((v.x-S.x)**2+(v.y-S.y)**2),I={x:v.x-(v.x-S.x)/2,y:v.y+(S.y-v.y)/2};let _=c.height;p&&(_=y/b),c.height=_,c.width=Math.round(y),c.top=Math.round(I.y-c.height/2),c.left=Math.round(I.x-y/2)}function Ds(c,u,b,p,E,S){ws[c](u,b,p,E,S)}function Ps(c,u,b){["b"].includes(c)?(u.left=Math.round(b.x-u.width/2),u.top=b.y):["t"].includes(c)?(u.left=Math.round(b.x-u.width/2),u.top=b.y-u.height):["l"].includes(c)?(u.left=b.x-u.width,u.top=Math.round(b.y-u.height/2)):["r"].includes(c)?(u.left=b.x,u.top=Math.round(b.y-u.height/2)):["lt"].includes(c)?(u.left=b.x-u.width,u.top=b.y-u.height):["lb"].includes(c)?(u.left=b.x-u.width,u.top=b.y):["rt"].includes(c)?(u.left=b.x,u.top=b.y-u.height):["rb"].includes(c)&&(u.left=b.x,u.top=b.y)}const As={t:"1688563367121",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4587","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function Es(c,u){return x(),ee("svg",As,[...u[0]||(u[0]=[G("path",{d:"M470.624 553.376a32 32 0 0 1 2.656 42.24l-2.656 3.008L269.28 800l145.984 0.032a32 32 0 0 1 31.776 28.256l0.224 3.744a32 32 0 0 1-28.288 31.776l-3.712 0.224H192l-2.4-0.096-4.032-0.544-3.552-0.96-3.552-1.408-3.136-1.664-3.072-2.144-2.88-2.56a32.32 32.32 0 0 1-3.104-3.584l-2.272-3.52-1.728-3.648-1.12-3.36-0.96-4.8L160 832V607.872a32 32 0 0 1 63.776-3.712l0.224 3.712-0.032 146.848 201.408-201.344a32 32 0 0 1 45.248 0zM608.736 160H832l2.4 0.096 4.032 0.544 3.552 0.96 3.552 1.408 3.136 1.664 3.072 2.144 2.88 2.56c1.152 1.12 2.176 2.336 3.104 3.584l2.272 3.52 1.728 3.648 1.12 3.36 0.96 4.8L864 192v224.128a32 32 0 0 1-63.776 3.712l-0.224-3.712v-146.88L598.624 470.624a32 32 0 0 1-47.904-42.24l2.656-3.008L754.688 224h-145.92a32 32 0 0 1-31.808-28.256l-0.224-3.744a32 32 0 0 1 28.288-31.776l3.712-0.224z","p-id":"4588"},null,-1)])])}const Hs={render:Es},Ls={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function Os(c,u){return x(),ee("svg",Ls,[...u[0]||(u[0]=[G("path",{d:"M3.33333 1.99935V13.9993H12.6667V1.99935H3.33333ZM2.66667 0.666016H13.3333C13.7015 0.666016 14 0.978706 14 1.36443V14.6343C14 15.02 13.7015 15.3327 13.3333 15.3327H2.66667C2.29848 15.3327 2 15.02 2 14.6343V1.36443C2 0.978706 2.29848 0.666016 2.66667 0.666016ZM5 4.66602H7.66667C7.85076 4.66602 8 4.81525 8 4.99935V5.66602C8 5.85011 7.85076 5.99935 7.66667 5.99935H5C4.81591 5.99935 4.66667 5.85011 4.66667 5.66602V4.99935C4.66667 4.81525 4.81591 4.66602 5 4.66602ZM5 7.33268H11C11.1841 7.33268 11.3333 7.48192 11.3333 7.66602V8.33268C11.3333 8.51678 11.1841 8.66602 11 8.66602H5C4.81591 8.66602 4.66667 8.51678 4.66667 8.33268V7.66602C4.66667 7.48192 4.81591 7.33268 5 7.33268ZM5 9.99935H11C11.1841 9.99935 11.3333 10.1486 11.3333 10.3327V10.9993C11.3333 11.1834 11.1841 11.3327 11 11.3327H5C4.81591 11.3327 4.66667 11.1834 4.66667 10.9993V10.3327C4.66667 10.1486 4.81591 9.99935 5 9.99935Z"},null,-1)])])}const Fs={render:Os},Bs={t:"1689603006162",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4590","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function zs(c,u){return x(),ee("svg",Bs,[...u[0]||(u[0]=[G("path",{d:"M611.754667 710.613333a38.144 38.144 0 0 1 0 53.930667l-123.818667 123.818667c-95.530667 95.530667-256.341333 95.530667-351.872 0-95.488-95.488-95.488-256.341333 0-351.829334l123.818667-123.818666a38.144 38.144 0 1 1 53.973333 53.930666L190.037333 590.506667c-70.528 73.685333-74.069333 177.28-3.626666 247.637333 70.4 70.4 170.453333 72.234667 247.594666-3.669333l123.818667-123.818667a38.144 38.144 0 0 1 53.930667 0z m-199.509334-397.226666a38.144 38.144 0 0 1 0-53.930667l123.818667-123.818667c95.488-95.530667 256.341333-95.530667 351.872 0 95.488 95.488 95.488 256.341333 0 351.829334l-123.818667 123.818666a38.144 38.144 0 1 1-53.930666-53.930666l123.776-123.818667c70.528-73.685333 74.069333-177.28 3.669333-247.637333-70.357333-70.4-170.453333-72.234667-247.594667 3.669333l-123.861333 123.818667a38.144 38.144 0 0 1-53.930667 0z m232.362667 512.426666a32.682667 32.682667 0 0 1 65.408 0v65.450667a32.682667 32.682667 0 1 1-65.408 0v-65.408z m208.042667 27.434667a33.621333 33.621333 0 0 1-47.445334-0.554667l-45.482666-46.421333a33.28 33.28 0 0 1 47.36-46.890667l45.909333 45.994667a33.621333 33.621333 0 0 1-0.341333 47.872z m-55.466667-176.384c0-20.053333 16.298667-36.309333 36.352-36.309333H891.733333a36.352 36.352 0 0 1 0 72.661333h-58.154666a36.352 36.352 0 0 1-36.309334-36.352zM317.013333 130.773333a32.682667 32.682667 0 1 1 65.408 0v65.408a32.682667 32.682667 0 0 1-65.408 0V130.773333z m-142.677333 37.973334A33.621333 33.621333 0 0 1 221.866667 169.386667l45.482666 46.421333a33.28 33.28 0 0 1-47.36 46.848L173.994667 216.704a33.621333 33.621333 0 0 1 0.341333-47.914667zM98.986667 345.173333c0-20.053333 16.256-36.352 36.352-36.352h58.112a36.352 36.352 0 0 1 0 72.704H135.338667a36.352 36.352 0 0 1-36.352-36.352z","p-id":"4591"},null,-1)])])}const tr={render:zs},qs={t:"1574649229600",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3752","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function Ns(c,u){return x(),ee("svg",qs,[G("defs",null,[(x(),le(Za("style"),{type:"text/css"}))]),u[0]||(u[0]=G("path",{d:"M942 191.9C939.8 128.9 748.1 78 512 78S84.2 128.9 82 191.9V831c0 63.5 192.5 115 430 115s430-51.5 430-115V191.9z m-56.7 393.8c-4.6 3.3-11.6 7.4-21.9 12.2-21.3 9.8-50.5 19.1-84.4 26.8-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 0.1-0.1 0.2-0.1 0.3-0.2h-7v-123c72.2 36.4 215.3 61.1 380 61.1s307.8-24.8 380-61.1v122.9h-7l0.3 0.3z m0-177c-4.6 3.3-11.6 7.4-21.9 12.2-21.3 9.8-50.5 19.1-84.4 26.8-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 0.1-0.1 0.2-0.1 0.3-0.2h-7V246.9c72.2 36.4 215.3 61.1 380 61.1s307.8-24.8 380-61.1v161.6h-7c0.1 0 0.2 0.1 0.3 0.2zM160.7 180.8C182 171 211.2 161.7 245 154c74-16.8 168.8-26 267-26s193 9.2 267 26c33.9 7.7 63.1 16.9 84.4 26.8 10.3 4.8 17.3 8.9 21.9 12.2-4.6 3.3-11.6 7.4-21.9 12.2C842 215 812.8 224.3 779 232c-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 4.7-3.3 11.7-7.4 22-12.2zM885.3 831c-4.6 3.3-11.6 7.4-21.9 12.2C842 853 812.8 862.3 779 870c-74 16.8-168.8 26-267 26s-193-9.2-267-26c-33.9-7.7-63.1-16.9-84.4-26.8-10.3-4.8-17.3-8.9-21.9-12.2 0.1-0.1 0.2-0.1 0.3-0.2h-7V639.5c72.2 36.4 215.3 61.1 380 61.1s307.8-24.8 380-61.1v191.3h-7c0.1 0.1 0.2 0.1 0.3 0.2z","p-id":"3753"},null,-1))])}const $s={render:Ns},js=vt({__name:"FieldsList",props:{fields:{type:Array,default:()=>[]},element:{type:Object,default:null}},setup(c){const u=c,{fields:b,element:p}=on(u),E=C=>{yt().emitter.emit("fieldSelect-"+p.value.id,C)},S=C=>{C.preventDefault()};return(C,m)=>{const v=xn;return x(),ee("div",{onMousedown:S,class:"field-main"},[(x(!0),ee(Bt,null,kn(l(b),y=>(x(),le(v,{key:y.id,title:y.name,size:"mini",class:"field-area",onClick:I=>E(y)},{default:A(()=>[Qe(_e(y.name),1)]),_:2},1032,["title","onClick"]))),128))],32)}}});const Rs=Vt(js,[["__scopeId","data-v-5d4da404"]]),Ws=["title"],Gs={class:"item-span"},Zs={class:"dialog-footer"},Us=vt({__name:"CustomTabsSort",setup(c,{expose:u}){const b=ra(),p=J(null),E=J([]),S=J(!1),C=_=>{m(_),S.value=!0},m=_=>{p.value=_,E.value=va(p.value.propValue)},v=()=>{S.value=!1},y=()=>{p.value.propValue=va(E.value),b.recordSnapshotCache("tab-sort-save"),Te.emit("onTabSortChange-"+p.value.id),v()},{t:I}=In();return u({sortInit:C}),(_,M)=>{const Q=pn,N=Sn,D=Fa;return x(),le(D,{ref:"enlargeDialog","destroy-on-close":"","append-to-body":!0,title:l(I)("visualization.custom_sort"),modelValue:S.value,"onUpdate:modelValue":M[0]||(M[0]=W=>S.value=W),width:"30vw",top:"10vh"},{footer:A(()=>[G("div",Zs,[T(l(xn),{onClick:v},{default:A(()=>[...M[1]||(M[1]=[Qe("取消",-1)])]),_:1}),T(l(xn),{type:"primary",onClick:y},{default:A(()=>[...M[2]||(M[2]=[Qe("确认",-1)])]),_:1})])]),default:A(()=>[G("div",null,[T(l(Qr),{list:E.value,animation:"300",class:"drag-list"},{item:A(({element:W})=>[(x(),ee("span",{key:W.name,class:"item-dimension",title:W.title},[T(N,{size:"20px"},{default:A(()=>[T(Q,{name:"drag"},{default:A(()=>[T(l(Lr),{class:"svg-icon"})]),_:1})]),_:1}),G("span",Gs,_e(W.title),1)],8,Ws))]),_:1},8,["list"])])]),_:1},8,["title","modelValue"])}}});const Xs=Vt(Us,[["__scopeId","data-v-b38ecb32"]]),Ys=["title"],Js=["title"],Qs={key:5,class:"bar-checkbox-area"},Ks=["title"],eu={key:7,class:"bar-checkbox-area"},tu={class:"flex-align-center",style:{position:"relative",width:"100%",padding:"5px 32px 5px 16px","line-height":"24px"}},nu=vt({__name:"ComponentEditBar",props:{element:{type:Object,required:!0},active:{type:Boolean,required:!1,default:!1},index:{required:!0,type:[Number,String],default:0},showPosition:{required:!1,type:String,default:"canvas"},canvasId:{type:String,default:"canvas-main"}},emits:["userViewEnlargeOpen","datasetParamsInit","closePreview","showViewDetails","amRemoveItem","linkJumpSetOpen","linkageSetOpen","componentImageDownload"],setup(c,{expose:u,emit:b}){const p=Rt(),E=ra(),S=zi(),C=J(null),m=z(()=>Fi(Ve.value.weight,Ve.value.ext)),v=b,{t:y}=In(),{emitter:I}=yt(),_={canvas:["datasetParams","enlarge","hidden","details","setting","copy","delete","download","unLinkage","linkageSetting","linkJumpSetting"],preview:["enlarge","details","download","unLinkage","previewDownload","datasetParams"],multiplexing:["multiplexing"],batchOpt:["batchOpt"],linkage:["linkage"]},M={UserView:["datasetParams","enlarge","hidden","details","setting","copy","download","previewDownload","delete","multiplexing","batchOpt","linkage","unLinkage","linkageSetting","linkJumpSetting"],default:["setting","delete","copy","multiplexing","batchOpt","hidden"]},Q=H=>_[ge.value]&&_[ge.value].includes(H)&&(M[W.value.component]?M[W.value.component]:M.default).includes(H),N=z(()=>!["batchOpt","multiplexing"].includes(ge.value)),D=c,{element:W,index:F,showPosition:ge,canvasId:Be}=on(D),{batchOptStatus:me,pcMatrixCount:be,curComponent:fe,componentData:a,canvasViewInfo:Le,mobileInPc:ce,dvInfo:Ve,isPopWindow:Ge,hiddenListStatus:De}=$t(p),$=Bn({systemOS:"Mac",maxImageSize:15e6,boardSetVisible:!1,linkJumpSetVisible:!1,linkJumpSetViewId:null,curFields:[],multiplexingCheckModel:!1,curMultiplexingComponents:{},barWidth:24,componentType:null,linkageActiveStatus:!1,editFilter:["view","custom","custom-button"],timer:null,viewXArray:[],batchOptCheckModel:!1}),Ee=z(()=>De.value&&lt(Be.value)),ye=()=>{C.value.sortInit(W.value)},Oe=()=>{p.setCurComponent({component:W.value,index:F.value})},ze=()=>{I.emit(`addQueryCriteria${W.value.id}`)},Ke=()=>{I.emit(`editQueryCriteria${W.value.id}`)},et=z(()=>{if(ge.value==="canvas"){const H=W.value.x-1,K=be.value.x-(W.value.x+W.value.sizeX-1);return H===0&&K===0||K<0?Ee.value?"bar-main-left-inner":"bar-main-right-inner":K===0?"bar-main-left-outer":"bar-main-right"}else return ge.value==="preview"?"bar-main-right-inner":ge.value==="canvasDataV"?"bar-main-right":"bar-main-preview-right-inner"}),ht=z(()=>et.value.indexOf("right")>=0?"right":"left"),nt=H=>{const K="el-icon-loading",tt="de-message-loading de-message-export";La({message:Aa("p",null,["后台导出中,可前往",Aa(xn,{text:!0,size:"small",class:"btn-text",onClick:()=>{H()}},y("data_export.export_center")),"查看进度，进行下载"]),iconClass:K,icon:Aa(Hi),showClose:!0,customClass:tt})},bt=()=>{yt().emitter.emit("data-export-center",{activeName:"IN_PROGRESS"})},Z=()=>{const H=p.getViewInstanceInfo(W.value.id);if(!H)return;const K=p.getViewDetails(W.value.id);ji(H,K)},xe=()=>{const H=p.getViewDataDetails(W.value.id),K=p.getLastViewRequestInfo(W.value.id),Ne={...p.getViewDetails(W.value.id),chartExtRequest:K,data:H,busiFlag:Ve.value.type};$i(Ne,Ve.value.name,()=>{nt(bt)})},Ie=()=>{v("componentImageDownload")},se=()=>{Te.emit("removeMatrixItem-"+Be.value,F.value),p.setCurComponent({component:null,index:null}),E.recordSnapshotCache("deleteComponent")},ke=()=>{v("datasetParamsInit")},Me=()=>{S.copy(),S.paste(!1)},re=(H,K)=>{H.preventDefault(),H.stopPropagation(),v("userViewEnlargeOpen",K)},he=()=>{fe.value&&(fe.value.dashboardHidden=!0,Te.emit("removeMatrixItemPosition-"+Be.value,fe.value),p.setHiddenListStatus(!0),E.recordSnapshotCache("hide"),p.setLastHiddenComponent(fe.value.id))},st=()=>{$.multiplexingCheckModel=!$.multiplexingCheckModel,Re($.multiplexingCheckModel)},Re=H=>{H?p.addCurMultiplexingComponent({component:W.value,componentId:W.value.id}):p.removeCurMultiplexingComponentWithId(W.value.id)},at=()=>{ge.value==="batchOpt"&&($.batchOptCheckModel=!$.batchOptCheckModel,xt($.batchOptCheckModel))},xt=H=>{H?p.addCurBatchComponent(W.value):p.removeCurBatchComponentWithId(W.value.id)},At=H=>{let K=!1;return H.linkageFilters&&H.linkageFilters.length>0&&H.linkageFilters.forEach(tt=>{W.value.id===tt.sourceViewId&&(K=!0)}),K},Tt=z(()=>{let H=0;return a.value.forEach(K=>{K.component==="UserView"&&K.innerType!="VQuery"?At(K)&&H++:K.component==="Group"?K.propValue.forEach(tt=>{At(tt)&&H++}):K.component==="DeTabs"&&K.propValue.forEach(tt=>{var Ne;(Ne=tt.componentData)==null||Ne.forEach(Je=>{At(Je)&&H++})})}),H}),mt=()=>{p.clearViewLinkage(W.value.id),yt().emitter.emit("clearPanelLinkage",{viewId:W.value.id})},We=H=>{H.stopPropagation(),H.preventDefault()},zt=z(()=>{var H;return["canvasDataV","canvas"].includes(ge.value)&&((H=fe.value)==null?void 0:H.innerType)==="rich-text"&&fe.value.editing&&$.curFields.length>0}),Wt=()=>{if(W.value.component==="UserView"){const H=Le.value[W.value.id];H&&($.curFields=[],H.type==="rich-text"&&H.curFields&&($.curFields=H.curFields))}},pe=z(()=>{var H;return((H=Le.value[W.value.id])==null?void 0:H.dataFrom)!=="template"&&!Ge.value}),ue=z(()=>{var H,K;return((K=(H=Le.value[W.value.id])==null?void 0:H.calParams)==null?void 0:K.length)>0}),U=J(),X=()=>{U.value.handleClose()};return gn(()=>{W.value.component==="UserView"&&Te.on("initCurFields-"+W.value.id,Wt),Wt()}),ia(()=>{W.value.component==="UserView"&&Te.off("initCurFields-"+W.value.id,Wt)}),u({multiplexingCheckOut:st,batchOptCheckOut:at}),mn(()=>me.value,()=>{$.batchOptCheckModel=!1}),(H,K)=>{const tt=Xa("Sort"),Ne=Sn,Je=pn,jt=Ni,ne=pn,Pe=Vo,ot=Xa("ArrowRight"),$e=Do,Xt=Po,En=Zr;return!l(ce)&&!l(Ea)()?(x(),ee("div",{key:0,class:Ht(["bar-main",[et.value,{"bar-main-background":N.value}]]),onMousedown:We},[l(W).component==="DeTabs"&&l(ge)==="canvas"?(x(),le(l(fa),{key:0,effect:"dark",placement:"top",content:l(y)("visualization.sort")},{default:A(()=>[T(Ne,{class:"bar-base-icon",onClick:ye},{default:A(()=>[T(tt)]),_:1})]),_:1},8,["content"])):ae("",!0),l(W).component==="VQuery"&&l(ge)==="canvas"?(x(),ee(Bt,{key:1},[G("span",{title:l(y)("visualization.add_query_filter")},[T(Ne,{class:"bar-base-icon",onClick:ze},{default:A(()=>[T(Je,{name:"icon_add_outlined"},{default:A(()=>[T(l(Xr),{class:"svg-icon"})]),_:1})]),_:1})],8,Ys),G("span",{title:l(y)("visualization.edit_query_filter")},[T(Ne,{class:"bar-base-icon",onClick:Ke},{default:A(()=>[T(Je,{name:"icon_edit_outlined"},{default:A(()=>[T(l(Ur),{class:"svg-icon"})]),_:1})]),_:1})],8,Js)],64)):ae("",!0),l(W).innerType!=="rich-text"&&Q("enlarge")?(x(),le(l(fa),{key:2,effect:"dark",placement:"top",content:l(y)("visualization.enlarge")},{default:A(()=>[G("span",null,[T(Ne,{class:"bar-base-icon",onClick:K[0]||(K[0]=qt=>re(qt,"enlarge"))},{default:A(()=>[T(Je,{name:"dv-bar-enlarge"},{default:A(()=>[T(l(Hs),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["content"])):ae("",!0),!["picture-group","rich-text"].includes(l(W).innerType)&&Q("details")?(x(),le(l(fa),{key:3,effect:"dark",placement:ht.value,content:l(y)("visualization.show_data_info")},{default:A(()=>[G("span",null,[T(Ne,{class:"bar-base-icon",onClick:K[1]||(K[1]=qt=>re(qt,"details"))},{default:A(()=>[T(Je,{name:"dv-details"},{default:A(()=>[T(l(Fs),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["placement","content"])):ae("",!0),Q("datasetParams")&&ue.value?(x(),le(l(fa),{key:4,effect:"dark",placement:"top",content:l(y)("visualization.input_calc_data")},{default:A(()=>[G("span",null,[T(Ne,{class:"bar-base-icon",onClick:ke},{default:A(()=>[T(Je,{name:"icon_params_setting"},{default:A(()=>[T(l(Yr),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["content"])):ae("",!0),Q("multiplexing")?(x(),ee("div",Qs,[T(jt,{onClick:K[2]||(K[2]=Qn(()=>{},["stop"])),style:{height:"26px",padding:"5px"},modelValue:$.multiplexingCheckModel,"onUpdate:modelValue":K[3]||(K[3]=qt=>$.multiplexingCheckModel=qt),onChange:Re},null,8,["modelValue"])])):ae("",!0),Q("unLinkage")&&Tt.value?(x(),ee("span",{key:6,title:l(y)("visualization.cancel_linkage")},[T(Ne,{class:"bar-base-icon",onClick:mt},{default:A(()=>[T(Je,{name:"dv-bar-unLinkage"},{default:A(()=>[T(l(tr),{class:"svg-icon"})]),_:1})]),_:1})],8,Ks)):ae("",!0),Q("batchOpt")?(x(),ee("div",eu,[T(jt,{modelValue:$.batchOptCheckModel,"onUpdate:modelValue":K[4]||(K[4]=qt=>$.batchOptCheckModel=qt),onChange:xt},null,8,["modelValue"])])):ae("",!0),Q("setting")?(x(),le(Xt,{key:8,trigger:"click",placement:"right-start",ref_key:"curDropdown",ref:U},{dropdown:A(()=>[T($e,null,{default:A(()=>[Q("copy")?(x(),le(Pe,{key:0,onClick:Me},{default:A(()=>[Qe(_e(l(y)("visualization.copy")),1)]),_:1})):ae("",!0),l(W).innerType!=="rich-text"&&Q("enlarge")?(x(),ee(Bt,{key:1},[T(Pe,{divided:l(ge)==="canvas",onClick:K[5]||(K[5]=qt=>re(qt,"enlarge"))},{default:A(()=>[Qe(_e(l(y)("visualization.enlarge")),1)]),_:1},8,["divided"]),!["picture-group","rich-text"].includes(l(W).innerType)&&Q("details")?(x(),le(Pe,{key:0,onClick:K[6]||(K[6]=qt=>re(qt,"details"))},{default:A(()=>[Qe(_e(l(y)("visualization.show_data_info")),1)]),_:1})):ae("",!0),!["picture-group","rich-text"].includes(l(W).innerType)&&Q("download")&&pe.value&&(m.value[0]||m.value[1])?(x(),le(Pe,{key:1,style:{padding:"0"},onClick:K[7]||(K[7]=Qn(()=>{},["prevent"]))},{default:A(()=>[T(Xt,{style:{width:"100%"},trigger:"hover",placement:"right-start"},{dropdown:A(()=>[T($e,null,{default:A(()=>[m.value[1]?(x(),le(Pe,{key:0,onClick:xe},{default:A(()=>[...K[8]||(K[8]=[Qe("Excel",-1)])]),_:1})):ae("",!0),m.value[1]&&l(W).innerType==="table-pivot"?(x(),le(Pe,{key:1,onClick:Z},{default:A(()=>[G("span",null,_e(l(y)("visualization.excel_with_format")),1)]),_:1})):ae("",!0),m.value[0]?(x(),le(Pe,{key:2,onClick:Ie},{default:A(()=>[Qe(_e(l(y)("visualization.image")),1)]),_:1})):ae("",!0)]),_:1})]),default:A(()=>[G("div",tu,[Qe(_e(l(y)("visualization.export_as"))+" ",1),T(Ne,{size:"16px",style:{position:"absolute",right:"8px","margin-right":"0"}},{default:A(()=>[T(ot)]),_:1})])]),_:1})]),_:1})):ae("",!0)],64)):ae("",!0),Q("hidden")&&l(lt)(l(Be))?(x(),le(Pe,{key:2,onClick:he},{default:A(()=>[Qe(_e(l(y)("visualization.hidden")),1)]),_:1})):ae("",!0),T(l(Ha),{chart:l(W),"resource-table":"snapshot",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9FZGl0QmFySGFuZGxlcg==",onCloseItem:X},null,8,["chart"]),Q("delete")?(x(),le(Pe,{key:3,divided:"",onClick:se},{default:A(()=>[Qe(_e(l(y)("visualization.delete")),1)]),_:1})):ae("",!0)]),_:1})]),default:A(()=>[T(Ne,{class:"bar-base-icon"},{default:A(()=>[T(l(fa),{content:l(y)("visualization.more"),effect:"dark",placement:"bottom"},{default:A(()=>[T(ne,{name:"icon_more_outlined"},{default:A(()=>[T(l(Jr),{class:"svg-icon"})]),_:1})]),_:1},8,["content"])]),_:1})]),_:1},512)):ae("",!0),!["picture-group","rich-text"].includes(l(W).innerType)&&Q("previewDownload")&&pe.value&&(m.value[0]||m.value[1])?(x(),le(Xt,{key:9,trigger:"click",placement:"right-start"},{dropdown:A(()=>[T($e,{style:{width:"118px"}},{default:A(()=>[m.value[1]?(x(),le(Pe,{key:0,onClick:xe},{default:A(()=>[...K[9]||(K[9]=[Qe("Excel",-1)])]),_:1})):ae("",!0),m.value[1]&&l(W).innerType==="table-pivot"?(x(),le(Pe,{key:1,onClick:Z},{default:A(()=>[G("span",null,_e(l(y)("visualization.excel_with_format")),1)]),_:1})):ae("",!0),m.value[0]?(x(),le(Pe,{key:2,onClick:Ie},{default:A(()=>[Qe(_e(l(y)("visualization.image")),1)]),_:1})):ae("",!0)]),_:1})]),default:A(()=>[T(Ne,{onClick:Oe,class:"bar-base-icon"},{default:A(()=>[T(l(fa),{content:l(y)("chart.export"),effect:"dark",placement:"bottom"},{default:A(()=>[T(ne,{name:"dv-preview-download"},{default:A(()=>[T(l(Pa),{class:"svg-icon"})]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})):ae("",!0),zt.value?(x(),le(En,{key:10,width:"200",trigger:"click",onMousedown:We},{reference:A(()=>[T(Ne,{class:"bar-base-icon"},{default:A(()=>[T(Je,{name:"database"},{default:A(()=>[T(l($s),{class:"svg-icon"})]),_:1})]),_:1})]),default:A(()=>[T(Rs,{fields:$.curFields,element:l(W)},null,8,["fields","element"])]),_:1})):ae("",!0),T(Xs,{ref_key:"customTabsSortRef",ref:C},null,512)],34)):ae("",!0)}}});const nr=Vt(nu,[["__scopeId","data-v-d61f4648"]]),au=vt({__name:"ComposeShow",props:{element:{required:!0,type:Object},elementIndex:{required:!1},showBorder:{required:!1,type:Boolean,default:!0}},setup(c){const u=Mo(),{areaData:b}=$t(u),p=c,E=z(()=>b.value.components.includes(p.element)),S=C=>{if(C.buttons===2)return;const m=b.value.components.findIndex(v=>v===p.element);m!=-1&&p.element.component!=="GroupArea"&&(b.value.components.splice(m,1),C.stopPropagation())};return(C,m)=>E.value?(x(),ee("div",{key:0,class:Ht(["compose-shadow",{"shadow-border":p.showBorder}]),onMousedown:S},null,34)):ae("",!0)}});const ou=Vt(au,[["__scopeId","data-v-f67210ce"]]),iu={t:"1738739001616",class:"icon",viewBox:"0 0 1175 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8488","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"229.4921875",height:"200"};function ru(c,u){return x(),ee("svg",iu,[...u[0]||(u[0]=[G("path",{d:"M587.83008 276.574053a235.132032 235.132032 0 0 1 235.132033 235.132032 249.533869 249.533869 0 0 1-1.469576 25.864523l170.470724 170.764639A1046.631458 1046.631458 0 0 0 1175.660161 511.706085c-161.065442-220.43628-365.336395-352.698048-587.830081-352.698048a562.553387 562.553387 0 0 0-129.616532 15.577497l103.752009 103.458094a249.533869 249.533869 0 0 1 25.864523-1.469575zM76.123995 83.177956L255.706085 262.760046A987.554535 987.554535 0 0 0 0 511.706085c161.065442 220.730195 365.336395 352.698048 587.83008 352.698048a575.485649 575.485649 0 0 0 223.375431-46.144661l205.740528 205.740528L1099.536165 940.528129l-940.528128-940.528129zM352.698048 511.706085a231.311137 231.311137 0 0 1 32.918485-119.035591l88.174512 88.174512a113.745121 113.745121 0 0 0-4.408726 29.391504 117.566016 117.566016 0 0 0 117.566016 117.566016 111.98163 111.98163 0 0 0 29.391504-4.408726l45.850747 45.850746L705.396096 712.743972a235.132032 235.132032 0 0 1-352.698048-202.507462z","p-id":"8489"},null,-1)])])}const lu={render:ru},su=["id"],uu=["title"],cu=["id"],du=["onMousedown"],fu=vt({__name:"Shape",props:{element:{required:!0,type:Object,default(){return{component:null,propValue:null,request:null,linkage:null,type:null,events:null,style:null,id:null}}},defaultStyle:{required:!0,type:Object,default(){return{}}},baseCellInfo:{required:!0,type:Object,default(){return{baseWidth:0,baseHeight:0,curGap:0}}},index:{required:!0,type:[Number,String],default:0},isTabMoveCheck:{type:Boolean,default:!0},canvasId:{type:String,default:"canvas-main"},scale:{type:Number,required:!1,default:1},canvasActive:{type:Boolean,required:!1,default:!0}},emits:["userViewEnlargeOpen","datasetParamsInit","onStartResize","onStartMove","onDragging","onResizing","onMouseUp","linkJumpSetOpen","linkageSetOpen"],setup(c,{emit:u}){const{t:b}=In(),p=Rt(),E=ra(),S=si(),C=Mo(),m=J(null),v=J(null),y=J(null),I=J(null),_=J(!1),M=z(()=>"enlarge-inner-shape-"+Z.value.id),{curComponent:Q,dvInfo:N,editMode:D,batchOptStatus:W,curBatchOptComponents:F,linkageSettingStatus:ge,curLinkageView:Be,tabCollisionActiveId:me,tabMoveInActiveId:be,tabMoveOutComponentId:fe,mobileInPc:a,mainScrollTop:Le,hiddenListStatus:ce,fullscreenFlag:Ve}=$t(p),{editorMap:Ge,areaData:De,isCtrlOrCmdDown:$}=$t(C),Ee=u,ye=z(()=>D.value==="edit"),Oe=Bn({seriesIdMap:{id:""},ignoreTabMoveComponent:["de-button","de-reset-button","DeTabs","GroupArea"],parentWidthTabOffset:40,canvasChangeTips:"none",tabMoveInYOffset:70,tabMoveInXOffset:40,collisionGap:10}),ze=Y=>{Y.preventDefault(),Y.stopPropagation(),Z.value&&(Z.value.dashboardHidden=!0,Te.emit("removeMatrixItemPosition-"+Me.value,Z.value),E.recordSnapshotCache("hide"),p.setLastHiddenComponent(Z.value.id))},Ke=z(()=>ce.value&&lt(Me.value)),et=J(!0),ht=z(()=>Z.value.isLock&&ye.value),nt=z(()=>{let Y;return zn.value?Y="batchOpt":ye.value?Y=N.value.type==="dashboard"?"canvas":"canvasDataV":Y="preview",Y}),bt=c,{element:Z,defaultStyle:xe,baseCellInfo:Ie,index:se,isTabMoveCheck:ke,canvasId:Me,scale:re,canvasActive:he}=on(bt),st=el(Z.value,"pTabGroup"),Re=tl(Z.value),at=J("shape-id-"+Z.value.id),xt=["lt","t","rt","r","rb","b","lb","l"],At=["lt","rt","rb","lb"],Tt=["r","l"],mt={lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},We=J({}),zt=z(()=>lt(Me.value)&&Z.value.freeze&&!a.value&&Le.value-xe.value.top>0),Wt=z(()=>a.value&&Z.value.canvasId==="canvas-main"),pe=(Y,Se)=>{Se==="syncPcDesign"&&(Y.preventDefault(),Y.stopPropagation()),yt().emitter.emit("onMobileStatusChange",{type:Se,value:Z.value.id})},ue=[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],U=z(()=>{var Y;return((Y=Q.value)==null?void 0:Y.component)==="GroupArea"}),X=z(()=>{var Y;return((Y=Q.value)==null?void 0:Y.id)===Z.value.id}),H=z(()=>{const Y=["flow-map","map","bubble-map","table-info","table-normal","table-pivot","symbolic-map","heat-map","t-heatmap","circle-packing"];return Z.value.isPlugin||Y.includes(Z.value.innerType)}),K=z(()=>N.value.type==="dashboard"),tt=()=>Z.value.component==="line-shape"?Tt:xt,Ne=()=>X.value&&!Z.value.isLock&&ye.value&&!zt.value,Je=Y=>{Ee("userViewEnlargeOpen",Y)},jt=Y=>{Ee("datasetParamsInit",Y)},ne=Y=>{let{width:Se,height:Ae}=xe.value;const{sizeX:kt,sizeY:wt}=Z.value;K.value&&!Z.value.isPlayer?(Se=kt*Ie.value.baseWidth-2*Ie.value.curGap,Ae=wt*Ie.value.baseHeight-2*Ie.value.curGap):(Se=Se-2*Ie.value.curGap,Ae=Ae-2*Ie.value.curGap);const It=/t/.test(Y),Ye=/b/.test(Y),Dt=/l/.test(Y),Qt=/r/.test(Y);let Lt=0,Ot=0;return Y.length===2?(Lt=Dt?0:Se,Ot=It?0:Ae):((It||Ye)&&(Lt=Se/2,Ot=It?0:Ae),(Dt||Qt)&&(Lt=Dt?0:Se,Ot=Math.floor(Ae/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${Lt}px`,top:`${Ot}px`,cursor:We.value[Y]}},Pe=()=>{const Y=Ko(Q.value.style.rotate),Se={};let Ae=-1;return xt.forEach(kt=>{const wt=Ko(mt[kt]+Y),It=ue.length;for(;;){Ae=(Ae+1)%It;const Ye=ue[Ae];if(wt<23||wt>=338){Se[kt]="nw-resize";return}if(Ye.start<=wt&&wt<Ye.end){Se[kt]=Ye.cursor+"-resize";return}}}),Se},ot=Y=>{he.value&&(p.setCurComponent({component:Z.value,index:se.value}),qt(Y))},$e=Y=>{Y&&!Y.isLock&&Y.isShow&&Y.canvasId==="canvas-main"&&!["GroupArea"].includes(Y.component)&&De.value.components.push(Y)},Xt=()=>{Z.value.canvasId!=="canvas-main"&&p.setCurComponent({component:Z.value,index:se.value})},En=Y=>{if(he.value){if(ie(Y),$.value&&!De.value.components.includes(Z)){$e(Z.value),Q.value&&Q.value.id!==Z.value.id&&$e(Q.value),Y.stopPropagation();return}if(p.setCurComponent({component:Z.value,index:se.value}),H.value){p.setInEditorStatus(!0),p.setClickComponentStatus(!0),Y.stopPropagation();return}qt(Y)}},qt=Y=>{if(Z.value.editing){Y.stopPropagation();return}if(K.value&&Ee("onStartMove",Y),pt(()=>Te.emit("componentClick")),p.setInEditorStatus(!0),p.setClickComponentStatus(!0),Y.stopPropagation(),Z.value.isLock||!ye.value||zt.value)return;We.value=Pe();const Se={...xe.value},Ae=Y.clientY,kt=Y.clientX,wt=Y.offsetY,It=Y.offsetX,Ye=Number(Se.top),Dt=Number(Se.left);let Qt=!1,Lt=!0;const Ot=m.value.offsetWidth,Gt=v.value.offsetWidth,tn=v.value.offsetHeight;let rn=ei(Me.value)?document.getElementById("shape-id-"+Me.value.split("--")[0]):null;const Mn=document.getElementById(at.value),nn=ln=>{Qt=!0;const Tn=ln.clientX,Ln=ln.clientY,yn=Ln-Ae+Ye,vn=Tn-kt+Dt;if(Se.top=yn,Se.left=vn,!st&&Re&&!lt(Me.value)&&!ti(Me.value)&&!U.value&&(yn<-30||vn<-30||vn+Gt-Ot>30)){et.value=!1,p.setMousePointShadowMap({mouseX:!Zt()&&rn?rn.offsetLeft+Mn.offsetLeft+It:Tn,mouseY:!Zt()&&rn?rn.offsetTop+Mn.offsetTop+wt+100:Ln+Le.value,width:Gt,height:tn});const ea=Z.value.canvasId.split("--")[0];p.setTabMoveOutComponentId(ea)}else p.setTabMoveOutComponentId(null),et.value=!0;Hn(),K.value&&(Lt||!be.value&&!me.value)&&(Z.value.dragging=!0,Ee("onDragging",Y)),["DeTabs","Group"].includes(Z.value.component)&&xa(Z.value),(ti(Me.value)||ei(Me.value))&&wi(Z.value,{width:m.value.offsetWidth,height:m.value.offsetHeight}),Lt&&(Lt=!1),p.setShapeStyle(Se,De.value.components,"move"),U.value||pt(()=>{Te.emit("move",{isDownward:Ln-Ae>0,isRightward:Tn-kt>0})})},cn=()=>{K.value&&Ee("onMouseUp"),Z.value.dragging=!1,Qt&&E.recordSnapshotCacheWithPositionChange("shape-handleMouseDownOnShape-up"),Te.emit("unMove"),document.removeEventListener("mousemove",nn),document.removeEventListener("mouseup",cn),be.value&&(Te.emit("onTabMoveIn-"+be.value,Z.value),p.setTabMoveInActiveId(null),p.setTabCollisionActiveId(null)),fe.value&&(Te.emit("onTabMoveOut-"+fe.value,va(Z.value)),p.setTabMoveOutComponentId(null)),ga()};document.addEventListener("mousemove",nn),document.addEventListener("mouseup",cn)},_n=Y=>{he.value&&N.value.type==="dataV"&&(Y.stopPropagation(),Y.preventDefault(),S.hideContextMenu())},ie=Y=>{if(zn.value){I.value.batchOptCheckOut(),Y.stopPropagation(),Y.preventDefault();return}},qe=(Y,Se)=>{var cn;if(!he.value)return;K.value&&Ee("onStartResize",Se),p.setInEditorStatus(!0),p.setClickComponentStatus(!0),Se.stopPropagation(),Se.preventDefault();const Ae={...xe.value},kt=Ae.width/Ae.height,wt={x:Ae.left+Ae.width/2,y:Ae.top+Ae.height/2},It=(cn=Ge.value[Me.value])==null?void 0:cn.getBoundingClientRect();if(!It)return;const Ye=Se.target.getBoundingClientRect(),Dt={x:Math.round(Ye.left-It.left+Se.target.offsetWidth/2+St("x",Y)/2),y:Math.round(Ye.top-It.top+Se.target.offsetHeight/2+St("y",Y)/2)},Qt={x:wt.x-(Dt.x-wt.x)-St("x",Y)/4,y:wt.y-(Dt.y-wt.y)-St("y",Y)/4};let Lt=!1,Ot=!0;const Gt=en(),tn=Q.value.aspectRatio,rn={};De.value.components.length>0&&De.value.components.forEach(ln=>{rn[ln.id]={topRadio:(ln.style.top-Ae.top)/Ae.height,leftRadio:(ln.style.left-Ae.left)/Ae.width,widthRadio:ln.style.width/Ae.width,heightRadio:ln.style.height/Ae.height}});const Mn=ln=>{if(Ot){Ot=!1;return}Lt=!0;const Tn={x:ln.clientX-Math.round(It.left)+St("x",Y),y:ln.clientY-Math.round(It.top)+St("y",Y)};if(Ds(Y,Ae,Tn,kt,Gt,{center:wt,curPoint:Dt,symmetricPoint:Qt}),_t(Ae,Y),Q.value.maintainRadio){const Ln=Ae.height-xe.value.height,yn=Ae.width-xe.value.width,vn=Ln*tn;At.includes(Y)||Math.abs(yn)>Math.abs(vn)?Ae.height=xe.value.width/tn:Ae.width=xe.value.height*tn}Ps(Y,Ae,Qt),p.setShapeStyle(Ae,De.value.components,"resize",rn),K.value&&Ee("onResizing",ln),Z.value.resizing=!0,(["Group"].includes(Z.value.component)||["DeTabs"].includes(Z.value.component)&&!Z.value.resizeInnerKeep)&&xa(Z.value),(ti(Me.value)||ei(Me.value))&&wi(Z.value,{width:m.value.offsetWidth,height:m.value.offsetHeight})},nn=()=>{["DeTabs"].includes(Z.value.component)&&Z.value.resizeInnerKeep&&Dr(Z.value),K.value&&Ee("onMouseUp"),Z.value.resizing=!1,document.removeEventListener("mousemove",Mn),document.removeEventListener("mouseup",nn),Lt&&E.recordSnapshotCacheWithPositionChange("shape-handleMouseDownOnPoint-up"),ga()};document.addEventListener("mousemove",Mn),document.addEventListener("mouseup",nn)},_t=(Y,Se)=>{K.value||(Se.indexOf("r")>-1&&(Y.left=Y.left+1),Se.indexOf("b")>-1&&(Y.top=Y.top+1),Se.indexOf("l")>-1&&(Y.width=Y.width+1),Se.indexOf("t")>-1&&(Y.height=Y.height+1))},St=(Y,Se)=>{const Ae=Ie.value.curGap;return Y==="x"?Se.indexOf("r")>-1?Ae:-1*Ae:Se.indexOf("b")>-1?Ae:-1*Ae},en=()=>{if(Z.value.component!="Group")return!1;const Y=[0,90,180,360];for(const Se of Z.value.propValue)if(!Y.includes(Ko(parseInt(Se.style.rotate))))return!0;return!1},wn=z(()=>{const{backgroundImageEnable:Y,backgroundType:Se,innerImage:Ae}=Z.value.commonBackground;return Y&&Se==="innerImage"&&typeof Ae=="string"}),Yt=z(()=>wn.value?Z.value.commonBackground.innerImage.replace("board/","").replace(".svg",""):null),Jt=z(()=>{if(Z.value.commonBackground&&Z.value.component!=="GroupArea"){const{backdropFilterEnable:Y,backdropFilter:Se,backgroundColorSelect:Ae,backgroundColor:kt,backgroundImageEnable:wt,backgroundType:It,outerImage:Ye,innerPadding:Dt,borderRadius:Qt}=Z.value.commonBackground;let Ot={padding:(["Group"].includes(Z.value.component)?0:Dt)*re.value+"px",borderRadius:Qt+"px"},Gt="";return Ae&&kt&&(Gt=kt),wt&&It==="outerImage"&&typeof Ye=="string"?Ot.background=`url(${To(Ye)}) no-repeat ${Gt}`:Ot["background-color"]=Gt,Z.value.component!=="UserView"&&(Ot.overflow="hidden"),Y&&(Ot["backdrop-filter"]="blur("+Se+"px)"),Ot}return{}}),$n=z(()=>(X.value||zn.value)&&["canvas","canvasDataV","batchOpt"].includes(nt.value)||ge.value),jn=z(()=>ge.value&&Z.value.id===Be.value.id),Kn=()=>{Ee("linkJumpSetOpen")},Sa=()=>{Ee("linkageSetOpen")},Rn=()=>{v.value.setAttribute("tab-is-check",`${ke.value}`),v.value.setAttribute("component-type",`${Z.value.component}`),v.value.setAttribute("component-id",`${Z.value.id}`)},Hn=async()=>{const Y=document.querySelector("#"+at.value),Se=Y.offsetWidth,Ae=Y.offsetHeight,kt=Y.offsetLeft,wt=Y.offsetTop;if(Re&&ke.value&&!Oe.ignoreTabMoveComponent.includes(Z.value.component)){const It=Array.from(m.value.childNodes);for(const Ye of It)if(Ye.className!==void 0&&typeof Ye.className=="string"&&Ye.className.split(" ").includes("shape")&&Ye.getAttribute("component-id")!==at.value&&Ye.getAttribute("tab-is-check")!==null&&Ye.getAttribute("tab-is-check")!=="false"&&Ye.getAttribute("component-type")==="DeTabs"){const Dt=Ye.getAttribute("component-id"),Qt=Ye.offsetWidth,Lt=Ye.offsetHeight,Ot=Ye.offsetLeft,Gt=Ye.offsetTop,tn=Gt+Oe.tabMoveInYOffset,rn=Ot+Oe.collisionGap-Se,Mn=Qt+2*Se-Oe.collisionGap,nn=Lt+Ae-Oe.tabMoveInYOffset,cn=tn<=wt&&rn<=kt,ln=tn+nn>=wt+Ae&&rn<=kt,Tn=tn<=wt&&rn+Mn>=kt+Se,Ln=tn+nn>=wt+Ae&&rn+Mn>=kt+Se;cn&&ln&&Tn&&Ln?p.setTabCollisionActiveId(Dt):me.value===Dt&&p.setTabCollisionActiveId(null);const yn=Gt+Oe.tabMoveInYOffset,vn=Ot+Oe.collisionGap*10-Se,ea=Qt+2*Se-Oe.collisionGap*20,Vn=Lt+Ae-2*Oe.tabMoveInYOffset,ka=yn<=wt&&vn<=kt,sn=yn+Vn>=wt+Ae&&vn<=kt,Gn=yn<=wt&&vn+ea>=kt+Se,qn=yn+Vn>=wt+Ae&&vn+ea>=kt+Se;ka&&sn&&Gn&&qn?p.setTabMoveInActiveId(Dt):be.value===Dt&&p.setTabMoveInActiveId(null)}}},ma=z(()=>{var Y;if(Z.value.multiDimensional&&((Y=Z.value.multiDimensional)!=null&&Y.enable)){const Se=xe.value.width,Ae=xe.value.height,kt=Z.value.multiDimensional.x,wt=Z.value.multiDimensional.y,It=kt*Math.PI/180,Ye=wt*Math.PI/180,Dt=Math.abs(Se*Math.cos(Ye))+Math.abs(Ae*Math.sin(It)),Qt=Math.abs(Ae*Math.cos(It))+Math.abs(Se*Math.sin(Ye)),Lt=(Dt-Se)/2;return{padding:`${(Qt-Ae)/2}px ${Lt}px`,transform:`rotateX(${Z.value.multiDimensional.x}deg) rotateY(${Z.value.multiDimensional.y}deg) rotateZ(${Z.value.multiDimensional.z}deg)`}}else return{}}),zn=z(()=>W.value&&K.value),Ba=z(()=>X.value&&!!me.value),Wn=()=>{_.value=!0,yt().emitter.emit("l7-prepare-picture",Z.value.id),setTimeout(()=>{Qa(M.value,"canvas-main",re.value);const Y=document.getElementById(M.value);ui("img",Y,"图表",()=>{Zi(M.value),_.value=!1,yt().emitter.emit("l7-unprepare-picture",Z.value.id)})},200)},ga=()=>{Z.value.canvasId.includes("Group")&&C.updateGroupBorder(Z.value.canvasId)};return gn(()=>{var Se;m.value=document.querySelector("#editor-"+Me.value),Q.value&&(We.value=Pe()),Te.on("runAnimation",()=>{Z.value==Q.value}),Te.on("stopAnimation",()=>{}),Rn();const Y="componentImageDownload-"+Z.value.id;(Se=yt().emitter.all.get(Y))!=null&&Se.length||yt().emitter.on(Y,()=>{Wn()})}),(Y,Se)=>{var It;const Ae=Sn,kt=fa,wt=Ja;return Ft((x(),ee("div",{class:Ht(["shape",{"shape-group-area":U.value,"freeze-component":zt.value,"freeze-component-fullscreen":zt.value&&l(Ve)}]),ref_key:"shapeInnerRef",ref:v,id:at.value,"element-loading-text":"导出中...","element-loading-background":"rgba(255, 255, 255, 1)",onDblclick:Xt},[Wt.value?(x(),ee("div",{key:0,title:l(b)("visualization.sync_pc_design"),class:"refresh-from-pc",onClick:Se[0]||(Se[0]=Ye=>pe(Ye,"syncPcDesign"))},[T(Ae,null,{default:A(()=>[T(pn,{name:"icon_replace_outlined"},{default:A(()=>[T(l(Oi),{class:"svg-icon"})]),_:1})]),_:1})],8,uu)):ae("",!0),Wt.value?(x(),ee("div",{key:1,class:"del-from-mobile",onClick:Se[1]||(Se[1]=Ye=>pe(Ye,"delFromMobile"))},[T(Ae,null,{default:A(()=>[T(pn,{name:"mobile-checkbox"},{default:A(()=>[T(l(gs),{class:"svg-icon"})]),_:1})]),_:1})])):ae("",!0),Ke.value?(x(),ee("div",{key:2,class:"del-from-mobile",onMousedown:Qn(ze,["stop"])},[T(kt,{content:Y.$t("visualization.hidden"),placement:"bottom"},{default:A(()=>[T(Ae,{onClick:Se[3]||(Se[3]=Qn(()=>{},["stop"]))},{default:A(()=>[T(pn,{onClick:Se[2]||(Se[2]=Qn(()=>{},["stop"])),name:"dvHidden"},{default:A(()=>[T(l(lu),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])],32)):ae("",!0),Ft(G("div",{class:Ht(["shape-outer",{active:X.value,"shape-lock":ht.value,"shape-edit":ye.value&&!H.value,"linkage-setting":jn.value,"drag-on-tab-collision":Ba.value,"shape-selected":(It=l(F))==null?void 0:It.includes(l(Z).id)}])},[T(nr,{ref_key:"componentEditBarRef",ref:I,class:Ht(["edit-bar",{"edit-bar-active":$n.value}]),index:l(se),element:l(Z),"show-position":nt.value,"canvas-id":l(Me),onComponentImageDownload:Wn,onUserViewEnlargeOpen:Je,onDatasetParamsInit:jt,onLinkJumpSetOpen:Kn,onLinkageSetOpen:Sa},null,8,["class","index","element","show-position","canvas-id"]),G("div",{class:"shape-inner",ref_key:"componentInnerRef",ref:y,id:M.value,style:ct(Jt.value),onClick:_n,onMousedown:En},[ht.value?(x(),le(pn,{key:0,name:"dv-lock"},{default:A(()=>[T(l(_s),{class:"svg-icon iconfont icon-suo"})]),_:1})):ae("",!0),G("div",{class:"component-slot",style:ct(ma.value)},[ii(Y.$slots,"default",{},void 0,!0)],4),wn.value?(x(),le(Oa,{key:1,style:ct({color:l(Z).commonBackground.innerImageColor,pointerEvents:"none"}),name:Yt.value},null,8,["style","name"])):ae("",!0)],44,cu),(x(!0),ee(Bt,null,kn(Ne()?tt():[],Ye=>(x(),ee("div",{key:Ye,class:"shape-point",style:ct(ne(Ye)),onMousedown:Dt=>qe(Ye,Dt)},null,44,du))),128)),Ft(G("div",{class:"shape-shadow",onMousedown:ie},null,544),[[Kt,zn.value&&l(Z).component!=="DeTabs"]]),H.value?(x(),ee(Bt,{key:0},[Ft(G("div",{class:"de-drag-area de-drag-top",onMousedown:ot},null,544),[[Kt,!l(Z).editing]]),Ft(G("div",{class:"de-drag-area de-drag-right",onMousedown:ot},null,544),[[Kt,!l(Z).editing&&l(Z).component!=="DeTabs"]]),Ft(G("div",{class:"de-drag-area de-drag-bottom",onMousedown:ot},null,544),[[Kt,!l(Z).editing&&l(Z).component!=="DeTabs"]]),Ft(G("div",{class:"de-drag-area de-drag-left",onMousedown:ot},null,544),[[Kt,!l(Z).editing&&l(Z).component!=="DeTabs"]])],64)):ae("",!0)],2),[[Kt,et.value]]),T(ou,{element:l(Z)},null,8,["element"])],42,su)),[[wt,_.value]])}}});const pu=Vt(fu,[["__scopeId","data-v-020b1ecf"]]);var ar={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(c){(function(u,b){c.exports=u.document?b(u,!0):function(p){if(!p.document)throw new Error("jQuery requires a window with a document");return b(p)}})(typeof window<"u"?window:cl,function(u,b){var p=[],E=Object.getPrototypeOf,S=p.slice,C=p.flat?function(e){return p.flat.call(e)}:function(e){return p.concat.apply([],e)},m=p.push,v=p.indexOf,y={},I=y.toString,_=y.hasOwnProperty,M=_.toString,Q=M.call(Object),N={},D=function(t){return typeof t=="function"&&typeof t.nodeType!="number"&&typeof t.item!="function"},W=function(t){return t!=null&&t===t.window},F=u.document,ge={type:!0,src:!0,nonce:!0,noModule:!0};function Be(e,t,n){n=n||F;var o,i,r=n.createElement("script");if(r.text=e,t)for(o in ge)i=t[o]||t.getAttribute&&t.getAttribute(o),i&&r.setAttribute(o,i);n.head.appendChild(r).parentNode.removeChild(r)}function me(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?y[I.call(e)]||"object":typeof e}var be="3.7.1",fe=/HTML$/i,a=function(e,t){return new a.fn.init(e,t)};a.fn=a.prototype={jquery:be,constructor:a,length:0,toArray:function(){return S.call(this)},get:function(e){return e==null?S.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=a.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return a.each(this,e)},map:function(e){return this.pushStack(a.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(a.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(a.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:m,sort:p.sort,splice:p.splice},a.extend=a.fn.extend=function(){var e,t,n,o,i,r,s=arguments[0]||{},g=1,h=arguments.length,k=!1;for(typeof s=="boolean"&&(k=s,s=arguments[g]||{},g++),typeof s!="object"&&!D(s)&&(s={}),g===h&&(s=this,g--);g<h;g++)if((e=arguments[g])!=null)for(t in e)o=e[t],!(t==="__proto__"||s===o)&&(k&&o&&(a.isPlainObject(o)||(i=Array.isArray(o)))?(n=s[t],i&&!Array.isArray(n)?r=[]:!i&&!a.isPlainObject(n)?r={}:r=n,i=!1,s[t]=a.extend(k,r,o)):o!==void 0&&(s[t]=o));return s},a.extend({expando:"jQuery"+(be+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!e||I.call(e)!=="[object Object]"?!1:(t=E(e),t?(n=_.call(t,"constructor")&&t.constructor,typeof n=="function"&&M.call(n)===Q):!0)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){Be(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,o=0;if(Le(e))for(n=e.length;o<n&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},text:function(e){var t,n="",o=0,i=e.nodeType;if(!i)for(;t=e[o++];)n+=a.text(t);return i===1||i===11?e.textContent:i===9?e.documentElement.textContent:i===3||i===4?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return e!=null&&(Le(Object(e))?a.merge(n,typeof e=="string"?[e]:e):m.call(n,e)),n},inArray:function(e,t,n){return t==null?-1:v.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!fe.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,o=0,i=e.length;o<n;o++)e[i++]=t[o];return e.length=i,e},grep:function(e,t,n){for(var o,i=[],r=0,s=e.length,g=!n;r<s;r++)o=!t(e[r],r),o!==g&&i.push(e[r]);return i},map:function(e,t,n){var o,i,r=0,s=[];if(Le(e))for(o=e.length;r<o;r++)i=t(e[r],r,n),i!=null&&s.push(i);else for(r in e)i=t(e[r],r,n),i!=null&&s.push(i);return C(s)},guid:1,support:N}),typeof Symbol=="function"&&(a.fn[Symbol.iterator]=p[Symbol.iterator]),a.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){y["[object "+t+"]"]=t.toLowerCase()});function Le(e){var t=!!e&&"length"in e&&e.length,n=me(e);return D(e)||W(e)?!1:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function ce(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var Ve=p.pop,Ge=p.sort,De=p.splice,$="[\\x20\\t\\r\\n\\f]",Ee=new RegExp("^"+$+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$+"+$","g");a.contains=function(e,t){var n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(e.contains?e.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))};var ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Oe(e,t){return t?e==="\0"?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}a.escapeSelector=function(e){return(e+"").replace(ye,Oe)};var ze=F,Ke=m;(function(){var e,t,n,o,i,r=Ke,s,g,h,k,q,R=a.expando,O=0,oe=0,Ze=ro(),Ct=ro(),rt=ro(),fn=ro(),an=function(f,w){return f===w&&(i=!0),0},Zn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Un="(?:\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",gt="\\["+$+"*("+Un+")(?:"+$+"*([*^$|!~]?=)"+$+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Un+"))|)"+$+"*\\]",wa=":("+Un+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+gt+")*)|.*)\\)|)",Mt=new RegExp($+"+","g"),Ut=new RegExp("^"+$+"*,"+$+"*"),ja=new RegExp("^"+$+"*([>+~]|"+$+")"+$+"*"),Go=new RegExp($+"|>"),Xn=new RegExp(wa),Ra=new RegExp("^"+Un+"$"),Yn={ID:new RegExp("^#("+Un+")"),CLASS:new RegExp("^\\.("+Un+")"),TAG:new RegExp("^("+Un+"|[*])"),ATTR:new RegExp("^"+gt),PSEUDO:new RegExp("^"+wa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$+"*(even|odd|(([+-]|)(\\d*)n|)"+$+"*(?:([+-]|)"+$+"*(\\d+)|))"+$+"*\\)|)","i"),bool:new RegExp("^(?:"+Zn+")$","i"),needsContext:new RegExp("^"+$+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$+"*((?:-\\d)?\\d*)"+$+"*\\)|)(?=[^-]|$)","i")},sa=/^(?:input|select|textarea|button)$/i,ua=/^h\d$/i,On=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Zo=/[+~]/,aa=new RegExp("\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\([^\\r\\n\\f])","g"),oa=function(f,w){var L="0x"+f.slice(1)-65536;return w||(L<0?String.fromCharCode(L+65536):String.fromCharCode(L>>10|55296,L&1023|56320))},br=function(){ca()},_r=so(function(f){return f.disabled===!0&&ce(f,"fieldset")},{dir:"parentNode",next:"legend"});function wr(){try{return s.activeElement}catch{}}try{r.apply(p=S.call(ze.childNodes),ze.childNodes),p[ze.childNodes.length].nodeType}catch{r={apply:function(w,L){Ke.apply(w,S.call(L))},call:function(w){Ke.apply(w,S.call(arguments,1))}}}function Pt(f,w,L,B){var j,de,we,He,Ce,dt,je,Xe=w&&w.ownerDocument,ft=w?w.nodeType:9;if(L=L||[],typeof f!="string"||!f||ft!==1&&ft!==9&&ft!==11)return L;if(!B&&(ca(w),w=w||s,h)){if(ft!==11&&(Ce=On.exec(f)))if(j=Ce[1]){if(ft===9)if(we=w.getElementById(j)){if(we.id===j)return r.call(L,we),L}else return L;else if(Xe&&(we=Xe.getElementById(j))&&Pt.contains(w,we)&&we.id===j)return r.call(L,we),L}else{if(Ce[2])return r.apply(L,w.getElementsByTagName(f)),L;if((j=Ce[3])&&w.getElementsByClassName)return r.apply(L,w.getElementsByClassName(j)),L}if(!fn[f+" "]&&(!k||!k.test(f))){if(je=f,Xe=w,ft===1&&(Go.test(f)||ja.test(f))){for(Xe=Zo.test(f)&&Uo(w.parentNode)||w,(Xe!=w||!N.scope)&&((He=w.getAttribute("id"))?He=a.escapeSelector(He):w.setAttribute("id",He=R)),dt=Wa(f),de=dt.length;de--;)dt[de]=(He?"#"+He:":scope")+" "+lo(dt[de]);je=dt.join(",")}try{return r.apply(L,Xe.querySelectorAll(je)),L}catch{fn(f,!0)}finally{He===R&&w.removeAttribute("id")}}}return _i(f.replace(Ee,"$1"),w,L,B)}function ro(){var f=[];function w(L,B){return f.push(L+" ")>t.cacheLength&&delete w[f.shift()],w[L+" "]=B}return w}function Nn(f){return f[R]=!0,f}function Ta(f){var w=s.createElement("fieldset");try{return!!f(w)}catch{return!1}finally{w.parentNode&&w.parentNode.removeChild(w),w=null}}function Cr(f){return function(w){return ce(w,"input")&&w.type===f}}function xr(f){return function(w){return(ce(w,"input")||ce(w,"button"))&&w.type===f}}function yi(f){return function(w){return"form"in w?w.parentNode&&w.disabled===!1?"label"in w?"label"in w.parentNode?w.parentNode.disabled===f:w.disabled===f:w.isDisabled===f||w.isDisabled!==!f&&_r(w)===f:w.disabled===f:"label"in w?w.disabled===f:!1}}function Ca(f){return Nn(function(w){return w=+w,Nn(function(L,B){for(var j,de=f([],L.length,w),we=de.length;we--;)L[j=de[we]]&&(L[j]=!(B[j]=L[j]))})})}function Uo(f){return f&&typeof f.getElementsByTagName<"u"&&f}function ca(f){var w,L=f?f.ownerDocument||f:ze;return L==s||L.nodeType!==9||!L.documentElement||(s=L,g=s.documentElement,h=!a.isXMLDoc(s),q=g.matches||g.webkitMatchesSelector||g.msMatchesSelector,g.msMatchesSelector&&ze!=s&&(w=s.defaultView)&&w.top!==w&&w.addEventListener("unload",br),N.getById=Ta(function(B){return g.appendChild(B).id=a.expando,!s.getElementsByName||!s.getElementsByName(a.expando).length}),N.disconnectedMatch=Ta(function(B){return q.call(B,"*")}),N.scope=Ta(function(){return s.querySelectorAll(":scope")}),N.cssHas=Ta(function(){try{return s.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),N.getById?(t.filter.ID=function(B){var j=B.replace(aa,oa);return function(de){return de.getAttribute("id")===j}},t.find.ID=function(B,j){if(typeof j.getElementById<"u"&&h){var de=j.getElementById(B);return de?[de]:[]}}):(t.filter.ID=function(B){var j=B.replace(aa,oa);return function(de){var we=typeof de.getAttributeNode<"u"&&de.getAttributeNode("id");return we&&we.value===j}},t.find.ID=function(B,j){if(typeof j.getElementById<"u"&&h){var de,we,He,Ce=j.getElementById(B);if(Ce){if(de=Ce.getAttributeNode("id"),de&&de.value===B)return[Ce];for(He=j.getElementsByName(B),we=0;Ce=He[we++];)if(de=Ce.getAttributeNode("id"),de&&de.value===B)return[Ce]}return[]}}),t.find.TAG=function(B,j){return typeof j.getElementsByTagName<"u"?j.getElementsByTagName(B):j.querySelectorAll(B)},t.find.CLASS=function(B,j){if(typeof j.getElementsByClassName<"u"&&h)return j.getElementsByClassName(B)},k=[],Ta(function(B){var j;g.appendChild(B).innerHTML="<a id='"+R+"' href='' disabled='disabled'></a><select id='"+R+"-\r\\' disabled='disabled'><option selected=''></option></select>",B.querySelectorAll("[selected]").length||k.push("\\["+$+"*(?:value|"+Zn+")"),B.querySelectorAll("[id~="+R+"-]").length||k.push("~="),B.querySelectorAll("a#"+R+"+*").length||k.push(".#.+[+~]"),B.querySelectorAll(":checked").length||k.push(":checked"),j=s.createElement("input"),j.setAttribute("type","hidden"),B.appendChild(j).setAttribute("name","D"),g.appendChild(B).disabled=!0,B.querySelectorAll(":disabled").length!==2&&k.push(":enabled",":disabled"),j=s.createElement("input"),j.setAttribute("name",""),B.appendChild(j),B.querySelectorAll("[name='']").length||k.push("\\["+$+"*name"+$+"*="+$+`*(?:''|"")`)}),N.cssHas||k.push(":has"),k=k.length&&new RegExp(k.join("|")),an=function(B,j){if(B===j)return i=!0,0;var de=!B.compareDocumentPosition-!j.compareDocumentPosition;return de||(de=(B.ownerDocument||B)==(j.ownerDocument||j)?B.compareDocumentPosition(j):1,de&1||!N.sortDetached&&j.compareDocumentPosition(B)===de?B===s||B.ownerDocument==ze&&Pt.contains(ze,B)?-1:j===s||j.ownerDocument==ze&&Pt.contains(ze,j)?1:o?v.call(o,B)-v.call(o,j):0:de&4?-1:1)}),s}Pt.matches=function(f,w){return Pt(f,null,null,w)},Pt.matchesSelector=function(f,w){if(ca(f),h&&!fn[w+" "]&&(!k||!k.test(w)))try{var L=q.call(f,w);if(L||N.disconnectedMatch||f.document&&f.document.nodeType!==11)return L}catch{fn(w,!0)}return Pt(w,s,null,[f]).length>0},Pt.contains=function(f,w){return(f.ownerDocument||f)!=s&&ca(f),a.contains(f,w)},Pt.attr=function(f,w){(f.ownerDocument||f)!=s&&ca(f);var L=t.attrHandle[w.toLowerCase()],B=L&&_.call(t.attrHandle,w.toLowerCase())?L(f,w,!h):void 0;return B!==void 0?B:f.getAttribute(w)},Pt.error=function(f){throw new Error("Syntax error, unrecognized expression: "+f)},a.uniqueSort=function(f){var w,L=[],B=0,j=0;if(i=!N.sortStable,o=!N.sortStable&&S.call(f,0),Ge.call(f,an),i){for(;w=f[j++];)w===f[j]&&(B=L.push(j));for(;B--;)De.call(f,L[B],1)}return o=null,f},a.fn.uniqueSort=function(){return this.pushStack(a.uniqueSort(S.apply(this)))},t=a.expr={cacheLength:50,createPseudo:Nn,match:Yn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(f){return f[1]=f[1].replace(aa,oa),f[3]=(f[3]||f[4]||f[5]||"").replace(aa,oa),f[2]==="~="&&(f[3]=" "+f[3]+" "),f.slice(0,4)},CHILD:function(f){return f[1]=f[1].toLowerCase(),f[1].slice(0,3)==="nth"?(f[3]||Pt.error(f[0]),f[4]=+(f[4]?f[5]+(f[6]||1):2*(f[3]==="even"||f[3]==="odd")),f[5]=+(f[7]+f[8]||f[3]==="odd")):f[3]&&Pt.error(f[0]),f},PSEUDO:function(f){var w,L=!f[6]&&f[2];return Yn.CHILD.test(f[0])?null:(f[3]?f[2]=f[4]||f[5]||"":L&&Xn.test(L)&&(w=Wa(L,!0))&&(w=L.indexOf(")",L.length-w)-L.length)&&(f[0]=f[0].slice(0,w),f[2]=L.slice(0,w)),f.slice(0,3))}},filter:{TAG:function(f){var w=f.replace(aa,oa).toLowerCase();return f==="*"?function(){return!0}:function(L){return ce(L,w)}},CLASS:function(f){var w=Ze[f+" "];return w||(w=new RegExp("(^|"+$+")"+f+"("+$+"|$)"))&&Ze(f,function(L){return w.test(typeof L.className=="string"&&L.className||typeof L.getAttribute<"u"&&L.getAttribute("class")||"")})},ATTR:function(f,w,L){return function(B){var j=Pt.attr(B,f);return j==null?w==="!=":w?(j+="",w==="="?j===L:w==="!="?j!==L:w==="^="?L&&j.indexOf(L)===0:w==="*="?L&&j.indexOf(L)>-1:w==="$="?L&&j.slice(-L.length)===L:w==="~="?(" "+j.replace(Mt," ")+" ").indexOf(L)>-1:w==="|="?j===L||j.slice(0,L.length+1)===L+"-":!1):!0}},CHILD:function(f,w,L,B,j){var de=f.slice(0,3)!=="nth",we=f.slice(-4)!=="last",He=w==="of-type";return B===1&&j===0?function(Ce){return!!Ce.parentNode}:function(Ce,dt,je){var Xe,ft,Fe,Nt,Cn,hn=de!==we?"nextSibling":"previousSibling",Fn=Ce.parentNode,Jn=He&&Ce.nodeName.toLowerCase(),Va=!je&&!He,bn=!1;if(Fn){if(de){for(;hn;){for(Fe=Ce;Fe=Fe[hn];)if(He?ce(Fe,Jn):Fe.nodeType===1)return!1;Cn=hn=f==="only"&&!Cn&&"nextSibling"}return!0}if(Cn=[we?Fn.firstChild:Fn.lastChild],we&&Va){for(ft=Fn[R]||(Fn[R]={}),Xe=ft[f]||[],Nt=Xe[0]===O&&Xe[1],bn=Nt&&Xe[2],Fe=Nt&&Fn.childNodes[Nt];Fe=++Nt&&Fe&&Fe[hn]||(bn=Nt=0)||Cn.pop();)if(Fe.nodeType===1&&++bn&&Fe===Ce){ft[f]=[O,Nt,bn];break}}else if(Va&&(ft=Ce[R]||(Ce[R]={}),Xe=ft[f]||[],Nt=Xe[0]===O&&Xe[1],bn=Nt),bn===!1)for(;(Fe=++Nt&&Fe&&Fe[hn]||(bn=Nt=0)||Cn.pop())&&!((He?ce(Fe,Jn):Fe.nodeType===1)&&++bn&&(Va&&(ft=Fe[R]||(Fe[R]={}),ft[f]=[O,bn]),Fe===Ce)););return bn-=j,bn===B||bn%B===0&&bn/B>=0}}},PSEUDO:function(f,w){var L,B=t.pseudos[f]||t.setFilters[f.toLowerCase()]||Pt.error("unsupported pseudo: "+f);return B[R]?B(w):B.length>1?(L=[f,f,"",w],t.setFilters.hasOwnProperty(f.toLowerCase())?Nn(function(j,de){for(var we,He=B(j,w),Ce=He.length;Ce--;)we=v.call(j,He[Ce]),j[we]=!(de[we]=He[Ce])}):function(j){return B(j,0,L)}):B}},pseudos:{not:Nn(function(f){var w=[],L=[],B=Qo(f.replace(Ee,"$1"));return B[R]?Nn(function(j,de,we,He){for(var Ce,dt=B(j,null,He,[]),je=j.length;je--;)(Ce=dt[je])&&(j[je]=!(de[je]=Ce))}):function(j,de,we){return w[0]=j,B(w,null,we,L),w[0]=null,!L.pop()}}),has:Nn(function(f){return function(w){return Pt(f,w).length>0}}),contains:Nn(function(f){return f=f.replace(aa,oa),function(w){return(w.textContent||a.text(w)).indexOf(f)>-1}}),lang:Nn(function(f){return Ra.test(f||"")||Pt.error("unsupported lang: "+f),f=f.replace(aa,oa).toLowerCase(),function(w){var L;do if(L=h?w.lang:w.getAttribute("xml:lang")||w.getAttribute("lang"))return L=L.toLowerCase(),L===f||L.indexOf(f+"-")===0;while((w=w.parentNode)&&w.nodeType===1);return!1}}),target:function(f){var w=u.location&&u.location.hash;return w&&w.slice(1)===f.id},root:function(f){return f===g},focus:function(f){return f===wr()&&s.hasFocus()&&!!(f.type||f.href||~f.tabIndex)},enabled:yi(!1),disabled:yi(!0),checked:function(f){return ce(f,"input")&&!!f.checked||ce(f,"option")&&!!f.selected},selected:function(f){return f.parentNode&&f.parentNode.selectedIndex,f.selected===!0},empty:function(f){for(f=f.firstChild;f;f=f.nextSibling)if(f.nodeType<6)return!1;return!0},parent:function(f){return!t.pseudos.empty(f)},header:function(f){return ua.test(f.nodeName)},input:function(f){return sa.test(f.nodeName)},button:function(f){return ce(f,"input")&&f.type==="button"||ce(f,"button")},text:function(f){var w;return ce(f,"input")&&f.type==="text"&&((w=f.getAttribute("type"))==null||w.toLowerCase()==="text")},first:Ca(function(){return[0]}),last:Ca(function(f,w){return[w-1]}),eq:Ca(function(f,w,L){return[L<0?L+w:L]}),even:Ca(function(f,w){for(var L=0;L<w;L+=2)f.push(L);return f}),odd:Ca(function(f,w){for(var L=1;L<w;L+=2)f.push(L);return f}),lt:Ca(function(f,w,L){var B;for(L<0?B=L+w:L>w?B=w:B=L;--B>=0;)f.push(B);return f}),gt:Ca(function(f,w,L){for(var B=L<0?L+w:L;++B<w;)f.push(B);return f})}},t.pseudos.nth=t.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=Cr(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=xr(e);function bi(){}bi.prototype=t.filters=t.pseudos,t.setFilters=new bi;function Wa(f,w){var L,B,j,de,we,He,Ce,dt=Ct[f+" "];if(dt)return w?0:dt.slice(0);for(we=f,He=[],Ce=t.preFilter;we;){(!L||(B=Ut.exec(we)))&&(B&&(we=we.slice(B[0].length)||we),He.push(j=[])),L=!1,(B=ja.exec(we))&&(L=B.shift(),j.push({value:L,type:B[0].replace(Ee," ")}),we=we.slice(L.length));for(de in t.filter)(B=Yn[de].exec(we))&&(!Ce[de]||(B=Ce[de](B)))&&(L=B.shift(),j.push({value:L,type:de,matches:B}),we=we.slice(L.length));if(!L)break}return w?we.length:we?Pt.error(f):Ct(f,He).slice(0)}function lo(f){for(var w=0,L=f.length,B="";w<L;w++)B+=f[w].value;return B}function so(f,w,L){var B=w.dir,j=w.next,de=j||B,we=L&&de==="parentNode",He=oe++;return w.first?function(Ce,dt,je){for(;Ce=Ce[B];)if(Ce.nodeType===1||we)return f(Ce,dt,je);return!1}:function(Ce,dt,je){var Xe,ft,Fe=[O,He];if(je){for(;Ce=Ce[B];)if((Ce.nodeType===1||we)&&f(Ce,dt,je))return!0}else for(;Ce=Ce[B];)if(Ce.nodeType===1||we)if(ft=Ce[R]||(Ce[R]={}),j&&ce(Ce,j))Ce=Ce[B]||Ce;else{if((Xe=ft[de])&&Xe[0]===O&&Xe[1]===He)return Fe[2]=Xe[2];if(ft[de]=Fe,Fe[2]=f(Ce,dt,je))return!0}return!1}}function Xo(f){return f.length>1?function(w,L,B){for(var j=f.length;j--;)if(!f[j](w,L,B))return!1;return!0}:f[0]}function Sr(f,w,L){for(var B=0,j=w.length;B<j;B++)Pt(f,w[B],L);return L}function uo(f,w,L,B,j){for(var de,we=[],He=0,Ce=f.length,dt=w!=null;He<Ce;He++)(de=f[He])&&(!L||L(de,B,j))&&(we.push(de),dt&&w.push(He));return we}function Yo(f,w,L,B,j,de){return B&&!B[R]&&(B=Yo(B)),j&&!j[R]&&(j=Yo(j,de)),Nn(function(we,He,Ce,dt){var je,Xe,ft,Fe,Nt=[],Cn=[],hn=He.length,Fn=we||Sr(w||"*",Ce.nodeType?[Ce]:Ce,[]),Jn=f&&(we||!w)?uo(Fn,Nt,f,Ce,dt):Fn;if(L?(Fe=j||(we?f:hn||B)?[]:He,L(Jn,Fe,Ce,dt)):Fe=Jn,B)for(je=uo(Fe,Cn),B(je,[],Ce,dt),Xe=je.length;Xe--;)(ft=je[Xe])&&(Fe[Cn[Xe]]=!(Jn[Cn[Xe]]=ft));if(we){if(j||f){if(j){for(je=[],Xe=Fe.length;Xe--;)(ft=Fe[Xe])&&je.push(Jn[Xe]=ft);j(null,Fe=[],je,dt)}for(Xe=Fe.length;Xe--;)(ft=Fe[Xe])&&(je=j?v.call(we,ft):Nt[Xe])>-1&&(we[je]=!(He[je]=ft))}}else Fe=uo(Fe===He?Fe.splice(hn,Fe.length):Fe),j?j(null,He,Fe,dt):r.apply(He,Fe)})}function Jo(f){for(var w,L,B,j=f.length,de=t.relative[f[0].type],we=de||t.relative[" "],He=de?1:0,Ce=so(function(Xe){return Xe===w},we,!0),dt=so(function(Xe){return v.call(w,Xe)>-1},we,!0),je=[function(Xe,ft,Fe){var Nt=!de&&(Fe||ft!=n)||((w=ft).nodeType?Ce(Xe,ft,Fe):dt(Xe,ft,Fe));return w=null,Nt}];He<j;He++)if(L=t.relative[f[He].type])je=[so(Xo(je),L)];else{if(L=t.filter[f[He].type].apply(null,f[He].matches),L[R]){for(B=++He;B<j&&!t.relative[f[B].type];B++);return Yo(He>1&&Xo(je),He>1&&lo(f.slice(0,He-1).concat({value:f[He-2].type===" "?"*":""})).replace(Ee,"$1"),L,He<B&&Jo(f.slice(He,B)),B<j&&Jo(f=f.slice(B)),B<j&&lo(f))}je.push(L)}return Xo(je)}function kr(f,w){var L=w.length>0,B=f.length>0,j=function(de,we,He,Ce,dt){var je,Xe,ft,Fe=0,Nt="0",Cn=de&&[],hn=[],Fn=n,Jn=de||B&&t.find.TAG("*",dt),Va=O+=Fn==null?1:Math.random()||.1,bn=Jn.length;for(dt&&(n=we==s||we||dt);Nt!==bn&&(je=Jn[Nt])!=null;Nt++){if(B&&je){for(Xe=0,!we&&je.ownerDocument!=s&&(ca(je),He=!h);ft=f[Xe++];)if(ft(je,we||s,He)){r.call(Ce,je);break}dt&&(O=Va)}L&&((je=!ft&&je)&&Fe--,de&&Cn.push(je))}if(Fe+=Nt,L&&Nt!==Fe){for(Xe=0;ft=w[Xe++];)ft(Cn,hn,we,He);if(de){if(Fe>0)for(;Nt--;)Cn[Nt]||hn[Nt]||(hn[Nt]=Ve.call(Ce));hn=uo(hn)}r.apply(Ce,hn),dt&&!de&&hn.length>0&&Fe+w.length>1&&a.uniqueSort(Ce)}return dt&&(O=Va,n=Fn),Cn};return L?Nn(j):j}function Qo(f,w){var L,B=[],j=[],de=rt[f+" "];if(!de){for(w||(w=Wa(f)),L=w.length;L--;)de=Jo(w[L]),de[R]?B.push(de):j.push(de);de=rt(f,kr(j,B)),de.selector=f}return de}function _i(f,w,L,B){var j,de,we,He,Ce,dt=typeof f=="function"&&f,je=!B&&Wa(f=dt.selector||f);if(L=L||[],je.length===1){if(de=je[0]=je[0].slice(0),de.length>2&&(we=de[0]).type==="ID"&&w.nodeType===9&&h&&t.relative[de[1].type]){if(w=(t.find.ID(we.matches[0].replace(aa,oa),w)||[])[0],w)dt&&(w=w.parentNode);else return L;f=f.slice(de.shift().value.length)}for(j=Yn.needsContext.test(f)?0:de.length;j--&&(we=de[j],!t.relative[He=we.type]);)if((Ce=t.find[He])&&(B=Ce(we.matches[0].replace(aa,oa),Zo.test(de[0].type)&&Uo(w.parentNode)||w))){if(de.splice(j,1),f=B.length&&lo(de),!f)return r.apply(L,B),L;break}}return(dt||Qo(f,je))(B,w,!h,L,!w||Zo.test(f)&&Uo(w.parentNode)||w),L}N.sortStable=R.split("").sort(an).join("")===R,ca(),N.sortDetached=Ta(function(f){return f.compareDocumentPosition(s.createElement("fieldset"))&1}),a.find=Pt,a.expr[":"]=a.expr.pseudos,a.unique=a.uniqueSort,Pt.compile=Qo,Pt.select=_i,Pt.setDocument=ca,Pt.tokenize=Wa,Pt.escape=a.escapeSelector,Pt.getText=a.text,Pt.isXML=a.isXMLDoc,Pt.selectors=a.expr,Pt.support=a.support,Pt.uniqueSort=a.uniqueSort})();var et=function(e,t,n){for(var o=[],i=n!==void 0;(e=e[t])&&e.nodeType!==9;)if(e.nodeType===1){if(i&&a(e).is(n))break;o.push(e)}return o},ht=function(e,t){for(var n=[];e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n},nt=a.expr.match.needsContext,bt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Z(e,t,n){return D(t)?a.grep(e,function(o,i){return!!t.call(o,i,o)!==n}):t.nodeType?a.grep(e,function(o){return o===t!==n}):typeof t!="string"?a.grep(e,function(o){return v.call(t,o)>-1!==n}):a.filter(t,e,n)}a.filter=function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),t.length===1&&o.nodeType===1?a.find.matchesSelector(o,e)?[o]:[]:a.find.matches(e,a.grep(t,function(i){return i.nodeType===1}))},a.fn.extend({find:function(e){var t,n,o=this.length,i=this;if(typeof e!="string")return this.pushStack(a(e).filter(function(){for(t=0;t<o;t++)if(a.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<o;t++)a.find(e,i[t],n);return o>1?a.uniqueSort(n):n},filter:function(e){return this.pushStack(Z(this,e||[],!1))},not:function(e){return this.pushStack(Z(this,e||[],!0))},is:function(e){return!!Z(this,typeof e=="string"&&nt.test(e)?a(e):e||[],!1).length}});var xe,Ie=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,se=a.fn.init=function(e,t,n){var o,i;if(!e)return this;if(n=n||xe,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?o=[null,e,null]:o=Ie.exec(e),o&&(o[1]||!t))if(o[1]){if(t=t instanceof a?t[0]:t,a.merge(this,a.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:F,!0)),bt.test(o[1])&&a.isPlainObject(t))for(o in t)D(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}else return i=F.getElementById(o[2]),i&&(this[0]=i,this.length=1),this;else return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(D(e))return n.ready!==void 0?n.ready(e):e(a)}return a.makeArray(e,this)};se.prototype=a.fn,xe=a(F);var ke=/^(?:parents|prev(?:Until|All))/,Me={children:!0,contents:!0,next:!0,prev:!0};a.fn.extend({has:function(e){var t=a(e,this),n=t.length;return this.filter(function(){for(var o=0;o<n;o++)if(a.contains(this,t[o]))return!0})},closest:function(e,t){var n,o=0,i=this.length,r=[],s=typeof e!="string"&&a(e);if(!nt.test(e)){for(;o<i;o++)for(n=this[o];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:n.nodeType===1&&a.find.matchesSelector(n,e))){r.push(n);break}}return this.pushStack(r.length>1?a.uniqueSort(r):r)},index:function(e){return e?typeof e=="string"?v.call(a(e),this[0]):v.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(a.uniqueSort(a.merge(this.get(),a(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function re(e,t){for(;(e=e[t])&&e.nodeType!==1;);return e}a.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return et(e,"parentNode")},parentsUntil:function(e,t,n){return et(e,"parentNode",n)},next:function(e){return re(e,"nextSibling")},prev:function(e){return re(e,"previousSibling")},nextAll:function(e){return et(e,"nextSibling")},prevAll:function(e){return et(e,"previousSibling")},nextUntil:function(e,t,n){return et(e,"nextSibling",n)},prevUntil:function(e,t,n){return et(e,"previousSibling",n)},siblings:function(e){return ht((e.parentNode||{}).firstChild,e)},children:function(e){return ht(e.firstChild)},contents:function(e){return e.contentDocument!=null&&E(e.contentDocument)?e.contentDocument:(ce(e,"template")&&(e=e.content||e),a.merge([],e.childNodes))}},function(e,t){a.fn[e]=function(n,o){var i=a.map(this,t,n);return e.slice(-5)!=="Until"&&(o=n),o&&typeof o=="string"&&(i=a.filter(o,i)),this.length>1&&(Me[e]||a.uniqueSort(i),ke.test(e)&&i.reverse()),this.pushStack(i)}});var he=/[^\x20\t\r\n\f]+/g;function st(e){var t={};return a.each(e.match(he)||[],function(n,o){t[o]=!0}),t}a.Callbacks=function(e){e=typeof e=="string"?st(e):a.extend({},e);var t,n,o,i,r=[],s=[],g=-1,h=function(){for(i=i||e.once,o=t=!0;s.length;g=-1)for(n=s.shift();++g<r.length;)r[g].apply(n[0],n[1])===!1&&e.stopOnFalse&&(g=r.length,n=!1);e.memory||(n=!1),t=!1,i&&(n?r=[]:r="")},k={add:function(){return r&&(n&&!t&&(g=r.length-1,s.push(n)),function q(R){a.each(R,function(O,oe){D(oe)?(!e.unique||!k.has(oe))&&r.push(oe):oe&&oe.length&&me(oe)!=="string"&&q(oe)})}(arguments),n&&!t&&h()),this},remove:function(){return a.each(arguments,function(q,R){for(var O;(O=a.inArray(R,r,O))>-1;)r.splice(O,1),O<=g&&g--}),this},has:function(q){return q?a.inArray(q,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return i=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return i=s=[],!n&&!t&&(r=n=""),this},locked:function(){return!!i},fireWith:function(q,R){return i||(R=R||[],R=[q,R.slice?R.slice():R],s.push(R),t||h()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!o}};return k};function Re(e){return e}function at(e){throw e}function xt(e,t,n,o){var i;try{e&&D(i=e.promise)?i.call(e).done(t).fail(n):e&&D(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(o))}catch(r){n.apply(void 0,[r])}}a.extend({Deferred:function(e){var t=[["notify","progress",a.Callbacks("memory"),a.Callbacks("memory"),2],["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),0,"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(r){return o.then(null,r)},pipe:function(){var r=arguments;return a.Deferred(function(s){a.each(t,function(g,h){var k=D(r[h[4]])&&r[h[4]];i[h[1]](function(){var q=k&&k.apply(this,arguments);q&&D(q.promise)?q.promise().progress(s.notify).done(s.resolve).fail(s.reject):s[h[0]+"With"](this,k?[q]:arguments)})}),r=null}).promise()},then:function(r,s,g){var h=0;function k(q,R,O,oe){return function(){var Ze=this,Ct=arguments,rt=function(){var an,Zn;if(!(q<h)){if(an=O.apply(Ze,Ct),an===R.promise())throw new TypeError("Thenable self-resolution");Zn=an&&(typeof an=="object"||typeof an=="function")&&an.then,D(Zn)?oe?Zn.call(an,k(h,R,Re,oe),k(h,R,at,oe)):(h++,Zn.call(an,k(h,R,Re,oe),k(h,R,at,oe),k(h,R,Re,R.notifyWith))):(O!==Re&&(Ze=void 0,Ct=[an]),(oe||R.resolveWith)(Ze,Ct))}},fn=oe?rt:function(){try{rt()}catch(an){a.Deferred.exceptionHook&&a.Deferred.exceptionHook(an,fn.error),q+1>=h&&(O!==at&&(Ze=void 0,Ct=[an]),R.rejectWith(Ze,Ct))}};q?fn():(a.Deferred.getErrorHook?fn.error=a.Deferred.getErrorHook():a.Deferred.getStackHook&&(fn.error=a.Deferred.getStackHook()),u.setTimeout(fn))}}return a.Deferred(function(q){t[0][3].add(k(0,q,D(g)?g:Re,q.notifyWith)),t[1][3].add(k(0,q,D(r)?r:Re)),t[2][3].add(k(0,q,D(s)?s:at))}).promise()},promise:function(r){return r!=null?a.extend(r,o):o}},i={};return a.each(t,function(r,s){var g=s[2],h=s[5];o[s[1]]=g.add,h&&g.add(function(){n=h},t[3-r][2].disable,t[3-r][3].disable,t[0][2].lock,t[0][3].lock),g.add(s[3].fire),i[s[0]]=function(){return i[s[0]+"With"](this===i?void 0:this,arguments),this},i[s[0]+"With"]=g.fireWith}),o.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,o=Array(n),i=S.call(arguments),r=a.Deferred(),s=function(g){return function(h){o[g]=this,i[g]=arguments.length>1?S.call(arguments):h,--t||r.resolveWith(o,i)}};if(t<=1&&(xt(e,r.done(s(n)).resolve,r.reject,!t),r.state()==="pending"||D(i[n]&&i[n].then)))return r.then();for(;n--;)xt(i[n],s(n),r.reject);return r.promise()}});var At=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;a.Deferred.exceptionHook=function(e,t){u.console&&u.console.warn&&e&&At.test(e.name)&&u.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},a.readyException=function(e){u.setTimeout(function(){throw e})};var Tt=a.Deferred();a.fn.ready=function(e){return Tt.then(e).catch(function(t){a.readyException(t)}),this},a.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--a.readyWait:a.isReady)||(a.isReady=!0,!(e!==!0&&--a.readyWait>0)&&Tt.resolveWith(F,[a]))}}),a.ready.then=Tt.then;function mt(){F.removeEventListener("DOMContentLoaded",mt),u.removeEventListener("load",mt),a.ready()}F.readyState==="complete"||F.readyState!=="loading"&&!F.documentElement.doScroll?u.setTimeout(a.ready):(F.addEventListener("DOMContentLoaded",mt),u.addEventListener("load",mt));var We=function(e,t,n,o,i,r,s){var g=0,h=e.length,k=n==null;if(me(n)==="object"){i=!0;for(g in n)We(e,t,g,n[g],!0,r,s)}else if(o!==void 0&&(i=!0,D(o)||(s=!0),k&&(s?(t.call(e,o),t=null):(k=t,t=function(q,R,O){return k.call(a(q),O)})),t))for(;g<h;g++)t(e[g],n,s?o:o.call(e[g],g,t(e[g],n)));return i?e:k?t.call(e):h?t(e[0],n):r},zt=/^-ms-/,Wt=/-([a-z])/g;function pe(e,t){return t.toUpperCase()}function ue(e){return e.replace(zt,"ms-").replace(Wt,pe)}var U=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function X(){this.expando=a.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var o,i=this.cache(e);if(typeof t=="string")i[ue(t)]=n;else for(o in t)i[ue(o)]=t[o];return i},get:function(e,t){return t===void 0?this.cache(e):e[this.expando]&&e[this.expando][ue(t)]},access:function(e,t,n){return t===void 0||t&&typeof t=="string"&&n===void 0?this.get(e,t):(this.set(e,t,n),n!==void 0?n:t)},remove:function(e,t){var n,o=e[this.expando];if(o!==void 0){if(t!==void 0)for(Array.isArray(t)?t=t.map(ue):(t=ue(t),t=t in o?[t]:t.match(he)||[]),n=t.length;n--;)delete o[t[n]];(t===void 0||a.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==void 0&&!a.isEmptyObject(t)}};var H=new X,K=new X,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/[A-Z]/g;function Je(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:tt.test(e)?JSON.parse(e):e}function jt(e,t,n){var o;if(n===void 0&&e.nodeType===1)if(o="data-"+t.replace(Ne,"-$&").toLowerCase(),n=e.getAttribute(o),typeof n=="string"){try{n=Je(n)}catch{}K.set(e,t,n)}else n=void 0;return n}a.extend({hasData:function(e){return K.hasData(e)||H.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return H.access(e,t,n)},_removeData:function(e,t){H.remove(e,t)}}),a.fn.extend({data:function(e,t){var n,o,i,r=this[0],s=r&&r.attributes;if(e===void 0){if(this.length&&(i=K.get(r),r.nodeType===1&&!H.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(o=s[n].name,o.indexOf("data-")===0&&(o=ue(o.slice(5)),jt(r,o,i[o])));H.set(r,"hasDataAttrs",!0)}return i}return typeof e=="object"?this.each(function(){K.set(this,e)}):We(this,function(g){var h;if(r&&g===void 0)return h=K.get(r,e),h!==void 0||(h=jt(r,e),h!==void 0)?h:void 0;this.each(function(){K.set(this,e,g)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),a.extend({queue:function(e,t,n){var o;if(e)return t=(t||"fx")+"queue",o=H.get(e,t),n&&(!o||Array.isArray(n)?o=H.access(e,t,a.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||"fx";var n=a.queue(e,t),o=n.length,i=n.shift(),r=a._queueHooks(e,t),s=function(){a.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),o--),i&&(t==="fx"&&n.unshift("inprogress"),delete r.stop,i.call(e,s,r)),!o&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return H.get(e,n)||H.access(e,n,{empty:a.Callbacks("once memory").add(function(){H.remove(e,[t+"queue",n])})})}}),a.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?a.queue(this[0],e):t===void 0?this:this.each(function(){var o=a.queue(this,e,t);a._queueHooks(this,e),e==="fx"&&o[0]!=="inprogress"&&a.dequeue(this,e)})},dequeue:function(e){return this.each(function(){a.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,o=1,i=a.Deferred(),r=this,s=this.length,g=function(){--o||i.resolveWith(r,[r])};for(typeof e!="string"&&(t=e,e=void 0),e=e||"fx";s--;)n=H.get(r[s],e+"queueHooks"),n&&n.empty&&(o++,n.empty.add(g));return g(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],$e=F.documentElement,Xt=function(e){return a.contains(e.ownerDocument,e)},En={composed:!0};$e.getRootNode&&(Xt=function(e){return a.contains(e.ownerDocument,e)||e.getRootNode(En)===e.ownerDocument});var qt=function(e,t){return e=t||e,e.style.display==="none"||e.style.display===""&&Xt(e)&&a.css(e,"display")==="none"};function _n(e,t,n,o){var i,r,s=20,g=o?function(){return o.cur()}:function(){return a.css(e,t,"")},h=g(),k=n&&n[3]||(a.cssNumber[t]?"":"px"),q=e.nodeType&&(a.cssNumber[t]||k!=="px"&&+h)&&Pe.exec(a.css(e,t));if(q&&q[3]!==k){for(h=h/2,k=k||q[3],q=+h||1;s--;)a.style(e,t,q+k),(1-r)*(1-(r=g()/h||.5))<=0&&(s=0),q=q/r;q=q*2,a.style(e,t,q+k),n=n||[]}return n&&(q=+q||+h||0,i=n[1]?q+(n[1]+1)*n[2]:+n[2],o&&(o.unit=k,o.start=q,o.end=i)),i}var ie={};function qe(e){var t,n=e.ownerDocument,o=e.nodeName,i=ie[o];return i||(t=n.body.appendChild(n.createElement(o)),i=a.css(t,"display"),t.parentNode.removeChild(t),i==="none"&&(i="block"),ie[o]=i,i)}function _t(e,t){for(var n,o,i=[],r=0,s=e.length;r<s;r++)o=e[r],o.style&&(n=o.style.display,t?(n==="none"&&(i[r]=H.get(o,"display")||null,i[r]||(o.style.display="")),o.style.display===""&&qt(o)&&(i[r]=qe(o))):n!=="none"&&(i[r]="none",H.set(o,"display",n)));for(r=0;r<s;r++)i[r]!=null&&(e[r].style.display=i[r]);return e}a.fn.extend({show:function(){return _t(this,!0)},hide:function(){return _t(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){qt(this)?a(this).show():a(this).hide()})}});var St=/^(?:checkbox|radio)$/i,en=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,wn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=F.createDocumentFragment(),t=e.appendChild(F.createElement("div")),n=F.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),N.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",N.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",N.option=!!t.lastChild})();var Yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Yt.tbody=Yt.tfoot=Yt.colgroup=Yt.caption=Yt.thead,Yt.th=Yt.td,N.option||(Yt.optgroup=Yt.option=[1,"<select multiple='multiple'>","</select>"]);function Jt(e,t){var n;return typeof e.getElementsByTagName<"u"?n=e.getElementsByTagName(t||"*"):typeof e.querySelectorAll<"u"?n=e.querySelectorAll(t||"*"):n=[],t===void 0||t&&ce(e,t)?a.merge([e],n):n}function $n(e,t){for(var n=0,o=e.length;n<o;n++)H.set(e[n],"globalEval",!t||H.get(t[n],"globalEval"))}var jn=/<|&#?\w+;/;function Kn(e,t,n,o,i){for(var r,s,g,h,k,q,R=t.createDocumentFragment(),O=[],oe=0,Ze=e.length;oe<Ze;oe++)if(r=e[oe],r||r===0)if(me(r)==="object")a.merge(O,r.nodeType?[r]:r);else if(!jn.test(r))O.push(t.createTextNode(r));else{for(s=s||R.appendChild(t.createElement("div")),g=(en.exec(r)||["",""])[1].toLowerCase(),h=Yt[g]||Yt._default,s.innerHTML=h[1]+a.htmlPrefilter(r)+h[2],q=h[0];q--;)s=s.lastChild;a.merge(O,s.childNodes),s=R.firstChild,s.textContent=""}for(R.textContent="",oe=0;r=O[oe++];){if(o&&a.inArray(r,o)>-1){i&&i.push(r);continue}if(k=Xt(r),s=Jt(R.appendChild(r),"script"),k&&$n(s),n)for(q=0;r=s[q++];)wn.test(r.type||"")&&n.push(r)}return R}var Sa=/^([^.]*)(?:\.(.+)|)/;function Rn(){return!0}function Hn(){return!1}function ma(e,t,n,o,i,r){var s,g;if(typeof t=="object"){typeof n!="string"&&(o=o||n,n=void 0);for(g in t)ma(e,g,n,o,t[g],r);return e}if(o==null&&i==null?(i=n,o=n=void 0):i==null&&(typeof n=="string"?(i=o,o=void 0):(i=o,o=n,n=void 0)),i===!1)i=Hn;else if(!i)return e;return r===1&&(s=i,i=function(h){return a().off(h),s.apply(this,arguments)},i.guid=s.guid||(s.guid=a.guid++)),e.each(function(){a.event.add(this,t,i,o,n)})}a.event={global:{},add:function(e,t,n,o,i){var r,s,g,h,k,q,R,O,oe,Ze,Ct,rt=H.get(e);if(U(e))for(n.handler&&(r=n,n=r.handler,i=r.selector),i&&a.find.matchesSelector($e,i),n.guid||(n.guid=a.guid++),(h=rt.events)||(h=rt.events=Object.create(null)),(s=rt.handle)||(s=rt.handle=function(fn){return typeof a<"u"&&a.event.triggered!==fn.type?a.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],k=t.length;k--;)g=Sa.exec(t[k])||[],oe=Ct=g[1],Ze=(g[2]||"").split(".").sort(),oe&&(R=a.event.special[oe]||{},oe=(i?R.delegateType:R.bindType)||oe,R=a.event.special[oe]||{},q=a.extend({type:oe,origType:Ct,data:o,handler:n,guid:n.guid,selector:i,needsContext:i&&a.expr.match.needsContext.test(i),namespace:Ze.join(".")},r),(O=h[oe])||(O=h[oe]=[],O.delegateCount=0,(!R.setup||R.setup.call(e,o,Ze,s)===!1)&&e.addEventListener&&e.addEventListener(oe,s)),R.add&&(R.add.call(e,q),q.handler.guid||(q.handler.guid=n.guid)),i?O.splice(O.delegateCount++,0,q):O.push(q),a.event.global[oe]=!0)},remove:function(e,t,n,o,i){var r,s,g,h,k,q,R,O,oe,Ze,Ct,rt=H.hasData(e)&&H.get(e);if(!(!rt||!(h=rt.events))){for(t=(t||"").match(he)||[""],k=t.length;k--;){if(g=Sa.exec(t[k])||[],oe=Ct=g[1],Ze=(g[2]||"").split(".").sort(),!oe){for(oe in h)a.event.remove(e,oe+t[k],n,o,!0);continue}for(R=a.event.special[oe]||{},oe=(o?R.delegateType:R.bindType)||oe,O=h[oe]||[],g=g[2]&&new RegExp("(^|\\.)"+Ze.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=O.length;r--;)q=O[r],(i||Ct===q.origType)&&(!n||n.guid===q.guid)&&(!g||g.test(q.namespace))&&(!o||o===q.selector||o==="**"&&q.selector)&&(O.splice(r,1),q.selector&&O.delegateCount--,R.remove&&R.remove.call(e,q));s&&!O.length&&((!R.teardown||R.teardown.call(e,Ze,rt.handle)===!1)&&a.removeEvent(e,oe,rt.handle),delete h[oe])}a.isEmptyObject(h)&&H.remove(e,"handle events")}},dispatch:function(e){var t,n,o,i,r,s,g=new Array(arguments.length),h=a.event.fix(e),k=(H.get(this,"events")||Object.create(null))[h.type]||[],q=a.event.special[h.type]||{};for(g[0]=h,t=1;t<arguments.length;t++)g[t]=arguments[t];if(h.delegateTarget=this,!(q.preDispatch&&q.preDispatch.call(this,h)===!1)){for(s=a.event.handlers.call(this,h,k),t=0;(i=s[t++])&&!h.isPropagationStopped();)for(h.currentTarget=i.elem,n=0;(r=i.handlers[n++])&&!h.isImmediatePropagationStopped();)(!h.rnamespace||r.namespace===!1||h.rnamespace.test(r.namespace))&&(h.handleObj=r,h.data=r.data,o=((a.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,g),o!==void 0&&(h.result=o)===!1&&(h.preventDefault(),h.stopPropagation()));return q.postDispatch&&q.postDispatch.call(this,h),h.result}},handlers:function(e,t){var n,o,i,r,s,g=[],h=t.delegateCount,k=e.target;if(h&&k.nodeType&&!(e.type==="click"&&e.button>=1)){for(;k!==this;k=k.parentNode||this)if(k.nodeType===1&&!(e.type==="click"&&k.disabled===!0)){for(r=[],s={},n=0;n<h;n++)o=t[n],i=o.selector+" ",s[i]===void 0&&(s[i]=o.needsContext?a(i,this).index(k)>-1:a.find(i,this,null,[k]).length),s[i]&&r.push(o);r.length&&g.push({elem:k,handlers:r})}}return k=this,h<t.length&&g.push({elem:k,handlers:t.slice(h)}),g},addProp:function(e,t){Object.defineProperty(a.Event.prototype,e,{enumerable:!0,configurable:!0,get:D(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(n){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}})},fix:function(e){return e[a.expando]?e:new a.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return St.test(t.type)&&t.click&&ce(t,"input")&&zn(t,"click",!0),!1},trigger:function(e){var t=this||e;return St.test(t.type)&&t.click&&ce(t,"input")&&zn(t,"click"),!0},_default:function(e){var t=e.target;return St.test(t.type)&&t.click&&ce(t,"input")&&H.get(t,"click")||ce(t,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function zn(e,t,n){if(!n){H.get(e,t)===void 0&&a.event.add(e,t,Rn);return}H.set(e,t,!1),a.event.add(e,t,{namespace:!1,handler:function(o){var i,r=H.get(this,t);if(o.isTrigger&1&&this[t]){if(r)(a.event.special[t]||{}).delegateType&&o.stopPropagation();else if(r=S.call(arguments),H.set(this,t,r),this[t](),i=H.get(this,t),H.set(this,t,!1),r!==i)return o.stopImmediatePropagation(),o.preventDefault(),i}else r&&(H.set(this,t,a.event.trigger(r[0],r.slice(1),this)),o.stopPropagation(),o.isImmediatePropagationStopped=Rn)}})}a.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},a.Event=function(e,t){if(!(this instanceof a.Event))return new a.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?Rn:Hn,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&a.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[a.expando]=!0},a.Event.prototype={constructor:a.Event,isDefaultPrevented:Hn,isPropagationStopped:Hn,isImmediatePropagationStopped:Hn,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Rn,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Rn,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Rn,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},a.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},a.event.addProp),a.each({focus:"focusin",blur:"focusout"},function(e,t){function n(o){if(F.documentMode){var i=H.get(this,"handle"),r=a.event.fix(o);r.type=o.type==="focusin"?"focus":"blur",r.isSimulated=!0,i(o),r.target===r.currentTarget&&i(r)}else a.event.simulate(t,o.target,a.event.fix(o))}a.event.special[e]={setup:function(){var o;if(zn(this,e,!0),F.documentMode)o=H.get(this,t),o||this.addEventListener(t,n),H.set(this,t,(o||0)+1);else return!1},trigger:function(){return zn(this,e),!0},teardown:function(){var o;if(F.documentMode)o=H.get(this,t)-1,o?H.set(this,t,o):(this.removeEventListener(t,n),H.remove(this,t));else return!1},_default:function(o){return H.get(o.target,e)},delegateType:t},a.event.special[t]={setup:function(){var o=this.ownerDocument||this.document||this,i=F.documentMode?this:o,r=H.get(i,t);r||(F.documentMode?this.addEventListener(t,n):o.addEventListener(e,n,!0)),H.set(i,t,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,i=F.documentMode?this:o,r=H.get(i,t)-1;r?H.set(i,t,r):(F.documentMode?this.removeEventListener(t,n):o.removeEventListener(e,n,!0),H.remove(i,t))}}}),a.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){a.event.special[e]={delegateType:t,bindType:t,handle:function(n){var o,i=this,r=n.relatedTarget,s=n.handleObj;return(!r||r!==i&&!a.contains(i,r))&&(n.type=s.origType,o=s.handler.apply(this,arguments),n.type=t),o}}}),a.fn.extend({on:function(e,t,n,o){return ma(this,e,t,n,o)},one:function(e,t,n,o){return ma(this,e,t,n,o,1)},off:function(e,t,n){var o,i;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,a(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||typeof t=="function")&&(n=t,t=void 0),n===!1&&(n=Hn),this.each(function(){a.event.remove(this,e,n,t)})}});var Ba=/<script|<style|<link/i,Wn=/checked\s*(?:[^=]|=\s*.checked.)/i,ga=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Y(e,t){return ce(e,"table")&&ce(t.nodeType!==11?t:t.firstChild,"tr")&&a(e).children("tbody")[0]||e}function Se(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Ae(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function kt(e,t){var n,o,i,r,s,g,h;if(t.nodeType===1){if(H.hasData(e)&&(r=H.get(e),h=r.events,h)){H.remove(t,"handle events");for(i in h)for(n=0,o=h[i].length;n<o;n++)a.event.add(t,i,h[i][n])}K.hasData(e)&&(s=K.access(e),g=a.extend({},s),K.set(t,g))}}function wt(e,t){var n=t.nodeName.toLowerCase();n==="input"&&St.test(e.type)?t.checked=e.checked:(n==="input"||n==="textarea")&&(t.defaultValue=e.defaultValue)}function It(e,t,n,o){t=C(t);var i,r,s,g,h,k,q=0,R=e.length,O=R-1,oe=t[0],Ze=D(oe);if(Ze||R>1&&typeof oe=="string"&&!N.checkClone&&Wn.test(oe))return e.each(function(Ct){var rt=e.eq(Ct);Ze&&(t[0]=oe.call(this,Ct,rt.html())),It(rt,t,n,o)});if(R&&(i=Kn(t,e[0].ownerDocument,!1,e,o),r=i.firstChild,i.childNodes.length===1&&(i=r),r||o)){for(s=a.map(Jt(i,"script"),Se),g=s.length;q<R;q++)h=i,q!==O&&(h=a.clone(h,!0,!0),g&&a.merge(s,Jt(h,"script"))),n.call(e[q],h,q);if(g)for(k=s[s.length-1].ownerDocument,a.map(s,Ae),q=0;q<g;q++)h=s[q],wn.test(h.type||"")&&!H.access(h,"globalEval")&&a.contains(k,h)&&(h.src&&(h.type||"").toLowerCase()!=="module"?a._evalUrl&&!h.noModule&&a._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")},k):Be(h.textContent.replace(ga,""),h,k))}return e}function Ye(e,t,n){for(var o,i=t?a.filter(t,e):e,r=0;(o=i[r])!=null;r++)!n&&o.nodeType===1&&a.cleanData(Jt(o)),o.parentNode&&(n&&Xt(o)&&$n(Jt(o,"script")),o.parentNode.removeChild(o));return e}a.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var o,i,r,s,g=e.cloneNode(!0),h=Xt(e);if(!N.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!a.isXMLDoc(e))for(s=Jt(g),r=Jt(e),o=0,i=r.length;o<i;o++)wt(r[o],s[o]);if(t)if(n)for(r=r||Jt(e),s=s||Jt(g),o=0,i=r.length;o<i;o++)kt(r[o],s[o]);else kt(e,g);return s=Jt(g,"script"),s.length>0&&$n(s,!h&&Jt(e,"script")),g},cleanData:function(e){for(var t,n,o,i=a.event.special,r=0;(n=e[r])!==void 0;r++)if(U(n)){if(t=n[H.expando]){if(t.events)for(o in t.events)i[o]?a.event.remove(n,o):a.removeEvent(n,o,t.handle);n[H.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),a.fn.extend({detach:function(e){return Ye(this,e,!0)},remove:function(e){return Ye(this,e)},text:function(e){return We(this,function(t){return t===void 0?a.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=t)})},null,e,arguments.length)},append:function(){return It(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Y(this,e);t.appendChild(e)}})},prepend:function(){return It(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return It(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return It(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;(e=this[t])!=null;t++)e.nodeType===1&&(a.cleanData(Jt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e??!1,t=t??e,this.map(function(){return a.clone(this,e,t)})},html:function(e){return We(this,function(t){var n=this[0]||{},o=0,i=this.length;if(t===void 0&&n.nodeType===1)return n.innerHTML;if(typeof t=="string"&&!Ba.test(t)&&!Yt[(en.exec(t)||["",""])[1].toLowerCase()]){t=a.htmlPrefilter(t);try{for(;o<i;o++)n=this[o]||{},n.nodeType===1&&(a.cleanData(Jt(n,!1)),n.innerHTML=t);n=0}catch{}}n&&this.empty().append(t)},null,e,arguments.length)},replaceWith:function(){var e=[];return It(this,arguments,function(t){var n=this.parentNode;a.inArray(this,e)<0&&(a.cleanData(Jt(this)),n&&n.replaceChild(t,this))},e)}}),a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){a.fn[e]=function(n){for(var o,i=[],r=a(n),s=r.length-1,g=0;g<=s;g++)o=g===s?this:this.clone(!0),a(r[g])[t](o),m.apply(i,o.get());return this.pushStack(i)}});var Dt=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Qt=/^--/,Lt=function(e){var t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=u),t.getComputedStyle(e)},Ot=function(e,t,n){var o,i,r={};for(i in t)r[i]=e.style[i],e.style[i]=t[i];o=n.call(e);for(i in t)e.style[i]=r[i];return o},Gt=new RegExp(ot.join("|"),"i");(function(){function e(){if(k){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",k.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",$e.appendChild(h).appendChild(k);var q=u.getComputedStyle(k);n=q.top!=="1%",g=t(q.marginLeft)===12,k.style.right="60%",r=t(q.right)===36,o=t(q.width)===36,k.style.position="absolute",i=t(k.offsetWidth/3)===12,$e.removeChild(h),k=null}}function t(q){return Math.round(parseFloat(q))}var n,o,i,r,s,g,h=F.createElement("div"),k=F.createElement("div");k.style&&(k.style.backgroundClip="content-box",k.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle=k.style.backgroundClip==="content-box",a.extend(N,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),g},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var q,R,O,oe;return s==null&&(q=F.createElement("table"),R=F.createElement("tr"),O=F.createElement("div"),q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",R.style.cssText="box-sizing:content-box;border:1px solid",R.style.height="1px",O.style.height="9px",O.style.display="block",$e.appendChild(q).appendChild(R).appendChild(O),oe=u.getComputedStyle(R),s=parseInt(oe.height,10)+parseInt(oe.borderTopWidth,10)+parseInt(oe.borderBottomWidth,10)===R.offsetHeight,$e.removeChild(q)),s}}))})();function tn(e,t,n){var o,i,r,s,g=Qt.test(t),h=e.style;return n=n||Lt(e),n&&(s=n.getPropertyValue(t)||n[t],g&&s&&(s=s.replace(Ee,"$1")||void 0),s===""&&!Xt(e)&&(s=a.style(e,t)),!N.pixelBoxStyles()&&Dt.test(s)&&Gt.test(t)&&(o=h.width,i=h.minWidth,r=h.maxWidth,h.minWidth=h.maxWidth=h.width=s,s=n.width,h.width=o,h.minWidth=i,h.maxWidth=r)),s!==void 0?s+"":s}function rn(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Mn=["Webkit","Moz","ms"],nn=F.createElement("div").style,cn={};function ln(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Mn.length;n--;)if(e=Mn[n]+t,e in nn)return e}function Tn(e){var t=a.cssProps[e]||cn[e];return t||(e in nn?e:cn[e]=ln(e)||e)}var Ln=/^(none|table(?!-c[ea]).+)/,yn={position:"absolute",visibility:"hidden",display:"block"},vn={letterSpacing:"0",fontWeight:"400"};function ea(e,t,n){var o=Pe.exec(t);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):t}function Vn(e,t,n,o,i,r){var s=t==="width"?1:0,g=0,h=0,k=0;if(n===(o?"border":"content"))return 0;for(;s<4;s+=2)n==="margin"&&(k+=a.css(e,n+ot[s],!0,i)),o?(n==="content"&&(h-=a.css(e,"padding"+ot[s],!0,i)),n!=="margin"&&(h-=a.css(e,"border"+ot[s]+"Width",!0,i))):(h+=a.css(e,"padding"+ot[s],!0,i),n!=="padding"?h+=a.css(e,"border"+ot[s]+"Width",!0,i):g+=a.css(e,"border"+ot[s]+"Width",!0,i));return!o&&r>=0&&(h+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-h-g-.5))||0),h+k}function ka(e,t,n){var o=Lt(e),i=!N.boxSizingReliable()||n,r=i&&a.css(e,"boxSizing",!1,o)==="border-box",s=r,g=tn(e,t,o),h="offset"+t[0].toUpperCase()+t.slice(1);if(Dt.test(g)){if(!n)return g;g="auto"}return(!N.boxSizingReliable()&&r||!N.reliableTrDimensions()&&ce(e,"tr")||g==="auto"||!parseFloat(g)&&a.css(e,"display",!1,o)==="inline")&&e.getClientRects().length&&(r=a.css(e,"boxSizing",!1,o)==="border-box",s=h in e,s&&(g=e[h])),g=parseFloat(g)||0,g+Vn(e,t,n||(r?"border":"content"),s,o,g)+"px"}a.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,o){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var i,r,s,g=ue(t),h=Qt.test(t),k=e.style;if(h||(t=Tn(g)),s=a.cssHooks[t]||a.cssHooks[g],n!==void 0){if(r=typeof n,r==="string"&&(i=Pe.exec(n))&&i[1]&&(n=_n(e,t,i),r="number"),n==null||n!==n)return;r==="number"&&!h&&(n+=i&&i[3]||(a.cssNumber[g]?"":"px")),!N.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(k[t]="inherit"),(!s||!("set"in s)||(n=s.set(e,n,o))!==void 0)&&(h?k.setProperty(t,n):k[t]=n)}else return s&&"get"in s&&(i=s.get(e,!1,o))!==void 0?i:k[t]}},css:function(e,t,n,o){var i,r,s,g=ue(t),h=Qt.test(t);return h||(t=Tn(g)),s=a.cssHooks[t]||a.cssHooks[g],s&&"get"in s&&(i=s.get(e,!0,n)),i===void 0&&(i=tn(e,t,o)),i==="normal"&&t in vn&&(i=vn[t]),n===""||n?(r=parseFloat(i),n===!0||isFinite(r)?r||0:i):i}}),a.each(["height","width"],function(e,t){a.cssHooks[t]={get:function(n,o,i){if(o)return Ln.test(a.css(n,"display"))&&(!n.getClientRects().length||!n.getBoundingClientRect().width)?Ot(n,yn,function(){return ka(n,t,i)}):ka(n,t,i)},set:function(n,o,i){var r,s=Lt(n),g=!N.scrollboxSize()&&s.position==="absolute",h=g||i,k=h&&a.css(n,"boxSizing",!1,s)==="border-box",q=i?Vn(n,t,i,k,s):0;return k&&g&&(q-=Math.ceil(n["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-Vn(n,t,"border",!1,s)-.5)),q&&(r=Pe.exec(o))&&(r[3]||"px")!=="px"&&(n.style[t]=o,o=a.css(n,t)),ea(n,o,q)}}}),a.cssHooks.marginLeft=rn(N.reliableMarginLeft,function(e,t){if(t)return(parseFloat(tn(e,"marginLeft"))||e.getBoundingClientRect().left-Ot(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),a.each({margin:"",padding:"",border:"Width"},function(e,t){a.cssHooks[e+t]={expand:function(n){for(var o=0,i={},r=typeof n=="string"?n.split(" "):[n];o<4;o++)i[e+ot[o]+t]=r[o]||r[o-2]||r[0];return i}},e!=="margin"&&(a.cssHooks[e+t].set=ea)}),a.fn.extend({css:function(e,t){return We(this,function(n,o,i){var r,s,g={},h=0;if(Array.isArray(o)){for(r=Lt(n),s=o.length;h<s;h++)g[o[h]]=a.css(n,o[h],!1,r);return g}return i!==void 0?a.style(n,o,i):a.css(n,o)},e,t,arguments.length>1)}});function sn(e,t,n,o,i){return new sn.prototype.init(e,t,n,o,i)}a.Tween=sn,sn.prototype={constructor:sn,init:function(e,t,n,o,i,r){this.elem=e,this.prop=n,this.easing=i||a.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=r||(a.cssNumber[n]?"":"px")},cur:function(){var e=sn.propHooks[this.prop];return e&&e.get?e.get(this):sn.propHooks._default.get(this)},run:function(e){var t,n=sn.propHooks[this.prop];return this.options.duration?this.pos=t=a.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):sn.propHooks._default.set(this),this}},sn.prototype.init.prototype=sn.prototype,sn.propHooks={_default:{get:function(e){var t;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(t=a.css(e.elem,e.prop,""),!t||t==="auto"?0:t)},set:function(e){a.fx.step[e.prop]?a.fx.step[e.prop](e):e.elem.nodeType===1&&(a.cssHooks[e.prop]||e.elem.style[Tn(e.prop)]!=null)?a.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},sn.propHooks.scrollTop=sn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},a.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},a.fx=sn.prototype.init,a.fx.step={};var Gn,qn,Lo=/^(?:toggle|show|hide)$/,Oo=/queueHooks$/;function Ia(){qn&&(F.hidden===!1&&u.requestAnimationFrame?u.requestAnimationFrame(Ia):u.setTimeout(Ia,a.fx.interval),a.fx.tick())}function eo(){return u.setTimeout(function(){Gn=void 0}),Gn=Date.now()}function Ma(e,t){var n,o=0,i={height:e};for(t=t?1:0;o<4;o+=2-t)n=ot[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function za(e,t,n){for(var o,i=(Dn.tweeners[t]||[]).concat(Dn.tweeners["*"]),r=0,s=i.length;r<s;r++)if(o=i[r].call(n,t,e))return o}function to(e,t,n){var o,i,r,s,g,h,k,q,R="width"in t||"height"in t,O=this,oe={},Ze=e.style,Ct=e.nodeType&&qt(e),rt=H.get(e,"fxshow");n.queue||(s=a._queueHooks(e,"fx"),s.unqueued==null&&(s.unqueued=0,g=s.empty.fire,s.empty.fire=function(){s.unqueued||g()}),s.unqueued++,O.always(function(){O.always(function(){s.unqueued--,a.queue(e,"fx").length||s.empty.fire()})}));for(o in t)if(i=t[o],Lo.test(i)){if(delete t[o],r=r||i==="toggle",i===(Ct?"hide":"show"))if(i==="show"&&rt&&rt[o]!==void 0)Ct=!0;else continue;oe[o]=rt&&rt[o]||a.style(e,o)}if(h=!a.isEmptyObject(t),!(!h&&a.isEmptyObject(oe))){R&&e.nodeType===1&&(n.overflow=[Ze.overflow,Ze.overflowX,Ze.overflowY],k=rt&&rt.display,k==null&&(k=H.get(e,"display")),q=a.css(e,"display"),q==="none"&&(k?q=k:(_t([e],!0),k=e.style.display||k,q=a.css(e,"display"),_t([e]))),(q==="inline"||q==="inline-block"&&k!=null)&&a.css(e,"float")==="none"&&(h||(O.done(function(){Ze.display=k}),k==null&&(q=Ze.display,k=q==="none"?"":q)),Ze.display="inline-block")),n.overflow&&(Ze.overflow="hidden",O.always(function(){Ze.overflow=n.overflow[0],Ze.overflowX=n.overflow[1],Ze.overflowY=n.overflow[2]})),h=!1;for(o in oe)h||(rt?"hidden"in rt&&(Ct=rt.hidden):rt=H.access(e,"fxshow",{display:k}),r&&(rt.hidden=!Ct),Ct&&_t([e],!0),O.done(function(){Ct||_t([e]),H.remove(e,"fxshow");for(o in oe)a.style(e,o,oe[o])})),h=za(Ct?rt[o]:0,o,O),o in rt||(rt[o]=h.start,Ct&&(h.end=h.start,h.start=0))}}function Fo(e,t){var n,o,i,r,s;for(n in e)if(o=ue(n),i=t[o],r=e[n],Array.isArray(r)&&(i=r[1],r=e[n]=r[0]),n!==o&&(e[o]=r,delete e[n]),s=a.cssHooks[o],s&&"expand"in s){r=s.expand(r),delete e[o];for(n in r)n in e||(e[n]=r[n],t[n]=i)}else t[o]=i}function Dn(e,t,n){var o,i,r=0,s=Dn.prefilters.length,g=a.Deferred().always(function(){delete h.elem}),h=function(){if(i)return!1;for(var R=Gn||eo(),O=Math.max(0,k.startTime+k.duration-R),oe=O/k.duration||0,Ze=1-oe,Ct=0,rt=k.tweens.length;Ct<rt;Ct++)k.tweens[Ct].run(Ze);return g.notifyWith(e,[k,Ze,O]),Ze<1&&rt?O:(rt||g.notifyWith(e,[k,1,0]),g.resolveWith(e,[k]),!1)},k=g.promise({elem:e,props:a.extend({},t),opts:a.extend(!0,{specialEasing:{},easing:a.easing._default},n),originalProperties:t,originalOptions:n,startTime:Gn||eo(),duration:n.duration,tweens:[],createTween:function(R,O){var oe=a.Tween(e,k.opts,R,O,k.opts.specialEasing[R]||k.opts.easing);return k.tweens.push(oe),oe},stop:function(R){var O=0,oe=R?k.tweens.length:0;if(i)return this;for(i=!0;O<oe;O++)k.tweens[O].run(1);return R?(g.notifyWith(e,[k,1,0]),g.resolveWith(e,[k,R])):g.rejectWith(e,[k,R]),this}}),q=k.props;for(Fo(q,k.opts.specialEasing);r<s;r++)if(o=Dn.prefilters[r].call(k,e,q,k.opts),o)return D(o.stop)&&(a._queueHooks(k.elem,k.opts.queue).stop=o.stop.bind(o)),o;return a.map(q,za,k),D(k.opts.start)&&k.opts.start.call(e,k),k.progress(k.opts.progress).done(k.opts.done,k.opts.complete).fail(k.opts.fail).always(k.opts.always),a.fx.timer(a.extend(h,{elem:e,anim:k,queue:k.opts.queue})),k}a.Animation=a.extend(Dn,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return _n(n.elem,e,Pe.exec(t),n),n}]},tweener:function(e,t){D(e)?(t=e,e=["*"]):e=e.match(he);for(var n,o=0,i=e.length;o<i;o++)n=e[o],Dn.tweeners[n]=Dn.tweeners[n]||[],Dn.tweeners[n].unshift(t)},prefilters:[to],prefilter:function(e,t){t?Dn.prefilters.unshift(e):Dn.prefilters.push(e)}}),a.speed=function(e,t,n){var o=e&&typeof e=="object"?a.extend({},e):{complete:n||!n&&t||D(e)&&e,duration:e,easing:n&&t||t&&!D(t)&&t};return a.fx.off?o.duration=0:typeof o.duration!="number"&&(o.duration in a.fx.speeds?o.duration=a.fx.speeds[o.duration]:o.duration=a.fx.speeds._default),(o.queue==null||o.queue===!0)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){D(o.old)&&o.old.call(this),o.queue&&a.dequeue(this,o.queue)},o},a.fn.extend({fadeTo:function(e,t,n,o){return this.filter(qt).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var i=a.isEmptyObject(e),r=a.speed(t,n,o),s=function(){var g=Dn(this,a.extend({},e),r);(i||H.get(this,"finish"))&&g.stop(!0)};return s.finish=s,i||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var o=function(i){var r=i.stop;delete i.stop,r(n)};return typeof e!="string"&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var i=!0,r=e!=null&&e+"queueHooks",s=a.timers,g=H.get(this);if(r)g[r]&&g[r].stop&&o(g[r]);else for(r in g)g[r]&&g[r].stop&&Oo.test(r)&&o(g[r]);for(r=s.length;r--;)s[r].elem===this&&(e==null||s[r].queue===e)&&(s[r].anim.stop(n),i=!1,s.splice(r,1));(i||!n)&&a.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=H.get(this),o=n[e+"queue"],i=n[e+"queueHooks"],r=a.timers,s=o?o.length:0;for(n.finish=!0,a.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete n.finish})}}),a.each(["toggle","show","hide"],function(e,t){var n=a.fn[t];a.fn[t]=function(o,i,r){return o==null||typeof o=="boolean"?n.apply(this,arguments):this.animate(Ma(t,!0),o,i,r)}}),a.each({slideDown:Ma("show"),slideUp:Ma("hide"),slideToggle:Ma("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){a.fn[e]=function(n,o,i){return this.animate(t,n,o,i)}}),a.timers=[],a.fx.tick=function(){var e,t=0,n=a.timers;for(Gn=Date.now();t<n.length;t++)e=n[t],!e()&&n[t]===e&&n.splice(t--,1);n.length||a.fx.stop(),Gn=void 0},a.fx.timer=function(e){a.timers.push(e),a.fx.start()},a.fx.interval=13,a.fx.start=function(){qn||(qn=!0,Ia())},a.fx.stop=function(){qn=null},a.fx.speeds={slow:600,fast:200,_default:400},a.fn.delay=function(e,t){return e=a.fx&&a.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(n,o){var i=u.setTimeout(n,e);o.stop=function(){u.clearTimeout(i)}})},function(){var e=F.createElement("input"),t=F.createElement("select"),n=t.appendChild(F.createElement("option"));e.type="checkbox",N.checkOn=e.value!=="",N.optSelected=n.selected,e=F.createElement("input"),e.value="t",e.type="radio",N.radioValue=e.value==="t"}();var no,ya=a.expr.attrHandle;a.fn.extend({attr:function(e,t){return We(this,a.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){a.removeAttr(this,e)})}}),a.extend({attr:function(e,t,n){var o,i,r=e.nodeType;if(!(r===3||r===8||r===2)){if(typeof e.getAttribute>"u")return a.prop(e,t,n);if((r!==1||!a.isXMLDoc(e))&&(i=a.attrHooks[t.toLowerCase()]||(a.expr.match.bool.test(t)?no:void 0)),n!==void 0){if(n===null){a.removeAttr(e,t);return}return i&&"set"in i&&(o=i.set(e,n,t))!==void 0?o:(e.setAttribute(t,n+""),n)}return i&&"get"in i&&(o=i.get(e,t))!==null?o:(o=a.find.attr(e,t),o??void 0)}},attrHooks:{type:{set:function(e,t){if(!N.radioValue&&t==="radio"&&ce(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,o=0,i=t&&t.match(he);if(i&&e.nodeType===1)for(;n=i[o++];)e.removeAttribute(n)}}),no={set:function(e,t,n){return t===!1?a.removeAttr(e,n):e.setAttribute(n,n),n}},a.each(a.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ya[t]||a.find.attr;ya[t]=function(o,i,r){var s,g,h=i.toLowerCase();return r||(g=ya[h],ya[h]=s,s=n(o,i,r)!=null?h:null,ya[h]=g),s}});var Bo=/^(?:input|select|textarea|button)$/i,zo=/^(?:a|area)$/i;a.fn.extend({prop:function(e,t){return We(this,a.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[a.propFix[e]||e]})}}),a.extend({prop:function(e,t,n){var o,i,r=e.nodeType;if(!(r===3||r===8||r===2))return(r!==1||!a.isXMLDoc(e))&&(t=a.propFix[t]||t,i=a.propHooks[t]),n!==void 0?i&&"set"in i&&(o=i.set(e,n,t))!==void 0?o:e[t]=n:i&&"get"in i&&(o=i.get(e,t))!==null?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=a.find.attr(e,"tabindex");return t?parseInt(t,10):Bo.test(e.nodeName)||zo.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),N.optSelected||(a.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),a.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){a.propFix[this.toLowerCase()]=this});function ta(e){var t=e.match(he)||[];return t.join(" ")}function na(e){return e.getAttribute&&e.getAttribute("class")||""}function qa(e){return Array.isArray(e)?e:typeof e=="string"?e.match(he)||[]:[]}a.fn.extend({addClass:function(e){var t,n,o,i,r,s;return D(e)?this.each(function(g){a(this).addClass(e.call(this,g,na(this)))}):(t=qa(e),t.length?this.each(function(){if(o=na(this),n=this.nodeType===1&&" "+ta(o)+" ",n){for(r=0;r<t.length;r++)i=t[r],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=ta(n),o!==s&&this.setAttribute("class",s)}}):this)},removeClass:function(e){var t,n,o,i,r,s;return D(e)?this.each(function(g){a(this).removeClass(e.call(this,g,na(this)))}):arguments.length?(t=qa(e),t.length?this.each(function(){if(o=na(this),n=this.nodeType===1&&" "+ta(o)+" ",n){for(r=0;r<t.length;r++)for(i=t[r];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=ta(n),o!==s&&this.setAttribute("class",s)}}):this):this.attr("class","")},toggleClass:function(e,t){var n,o,i,r,s=typeof e,g=s==="string"||Array.isArray(e);return D(e)?this.each(function(h){a(this).toggleClass(e.call(this,h,na(this),t),t)}):typeof t=="boolean"&&g?t?this.addClass(e):this.removeClass(e):(n=qa(e),this.each(function(){if(g)for(r=a(this),i=0;i<n.length;i++)o=n[i],r.hasClass(o)?r.removeClass(o):r.addClass(o);else(e===void 0||s==="boolean")&&(o=na(this),o&&H.set(this,"__className__",o),this.setAttribute&&this.setAttribute("class",o||e===!1?"":H.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,o=0;for(t=" "+e+" ";n=this[o++];)if(n.nodeType===1&&(" "+ta(na(n))+" ").indexOf(t)>-1)return!0;return!1}});var qo=/\r/g;a.fn.extend({val:function(e){var t,n,o,i=this[0];return arguments.length?(o=D(e),this.each(function(r){var s;this.nodeType===1&&(o?s=e.call(this,r,a(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":Array.isArray(s)&&(s=a.map(s,function(g){return g==null?"":g+""})),t=a.valHooks[this.type]||a.valHooks[this.nodeName.toLowerCase()],(!t||!("set"in t)||t.set(this,s,"value")===void 0)&&(this.value=s))})):i?(t=a.valHooks[i.type]||a.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==void 0?n:(n=i.value,typeof n=="string"?n.replace(qo,""):n??"")):void 0}}),a.extend({valHooks:{option:{get:function(e){var t=a.find.attr(e,"value");return t??ta(a.text(e))}},select:{get:function(e){var t,n,o,i=e.options,r=e.selectedIndex,s=e.type==="select-one",g=s?null:[],h=s?r+1:i.length;for(r<0?o=h:o=s?r:0;o<h;o++)if(n=i[o],(n.selected||o===r)&&!n.disabled&&(!n.parentNode.disabled||!ce(n.parentNode,"optgroup"))){if(t=a(n).val(),s)return t;g.push(t)}return g},set:function(e,t){for(var n,o,i=e.options,r=a.makeArray(t),s=i.length;s--;)o=i[s],(o.selected=a.inArray(a.valHooks.option.get(o),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),a.each(["radio","checkbox"],function(){a.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=a.inArray(a(e).val(),t)>-1}},N.checkOn||(a.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var ba=u.location,ao={guid:Date.now()},Na=/\?/;a.parseXML=function(e){var t,n;if(!e||typeof e!="string")return null;try{t=new u.DOMParser().parseFromString(e,"text/xml")}catch{}return n=t&&t.getElementsByTagName("parsererror")[0],(!t||n)&&a.error("Invalid XML: "+(n?a.map(n.childNodes,function(o){return o.textContent}).join(`
`):e)),t};var oo=/^(?:focusinfocus|focusoutblur)$/,io=function(e){e.stopPropagation()};a.extend(a.event,{trigger:function(e,t,n,o){var i,r,s,g,h,k,q,R,O=[n||F],oe=_.call(e,"type")?e.type:e,Ze=_.call(e,"namespace")?e.namespace.split("."):[];if(r=R=s=n=n||F,!(n.nodeType===3||n.nodeType===8)&&!oo.test(oe+a.event.triggered)&&(oe.indexOf(".")>-1&&(Ze=oe.split("."),oe=Ze.shift(),Ze.sort()),h=oe.indexOf(":")<0&&"on"+oe,e=e[a.expando]?e:new a.Event(oe,typeof e=="object"&&e),e.isTrigger=o?2:3,e.namespace=Ze.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+Ze.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=t==null?[e]:a.makeArray(t,[e]),q=a.event.special[oe]||{},!(!o&&q.trigger&&q.trigger.apply(n,t)===!1))){if(!o&&!q.noBubble&&!W(n)){for(g=q.delegateType||oe,oo.test(g+oe)||(r=r.parentNode);r;r=r.parentNode)O.push(r),s=r;s===(n.ownerDocument||F)&&O.push(s.defaultView||s.parentWindow||u)}for(i=0;(r=O[i++])&&!e.isPropagationStopped();)R=r,e.type=i>1?g:q.bindType||oe,k=(H.get(r,"events")||Object.create(null))[e.type]&&H.get(r,"handle"),k&&k.apply(r,t),k=h&&r[h],k&&k.apply&&U(r)&&(e.result=k.apply(r,t),e.result===!1&&e.preventDefault());return e.type=oe,!o&&!e.isDefaultPrevented()&&(!q._default||q._default.apply(O.pop(),t)===!1)&&U(n)&&h&&D(n[oe])&&!W(n)&&(s=n[h],s&&(n[h]=null),a.event.triggered=oe,e.isPropagationStopped()&&R.addEventListener(oe,io),n[oe](),e.isPropagationStopped()&&R.removeEventListener(oe,io),a.event.triggered=void 0,s&&(n[h]=s)),e.result}},simulate:function(e,t,n){var o=a.extend(new a.Event,n,{type:e,isSimulated:!0});a.event.trigger(o,null,t)}}),a.fn.extend({trigger:function(e,t){return this.each(function(){a.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return a.event.trigger(e,t,n,!0)}});var No=/\[\]$/,d=/\r?\n/g,V=/^(?:submit|button|image|reset|file)$/i,P=/^(?:input|select|textarea|keygen)/i;function te(e,t,n,o){var i;if(Array.isArray(t))a.each(t,function(r,s){n||No.test(e)?o(e,s):te(e+"["+(typeof s=="object"&&s!=null?r:"")+"]",s,n,o)});else if(!n&&me(t)==="object")for(i in t)te(e+"["+i+"]",t[i],n,o);else o(e,t)}a.param=function(e,t){var n,o=[],i=function(r,s){var g=D(s)?s():s;o[o.length]=encodeURIComponent(r)+"="+encodeURIComponent(g??"")};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!a.isPlainObject(e))a.each(e,function(){i(this.name,this.value)});else for(n in e)te(n,e[n],t,i);return o.join("&")},a.fn.extend({serialize:function(){return a.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=a.prop(this,"elements");return e?a.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!a(this).is(":disabled")&&P.test(this.nodeName)&&!V.test(e)&&(this.checked||!St.test(e))}).map(function(e,t){var n=a(this).val();return n==null?null:Array.isArray(n)?a.map(n,function(o){return{name:t.name,value:o.replace(d,`\r
`)}}):{name:t.name,value:n.replace(d,`\r
`)}}).get()}});var ve=/%20/g,it=/#.*$/,ut=/([?&])_=[^&]*/,Ue=/^(.*?):[ \t]*([^\r\n]*)$/mg,un=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,dn=/^(?:GET|HEAD)$/,la=/^\/\//,_a={},$o={},vi="*/".concat("*"),jo=F.createElement("a");jo.href=ba.href;function hi(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var o,i=0,r=t.toLowerCase().match(he)||[];if(D(n))for(;o=r[i++];)o[0]==="+"?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(n)):(e[o]=e[o]||[]).push(n)}}function mi(e,t,n,o){var i={},r=e===$o;function s(g){var h;return i[g]=!0,a.each(e[g]||[],function(k,q){var R=q(t,n,o);if(typeof R=="string"&&!r&&!i[R])return t.dataTypes.unshift(R),s(R),!1;if(r)return!(h=R)}),h}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Ro(e,t){var n,o,i=a.ajaxSettings.flatOptions||{};for(n in t)t[n]!==void 0&&((i[n]?e:o||(o={}))[n]=t[n]);return o&&a.extend(!0,e,o),e}function pr(e,t,n){for(var o,i,r,s,g=e.contents,h=e.dataTypes;h[0]==="*";)h.shift(),o===void 0&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o){for(i in g)if(g[i]&&g[i].test(o)){h.unshift(i);break}}if(h[0]in n)r=h[0];else{for(i in n){if(!h[0]||e.converters[i+" "+h[0]]){r=i;break}s||(s=i)}r=r||s}if(r)return r!==h[0]&&h.unshift(r),n[r]}function vr(e,t,n,o){var i,r,s,g,h,k={},q=e.dataTypes.slice();if(q[1])for(s in e.converters)k[s.toLowerCase()]=e.converters[s];for(r=q.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!h&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),h=r,r=q.shift(),r){if(r==="*")r=h;else if(h!=="*"&&h!==r){if(s=k[h+" "+r]||k["* "+r],!s){for(i in k)if(g=i.split(" "),g[1]===r&&(s=k[h+" "+g[0]]||k["* "+g[0]],s)){s===!0?s=k[i]:k[i]!==!0&&(r=g[0],q.unshift(g[1]));break}}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(R){return{state:"parsererror",error:s?R:"No conversion from "+h+" to "+r}}}}return{state:"success",data:t}}a.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ba.href,type:"GET",isLocal:un.test(ba.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":a.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ro(Ro(e,a.ajaxSettings),t):Ro(a.ajaxSettings,e)},ajaxPrefilter:hi(_a),ajaxTransport:hi($o),ajax:function(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};var n,o,i,r,s,g,h,k,q,R,O=a.ajaxSetup({},t),oe=O.context||O,Ze=O.context&&(oe.nodeType||oe.jquery)?a(oe):a.event,Ct=a.Deferred(),rt=a.Callbacks("once memory"),fn=O.statusCode||{},an={},Zn={},Un="canceled",gt={readyState:0,getResponseHeader:function(Mt){var Ut;if(h){if(!r)for(r={};Ut=Ue.exec(i);)r[Ut[1].toLowerCase()+" "]=(r[Ut[1].toLowerCase()+" "]||[]).concat(Ut[2]);Ut=r[Mt.toLowerCase()+" "]}return Ut==null?null:Ut.join(", ")},getAllResponseHeaders:function(){return h?i:null},setRequestHeader:function(Mt,Ut){return h==null&&(Mt=Zn[Mt.toLowerCase()]=Zn[Mt.toLowerCase()]||Mt,an[Mt]=Ut),this},overrideMimeType:function(Mt){return h==null&&(O.mimeType=Mt),this},statusCode:function(Mt){var Ut;if(Mt)if(h)gt.always(Mt[gt.status]);else for(Ut in Mt)fn[Ut]=[fn[Ut],Mt[Ut]];return this},abort:function(Mt){var Ut=Mt||Un;return n&&n.abort(Ut),wa(0,Ut),this}};if(Ct.promise(gt),O.url=((e||O.url||ba.href)+"").replace(la,ba.protocol+"//"),O.type=t.method||t.type||O.method||O.type,O.dataTypes=(O.dataType||"*").toLowerCase().match(he)||[""],O.crossDomain==null){g=F.createElement("a");try{g.href=O.url,g.href=g.href,O.crossDomain=jo.protocol+"//"+jo.host!=g.protocol+"//"+g.host}catch{O.crossDomain=!0}}if(O.data&&O.processData&&typeof O.data!="string"&&(O.data=a.param(O.data,O.traditional)),mi(_a,O,t,gt),h)return gt;k=a.event&&O.global,k&&a.active++===0&&a.event.trigger("ajaxStart"),O.type=O.type.toUpperCase(),O.hasContent=!dn.test(O.type),o=O.url.replace(it,""),O.hasContent?O.data&&O.processData&&(O.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(O.data=O.data.replace(ve,"+")):(R=O.url.slice(o.length),O.data&&(O.processData||typeof O.data=="string")&&(o+=(Na.test(o)?"&":"?")+O.data,delete O.data),O.cache===!1&&(o=o.replace(ut,"$1"),R=(Na.test(o)?"&":"?")+"_="+ao.guid+++R),O.url=o+R),O.ifModified&&(a.lastModified[o]&&gt.setRequestHeader("If-Modified-Since",a.lastModified[o]),a.etag[o]&&gt.setRequestHeader("If-None-Match",a.etag[o])),(O.data&&O.hasContent&&O.contentType!==!1||t.contentType)&&gt.setRequestHeader("Content-Type",O.contentType),gt.setRequestHeader("Accept",O.dataTypes[0]&&O.accepts[O.dataTypes[0]]?O.accepts[O.dataTypes[0]]+(O.dataTypes[0]!=="*"?", "+vi+"; q=0.01":""):O.accepts["*"]);for(q in O.headers)gt.setRequestHeader(q,O.headers[q]);if(O.beforeSend&&(O.beforeSend.call(oe,gt,O)===!1||h))return gt.abort();if(Un="abort",rt.add(O.complete),gt.done(O.success),gt.fail(O.error),n=mi($o,O,t,gt),!n)wa(-1,"No Transport");else{if(gt.readyState=1,k&&Ze.trigger("ajaxSend",[gt,O]),h)return gt;O.async&&O.timeout>0&&(s=u.setTimeout(function(){gt.abort("timeout")},O.timeout));try{h=!1,n.send(an,wa)}catch(Mt){if(h)throw Mt;wa(-1,Mt)}}function wa(Mt,Ut,ja,Go){var Xn,Ra,Yn,sa,ua,On=Ut;h||(h=!0,s&&u.clearTimeout(s),n=void 0,i=Go||"",gt.readyState=Mt>0?4:0,Xn=Mt>=200&&Mt<300||Mt===304,ja&&(sa=pr(O,gt,ja)),!Xn&&a.inArray("script",O.dataTypes)>-1&&a.inArray("json",O.dataTypes)<0&&(O.converters["text script"]=function(){}),sa=vr(O,sa,gt,Xn),Xn?(O.ifModified&&(ua=gt.getResponseHeader("Last-Modified"),ua&&(a.lastModified[o]=ua),ua=gt.getResponseHeader("etag"),ua&&(a.etag[o]=ua)),Mt===204||O.type==="HEAD"?On="nocontent":Mt===304?On="notmodified":(On=sa.state,Ra=sa.data,Yn=sa.error,Xn=!Yn)):(Yn=On,(Mt||!On)&&(On="error",Mt<0&&(Mt=0))),gt.status=Mt,gt.statusText=(Ut||On)+"",Xn?Ct.resolveWith(oe,[Ra,On,gt]):Ct.rejectWith(oe,[gt,On,Yn]),gt.statusCode(fn),fn=void 0,k&&Ze.trigger(Xn?"ajaxSuccess":"ajaxError",[gt,O,Xn?Ra:Yn]),rt.fireWith(oe,[gt,On]),k&&(Ze.trigger("ajaxComplete",[gt,O]),--a.active||a.event.trigger("ajaxStop")))}return gt},getJSON:function(e,t,n){return a.get(e,t,n,"json")},getScript:function(e,t){return a.get(e,void 0,t,"script")}}),a.each(["get","post"],function(e,t){a[t]=function(n,o,i,r){return D(o)&&(r=r||i,i=o,o=void 0),a.ajax(a.extend({url:n,type:t,dataType:r,data:o,success:i},a.isPlainObject(n)&&n))}}),a.ajaxPrefilter(function(e){var t;for(t in e.headers)t.toLowerCase()==="content-type"&&(e.contentType=e.headers[t]||"")}),a._evalUrl=function(e,t,n){return a.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(o){a.globalEval(o,t,n)}})},a.fn.extend({wrapAll:function(e){var t;return this[0]&&(D(e)&&(e=e.call(this[0])),t=a(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this},wrapInner:function(e){return D(e)?this.each(function(t){a(this).wrapInner(e.call(this,t))}):this.each(function(){var t=a(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=D(e);return this.each(function(n){a(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){a(this).replaceWith(this.childNodes)}),this}}),a.expr.pseudos.hidden=function(e){return!a.expr.pseudos.visible(e)},a.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},a.ajaxSettings.xhr=function(){try{return new u.XMLHttpRequest}catch{}};var hr={0:200,1223:204},$a=a.ajaxSettings.xhr();N.cors=!!$a&&"withCredentials"in $a,N.ajax=$a=!!$a,a.ajaxTransport(function(e){var t,n;if(N.cors||$a&&!e.crossDomain)return{send:function(o,i){var r,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!o["X-Requested-With"]&&(o["X-Requested-With"]="XMLHttpRequest");for(r in o)s.setRequestHeader(r,o[r]);t=function(g){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,g==="abort"?s.abort():g==="error"?typeof s.status!="number"?i(0,"error"):i(s.status,s.statusText):i(hr[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),s.onabort!==void 0?s.onabort=n:s.onreadystatechange=function(){s.readyState===4&&u.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(g){if(t)throw g}},abort:function(){t&&t()}}}),a.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),a.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return a.globalEval(e),e}}}),a.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),a.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(o,i){t=a("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(r){t.remove(),n=null,r&&i(r.type==="error"?404:200,r.type)}),F.head.appendChild(t[0])},abort:function(){n&&n()}}}});var gi=[],Wo=/(=)\?(?=&|$)|\?\?/;a.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=gi.pop()||a.expando+"_"+ao.guid++;return this[e]=!0,e}}),a.ajaxPrefilter("json jsonp",function(e,t,n){var o,i,r,s=e.jsonp!==!1&&(Wo.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Wo.test(e.data)&&"data");if(s||e.dataTypes[0]==="jsonp")return o=e.jsonpCallback=D(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Wo,"$1"+o):e.jsonp!==!1&&(e.url+=(Na.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||a.error(o+" was not called"),r[0]},e.dataTypes[0]="json",i=u[o],u[o]=function(){r=arguments},n.always(function(){i===void 0?a(u).removeProp(o):u[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,gi.push(o)),r&&D(i)&&i(r[0]),r=i=void 0}),"script"}),N.createHTMLDocument=function(){var e=F.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),a.parseHTML=function(e,t,n){if(typeof e!="string")return[];typeof t=="boolean"&&(n=t,t=!1);var o,i,r;return t||(N.createHTMLDocument?(t=F.implementation.createHTMLDocument(""),o=t.createElement("base"),o.href=F.location.href,t.head.appendChild(o)):t=F),i=bt.exec(e),r=!n&&[],i?[t.createElement(i[1])]:(i=Kn([e],t,r),r&&r.length&&a(r).remove(),a.merge([],i.childNodes))},a.fn.load=function(e,t,n){var o,i,r,s=this,g=e.indexOf(" ");return g>-1&&(o=ta(e.slice(g)),e=e.slice(0,g)),D(t)?(n=t,t=void 0):t&&typeof t=="object"&&(i="POST"),s.length>0&&a.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(h){r=arguments,s.html(o?a("<div>").append(a.parseHTML(h)).find(o):h)}).always(n&&function(h,k){s.each(function(){n.apply(this,r||[h.responseText,k,h])})}),this},a.expr.pseudos.animated=function(e){return a.grep(a.timers,function(t){return e===t.elem}).length},a.offset={setOffset:function(e,t,n){var o,i,r,s,g,h,k,q=a.css(e,"position"),R=a(e),O={};q==="static"&&(e.style.position="relative"),g=R.offset(),r=a.css(e,"top"),h=a.css(e,"left"),k=(q==="absolute"||q==="fixed")&&(r+h).indexOf("auto")>-1,k?(o=R.position(),s=o.top,i=o.left):(s=parseFloat(r)||0,i=parseFloat(h)||0),D(t)&&(t=t.call(e,n,a.extend({},g))),t.top!=null&&(O.top=t.top-g.top+s),t.left!=null&&(O.left=t.left-g.left+i),"using"in t?t.using.call(e,O):R.css(O)}},a.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(i){a.offset.setOffset(this,e,i)});var t,n,o=this[0];if(o)return o.getClientRects().length?(t=o.getBoundingClientRect(),n=o.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,o=this[0],i={top:0,left:0};if(a.css(o,"position")==="fixed")t=o.getBoundingClientRect();else{for(t=this.offset(),n=o.ownerDocument,e=o.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&a.css(e,"position")==="static";)e=e.parentNode;e&&e!==o&&e.nodeType===1&&(i=a(e).offset(),i.top+=a.css(e,"borderTopWidth",!0),i.left+=a.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-a.css(o,"marginTop",!0),left:t.left-i.left-a.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&a.css(e,"position")==="static";)e=e.offsetParent;return e||$e})}}),a.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=t==="pageYOffset";a.fn[e]=function(o){return We(this,function(i,r,s){var g;if(W(i)?g=i:i.nodeType===9&&(g=i.defaultView),s===void 0)return g?g[t]:i[r];g?g.scrollTo(n?g.pageXOffset:s,n?s:g.pageYOffset):i[r]=s},e,o,arguments.length)}}),a.each(["top","left"],function(e,t){a.cssHooks[t]=rn(N.pixelPosition,function(n,o){if(o)return o=tn(n,t),Dt.test(o)?a(n).position()[t]+"px":o})}),a.each({Height:"height",Width:"width"},function(e,t){a.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,o){a.fn[o]=function(i,r){var s=arguments.length&&(n||typeof i!="boolean"),g=n||(i===!0||r===!0?"margin":"border");return We(this,function(h,k,q){var R;return W(h)?o.indexOf("outer")===0?h["inner"+e]:h.document.documentElement["client"+e]:h.nodeType===9?(R=h.documentElement,Math.max(h.body["scroll"+e],R["scroll"+e],h.body["offset"+e],R["offset"+e],R["client"+e])):q===void 0?a.css(h,k,g):a.style(h,k,q,g)},t,s?i:void 0,s)}})}),a.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){a.fn[t]=function(n){return this.on(t,n)}}),a.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),a.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){a.fn[t]=function(n,o){return arguments.length>0?this.on(t,null,n,o):this.trigger(t)}});var mr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;a.proxy=function(e,t){var n,o,i;if(typeof t=="string"&&(n=e[t],t=e,e=n),!!D(e))return o=S.call(arguments,2),i=function(){return e.apply(t||this,o.concat(S.call(arguments)))},i.guid=e.guid=e.guid||a.guid++,i},a.holdReady=function(e){e?a.readyWait++:a.ready(!0)},a.isArray=Array.isArray,a.parseJSON=JSON.parse,a.nodeName=ce,a.isFunction=D,a.isWindow=W,a.camelCase=ue,a.type=me,a.now=Date.now,a.isNumeric=function(e){var t=a.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))},a.trim=function(e){return e==null?"":(e+"").replace(mr,"$1")};var gr=u.jQuery,yr=u.$;return a.noConflict=function(e){return u.$===a&&(u.$=yr),e&&u.jQuery===a&&(u.jQuery=gr),a},typeof b>"u"&&(u.jQuery=u.$=a),a})})(ar);var vu=ar.exports;const ai=dl(vu),hu=Rt(),{curComponentIndex:po,curComponent:mu}=$t(hu),gu=Di("layer",{actions:{upComponent(c){const u=Da(c);if(u){const{index:b,componentData:p}=u;b<p.length-1&&(Ci(p,b,b+1),po.value=b+1)}},downComponent(c){const u=Da(c);if(u){const{index:b,componentData:p}=u;b>0&&(Ci(p,b,b-1),po.value=b-1)}},topComponent(c){const u=Da(c);if(u){const{index:b,componentData:p,targetComponent:E}=u;b<p.length-1&&(p.splice(b,1),p.push(E),po.value=p.length-1)}},bottomComponent(c){const u=Da(c);if(u){const{index:b,componentData:p,targetComponent:E}=u;b>0&&(p.splice(b,1),p.unshift(E),po.value=0)}},hideComponentWithComponent(c){const u=Ga(c);u&&(u.isShow=!1)},hideComponent(c){const u=Ga(c);u&&(u.isShow=!1)},showComponent(c){var b,p;const u=Ga(c);u&&(u.isShow=!0,u.component=="Group"?u.propValue.forEach(E=>{var S,C;(((S=E.innerType)==null?void 0:S.indexOf("table"))!==-1||((C=E==null?void 0:E.innerType)==null?void 0:C.indexOf("map"))!==-1)&&setTimeout(()=>{yt().emitter.emit("renderChart-"+E.id)},400)}):(((b=u==null?void 0:u.innerType)==null?void 0:b.indexOf("table"))!==-1||((p=u==null?void 0:u.innerType)==null?void 0:p.indexOf("map"))!==-1)&&setTimeout(()=>{yt().emitter.emit("renderChart-"+mu.value.id)},400))},pausedTooltipCarousel(c){Ga(c)&&ha.paused(c)},resumeTooltipCarousel(c){Ga(c)&&ha.resume(c)}}}),yu=()=>gu(Li),bu=vt({__name:"ContextMenuDetails",props:{activePosition:{type:String,default:"canvas"}},emits:["close","rename"],setup(c,{emit:u}){const b=Rt(),p=zi(),E=Wr(),S=ra(),C=yu(),m=Mo(),{areaData:v}=$t(m),{curComponent:y,componentData:I}=$t(b),_=u,{emitter:M}=yt(),Q=c,{activePosition:N}=on(Q),{t:D}=In(),W=z(()=>I.value.filter(se=>se.category==="hidden").length),F=()=>{y.value&&!xe.value?E.lock():v.value.components.length&&v.value.components.forEach(se=>{E.lock(se)}),S.recordSnapshotCache("lock"),me("lock")},ge=()=>{y.value&&!xe.value?E.unlock():v.value.components.length&&v.value.components.forEach(se=>{E.unlock(se)}),me("unlock")},Be=()=>{b.setClickComponentStatus(!0),N.value==="aside"&&_("close")},me=se=>{const ke={opt:se};N.value==="aside"&&_("close",ke)},be=()=>{if(y.value){const se=Da();p.cut(se.componentData)}else v.value.components.length&&p.cut();me("cut")},fe=()=>{p.copy(),me("copy")},a=()=>{y.value&&!xe.value?C.hideComponentWithComponent():v.value.components.length&&v.value.components.forEach(se=>{C.hideComponentWithComponent(se.id)}),S.recordSnapshotCache("hide"),me("hide")},Le=()=>{y.value&&!xe.value?C.showComponent():v.value.components.length&&v.value.components.forEach(se=>{C.showComponent(se.id)}),S.recordSnapshotCache("show"),me("show")},ce=z(()=>{var se,ke;return((se=y==null?void 0:y.value)==null?void 0:se.canvasId)==="canvas-main"&&(y==null?void 0:y.value.category)==="base"&&((ke=y.value)==null?void 0:ke.component)==="VQuery"&&W.value===0}),Ve=se=>{y.value&&(S.recordSnapshotCache("categoryChange"),y.value.category=se,se==="hidden"&&b.canvasStateChange({key:"curPointArea",value:"hidden"}))},Ge=()=>{_("rename"),me("rename")},De=()=>{p.paste(!0),S.recordSnapshotCache("renderChart"),me("paste")},$=()=>{var se;if(y.value&&!xe.value){const ke=Da();b.deleteComponentById((se=y.value)==null?void 0:se.id,ke.componentData)}else v.value.components.length&&v.value.components.forEach(ke=>{b.deleteComponentById(ke.id)});Te.emit("hideArea-canvas-main"),S.recordSnapshotCache("deleteComponent"),me("deleteComponent")},Ee=()=>{y.value&&!xe.value?C.upComponent(y.value.id):v.value.components.length&&(fo(v.value.components),v.value.components.forEach(se=>{C.upComponent(se.id)})),S.recordSnapshotCache("upComponent"),me("upComponent")},ye=()=>{y.value&&!xe.value?C.downComponent(y.value.id):v.value.components.length&&(fo(v.value.components,"top"),v.value.components.forEach(se=>{C.downComponent(se.id)})),S.recordSnapshotCache("downComponent"),me("downComponent")},Oe=()=>{y.value&&!xe.value?C.topComponent(y.value.id):v.value.components.length&&(fo(v.value.components,"top"),v.value.components.forEach(se=>{C.topComponent(se.id)})),S.recordSnapshotCache("topComponent"),me("topComponent")},ze=()=>{y.value&&!xe.value?C.bottomComponent(y.value.id):v.value.components.length&&(fo(v.value.components),v.value.components.forEach(se=>{C.bottomComponent(se.id)})),S.recordSnapshotCache("bottomComponent"),me("bottomComponent")},Ke=()=>{Te.emit("tabSort")},et=()=>{m.compose(),S.recordSnapshotCache("componentCompose"),me("componentCompose")},ht=()=>{m.decompose(),S.recordSnapshotCache("decompose"),me("decompose")},nt=se=>{m.alignment(se),S.recordSnapshotCache("decompose")},bt=se=>{se.preventDefault(),se.stopPropagation()},Z=z(()=>!(!y||y.isLock||y.component!="Group"||y.category==="hidden")),xe=z(()=>{var se;return((se=y.value)==null?void 0:se.component)==="GroupArea"}),Ie=()=>{M.emit(`editQueryCriteria${y.value.id}`)};return(se,ke)=>{const Me=Xa("ArrowRight"),re=Sn,he=Vo,st=Do,Re=Po;return x(),ee("div",{class:"context-menu-base context-menu-details",onMousedown:bt},[G("ul",{onMouseup:Be},[l(v).components.length?(x(),ee(Bt,{key:0},[G("li",{onMousedown:bt,onClick:et},_e(l(D)("visualization.view_group")),33),T(Re,{style:{width:"100%"},trigger:"hover",effect:"dark",placement:"right-start",teleported:!1,"popper-class":"context-menu-details"},{dropdown:A(()=>[T(st,null,{default:A(()=>[T(he,{style:{width:"118px"},onClick:ke[0]||(ke[0]=at=>nt("left"))},{default:A(()=>[Qe(_e(l(D)("visualization.left_justifying")),1)]),_:1}),T(he,{style:{width:"118px"},onClick:ke[1]||(ke[1]=at=>nt("right"))},{default:A(()=>[Qe(_e(l(D)("visualization.right_justifying")),1)]),_:1}),T(he,{onClick:ke[2]||(ke[2]=at=>nt("top"))},{default:A(()=>[Qe(_e(l(D)("visualization.top_justifying")),1)]),_:1}),T(he,{onClick:ke[3]||(ke[3]=at=>nt("bottom"))},{default:A(()=>[Qe(_e(l(D)("visualization.bottom_justifying")),1)]),_:1}),T(he,{onClick:ke[4]||(ke[4]=at=>nt("transverse"))},{default:A(()=>[Qe(_e(l(D)("visualization.horizontally_centered")),1)]),_:1}),T(he,{onClick:ke[5]||(ke[5]=at=>nt("direction"))},{default:A(()=>[Qe(_e(l(D)("visualization.vertically_centered")),1)]),_:1})]),_:1})]),default:A(()=>[G("li",null,[G("div",null,[G("span",null,_e(l(D)("visualization.alignment")),1),T(re,null,{default:A(()=>[T(Me)]),_:1})])])]),_:1}),T(l(da),{class:"custom-divider"}),G("li",{onClick:fe},_e(l(D)("visualization.copy")),1),G("li",{onClick:De},_e(l(D)("visualization.paste")),1),G("li",{onClick:be},_e(l(D)("visualization.cut")),1),T(l(da),{class:"custom-divider"}),G("li",{onClick:$},_e(l(D)("visualization.delete")),1)],64)):(x(),ee(Bt,{key:1},[Ft(G("li",{onClick:ke[6]||(ke[6]=at=>ht())},_e(l(D)("visualization.cancel_group")),513),[[Kt,!(!l(y)||l(y).isLock||l(y).component!="Group")]]),Ft(T(l(da),{class:"custom-divider"},null,512),[[Kt,Z.value]]),l(y)?(x(),ee(Bt,{key:0},[!l(y).isLock&&l(y).category==="hidden"?(x(),ee(Bt,{key:0},[G("li",{onClick:ke[7]||(ke[7]=at=>Ve("base"))},_e(l(D)("visualization.move_to_screen_show")),1),G("li",{onClick:Ie},_e(l(D)("visualization.edit")),1),l(N)==="aside"?(x(),ee("li",{key:0,onClick:Ge},_e(l(D)("visualization.rename")),1)):ae("",!0),G("li",{onClick:fe},_e(l(D)("visualization.copy")),1),G("li",{onClick:De},_e(l(D)("visualization.paste")),1),T(l(da),{class:"custom-divider"}),G("li",{onClick:$},_e(l(D)("visualization.delete")),1)],64)):ae("",!0),!l(y).isLock&&l(y).category!=="hidden"?(x(),ee(Bt,{key:1},[l(y).component==="VQuery"?(x(),ee("li",{key:0,onClick:Ie},_e(l(D)("visualization.edit")),1)):ae("",!0),G("li",{onClick:Ee},_e(l(D)("visualization.up_component")),1),G("li",{onClick:ye},_e(l(D)("visualization.down_component")),1),G("li",{onClick:Oe},_e(l(D)("visualization.top_component")),1),G("li",{onClick:ze},_e(l(D)("visualization.bottom_component")),1),l(y).component==="DeTabs"?(x(),ee("li",{key:1,onClick:Ke},_e(l(D)("visualization.sort")),1)):ae("",!0),T(l(Ha),{chart:l(y),"is-screen":"","resource-table":"snapshot",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9FZGl0QmFySGFuZGxlcg=="},null,8,["chart"]),Ft(G("li",{onClick:ke[8]||(ke[8]=at=>Ve("hidden"))},_e(l(D)("visualization.move_to_pop_area")),513),[[Kt,ce.value]]),T(l(da),{class:"custom-divider"}),Ft(G("li",{onClick:a},_e(l(D)("visualization.hidden")),513),[[Kt,l(y).isShow]]),Ft(G("li",{onClick:Le},_e(l(D)("visualization.cancel_hidden")),513),[[Kt,!l(y).isShow||xe.value]]),G("li",{onClick:F},_e(l(D)("visualization.lock")),1),l(y).isLock||xe.value?(x(),ee("li",{key:2,onClick:ge},_e(l(D)("visualization.unlock")),1)):ae("",!0),T(l(da),{class:"custom-divider"}),l(N)==="aside"?(x(),ee("li",{key:3,onClick:Ge},_e(l(D)("visualization.rename")),1)):ae("",!0),G("li",{onClick:fe},_e(l(D)("visualization.copy")),1),G("li",{onClick:De},_e(l(D)("visualization.paste")),1),G("li",{onClick:be},_e(l(D)("visualization.cut")),1),T(l(da),{class:"custom-divider"}),G("li",{onClick:$},_e(l(D)("visualization.delete")),1)],64)):ae("",!0),l(y).isLock?(x(),ee("li",{key:2,onClick:ge},_e(l(D)("visualization.unlock")),1)):ae("",!0)],64)):!l(y)&&!l(v).components.length?(x(),ee("li",{key:1,onClick:De},_e(l(D)("visualization.paste")),1)):ae("",!0)],64))],32)],32)}}});const _u=vt({__name:"ContextMenu",props:{showPosition:{default:"canvasCore"}},setup(c){const u=c,b=si(),{menuTop:p,menuLeft:E,menuShow:S,position:C}=$t(b),m=z(()=>S.value&&u.showPosition===C.value);return(v,y)=>Ft((x(),le(bu,{class:"contextmenu",style:ct({top:l(p)+"px",left:l(E)+"px"})},null,8,["style"])),[[Kt,m.value]])}});const wu=Vt(_u,[["__scopeId","data-v-cc4f9e43"]]),Cu={class:"mark-line",id:"canvas-mark-line"},xu=vt({__name:"MarkLine",setup(c){const u=J(["xt","xc","xb","yl","yc","yr"]),b=J(3),p=J({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),E=Rt(),{curComponent:S,componentData:C}=$t(E);let m;const v=()=>{Object.keys(p.value).forEach(Q=>{p.value[Q]=!1})},y=(Q,N)=>{const D=m.proxy.$refs,W=C.value,F=yo(S.value.style),ge=F.width/2,Be=F.height/2;v(),W.forEach(me=>{try{if(me===S.value)return;const be=yo(me.style),{top:fe,left:a,bottom:Le,right:ce}=be,Ve=be.width/2,Ge=be.height/2,De={top:[{isNearly:M(F.top,fe),lineNode:D.xt[0],line:"xt",dragShift:fe,lineShift:fe},{isNearly:M(F.bottom,fe),lineNode:D.xt[0],line:"xt",dragShift:fe-F.height,lineShift:fe},{isNearly:M(F.top+Be,fe+Ge),lineNode:D.xc[0],line:"xc",dragShift:fe+Ge-Be,lineShift:fe+Ge},{isNearly:M(F.top,Le),lineNode:D.xb[0],line:"xb",dragShift:Le,lineShift:Le},{isNearly:M(F.bottom,Le),lineNode:D.xb[0],line:"xb",dragShift:Le-F.height,lineShift:Le}],left:[{isNearly:M(F.left,a),lineNode:D.yl[0],line:"yl",dragShift:a,lineShift:a},{isNearly:M(F.right,a),lineNode:D.yl[0],line:"yl",dragShift:a-F.width,lineShift:a},{isNearly:M(F.left+ge,a+Ve),lineNode:D.yc[0],line:"yc",dragShift:a+Ve-ge,lineShift:a+Ve},{isNearly:M(F.left,ce),lineNode:D.yr[0],line:"yr",dragShift:ce,lineShift:ce},{isNearly:M(F.right,ce),lineNode:D.yr[0],line:"yr",dragShift:ce-F.width,lineShift:ce}]},$=[],{rotate:Ee}=S.value.style;De&&Object.keys(De).forEach(ye=>{De[ye]&&De[ye].forEach(Oe=>{Oe.isNearly&&(E.setShapeSingleStyle({key:ye,value:Ee!=0?I(ye,Oe,F):Oe.dragShift}),Oe.lineNode&&(Oe.lineNode.style[ye]=`${Oe.lineShift}px`),$.push(Oe.line))})}),$.length&&_($,Q,N)}catch{console.warn("markLine disabled")}})},I=(Q,N,D)=>{const{width:W,height:F}=S.value.style;return Q=="top"?Math.round(N.dragShift-(F-D.height)/2):Math.round(N.dragShift-(W-D.width)/2)},_=(Q,N,D)=>{D?Q.includes("yr")?p.value.yr=!0:Q.includes("yc")?p.value.yc=!0:Q.includes("yl")&&(p.value.yl=!0):Q.includes("yl")?p.value.yl=!0:Q.includes("yc")?p.value.yc=!0:Q.includes("yr")&&(p.value.yr=!0),N?Q.includes("xb")?p.value.xb=!0:Q.includes("xc")?p.value.xc=!0:Q.includes("xt")&&(p.value.xt=!0):Q.includes("xt")?p.value.xt=!0:Q.includes("xc")?p.value.xc=!0:Q.includes("xb")&&(p.value.xb=!0)},M=(Q,N)=>Math.abs(Q-N)<=b.value;return gn(()=>{m=ri(),Te.on("move",({isDownward:Q,isRightward:N})=>{y(Q,N)}),Te.on("unMove",()=>{v()})}),(Q,N)=>(x(),ee("div",Cu,[(x(!0),ee(Bt,null,kn(u.value,D=>Ft((x(),ee("div",{key:D,ref_for:!0,ref:D,class:Ht(["line",D.includes("x")?"xLine":"yLine"])},null,2)),[[Kt,p.value[D]||!1]])),128))]))}});const Su=Vt(xu,[["__scopeId","data-v-415f4511"]]),ku=vt({__name:"Area",props:{start:{type:Object,default(){return{x:null,y:null}}},width:{type:Number,default:0},height:{type:Number,default:0}},setup(c){const u=c,{start:b,width:p,height:E}=on(u);return(S,C)=>{var m,v;return x(),ee("div",{style:ct({left:((m=l(b))==null?void 0:m.x)+"px",top:((v=l(b))==null?void 0:v.y)+"px",width:l(p)+"px",height:l(E)+"px"}),class:"area"},null,4)}}});const Iu=Vt(ku,[["__scopeId","data-v-869b17df"]]),Mu=vt({__name:"DragShadow",props:{baseWidth:{required:!0,type:Number},baseHeight:{required:!0,type:Number},curGap:{required:!0,type:Number},element:{required:!0,type:Object,default(){return{component:null,propValue:null,request:null,linkage:null,type:null,events:null,style:null,id:null}}}},setup(c){const u=c,{element:b,baseWidth:p,baseHeight:E,curGap:S}=on(u),C=z(()=>{const{x:m,y:v,sizeX:y,sizeY:I}=b.value;return{padding:S.value+"px",width:y*p.value+"px",height:I*E.value+"px",left:(m-1)*p.value+"px",top:(v-1)*E.value-3+"px"}});return(m,v)=>(x(),ee("div",{class:"shadow-main",style:ct(C.value)},[...v[0]||(v[0]=[G("div",{class:"shadow-background"},null,-1)])],4))}});const Tu=Vt(Mu,[["__scopeId","data-v-f38d0bda"]]),Vu={class:"header-title"},Du={class:"export-button"},Pu=["element-loading-text"],Au={style:{flex:"1"}},Eu=vt({__name:"UserViewEnlarge",setup(c,{expose:u}){const b=J(!1),p=Rt(),E=J(!1),S=zr(),C=qr();let m=J(null);const v=J(null),y=J(null),{t:I}=In(),_=J(null),M=J(null),Q=J(null),{dvInfo:N,isIframe:D,canvasStyleData:W}=$t(p),F=J(!1),ge=J(),Be=J("left"),me=J(!1),be={render:"antv",type:"table-info",customAttr:{basicStyle:{tableColumnMode:"dialog",tablePageMode:"pull"},tableHeader:{tableHeaderBgColor:"#F8F8F9",tableHeaderFontColor:"#7C7E81"},tableCell:{tableItemBgColor:"#FFFFFF",tableFontColor:"#7C7E81",enableTableCrossBG:!1,mergeCells:!1},tooltip:{show:!1}},senior:{scrollCfg:{open:!1}},showPosition:"dialog"},fe=Bn({scale:.5,componentSourceType:null,dataFrom:null}),a={senior:{scrollCfg:{open:!1}},showPosition:"dialog"},Le=z(()=>Fi(N.value.weight,N.value.ext)),ce=z(()=>{const xe=W.value&&_.value==="enlarge"?Io(W.value,"canvas-main"):{};if(b.value){const Ie=Ve.value.split(" * ");return xe.width=Ie[0]+"px!important",xe.height=Ie[1]+"px!important",xe}else return xe}),Ve=J("1280 * 720"),Ge=[{label:"Windows(16:9)",options:[{value:"1920 * 1080",label:"1920 * 1080"},{value:"1600 * 900",label:"1600 * 900"},{value:"1280 * 720",label:"1280 * 720"}]},{label:"MacOS(16:10)",options:[{value:"2560 * 1600",label:"2560 * 1600"},{value:"1920 * 1200",label:"1920 * 1200"},{value:"1680 * 1050",label:"1680 * 1050"}]}],De=(xe,Ie,se,ke,Me={scale:.5})=>{var re;fe.scale=Me.scale,ge.value=Ie.type,me.value=!1,_.value=ke,E.value=!0,fe.componentSourceType=Ie.type,fe.dataFrom=Ie.dataFrom,m.value=va(Ie),m.value.customStyle.text.show=!1,v.value=va(se),ke==="details"&&((re=m.value.type)!=null&&re.includes("table")?Ii(m.value,a):(Ii(m.value,be),m.value.xAxis.forEach(he=>he.hide=!1),m.value.yAxis.forEach(he=>he.hide=!1)),$()),pt(()=>{bt(),ha.paused()})},$=()=>{pt(()=>{var Ie,se;const xe=p.getViewDataDetails(m.value.id);xe?ge.value.includes("chart-mix")?((Ie=M.value)==null||Ie.renderChartFromDialog(m.value,xe.left),(se=Q.value)==null||se.renderChartFromDialog(m.value,xe.right)):M.value.renderChartFromDialog(m.value,xe):me.value=!0})},Ee=xe=>{pt(()=>{var se,ke;const Ie=p.getViewDataDetails(m.value.id);xe==="left"?(se=M.value)==null||se.renderChartFromDialog(m.value,Ie.left):xe==="right"&&((ke=Q.value)==null||ke.renderChartFromDialog(m.value,Ie.right))})},ye=()=>{nt()},Oe=(xe="view")=>{const Ie=p.getViewDataDetails(m.value.id),se=p.getViewDetails(m.value.id);if(!Ie){La.error(I("chart.field_is_empty_export_error"));return}const ke=p.getLastViewRequestInfo(m.value.id),Me={...se,chartExtRequest:ke,data:Ie,type:ge.value,downloadType:xe,busiFlag:N.value.type};F.value=!0,$i(Me,N.value.name,()=>{et(Ke)}),F.value=!1},ze=()=>{const xe=p.getViewInstanceInfo(m.value.id);if(!xe)return;const Ie=p.getViewDetails(m.value.id);ji(xe,Ie)},Ke=()=>{yt().emitter.emit("data-export-center",{activeName:"IN_PROGRESS"})},et=xe=>{const Ie="el-icon-loading",se="de-message-loading de-message-export";La({message:Aa("p",null,[I("data_fill.exporting"),Aa(xn,{text:!0,size:"small",class:"btn-text",onClick:()=>{xe()}},I("data_export.export_center")),I("data_fill.progress_to_download")]),iconClass:Ie,icon:Aa(Hi),showClose:!0,customClass:se})},ht=["bubble-map","flow-map","heat-map","map","symbolic-map"],nt=()=>{var Ie;b.value=!ht.includes(m.value.type),yt().emitter.emit("renderChart-"+m.value.id),yt().emitter.emit("l7-prepare-picture",m.value.id);const xe=(Ie=m.value.type)!=null&&Ie.includes("table")||Kr({type:m.value.type})?2e3:500;setTimeout(()=>{bt(),Gr(y.value).then(se=>{b.value=!1;const ke=document.createElement("a");ke.setAttribute("download",m.value.title),ke.href=se,ke.click(),yt().emitter.emit("l7-unprepare-picture",m.value.id),yt().emitter.emit("renderChart-"+m.value.id),bt()}).catch(se=>{b.value=!1,bt(),yt().emitter.emit("l7-unprepare-picture",m.value.id),yt().emitter.emit("renderChart-"+m.value.id),console.error("oops, something went wrong!",se)})},xe)},bt=()=>{Qa("enlarge-inner-content","canvas-main",fe.scale)},Z=()=>{ha.closeEnlargeDialogDestroy(m.value.id)};return u({dialogInit:De}),(xe,Ie)=>{var At;const se=pl,ke=vl,Me=fl,re=Sn,he=da,st=ci,Re=Xi,at=Fa,xt=Ja;return x(),le(at,{ref:"enlargeDialog",title:(At=l(m))==null?void 0:At.title,"append-to-body":!0,modelValue:E.value,"onUpdate:modelValue":Ie[4]||(Ie[4]=Tt=>E.value=Tt),width:"70vw",trigger:"click",class:"userViewEnlarge-class",onClose:Z},Ir({default:A(()=>{var Tt;return[E.value?Ft((x(),ee("div",{key:0,"element-loading-text":l(I)("visualization.export_loading"),"element-loading-background":"rgba(122, 122, 122, 1)",class:"enlarge-outer"},[Ft((x(),ee("div",{id:"enlarge-inner-content",class:Ht(["enlarge-inner",{"enlarge-inner-with-header":_.value==="details"&&ge.value.includes("chart-mix")}]),ref_key:"viewContainer",ref:y,style:ct(ce.value)},[_.value==="enlarge"?(x(),le(Ho,{key:0,class:"enlarge-wrapper","opt-type":_.value,"view-info":l(m),config:v.value,"dv-info":l(N),"font-family":(Tt=l(W))==null?void 0:Tt.fontFamily,"show-position":"viewDialog"},null,8,["opt-type","view-info","config","dv-info","font-family"])):ae("",!0),_.value==="details"&&!ge.value.includes("chart-mix")?(x(),ee(Bt,{key:1},[me.value?ae("",!0):(x(),le(ni,{key:0,view:l(m),"show-position":"viewDialog",ref_key:"chartComponentDetails",ref:M},null,8,["view"])),me.value?(x(),le(Co,{key:1,description:l(I)("visualization.no_details"),"img-type":"noneWhite"},null,8,["description"])):ae("",!0)],64)):_.value==="details"&&ge.value.includes("chart-mix")?(x(),ee(Bt,{key:2},[T(Re,{class:"tab-header",modelValue:Be.value,"onUpdate:modelValue":Ie[3]||(Ie[3]=mt=>Be.value=mt),onTabChange:Ee},{default:A(()=>[T(st,{label:l(I)("chart.drag_block_value_axis_left"),name:"left"},null,8,["label"]),T(st,{label:l(I)("chart.drag_block_value_axis_right"),name:"right"},null,8,["label"])]),_:1},8,["modelValue"]),G("div",Au,[Be.value==="left"?(x(),le(ni,{key:0,view:l(m),"show-position":"viewDialog",ref_key:"chartComponentDetails",ref:M},null,8,["view"])):Be.value==="right"?(x(),le(ni,{key:1,view:l(m),"show-position":"viewDialog",ref_key:"chartComponentDetails2",ref:Q},null,8,["view"])):ae("",!0)])],64)):ae("",!0)],6)),[[xt,l(S).loadingMap[l(C).currentPath]]])],8,Pu)),[[xt,b.value]]):ae("",!0)]}),_:2},[l(D)?void 0:{name:"header",fn:A(()=>{var Tt;return[G("div",Vu,[G("div",null,_e((Tt=l(m))==null?void 0:Tt.title),1),G("div",Du,[_.value==="enlarge"&&Le.value[0]?(x(),le(Me,{key:0,modelValue:Ve.value,"onUpdate:modelValue":Ie[0]||(Ie[0]=mt=>Ve.value=mt),class:"pixel-select",size:"small"},{default:A(()=>[(x(),ee(Bt,null,kn(Ge,mt=>T(ke,{key:mt.label,label:mt.label},{default:A(()=>[(x(!0),ee(Bt,null,kn(mt.options,We=>(x(),le(se,{key:We.value,label:We.label,value:We.value},null,8,["label","value"]))),128))]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])):ae("",!0),_.value==="enlarge"&&Le.value[0]?(x(),le(l(xn),{key:1,class:"m-button",link:"",size:"middle",onClick:ye},{default:A(()=>[T(re,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:A(()=>[T(l(Pa))]),_:1}),Qe(" "+_e(l(I)("chart.export_img")),1)]),_:1})):ae("",!0),_.value==="details"&&Le.value[1]?(x(),le(l(xn),{key:2,class:"m-button",link:"",size:"middle",loading:F.value,disabled:l(S).loadingMap[l(C).currentPath]>0||fe.dataFrom==="template",onClick:Ie[1]||(Ie[1]=mt=>Oe("view"))},{default:A(()=>[T(re,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:A(()=>[T(l(Pa))]),_:1}),Qe(" "+_e(l(I)("chart.export_excel")),1)]),_:1},8,["loading","disabled"])):ae("",!0),_.value==="details"&&Le.value[2]?(x(),le(l(xn),{key:3,class:"m-button",link:"",size:"middle",loading:F.value,onClick:Ie[2]||(Ie[2]=mt=>Oe("dataset")),disabled:l(S).loadingMap[l(C).currentPath]>0||fe.dataFrom==="template"},{default:A(()=>[T(re,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:A(()=>[T(l(Pa))]),_:1}),Qe(" "+_e(l(I)("chart.export_raw_details")),1)]),_:1},8,["loading","disabled"])):ae("",!0),_.value==="details"&&Le.value[2]&&l(m).type==="table-pivot"?(x(),le(l(xn),{key:4,class:"m-button",link:"",size:"middle",loading:F.value,onClick:ze},{default:A(()=>[T(re,{color:"#1F2329",size:"16",style:{"margin-right":"3px"}},{default:A(()=>[T(l(Pa))]),_:1}),Qe(" "+_e(l(I)("chart.export_excel_formatter")),1)]),_:1},8,["loading"])):ae("",!0),Le.value[0]||Le.value[1]||Le.value[2]?(x(),le(he,{key:5,class:"close-divider",direction:"vertical"})):ae("",!0)])])]}),key:"0"}]),1032,["title","modelValue"])}}});const fi=Vt(Eu,[["__scopeId","data-v-bf3ff8f0"]]),Hu=vt({__name:"CanvasOptBar",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},isFixed:{type:Boolean,default:!1}},setup(c){const u=Rt(),{fullscreenFlag:b}=$t(u),p=c,E=v=>{v.preventDefault(),v.stopPropagation()},S=()=>{u.clearPanelLinkageInfo(),yt().emitter.emit("clearPanelLinkage",{viewId:"all"})},C=z(()=>u.dvInfo.type==="dataV"&&p.isFixed),m=z(()=>{if(lt(p.canvasId)){let v=0;return p.componentData.forEach(y=>{y.component==="UserView"?y.linkageFilters&&y.linkageFilters.length>0&&v++:y.component==="Group"?y.propValue.forEach(I=>{I.linkageFilters&&I.linkageFilters.length>0&&v++}):y.component==="DeTabs"&&y.propValue.forEach(I=>{var _;(_=I.componentData)==null||_.forEach(M=>{M.linkageFilters&&M.linkageFilters.length>0&&v++})})}),v}else return!1});return(v,y)=>{const I=pn,_=Sn,M=xn;return m.value&&(!l(u).mobileInPc||l(Ea)())?(x(),ee("div",{key:0,class:Ht(["bar-main-right",{"bar-main-preview-fixed":C.value,"bar-main-preview-fixed-fullscreen":l(b)}]),onMousedown:E},[T(M,{type:"warning",onClick:S},{default:A(()=>[T(_,{class:"bar-base-icon"},{default:A(()=>[T(I,{name:"dv-bar-unLinkage"},{default:A(()=>[T(l(tr),{class:"svg-icon"})]),_:1})]),_:1}),Qe(_e(v.$t("visualization.remove_all_linkage")),1)]),_:1})],34)):ae("",!0)}}});const Ao=Vt(Hu,[["__scopeId","data-v-cb154bda"]]),Lu={class:"point-shadow-content"},Ou=vt({__name:"PointShadow",props:{canvasId:{type:String,required:!0}},setup(c){const u=Rt(),{mousePointShadowMap:b,canvasStyleData:p}=$t(u),E=z(()=>({fontSize:16*p.value.scale/100+"px",width:b.value.width+"px",height:b.value.height+"px"})),S=z(()=>({left:b.value.mouseX-b.value.width/2+"px",top:b.value.mouseY-b.value.height/2-60+"px",width:b.value.width+"px",height:b.value.height+"px"}));return(C,m)=>(x(),ee("div",{class:"point-shadow",id:"point-shadow-main",style:ct(S.value)},[G("div",Lu,[m[1]||(m[1]=G("div",{id:"point-shadow-component",class:"point-shadow-component"},null,-1)),G("div",{class:"point-shadow-tips",style:ct(E.value)},[...m[0]||(m[0]=[G("div",{style:{width:"100%","text-align":"center"}},"组件将被移出Tab",-1)])],4)])],4))}});const Fu=Vt(Ou,[["__scopeId","data-v-f48d4467"]]),Bu={width:"136",height:"96",viewBox:"0 0 136 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function zu(c,u){return x(),ee("svg",Bu,[...u[0]||(u[0]=[Mr('<g filter="url(#filter0_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.3 9H125.7C126.97 9 128 9.77277 128 10.726V82.274C128 83.2272 126.97 84 125.7 84H15.3C14.0297 84 13 83.2272 13 82.274V10.726C13 9.77277 14.0297 9 15.3 9Z" fill="white" fill-opacity="0.8" shape-rendering="crispEdges"></path></g><g filter="url(#filter1_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.3 4H120.7C121.97 4 123 4.77277 123 5.72603V77.274C123 78.2272 121.97 79 120.7 79H10.3C9.02974 79 8 78.2272 8 77.274V5.72603C8 4.77277 9.02974 4 10.3 4Z" fill="white"></path></g><rect x="97" y="20" width="22" height="55" rx="1" fill="#F5F6F7"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M12 72.9821V74C12 74.5523 12.4477 75 13 75H14.0125V74H13L13 72.9821H12ZM12 70.9464H13V68.9107H12V70.9464ZM12 66.875H13V64.8393H12V66.875ZM12 62.8036H13V60.7679H12V62.8036ZM12 58.7321H13V56.6964H12V58.7321ZM12 54.6607H13V52.625H12V54.6607ZM12 50.5893H13V48.5536H12V50.5893ZM12 46.5179H13V44.4821H12V46.5179ZM12 42.4464H13V40.4107H12V42.4464ZM12 38.375H13V36.3393H12V38.375ZM12 34.3036H13V32.2679H12V34.3036ZM12 30.2321H13V28.1964H12V30.2321ZM12 26.0893H13V24.0536H12V26.0893ZM12 22.0179H13V21L14.0125 21V20H13C12.4477 20 12 20.4477 12 21V22.0179ZM16.0375 20V21H18.0625V20H16.0375ZM20.0875 20V21H22.1125V20H20.0875ZM24.1375 20V21H26.1625V20H24.1375ZM28.1875 20V21H30.2125V20H28.1875ZM32.2375 20V21H34.2625V20H32.2375ZM36.2875 20V21H38.3125V20H36.2875ZM40.3375 20V21H42.3625V20H40.3375ZM44.3875 20V21H46.4125V20H44.3875ZM48.4375 20V21H50.4625V20H48.4375ZM52.4875 20V21H54.5125V20H52.4875ZM56.5375 20V21H58.5625V20H56.5375ZM60.5875 20V21H62.6125V20H60.5875ZM64.6375 20V21H66.6625V20H64.6375ZM68.6875 20V21H70.7125V20H68.6875ZM72.7375 20V21H74.7625V20H72.7375ZM76.7875 20V21H78.8125V20H76.7875ZM80.8375 20V21H82.8625V20H80.8375ZM84.8875 20V21H86.9125V20H84.8875ZM88.9375 20V21H90.9625V20H88.9375ZM92.9875 20V21H94V22.0179H95V21C95 20.4477 94.5523 20 94 20H92.9875ZM95 24.0536H94V26.0893H95V24.0536ZM95 28.1964H94V30.2321H95V28.1964ZM95 32.2679H94V34.3036H95V32.2679ZM95 36.3393H94V38.375H95V36.3393ZM95 40.4107H94V42.4464H95V40.4107ZM95 44.4821H94V46.5179H95V44.4821ZM95 48.5536H94V50.5893H95V48.5536ZM95 52.625H94V54.6607H95V52.625ZM95 56.6964H94V58.7321H95V56.6964ZM95 60.7679H94V62.8036H95V60.7679ZM95 64.8393H94V66.875H95V64.8393ZM95 68.9107H94V70.9464H95V68.9107ZM95 72.9821H94V74H92.9875V75H94C94.5523 75 95 74.5523 95 74V72.9821ZM90.9625 75V74H88.9375V75H90.9625ZM86.9125 75V74H84.8875V75H86.9125ZM82.8625 75V74H80.8375V75H82.8625ZM78.8125 75V74H76.7875V75H78.8125ZM74.7625 75V74H72.7375V75H74.7625ZM70.7125 75V74H68.6875V75H70.7125ZM66.6625 75V74H64.6375V75H66.6625ZM62.6125 75V74H60.5875V75H62.6125ZM58.5625 75V74H56.5375V75H58.5625ZM54.5125 75V74H52.4875V75H54.5125ZM50.4625 75V74H48.4375V75H50.4625ZM46.4125 75V74H44.3875V75H46.4125ZM42.3625 75V74H40.3375V75H42.3625ZM38.3125 75V74H36.2875V75H38.3125ZM34.2625 75V74H32.2375V75H34.2625ZM30.2125 75V74H28.1875V75H30.2125ZM26.1625 75V74H24.1375V75H26.1625ZM22.1125 75V74H20.0875V75H22.1125ZM18.0625 75V74H16.0375V75H18.0625Z" fill="#DEE0E3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M31.3027 13.5121L30.4999 14.3149L29.697 13.5121C29.6522 13.4673 29.5797 13.4673 29.535 13.5121L29.4613 13.5857C29.4165 13.6305 29.4165 13.703 29.4613 13.7478L30.382 14.6685C30.4471 14.7336 30.5526 14.7336 30.6177 14.6685L31.5384 13.7478C31.5832 13.703 31.5832 13.6305 31.5384 13.5857L31.4648 13.5121C31.42 13.4673 31.3475 13.4673 31.3027 13.5121Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4H122C122.552 4 123 4.97005 123 6.16667V17C122.5 17 122.552 17 122 17H9C8.44772 17 8 17 8 17V6.16667C8 4.97005 8.44772 4 9 4Z" fill="#050E21"></path><g filter="url(#filter2_d_4811_19625)"><rect x="43" y="17" width="44" height="50" fill="white"></rect></g><rect x="45" y="19" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><path d="M51.0836 27.3737C51.0836 27.6253 50.8797 27.8293 50.628 27.8293C50.3764 27.8293 50.1724 27.6253 50.1724 27.3737V23.8396H49.5044C49.2496 23.8396 49.043 23.633 49.043 23.3781V23.3584C49.043 23.1076 49.2548 22.9142 49.4986 22.8553C49.6483 22.8143 49.7809 22.7469 49.8965 22.6532C50.0162 22.5536 50.1168 22.4247 50.1981 22.2665C50.2368 22.1911 50.2693 22.107 50.2954 22.0143C50.3482 21.8265 50.5062 21.6777 50.7013 21.6777C50.9125 21.6777 51.0836 21.8489 51.0836 22.0601V27.3737Z" fill="#3370FF"></path><path d="M52.7996 24.0417C52.5598 24.0417 52.3608 23.85 52.3782 23.6109C52.3921 23.4205 52.4188 23.239 52.4583 23.0662C52.5268 22.7616 52.6295 22.4979 52.7664 22.2753C52.9033 22.0468 53.0744 21.8711 53.2797 21.748C53.4894 21.6191 53.729 21.5547 53.9985 21.5547C54.2038 21.5547 54.3985 21.5986 54.5824 21.6865C54.7707 21.7744 54.9354 21.9003 55.0766 22.0644C55.2177 22.2284 55.329 22.4306 55.4103 22.6708C55.4958 22.911 55.5386 23.1805 55.5386 23.4793C55.5386 23.7898 55.5022 24.0563 55.4295 24.279C55.3568 24.5016 55.2605 24.7008 55.1407 24.8766C55.021 25.0465 54.8841 25.2017 54.73 25.3423C54.5803 25.4829 54.4284 25.6235 54.2744 25.7641C54.1204 25.8989 53.9707 26.0454 53.8252 26.2035C53.6798 26.3617 53.5514 26.5463 53.4402 26.7572H55.0643C55.3404 26.7572 55.5643 26.9811 55.5643 27.2572V27.3293C55.5643 27.6055 55.3404 27.8293 55.0643 27.8293H52.2658C52.2658 27.472 52.3022 27.1614 52.3749 26.8978C52.4519 26.6342 52.5546 26.3998 52.6829 26.1948C52.8113 25.9838 52.961 25.7905 53.1321 25.6148C53.3076 25.439 53.4915 25.2603 53.684 25.0787C53.7824 24.9849 53.8872 24.8912 53.9985 24.7975C54.1097 24.6979 54.2102 24.5895 54.3001 24.4723C54.3942 24.3551 54.4712 24.2233 54.5311 24.0768C54.5953 23.9304 54.6274 23.7634 54.6274 23.5759C54.6274 23.2771 54.5632 23.0457 54.4348 22.8817C54.3108 22.7118 54.1503 22.6268 53.9536 22.6268C53.8209 22.6268 53.7076 22.6708 53.6134 22.7586C53.5236 22.8407 53.4509 22.952 53.3953 23.0926C53.3396 23.2273 53.299 23.3797 53.2733 23.5496C53.2711 23.5667 53.269 23.5839 53.267 23.601C53.2387 23.8433 53.0435 24.0417 52.7996 24.0417Z" fill="#3370FF"></path><path d="M57.6919 24.4798C57.6919 24.3122 57.8396 24.1823 58.0064 24.1647C58.1176 24.153 58.2203 24.1208 58.3144 24.0681C58.4128 24.0095 58.4919 23.9275 58.5518 23.822C58.616 23.7165 58.6481 23.5759 58.6481 23.4002C58.6481 23.1365 58.5839 22.9344 58.4556 22.7938C58.3272 22.6532 58.1796 22.5829 58.0128 22.5829C57.7818 22.5829 57.6064 22.6883 57.4866 22.8993C57.4281 23.0031 57.3849 23.1212 57.3572 23.2536C57.3086 23.4853 57.1262 23.6814 56.8895 23.6814C56.6506 23.6814 56.4555 23.4836 56.4878 23.2469C56.5083 23.0967 56.5374 22.9544 56.5753 22.8202C56.6523 22.5565 56.7571 22.331 56.8898 22.1435C57.0267 21.956 57.1892 21.8125 57.3775 21.7129C57.5657 21.6074 57.7753 21.5547 58.0064 21.5547C58.1861 21.5547 58.3657 21.5928 58.5454 21.6689C58.7251 21.7392 58.8855 21.8476 59.0267 21.9941C59.1722 22.1406 59.2898 22.3192 59.3797 22.5302C59.4695 22.7411 59.5144 22.9842 59.5144 23.2596C59.5144 23.5584 59.4609 23.822 59.354 24.0505C59.2513 24.279 59.0952 24.4342 58.8855 24.5162V24.5338C59.1337 24.61 59.3283 24.774 59.4695 25.026C59.6107 25.2779 59.6813 25.5796 59.6813 25.9311C59.6813 26.2533 59.6342 26.5404 59.5401 26.7923C59.4502 27.0443 59.3283 27.2552 59.1743 27.4251C59.0203 27.595 58.8427 27.7239 58.6417 27.8118C58.4406 27.8996 58.231 27.9436 58.0128 27.9436C57.7604 27.9436 57.5294 27.8938 57.3197 27.7942C57.1144 27.6946 56.939 27.551 56.7935 27.3636C56.6481 27.1702 56.5347 26.9359 56.4534 26.6605C56.4093 26.5028 56.3785 26.3317 56.3611 26.1471C56.3383 25.9065 56.5388 25.7114 56.7805 25.7114C57.0199 25.7114 57.2107 25.9038 57.2582 26.1383C57.2614 26.1543 57.2648 26.1702 57.2684 26.186C57.3026 26.3324 57.3518 26.4613 57.416 26.5726C57.4802 26.6781 57.5593 26.7631 57.6534 26.8275C57.7518 26.8919 57.8673 26.9242 58 26.9242C58.2053 26.9242 58.3786 26.8392 58.5197 26.6693C58.6609 26.4936 58.7315 26.2563 58.7315 25.9575C58.7315 25.7231 58.6973 25.5444 58.6288 25.4214C58.5647 25.2984 58.4812 25.2105 58.3786 25.1578C58.2759 25.0992 58.1625 25.067 58.0385 25.0611C57.8477 25.0424 57.6919 24.8881 57.6919 24.6964V24.4798Z" fill="#3370FF"></path><path d="M59.1813 29.0078H49.543C49.2668 29.0078 49.043 29.2317 49.043 29.5078V29.7057C49.043 29.9819 49.2668 30.2057 49.543 30.2057H59.1813C59.4574 30.2057 59.6813 29.9819 59.6813 29.7057V29.5078C59.6813 29.2317 59.4574 29.0078 59.1813 29.0078Z" fill="#00D6B9"></path><rect x="66.2773" y="19" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><path d="M75.4301 24.6753C75.5122 24.4583 75.8143 24.465 75.8866 24.6855C76.1381 25.4531 76.5204 26.6799 76.5115 27.0164C76.4981 27.517 76.0819 27.9119 75.5818 27.8985C75.0817 27.8851 74.6871 27.4685 74.7005 26.968C74.7095 26.6317 75.1451 25.4287 75.4301 24.6753Z" fill="#00D6B9"></path><path d="M71.3832 26.453C71.3832 24.1007 73.2883 22.1937 75.6385 22.1937C77.9886 22.1937 79.8938 24.1007 79.8938 26.453C79.8938 27.6187 79.4265 28.6746 78.6678 29.4442C78.5646 29.5489 78.5546 29.7166 78.6526 29.8262L79.0073 30.2229C79.1053 30.3324 79.274 30.3422 79.3784 30.2389C80.3528 29.2743 80.9576 27.934 80.9576 26.453C80.9576 23.5126 78.5762 21.1289 75.6385 21.1289C72.7008 21.1289 70.3193 23.5126 70.3193 26.453C70.3193 27.9213 70.9138 29.2513 71.8735 30.2139C71.9773 30.318 72.146 30.3093 72.2447 30.2004L72.602 29.806C72.7007 29.6971 72.6918 29.5293 72.5894 29.424C71.8424 28.6562 71.3832 27.6086 71.3832 26.453Z" fill="#3370FF"></path><rect x="45" y="35.1855" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><path d="M48.6172 37.957C48.6172 37.6809 48.841 37.457 49.1172 37.457H59.4647C59.7408 37.457 59.9647 37.6809 59.9647 37.957V39.7286H48.6172V37.957Z" fill="#3370FF"></path><path d="M52.0214 40.2969H48.6172V42.0006H52.0214V40.2969Z" fill="#ADC6FF"></path><path d="M55.9931 40.2969H52.5888V42.0006H55.9931V40.2969Z" fill="#ADC6FF"></path><path d="M59.9647 40.2969H56.5604V42.0006H59.9647V40.2969Z" fill="#ADC6FF"></path><path d="M52.0214 44.8401H48.6172V46.2598C48.6172 46.4167 48.7442 46.5438 48.9009 46.5438H52.0214V44.8401Z" fill="#ADC6FF"></path><path d="M55.9931 44.8401H52.5888V46.5438H55.9931V44.8401Z" fill="#ADC6FF"></path><path d="M59.9647 44.8401H56.5604V46.5438H59.681C59.8377 46.5438 59.9647 46.4167 59.9647 46.2598V44.8401Z" fill="#ADC6FF"></path><path d="M52.0214 42.5685H48.6172V44.2722H52.0214V42.5685Z" fill="#ADC6FF"></path><path d="M55.9931 42.5685H52.5888V44.2722H55.9931V42.5685Z" fill="#ADC6FF"></path><path d="M59.9647 42.5685H56.5604V44.2722H59.9647V42.5685Z" fill="#ADC6FF"></path><path d="M66.2773 36.007C66.2773 35.5533 66.6504 35.1855 67.1107 35.1855H84.1674C84.6277 35.1855 85.0007 35.5533 85.0007 36.007V47.9937C85.0007 48.4474 84.6277 48.8152 84.1674 48.8152H67.1107C66.6504 48.8152 66.2773 48.4474 66.2773 47.9937V36.007Z" fill="#F5F6F7"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M84.1674 35.5141H67.1107C66.8345 35.5141 66.6107 35.7348 66.6107 36.007V47.9937C66.6107 48.2659 66.8345 48.4866 67.1107 48.4866H84.1674C84.4436 48.4866 84.6674 48.2659 84.6674 47.9937V36.007C84.6674 35.7348 84.4436 35.5141 84.1674 35.5141ZM67.1107 35.1855C66.6504 35.1855 66.2773 35.5533 66.2773 36.007V47.9937C66.2773 48.4474 66.6504 48.8152 67.1107 48.8152H84.1674C84.6277 48.8152 85.0007 48.4474 85.0007 47.9937V36.007C85.0007 35.5533 84.6277 35.1855 84.1674 35.1855H67.1107Z" fill="#3370FF"></path><path d="M70.1772 37.457C70.0206 37.457 69.8936 37.5842 69.8936 37.741V39.7286H81.2411V37.741C81.2411 37.5842 81.1141 37.457 80.9574 37.457H70.1772Z" fill="#3370FF"></path><path d="M69.8936 40.2965H72.1631V46.5435H70.1772C70.0206 46.5435 69.8936 46.4163 69.8936 46.2595V40.2965Z" fill="#3370FF"></path><path d="M81.2411 40.2969H72.7305V42.0006H81.2411V40.2969Z" fill="#ADC6FF"></path><path d="M81.2411 44.8401H72.7305V46.5438H80.9574C81.1141 46.5438 81.2411 46.4167 81.2411 46.2598V44.8401Z" fill="#ADC6FF"></path><path d="M81.2411 42.5685H72.7305V44.2722H81.2411V42.5685Z" fill="#ADC6FF"></path><rect x="45" y="51.3711" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><g clip-path="url(#clip0_4811_19625)"><path d="M53.8698 55.0398C53.7832 54.9532 53.6416 54.9573 53.5603 55.0489L53.2654 55.3809C53.1252 55.5387 52.9247 55.7643 52.6831 56.0361C52.2 56.5795 51.5529 57.3071 50.897 58.0434C49.5784 59.5238 48.2414 61.0202 48.1081 61.1536C47.9835 61.2784 47.9835 61.4806 48.1081 61.6054C48.2328 61.7301 48.4348 61.7301 48.5595 61.6054C48.7099 61.4548 50.068 59.9342 51.3734 58.4686C52.0296 57.732 52.6768 57.0043 53.16 56.4608C53.3988 56.1921 53.5975 55.9685 53.7375 55.8109L56.4011 58.477C56.4715 58.5475 56.5812 58.5597 56.6653 58.5064L61.3517 55.5377L61.3537 55.5362C61.4981 55.4351 61.5332 55.2359 61.4321 55.0914C61.3316 54.9476 61.1342 54.9121 60.99 55.0112L56.6002 57.7728L53.8698 55.0398Z" fill="#3370FF"></path><path d="M48.3338 57.8652C48.1575 57.8652 48.0146 58.0083 48.0146 58.1847C48.0146 58.3611 48.1575 58.5041 48.3338 58.5041H53.0087L54.9251 60.7648C54.9604 60.8064 55.0103 60.8329 55.0646 60.8387L61.0612 61.4833C61.2357 61.5046 61.3946 61.3805 61.4164 61.2058C61.4383 61.0307 61.3142 60.871 61.1393 60.8492L55.3045 60.2249L53.368 57.9404C53.3276 57.8927 53.2682 57.8652 53.2057 57.8652H48.3338Z" fill="#00D6B9"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M47.3404 52.6484V63.0831L62.0213 63.0831L62.0213 63.722H46.7021V52.6484H47.3404Z" fill="#DEE0E3"></path></g><rect x="66.2773" y="51.3711" width="18.7234" height="13.6296" rx="0.5" fill="#F5F6F7"></rect><g clip-path="url(#clip1_4811_19625)"><path d="M75.6521 56.2206L73.7532 57.4359C73.7053 57.4705 73.6362 57.4705 73.5817 57.4425L71.1894 56.1594C71.1282 56.1248 71.0458 56.1315 70.9979 56.1794C70.9979 56.1794 69.2559 57.9563 69.2559 57.9976V62.6588H82.6601V55.2051L75.6947 56.2007L75.6521 56.2206Z" fill="#ADC6FF"></path><path d="M82.829 55.2142C82.8043 55.0395 82.6428 54.9179 82.4682 54.9426L75.6027 55.9151L75.4979 55.9643L73.6552 57.1435L71.3425 55.9031C71.1759 55.811 70.935 55.8147 70.7723 55.9775L70.7718 55.9781L70.4978 56.2563C70.3337 56.4229 70.1145 56.6456 69.8938 56.8698C69.7988 56.9664 69.7033 57.0625 69.6079 57.1587C69.4466 57.3212 69.2853 57.4837 69.126 57.6481C69.0028 57.7752 69.0087 57.9783 69.1373 58.0999C69.265 58.2205 69.4659 58.2159 69.5888 58.0905C69.6332 58.0454 69.6775 58.0002 69.7219 57.9551L69.736 57.9407C69.9058 57.768 70.1279 57.5424 70.3485 57.3182C70.5692 57.094 70.7884 56.8714 70.9524 56.7048L71.1368 56.5176L73.4328 57.7491L73.4363 57.7509C73.5721 57.8205 73.7681 57.837 73.9307 57.7255L75.7937 56.5333L82.5577 55.5752C82.7322 55.5505 82.8537 55.3889 82.829 55.2142Z" fill="#3370FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M68.6168 52.6484V63.0831L83.2977 63.0831L83.2977 63.722H67.9785V52.6484H68.6168Z" fill="#DEE0E3"></path></g><rect x="43" y="5" width="11" height="11" rx="1" fill="white" fill-opacity="0.15"></rect><g clip-path="url(#clip2_4811_19625)"><path d="M48.374 14.123C50.1378 14.123 51.5968 12.8184 51.8388 11.1216C51.8778 10.8482 51.6502 10.623 51.374 10.623C50.374 10.623 49.374 10.623 48.374 10.623C48.374 9.46271 48.374 8.46265 48.374 7.62288C48.374 7.34673 48.1489 7.1193 47.8755 7.15828C46.1786 7.40026 44.874 8.8593 44.874 10.623C44.874 12.556 46.441 14.123 48.374 14.123Z" fill="#3370FF"></path><path d="M49.4592 9.87377C49.2741 9.87377 49.124 9.72371 49.124 9.53859V7.12221C49.124 6.98916 49.2392 6.88454 49.3703 6.90746C50.7554 7.14971 51.8481 8.24239 52.0903 9.62754C52.1132 9.7586 52.0086 9.87377 51.8756 9.87377H49.4592Z" fill="#00D6B9"></path></g><g filter="url(#filter3_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M90.0006 47.3536L94.1487 45.8794L83 39.75L86.2502 52.0504L88.6842 48.3821L91.5982 52.112L92.9147 51.0835L90.0006 47.3536Z" fill="#363B3E"></path></g><g filter="url(#filter4_d_4811_19625)"><path fill-rule="evenodd" clip-rule="evenodd" d="M96.5823 46.0764L91.6432 47.8317L94.3187 51.2563L91.4263 53.5161L88.7508 50.0915L85.8527 54.4592L81.4375 37.75L96.5823 46.0764ZM88.6846 48.3826L91.5987 52.1124L92.9151 51.0839L90.001 47.3541L94.1491 45.8798L83.0004 39.7504L86.2506 52.0508L88.6846 48.3826Z" fill="white" fill-opacity="0.8"></path></g><defs><filter id="filter0_d_4811_19625" x="5" y="5" width="131" height="91" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter1_d_4811_19625" x="0" y="0" width="131" height="91" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter2_d_4811_19625" x="35" y="13" width="60" height="66" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter3_d_4811_19625" x="80" y="37.75" width="17.1484" height="18.3613" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><filter id="filter4_d_4811_19625" x="78.4375" y="35.75" width="21.1445" height="22.709" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4811_19625"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4811_19625" result="shape"></feBlend></filter><clipPath id="clip0_4811_19625"><rect width="17.0213" height="11.9259" fill="white" transform="translate(45.8516 52.2227)"></rect></clipPath><clipPath id="clip1_4811_19625"><rect width="17.0213" height="11.9259" fill="white" transform="translate(67.1279 52.2227)"></rect></clipPath><clipPath id="clip2_4811_19625"><rect width="9" height="9" fill="white" transform="translate(44 6)"></rect></clipPath></defs>',42)])])}const qu={render:zu},Nu={class:"drag-info-main"},$u={key:1,class:"mobile-in-pc-tips"},ju=vt({__name:"DragInfo",setup(c){const{t:u}=In(),b=Rt(),{dvInfo:p,mobileInPc:E}=$t(b),S=u("visualization.resource_create_tips")+(p.value.type==="dashboard"?u("work_branch.dashboard"):u("work_branch.big_data_screen"));return(C,m)=>{const v=pn,y=Yi;return x(),ee("div",Nu,[l(E)?(x(),ee("div",$u,"请从右侧添加可视化组件")):(x(),ee(Bt,{key:0},[T(y,{style:{"justify-content":"center"}},{default:A(()=>[T(v,{name:"dv-drag-tips"},{default:A(()=>[T(l(qu),{class:"svg-icon",style:{width:"125px",height:"125px"}})]),_:1})]),_:1}),T(y,{class:"tips-info"},{default:A(()=>[Qe(_e(S))]),_:1})],64))])}}});const Ru=Vt(ju,[["__scopeId","data-v-6b284e56"]]),Wu={style:{width:"100%",height:"100%"}},Gu={key:0,class:"pop-content"},Zu=vt({__name:"Component",props:{dvInfo:{type:Object,required:!0},canvasStyleData:{type:Object,required:!0},popComponentData:{type:Array,required:!0},canvasViewInfo:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},scale:{type:Number,required:!1,default:1},showPosition:{type:String,required:!1,default:"preview"},canvasState:{type:Object,required:!0}},setup(c){const u=Rt(),b=ra(),p=J(!1),{t:E}=In(),S=c,{canvasStyleData:C,popComponentData:m,canvasViewInfo:v,scale:y,canvasState:I}=on(S),{curComponent:_}=$t(u),M=z(()=>({fontSize:30*S.scale+"px",height:C.value.height*S.scale*.15+"px"})),Q=z(()=>S.showPosition==="preview"?S.scale:S.scale*100),N=be=>{var fe;return((fe=_.value)==null?void 0:fe.id)===be.id&&S.showPosition==="popEdit"},D=be=>{p.value=!0,be.preventDefault(),be.dataTransfer.dropEffect="copy"},W=()=>{p.value=!1},F=be=>{if(p.value=!1,!m.value||m.value.length===0){be.preventDefault(),be.stopPropagation();const fe=be.dataTransfer.getData("id");if(fe){const a=Ri(fe);a.component==="VQuery"?(a.style.top=0,a.style.left=0,a.id=Ka(),a.category="hidden",a.commonBackground.backgroundColor="rgba(41, 41, 41, 1)",ps(a),u.addComponent({component:a,index:void 0}),di(a),b.recordSnapshotCache("renderChart",a.id)):La.error(E("visualization.support_query"))}}},ge=()=>{p.value=!1},Be=z(()=>({width:"100%",height:"100%"})),me=z(()=>{if(I.value.curPointArea==="hidden"){let be=0;return m.value.forEach(fe=>{be=0+fe.propValue.length}),{height:be<8?"15%":be*45*y.value/4+"px"}}else return{height:"0px!important",overflow:"hidden",border:"0!important"}});return gn(()=>{Te.on("handleDragEnd-canvas-main",ge)}),ia(()=>{Te.off("handleDragEnd-canvas-main",ge)}),(be,fe)=>(x(),ee("div",{class:Ht(["pop-area",{"preview-pop":c.showPosition==="preview"}]),style:ct(me.value),onMousedown:fe[0]||(fe[0]=Qn(()=>{},["stop"])),onMousedup:fe[1]||(fe[1]=Qn(()=>{},["stop"]))},[G("div",Wu,[l(m)&&l(m).length>0?(x(),ee("div",Gu,[(x(!0),ee(Bt,null,kn(l(m),(a,Le)=>(x(),le(Ho,{id:"component-pop-"+a.id,"view-info":l(v)[a.id],key:Le,config:a,index:Le,"dv-info":c.dvInfo,"pop-active":N(a),"show-position":c.showPosition,style:ct(Be.value),scale:Q.value},null,8,["id","view-info","config","index","dv-info","pop-active","show-position","style","scale"]))),128))])):c.showPosition==="popEdit"?(x(),ee("div",{key:1,class:Ht(["pop-area-main",{"pop-area-active":p.value}]),style:ct(M.value),onDrop:F,onDragover:D,onDragleave:W},[G("span",null,_e(l(E)("visualization.pop_area_tips")),1)],38)):ae("",!0)])],38))}});const Eo=Vt(Zu,[["__scopeId","data-v-ad79b399"]]),Hp=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Uu={class:"m-label"},Xu=vt({__name:"DatasetParamsComponent",setup(c,{expose:u}){const b=J(!1),p=J(),E=J(!1),S=Rt(),{canvasViewInfo:C}=$t(S),m=Bn({viewId:null}),v=J([]),y=()=>{p.value.clearValidate(),E.value=!1},I=J(null),_=J({}),M=F=>{if(F){m.viewId=F.id;const ge=C.value[m.viewId];v.value=va(ge.calParams),E.value=!0}},Q=()=>{if(N.value){La.error("请输入正确参数");return}C.value[m.viewId].calParams=v.value,yt().emitter.emit("calcData-"+m.viewId,C.value[m.viewId]),y()},N=z(()=>!v.value||v.value&&v.value.filter(F=>F.value===null||F.value===void 0).length>0),D=()=>E.value,W=F=>{F.preventDefault(),F.stopPropagation()};return u({optInit:M,statesCheck:D,resetForm:y}),(F,ge)=>{const Be=bl,me=Ji,be=yl,fe=xn,a=Fa,Le=Ja;return Ft((x(),le(a,{title:"计算参数输入",modelValue:E.value,"onUpdate:modelValue":ge[3]||(ge[3]=ce=>E.value=ce),width:"400px","before-close":y,onClick:W},{footer:A(()=>[T(fe,{secondary:"",onClick:ge[1]||(ge[1]=ce=>y())},{default:A(()=>[...ge[5]||(ge[5]=[Qe("取消",-1)])]),_:1}),T(fe,{type:"primary",onClick:ge[2]||(ge[2]=ce=>Q())},{default:A(()=>[...ge[6]||(ge[6]=[Qe("确认",-1)])]),_:1})]),default:A(()=>[E.value?(x(),le(be,{key:0,"label-position":"top",ref_key:"subject",ref:p,model:I.value,rules:_.value,onSubmit:ge[0]||(ge[0]=Qn(()=>{},["prevent"]))},{default:A(()=>[(x(!0),ee(Bt,null,kn(v.value,ce=>(x(),le(me,{key:ce,class:"form-item",prop:"value_"+ce.name},{label:A(()=>[G("label",Uu,[Qe(" 计算字段["+_e(ce.name)+"] ",1),ge[4]||(ge[4]=G("span",{style:{color:"red"}},"*",-1))])]),default:A(()=>[T(Be,{style:{width:"100%"},modelValue:ce.value,"onUpdate:modelValue":Ve=>ce.value=Ve,placeholder:"请输入一个数字","controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]))),128))]),_:1},8,["model","rules"])):ae("",!0)]),_:1},8,["modelValue"])),[[Le,b.value]])}}});const or=Vt(Xu,[["__scopeId","data-v-f014cb45"]]),Yu={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},Ju=["width","height"],Qu=["d"],Ku=["width","height"],ec=["width","height"],tc=["d"],nc=["width","height"],ac=["width","height"],oc=["d"],vo=2,ic=vt({__name:"DeGrid",props:{matrixStyle:{type:Object},themes:{type:String,default:"dark"}},setup(c){const u=c,b=z(()=>"M "+S.value+" 0 L 0 0 0 "+C.value),p=z(()=>"M "+m.value+" 0 L 0 0 0 "+v.value),E=z(()=>"M "+y.value+" 0 L 0 0 0 "+I.value),S=z(()=>u.matrixStyle.width*2*vo),C=z(()=>u.matrixStyle.height*2*vo),m=z(()=>u.matrixStyle.width*vo),v=z(()=>u.matrixStyle.height*vo),y=z(()=>u.matrixStyle.width),I=z(()=>u.matrixStyle.height);return(_,M)=>(x(),ee("svg",Yu,[G("defs",null,[G("pattern",{id:"smallGrid",width:y.value,height:I.value,patternUnits:"userSpaceOnUse"},[G("path",{d:E.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"0.8"},null,8,Qu)],8,Ju),G("pattern",{id:"middleGrid",width:m.value,height:v.value,patternUnits:"userSpaceOnUse"},[G("rect",{width:m.value,height:v.value,fill:"url(#smallGrid)"},null,8,ec),G("path",{d:p.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"1"},null,8,tc)],8,Ku),G("pattern",{id:"grid",width:S.value,height:C.value,patternUnits:"userSpaceOnUse"},[G("rect",{width:S.value,height:C.value,fill:"url(#middleGrid)"},null,8,ac),G("path",{d:b.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"1.2"},null,8,oc)],8,nc)]),M[0]||(M[0]=G("rect",{width:"100%",height:"100%",fill:"url(#grid)"},null,-1))]))}});const rc=Vt(ic,[["__scopeId","data-v-4858d2f1"]]),lc={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},sc=["width","height"],uc=["width","height"],cc=["d"],dc=["width","height"],fc=["width","height"],pc=["d"],vc=vt({__name:"DeGridScreen",props:{matrixStyle:{type:Object},themes:{type:String,default:"dark"}},setup(c){const u=c,b=z(()=>"M "+p.value+" 0 L 0 0 0 "+E.value),p=z(()=>u.matrixStyle.width*5),E=z(()=>u.matrixStyle.height*5),S=z(()=>"M "+C.value+" 0 L 0 0 0 "+m.value),C=z(()=>u.matrixStyle.width),m=z(()=>u.matrixStyle.height);return(v,y)=>(x(),ee("svg",lc,[G("defs",null,[G("pattern",{id:"grid",width:p.value,height:E.value,patternUnits:"userSpaceOnUse"},[G("rect",{width:p.value,height:E.value,fill:"url(#middleGrid)"},null,8,uc),G("path",{d:b.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"0.7"},null,8,cc)],8,sc),G("pattern",{id:"middleGrid",width:C.value,height:m.value,patternUnits:"userSpaceOnUse"},[G("rect",{width:C.value,height:m.value,fill:"url(#smallGrid)"},null,8,fc),G("path",{d:S.value,fill:"none",stroke:"rgba(207, 207, 207, 0.4)","stroke-width":"0.3"},null,8,pc)],8,dc)]),y[0]||(y[0]=G("rect",{width:"100%",height:"100%",fill:"url(#grid)"},null,-1))]))}});const hc=Vt(vc,[["__scopeId","data-v-fb4384bd"]]);const mc={},gc={class:"areaShadow"};function yc(c,u){return x(),ee("div",gc)}const bc=Vt(mc,[["render",yc],["__scopeId","data-v-65935e8f"]]),_c=["id"],wc=vt({__name:"CanvasCore",props:{themes:{type:String,default:"dark"},isEdit:{type:Boolean,default:!0},canvasStyleData:{type:Object,required:!0},componentData:{type:Array,required:!0},popComponentData:{type:Array,required:!1,default:()=>[]},canvasViewInfo:{type:Object,required:!0},canvasId:{type:String,default:"canvas-main"},dvModel:{type:String,default:"dv"},baseWidth:{required:!1,type:Number,default:100},baseHeight:{required:!1,type:Number,default:50},baseMarginLeft:{required:!1,type:Number,default:20},baseMarginTop:{required:!1,type:Number,default:20},draggable:{required:!1,default:!0,type:Boolean},dragStart:{required:!1,type:Function,default(){return{}}},dragging:{required:!1,type:Function,default(){return{}}},dragEnd:{required:!1,type:Function,default(){return{}}},resizable:{required:!1,type:Boolean,default:!0},resizeStart:{required:!1,type:Function,default(){return{}}},resizing:{required:!1,type:Function,default(){return{}}},resizeEnd:{required:!1,type:Function,default(){return{}}},scale:{type:Number,required:!1,default:1},canvasActive:{type:Boolean,required:!1,default:!0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(c,{expose:u}){const b=ra(),p=Rt(),E=Mo(),S=si(),{curComponent:C,dvInfo:m,editMode:v,tabMoveOutComponentId:y,canvasState:I,mainScrollTop:_}=$t(p),{editorMap:M,areaData:Q,isCtrlOrCmdDown:N}=$t(E),D=c,{baseWidth:W,baseHeight:F,baseMarginLeft:ge,baseMarginTop:Be,draggable:me,dragStart:be,dragging:fe,dragEnd:a,resizable:Le,resizeStart:ce,resizing:Ve,resizeEnd:Ge,isEdit:De,canvasId:$,canvasStyleData:Ee,componentData:ye,canvasViewInfo:Oe,themes:ze}=on(D),Ke=lt($.value),et=J(0),ht=J(0),nt=J({x:0,y:0}),bt=J(0),Z=J(0),xe=J(!1),Ie=["width","height","top","left","rotate","backgroundColor","borderWidth","borderStyle","borderColor"],se=["width","height","top","left","rotate"],ke=["width","height","top","left","rotate","borderActive","borderWidth","borderRadius","borderStyle","borderColor"],Me=J(null),re=J(null),he=J(null),st=J(null),Re=J("editor-"+$.value);mn(()=>m.value,()=>{xt()},{deep:!0}),mn([()=>ye.value.length,()=>Ee.value],()=>{pt(()=>{xt()})},{deep:!0}),mn(()=>Q.value.components.length,()=>{io()});const at=()=>{setTimeout(()=>{xt()})},xt=(d="editor-canvas-main")=>{try{m.value.watermarkInfo&&m.value.watermarkInfo.settingContent&&lt($.value)&&Qa(d,$.value,zt.value)}catch{console.warn("Watermarks are not supported!")}},At=z(()=>({width:W.value,height:F.value})),Tt=z(()=>m.value.type==="dashboard"&&ye.value.length===0&&$.value==="canvas-main"),mt=z(()=>{var d;return((d=C.value)==null?void 0:d.id)||""}),{emitter:We}=yt(),zt=z(()=>X.value?Ee.value.scale*1.2/100:Ee.value.scale/100),Wt=z(()=>X.value?p.canvasStyleData.scale*1.2/100:p.canvasStyleData.scale/100),pe=z(()=>$.value==="canvas-main"&&C.value&&C.value.canvasId!=="canvas-main"&&y.value),ue=z(()=>{var d,V,P,te;return X.value&&((V=(d=Ee.value)==null?void 0:d.dashboard)==null?void 0:V.gap)==="yes"?(te=(P=Ee.value)==null?void 0:P.dashboard)==null?void 0:te.gapSize:0}),U=z(()=>({baseWidth:W.value,baseHeight:yn.value?W.value*1.6:F.value,curGap:ue.value})),X=z(()=>m.value.type==="dashboard"),H=z(()=>xi($.value)),K=J(!1),tt=J(!1),Ne=J(0),Je=J(0),jt=J(0),ne=J(null),Pe=J(null),ot=J([]),$e=J([]);let Xt,En=!1,qt=100;const _n=J(0);let ie=0,qe=J(null);const _t=d=>{if(X.value||v.value==="preview"||d.buttons===2)return;!C.value||Nr(C.value.component),St();const V=M.value[$.value].getBoundingClientRect();et.value=V.x,ht.value=V.y;const P=d.clientX,te=d.clientY;nt.value.x=P-et.value,nt.value.y=te-ht.value,xe.value=!0;const ve=ut=>{bt.value=Math.abs(ut.clientX-P),Z.value=Math.abs(ut.clientY-te),ut.clientX<P&&(nt.value.x=ut.clientX-et.value),ut.clientY<te&&(nt.value.y=ut.clientY-ht.value)},it=ut=>{if(document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",it),ut.clientX==P&&ut.clientY==te){St();return}en()};document.addEventListener("mousemove",ve),document.addEventListener("mouseup",it)},St=()=>{xe.value=!1,bt.value=0,Z.value=0,E.setAreaData({style:{left:0,top:0,width:0,height:0},components:[]})},en=()=>{const d=wn();if(d.length<=1){St();return}let V=1/0,P=1/0,te=-1/0,ve=-1/0;d.forEach(ut=>{let Ue={left:0,top:0,right:0,bottom:0};ut.component=="Group"?ut.propValue.forEach(un=>{const dn=$r(`#shape-id-${un.id}`).getBoundingClientRect();Ue.left=dn.left-et.value,Ue.top=dn.top-ht.value,Ue.right=dn.right-et.value,Ue.bottom=dn.bottom-ht.value,Ue.left<P&&(P=Ue.left),Ue.top<V&&(V=Ue.top),Ue.right>te&&(te=Ue.right),Ue.bottom>ve&&(ve=Ue.bottom)}):Ue=yo(ut.style),Ue.left<P&&(P=Ue.left),Ue.top<V&&(V=Ue.top),Ue.right>te&&(te=Ue.right),Ue.bottom>ve&&(ve=Ue.bottom)}),nt.value.x=P,nt.value.y=V,bt.value=te-P,Z.value=ve-V;const it={left:P,top:V,width:bt.value,height:Z.value};E.setAreaData({style:it,components:d}),d.length>0&&(p.setCurComponent({component:null,index:null}),xe.value=!1)},wn=()=>{const d=[],{x:V,y:P}=nt.value;return ye.value.forEach(te=>{if(te.isLock||!te.isShow)return;const ve=yo(te.style);V<=ve.left&&P<=ve.top&&ve.left+ve.width<=V+bt.value&&ve.top+ve.height<=P+Z.value&&d.push(te)}),d},Yt=d=>{if(X.value||v.value==="preview")return;d.stopPropagation(),d.preventDefault();const V=d.clientX,P=d.clientY,te=Pe.value.getBoundingClientRect(),ve=te.left,it=te.top,ut=V-ve;let Ue=P-it;if(!C.value||C.value&&!C.value.editing){C.value&&["VQuery"].includes(C.value.component)&&(C==null?void 0:C.value.category)==="base"&&(Ue=Ue*Wt.value+C.value.style.top*(1-Wt.value)),S.showContextMenu({top:Ue,left:ut,position:"canvasCore"});const un=document.getElementById("close-button");un&&un.click()}},Jt=d=>bo(d,d.borderActive?se:ke),$n=d=>bo(d,Ie),jn=d=>Ai(d,{dvModel:m.value.type,cellWidth:Ne.value,cellHeight:Je.value,curGap:ue.value,showPosition:"edit"}),Kn=(d,V)=>{d.component==="VText"&&p.setShapeStyle({top:null,left:null,width:null,height:Sa(d,V),rotate:null})},Sa=(d,V)=>{let{lineHeight:P,fontSize:te,height:ve}=d.style;P===""&&(P=1.5);const it=(V.split("<br>").length-1)*P*(te||Ee.value.fontSize);return ve>it?ve:it},Rn=z(()=>xi($.value)?{width:"100%",height:"100%"}:X.value?{width:"100%",height:_n.value*Je.value+"px"}:{...Io(Ee.value,$.value),width:_o(Ee.value.width)+"px",height:_o(Ee.value.height)+"px"});function Hn(d,V){En?Xt=d:(function(P){En=!0,setTimeout(function(){P(),setTimeout(function(){En=!1,Xt!=null&&Hn(Xt,V)},qt)},V)}(d),Xt=void 0)}function ma(d){if(d.clientY+50>=window.innerHeight){let V=ai(document.body);V.scrollTop(V.scrollTop()+20)}else if(d.clientY<=150){let V=ai(document.body);V.scrollTop(V.scrollTop()-20)}}function zn(){ie=jt.value;let d=36;for(let V=0;V<d;V++){let P=[];for(let te=0;te<jt.value;te++)P.push({el:!1});ot.value.push(P)}}function Ba(d){const V=d.sizeX;let P=1,te=-1,ve=ot.value;if(!(V<=0)){if(ye.value.forEach(it=>{const ut=it.y+it.sizeY-2;te<ut&&(te=ut)}),te<0)return 1;{const it=ve[te];for(let ut=0,Ue=V-1;Ue<it.length;ut++,Ue++){let un=0;for(let dn=0;dn<V;dn++)it[ut+dn].el||un++;if(un===V){P=ut+1;break}}return P}}}function Wn(d){let V=ot.value;if(!(d.x<=0||d.y<=0))for(let P=d.x-1;P<d.x-1+d.sizeX;P++)for(let te=d.y-1;te<d.y-1+d.sizeY;te++)try{V[te][P]&&(V[te][P].el=d)}catch(ve){console.warn("addItemToPositionBox-warn:",ve)}}function ga(d){let V=ot.value;d+=2;for(let P=0;P<d;P++)if(V[P]==null){let te=[];for(let ve=0;ve<ie;ve++)te.push({el:!1});V.push(te)}_n.value=d,ai(Pe.value).css("height",(_n.value+2)*Je.value+"px")}function Y(d){let V=ot.value;if(!(d.x<=0||d.y<=0))for(let P=d.x-1;P<d.x-1+d.sizeX;P++)for(let te=d.y-1;te<d.y-1+d.sizeY;te++)try{V[te][P]&&(V[te][P].el=!1)}catch(ve){console.warn(ve)}}function Se(){let d=Pe.value.offsetWidth,V=Math.round(d/Ne.value);jt.value=V,ie=jt.value}function Ae(d,V){Y(d);let P=cn(d);Pn.forEach(P,function(ve){let it=Gt(ve);it>0&&nn(ve,it)}),d.sizeX=V.sizeX,d.sizeY=V.sizeY,d.sizeX+d.x-1>ie&&(d.sizeX=ie-d.x+1),d.sizeY+d.y>_n.value&&ga(d.y+d.sizeY),Ot(d),Wn(d),Lt(d);let te=Gt(d);te>0&&nn(d,te)}function kt(d,V){V=V||{},V.x=V.x||d.x,V.y=V.y||d.y,d.x<1&&(d.x=1),d.sizeX>ie&&(d.sizeX=ie),d.sizeX<1&&(d.sizeX=1),d.x+d.sizeX-1>ie&&(d.x=ie-d.sizeX+1,d.x<1&&(d.x=1)),d.y<1&&(d.y=1),d.sizeY<1&&(d.sizeY=1),d.y+d.sizeY>_n.value-1&&ga(d.y+d.sizeY-1)}function wt(d,V){Y(d);let P=cn(d);Pn.forEach(P,function(ve){let it=Gt(ve);it>0&&nn(ve,it)}),d.x=V.x,d.y=V.y,kt(d,V),Ot(d),Wn(d),Lt(d);let te=Gt(d);te>0&&nn(d,te)}function It(d){d&&(ye.value.forEach((V,P)=>{d===V.id&&Dt(P)}),lt($.value)||pt(()=>{Vn()}))}function Ye(d){if(d&&Si(d,$.value)){if(Zt()){Y(d);let P=cn(d);Pn.forEach(P,function(te){let ve=Gt(te);ve>0&&nn(te,ve)})}let V=[];d.innerType==="VQuery"&&(d.propValue||[]).forEach(P=>{V=[...P.checkedFields,...V]}),V.length&&setTimeout(()=>{Array.from(new Set(V)).forEach(P=>{We.emit(`query-data-${P}`)})},300),b.recordSnapshotCache("removeItem")}}function Dt(d){let V=ye.value[d];V&&Si(V,$.value)&&(Ye(V),p.removeLinkageInfo(V.id),lt($.value)?p.deleteComponentById(V.id,void 0,!1):ye.value.splice(d,1))}function Qt(d,V){V<0&&(V=ye.value.length),d._dragId=V,kt(d,{x:d.x,y:d.y}),Ot(d),Wn(d);let P=Gt(d);P>0&&nn(d,P)}function Lt(d){let V=Ne.value*d.sizeX-ge.value,P=Je.value*d.sizeY-Be.value,te=Ne.value*(d.x-1)+ge.value,ve=Je.value*(d.y-1)+Be.value,it={x1:te,x2:te+V,y1:ve,y2:ve+P,c1:te+V/2,c2:ve+P/2,el:d},ut=Pn.findIndex($e.value,function(Ue){return Ue.el._dragId==d._dragId});ut!=-1&&$e.value.splice(ut,1,it)}function Ot(d){let V=cn(d);Pn.forEach(V,function(P){if(P._dragId==d._dragId)return;let te=d.y+d.sizeY-P.y;te>0&&tn(P,te)})}function Gt(d){let V=0;for(let P=d.y-2;P>=0;P--){for(let te=d.x-1;te<d.x-1+d.sizeX;te++)if(ot.value[P][te]&&ot.value[P][te].el)return V;V++}return V}function tn(d,V){Y(d);let P=cn(d);Pn.forEach(P,function(ve){if(ve._dragId==d._dragId)return;let it=Mn(d,ve,V);it>0&&tn(ve,it)});let te={y:d.y+V};rn(d,te),kt(d,te),Wn(d),Lt(d)}function rn(d,V){V=V||{};let P=V.x||d.x,te=V.y||d.y;d.x=P,d.y=te,d.y+d.sizeY>_n.value&&(_n.value=d.y+d.sizeY)}function Mn(d,V,P){let te=[];for(let it=V.x-1;it<V.x-1+V.sizeX;it++){let ut=0;for(let Ue=d.y-1+d.sizeY;Ue<V.y-1;Ue++)ot.value[Ue][it]&&ot.value[Ue][it].el==!1&&ut++;te.push(ut)}let ve=Math.max.apply(Math,te);return P=P-ve,P>0?P:0}function nn(d,V){Y(d);let P=cn(d);rn(d,{y:d.y-V}),Wn(d),Lt(d),Pn.forEach(P,function(te){let ve=Gt(te);ve>0&&nn(te,ve)})}function cn(d){let V={};for(let P=d.x-1;P<d.x-1+d.sizeX;P++)for(let te=d.y-1;te<ot.value.length;te++){let ve=ot.value[te][P];if(ve&&ve.el){V[ve.el._dragId]=ve.el;break}}return Pn.sortBy(Pn.values(V),"y")}const ln=(d,V,P)=>{p.setCurComponent({component:V,index:P}),p.setClickComponentStatus(!0),p.setInEditorStatus(!0)},Tn=(d,V,P)=>{ln(d,V,P),Ln(d)},Ln=d=>{Pn.isEmpty(ne.value)||(ne.value.cloneItem&&ne.value.cloneItem.remove(),ne.value.resizeItem&&(delete ne.value.resizeItem.isPlayer,Ge.value(d,ne.value.resizeItem,ne.value.resizeItem._dragId)),ne.value.moveItem&&(a==null||a.value(null,d,ne.value.moveItem,ne.value.moveItem._dragId),ne.value.moveItem.show=!0,delete ne.value.moveItem.isPlayer),ne.value={})},yn=z(()=>{var d;return Zt()&&((d=Ee.value)==null?void 0:d.dashboardAdaptor)==="withWidth"}),vn=()=>{Ne.value=Math.floor((W.value+ge.value)*1e3)/1e3,yn.value?Je.value=Ne.value*1.6:Je.value=Math.floor((F.value+Be.value)*1e3)/1e3},ea=()=>{lt($.value)&&xt(),vn(),Se()},Vn=()=>{vn(),ot.value=[],$e.value=[],Xt=void 0,En=!1,qt=200,_n.value=0,ie=0,Se(),zn(),Zt()&&nl(ye.value);let d=0,V=setInterval(function(){if(d>=ye.value.length)clearInterval(V),pt(()=>{tt.value=!0});else{let P=ye.value[d];Qt(P,d),d++}},1);K.value=!0},ka=d=>{let V=setInterval(()=>{tt.value&&(clearInterval(V),d())},100)},sn=()=>{Je.value=Je.value+.001,pt(function(){Je.value=Je.value-.001})},Gn=()=>ye.value.length===0?1:ye.value.filter(d=>d.y).map(d=>d.y+d.sizeY).reduce((d,V)=>Math.max(d,V),0),qn=d=>{d.y=d.y===void 0?Gn():d.y,Ua(d,W.value,F.value),sn(),pt(()=>{Qt(d,ye.value.length-1)})},Lo=(d,V,P)=>{Ua(V,Ne.value,Je.value),Le.value&&(ce.value(d,V,P),ne.value||(ne.value={}),ne.value.resizeItem=V,ne.value.resizeItemIndex=P,ne.value.moveItem=V,ne.value.moveItemIndex=P,ne.value.originX=0,ne.value.originY=0,ne.value.startX=0,ne.value.startY=0,ne.value.oldX=V.x,ne.value.oldY=V.y,ne.value.oldSizeX=V.sizex,ne.value.oldSizeY=V.sizey)},Oo=(d,V,P)=>{Ua(V,Ne.value,Je.value),ne.value||(ne.value={}),be.value.call(null,d,V,P),ne.value.moveItem=V,ne.value.moveItemIndex=P,ne.value.originX=0,ne.value.originY=0,ne.value.startX=0,ne.value.startY=0,ne.value.oldX=V.x,ne.value.oldY=V.y,ne.value.oldSizeX=V.sizex,ne.value.oldSizeY=V.sizey},Ia=(d,V)=>{const P=ne.value;let te=Pn.get(P,"moveItem");if(ma(d),!me.value)return;fe.value(d,te,te._dragId),te.isPlayer=!0;let ve=P.oldX,it=P.oldY,ut=Math.floor(V.style.left/Ne.value+1),Ue=Math.floor(V.style.top/Je.value+1);ut=ut>0?ut:1,Ue=Ue>0?Ue:1,Hn(function(un,dn,la,_a){return function(){(un!=dn||_a!=la)&&(wt(te,{x:un,y:la}),P.oldX=un,P.oldY=la)}}(ut,ve,Ue,it),10)},eo=(d,V)=>{const{width:P,height:te}=V.style,ve=ne.value;let it=Pn.get(ve,"resizeItem");Ve.value(d,it,it._dragId),it.isPlayer=!0;let ut=P%Ne.value>Ne.value/4*3?Math.floor(P/Ne.value+1):Math.floor(P/Ne.value),Ue=te%Je.value>Je.value/4*3?Math.floor(te/Je.value+1):Math.floor(te/Je.value),un=Math.floor((V.style.left+5)/Ne.value+1),dn=Math.floor((V.style.top+5)/Je.value+1);un=un>0?un:1,dn=dn>0?dn:1,Hn(function(la,_a){return function(){Ae(it,{sizeX:ut,sizeY:Ue}),ve.oldSizeX=ut,ve.oldSizeY=Ue,wt(it,{x:la,y:_a}),ve.oldX=la,ve.oldY=_a}}(un,dn),10)},Ma=d=>{Pn.isEmpty(ne.value)||(ne.value.cloneItem&&ne.value.cloneItem.remove(),ne.value.resizeItem&&(delete ne.value.resizeItem.isPlayer,Ge.value(d,ne.value.resizeItem,ne.value.resizeItem._dragId)),ne.value.moveItem&&(a==null||a.value(null,d,ne.value.moveItem,ne.value.moveItem._dragId),ne.value.moveItem.show=!0,delete ne.value.moveItem.isPlayer),ne.value={})},za=d=>{const V=Ri(d);V.x=300/Ne.value,V.isShow=!1,V.id=Ka(),p.addComponent({component:V,index:void 0}),m.value.type==="dashboard"&&di(V),qn(V),ne.value||(ne.value={}),ne.value.moveItem=V,ne.value.moveItemIndex=ye.value.length-1,ne.value.oldX=1,ne.value.oldY=1},to=d=>{ne.value&&ne.value.moveItem&&!ne.value.moveItem.isShow&&(Dt(ye.value.length-1),Ln(d))},Fo=d=>{!ne.value||!ne.value.moveItem||(ne.value.moveItem.style.left=d.pageX,ne.value.moveItem.style.top=d.pageY+_.value,Ia(d,ne.value.moveItem))},Dn=()=>ne.value.moveItem,no=(d,V)=>{Me.value.dialogInit(Ee.value,Oe.value[V.id],V,d,{scale:Wt.value})},ya=d=>{var V;(V=re.value)==null||V.optInit(d)},Bo=()=>{qe.value=setInterval(()=>{b.snapshotCatchToStore()},1e3)},zo=d=>{ki(()=>{he.value.dialogInit(d)})},ta=d=>{ki(()=>{st.value.dialogInit(d)})},na=z(()=>lt($.value)),qa=z(()=>lt($.value)),qo=z(()=>!!Ee.value.dashboard.showGrid&&lt($.value)&&Zt()),ba=z(()=>!!Ee.value.dashboard.showGrid&&lt($.value)&&!Zt()),ao=()=>{p.setBatchOptStatus(!0),Q.value.components.forEach(d=>{p.addCurBatchComponent(d)})},Na=d=>d.isShow&&(d.component!=="GroupArea"||d.component==="GroupArea"&&!N.value),oo=z(()=>ye.value.length>0&&ye.value[ye.value.length-1].component==="GroupArea"&&N.value),io=async()=>{let d;const V=p.componentData.filter(P=>P.component==="GroupArea");V&&V.length>0&&(d=V[0]),Q.value.components.length===0&&p.setBatchOptStatus(!1),Q.value.components.length>1?(ao(),E.calcComposeArea(),V.length===0&&(d=al("GroupArea","GroupArea"),p.addComponent({component:d,index:void 0})),d.style.left=Q.value.style.left,d.style.top=Q.value.style.top,d.style.width=Q.value.style.width,d.style.height=Q.value.style.height,p.setClickComponentStatus(!0),p.setCurComponent({component:d,index:p.componentData.length-1})):d&&V.forEach(P=>{p.deleteComponentById(P.id)})},No=z(()=>{var d;return((d=Ee.value)==null?void 0:d.popupAvailable)&&lt($.value)});return gn(()=>{lt($.value)&&(Bo(),xt(),p.setEditMode("edit")),E.getEditor($.value),Te.on("handleDragStartMoveIn-"+$.value,za),Te.on("handleDragEnd-"+$.value,to),Te.on("hideArea-"+$.value,St),Te.on("removeMatrixItem-"+$.value,Dt),Te.on("removeMatrixItemPosition-"+$.value,Ye),Te.on("removeMatrixItemById-"+$.value,It),Te.on("addDashboardItem-"+$.value,qn),Te.on("snapshotChange-"+$.value,Vn),Te.on("doCanvasInit-"+$.value,Vn)}),ia(()=>{qe.value&&(clearInterval(qe.value),qe.value=null),Te.off("handleDragStartMoveIn-"+$.value,za),Te.off("handleDragEnd-"+$.value,to),Te.off("hideArea-"+$.value,St),Te.off("removeMatrixItem-"+$.value,Dt),Te.off("removeMatrixItemPosition-"+$.value,Ye),Te.off("removeMatrixItemById-"+$.value,It),Te.off("addDashboardItem-"+$.value,qn),Te.off("snapshotChange-"+$.value,Vn),Te.off("doCanvasInit"+$.value,Vn)}),u({canvasSizeInit:ea,canvasInit:Vn,afterInitOk:ka,addItemBox:qn,handleDragOver:Fo,getMoveItem:Dn,handleMouseUp:Tn,handleMouseDown:_t,findPositionX:Ba,watermarkUpdate:at}),(d,V)=>(x(),ee("div",{id:Re.value,ref_key:"container",ref:Pe,class:Ht(["editor",{edit:l(De),"dashboard-editor":X.value,"group-canvas":H.value}]),style:ct(Rn.value),onContextmenu:Yt},[ii(d.$slots,"canvasDragTips",{},void 0,!0),Tt.value?(x(),le(Ru,{key:0})):ae("",!0),l(m).type==="dataV"?(x(),le(Ao,{key:1,"canvas-style-data":l(Ee),"component-data":l(ye),"canvas-id":l($)},null,8,["canvas-style-data","component-data","canvas-id"])):ae("",!0),No.value?(x(),le(Eo,{key:2,"dv-info":l(m),"canvas-id":l($),"canvas-style-data":l(Ee),canvasViewInfo:l(Oe),"pop-component-data":c.popComponentData,scale:Wt.value,"canvas-state":l(I),"show-position":"popEdit"},null,8,["dv-info","canvas-id","canvas-style-data","canvasViewInfo","pop-component-data","scale","canvas-state"])):ae("",!0),qo.value?(x(),le(rc,{key:3,"matrix-style":At.value,themes:l(ze)},null,8,["matrix-style","themes"])):ae("",!0),ba.value?(x(),le(hc,{key:4,"matrix-style":At.value,themes:l(ze)},null,8,["matrix-style","themes"])):ae("",!0),ne.value&&ne.value.moveItem&&l(v)!=="preview"?(x(),le(Tu,{key:5,"base-height":yn.value?l(W)*1.6:l(F),"base-width":l(W),"cur-gap":ue.value,element:ne.value.moveItem},null,8,["base-height","base-width","cur-gap","element"])):ae("",!0),pe.value?(x(),le(Fu,{key:6,"canvas-id":l($)},null,8,["canvas-id"])):ae("",!0),oo.value?(x(),le(bc,{key:7,style:ct(jn(l(ye)[l(ye).length-1]))},null,8,["style"])):ae("",!0),(x(!0),ee(Bt,null,kn(l(ye),(P,te)=>Ft((x(),le(pu,{"canvas-id":l($),scale:zt.value,key:P.id,"default-style":P.style,style:ct(jn(P)),element:P,index:te,class:Ht({lock:P.isLock&&l(v)==="edit"}),"base-cell-info":U.value,"canvas-active":c.canvasActive,"is-tab-move-check":l(Ke),onOnStartResize:ve=>Lo(ve,P,te),onOnStartMove:ve=>Oo(ve,P,te),onOnMouseUp:V[0]||(V[0]=ve=>Ma(ve)),onOnDragging:ve=>Ia(ve,P),onOnResizing:ve=>eo(ve,P),onUserViewEnlargeOpen:ve=>no(ve,P),onDatasetParamsInit:ve=>ya(P),onLinkJumpSetOpen:ve=>zo(P),onLinkageSetOpen:ve=>ta(P)},{default:A(()=>[P.component==="UserView"||P.isPlugin?(x(),le(Za(l(go)(P.component)),{key:0,class:"component",id:"component"+P.id,active:P.id===mt.value,"dv-type":l(m).type,scale:Wt.value,style:ct(Jt(P.style)),"prop-value":P.propValue,"is-edit":!0,view:l(Oe)[P.id],element:P,request:P.request,onInput:Kn,"dv-info":l(m),"canvas-active":c.canvasActive,"show-position":"canvas","font-family":c.fontFamily},null,40,["id","active","dv-type","scale","style","prop-value","view","element","request","dv-info","canvas-active","font-family"])):P.component.includes("Svg")?(x(),le(Za(l(go)(P.component)),{key:1,id:"component"+P.id,scale:Wt.value,class:"component","is-edit":!0,style:ct($n(P.style)),"prop-value":P.propValue,element:P,request:P.request,"canvas-style-data":l(Ee),"canvas-view-info":l(Oe),"dv-info":l(m),active:P.id===mt.value,"canvas-active":c.canvasActive,"show-position":"edit","font-family":c.fontFamily},null,8,["id","scale","style","prop-value","element","request","canvas-style-data","canvas-view-info","dv-info","active","canvas-active","font-family"])):(x(),le(Za(l(go)(P.component)),{key:2,id:"component"+P.id,scale:Wt.value,class:"component","is-edit":!0,style:ct(Jt(P.style)),curStyle:jn(P),"prop-value":P.propValue,element:P,request:P.request,"canvas-style-data":l(Ee),"canvas-view-info":l(Oe),"dv-info":l(m),active:P.id===mt.value,"canvas-active":c.canvasActive,"show-position":"edit","font-family":c.fontFamily},null,8,["id","scale","style","curStyle","prop-value","element","request","canvas-style-data","canvas-view-info","dv-info","active","canvas-active","font-family"]))]),_:2},1032,["canvas-id","scale","default-style","style","element","index","class","base-cell-info","canvas-active","is-tab-move-check","onOnStartResize","onOnStartMove","onOnDragging","onOnResizing","onUserViewEnlargeOpen","onDatasetParamsInit","onLinkJumpSetOpen","onLinkageSetOpen"])),[[Kt,Na(P)]])),128)),na.value?(x(),le(wu,{key:8,"show-position":"canvasCore"})):ae("",!0),qa.value?(x(),le(Su,{key:9})):ae("",!0),Ft(T(Iu,{start:nt.value,width:bt.value,height:Z.value},null,8,["start","width","height"]),[[Kt,xe.value]]),T(fi,{ref_key:"userViewEnlargeRef",ref:Me},null,512),T(hl,{ref_key:"linkJumpRef",ref:he},null,512),T(ml,{ref_key:"linkageRef",ref:st},null,512),T(or,{ref_key:"customDatasetParamsRef",ref:re},null,512)],46,_c))}});const ir=Vt(wc,[["__scopeId","data-v-873be1f8"]]),Cc={class:"group"},xc=vt({__name:"GroupPreview",props:{propValue:{type:Array,default:()=>[]},element:{type:Object,default(){return{propValue:null}}},showPosition:{type:String,required:!1,default:"canvas"},dvInfo:{type:Object,required:!0},searchCount:{type:Number,required:!1,default:0},scale:{type:Number,required:!1,default:1},canvasViewInfo:{type:Object,required:!0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(c){const u=Rt(),b=J(null),p=c,{propValue:E,dvInfo:S,searchCount:C,scale:m,canvasViewInfo:v}=on(p),y=_=>({width:co(_.groupStyle.width),height:co(_.groupStyle.height),top:co(_.groupStyle.top),left:co(_.groupStyle.left)}),I=(_,M)=>{b.value.dialogInit(u.canvasStyleData,v.value[M.id],M,_,{scale:m.value})};return(_,M)=>(x(),ee("div",Cc,[G("div",null,[(x(!0),ee(Bt,null,kn(l(E),(Q,N)=>(x(),le(Ho,{id:"component"+Q.id,"view-info":l(v)[Q.id],key:N,config:Q,index:N,"dv-info":l(S),"canvas-view-info":l(v),style:ct(y(Q)),"show-position":c.showPosition,"search-count":l(C),scale:l(m),"font-family":c.fontFamily,onUserViewEnlargeOpen:D=>I(D,Q)},null,8,["id","view-info","config","index","dv-info","canvas-view-info","style","show-position","search-count","scale","font-family","onUserViewEnlargeOpen"]))),128))]),T(fi,{ref_key:"userViewEnlargeRef",ref:b},null,512)]))}});const Sc=Vt(xc,[["__scopeId","data-v-fb696fa6"]]),kc=vt({__name:"CanvasGroup",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Array,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},element:{type:Object,default(){return{propValue:[]}}},isEdit:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"canvas"},canvasId:{type:String,required:!0},searchCount:{type:Number,required:!1,default:0},scale:{type:Number,required:!1,default:1},fontFamily:{type:String,required:!1,default:"inherit"}},setup(c){const u=c,{element:b,isEdit:p,showPosition:E,canvasStyleData:S,canvasViewInfo:C,dvInfo:m,componentData:v}=on(u);return(y,I)=>l(p)?(x(),le(ir,{key:0,class:"canvas-area-shadow",ref:"canvasGroup","component-data":l(v),"canvas-style-data":l(S),"canvas-view-info":l(C),"canvas-id":c.canvasId,"canvas-active":l(b).canvasActive,"font-family":c.fontFamily},null,8,["component-data","canvas-style-data","canvas-view-info","canvas-id","canvas-active","font-family"])):(x(),le(Sc,{key:1,ref:"dashboardPreview","dv-info":l(m),element:l(b),"search-count":c.searchCount,"prop-value":l(b).propValue,"show-position":l(E),scale:c.scale*100,"canvas-view-info":l(C),"font-family":c.fontFamily},null,8,["dv-info","element","search-count","prop-value","show-position","scale","canvas-view-info","font-family"]))}}),Ic=vt({__name:"Component",props:{propValue:{type:Array,default:()=>[]},element:{type:Object,required:!0,default(){return{propValue:null}}},showPosition:{type:String,required:!1,default:"canvas"},dvInfo:{type:Object,required:!0},searchCount:{type:Number,required:!1,default:0},isEdit:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:1},active:{type:Boolean,default:!1},canvasViewInfo:{type:Object,required:!0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(c){const u=Rt(),{canvasStyleData:b,curComponent:p}=$t(u),E=va(_l),S=c,{propValue:C,dvInfo:m,element:v,scale:y,canvasViewInfo:I,searchCount:_}=on(S),M=z(()=>{const N=E;return N.scale=b.value.scale,N.width=v.value.style.width*100/N.scale,N.height=v.value.style.height*100/N.scale,N}),Q=()=>{v.value.canvasActive=!0};return mn(()=>S.active,()=>{pt(()=>{!S.active&&(!p.value||p.value&&!p.value.canvasId.includes(v.value.id))&&(v.value.canvasActive=!1)})},{deep:!0}),gn(()=>{pt(()=>{xa(v.value)})}),(N,D)=>(x(),ee("div",{class:Ht(["group",{"canvas-active-custom":l(v).canvasActive}]),onDblclick:Q},[T(kc,{"component-data":l(C),"dv-info":l(m),"show-position":c.showPosition,"canvas-id":"Group-"+l(v).id,"canvas-style-data":M.value,"canvas-view-info":l(I),"is-edit":c.isEdit,element:l(v),scale:l(y),"search-count":l(_),"font-family":c.fontFamily},null,8,["component-data","dv-info","show-position","canvas-id","canvas-style-data","canvas-view-info","is-edit","element","scale","search-count","font-family"])],34))}});const rr=Vt(Ic,[["__scopeId","data-v-5b6ce0f4"]]),Lp=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"})),Mc=["id"],Tc=["id"],Vc=vt({__name:"DeCanvas",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Array,required:!0},canvasViewInfo:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},canvasActive:{type:Boolean,default:!0},outerScale:{type:Number,required:!1,default:1},fontFamily:{type:String,required:!1,default:"inherit"},canvasPosition:{type:String,required:!1,default:"main"}},setup(c,{expose:u}){const b=c,{canvasStyleData:p,componentData:E,canvasViewInfo:S,canvasId:C,canvasActive:m,canvasPosition:v}=on(b),y=J("de-canvas-"+C.value),I=Rt(),_=ra(),{pcMatrixCount:M,curOriginThemes:Q,mobileInPc:N}=$t(I),D=J(null),W=J(null),F=J(!1),ge=J(100),Be=J(100),me=J(100),be=Bn({screenWidth:1920,screenHeight:1080,curScrollTop:0}),fe=J(0),a=J(0),Le=J(!1),ce=J(0),Ve=J(0),Ge=J(null),De=J("edit-"+C.value),$=z(()=>p.value&&lt(C.value)?{...Io(p.value)}:{}),Ee=Me=>{const{componentName:re,innerType:he,staticMap:st}=Me;if(re){const Re=wl(re,he,Q,st);Ua(Re,fe.value,a.value),Re.id=Ka(),Re.y=void 0,Re.x=Ge.value.findPositionX(Re),I.addComponent({component:Re,index:void 0}),di(Re),pt(()=>{Ge.value.addItemBox(Re),pt(()=>{se(Re.y)})}),_.recordSnapshotCacheWithPositionChange("renderChart",Re.id)}},ye=Me=>{if(lt(C.value)){Me.preventDefault(),Me.stopPropagation();const re=Ge.value.getMoveItem();re.isShow=!0,Ua(re,fe.value,a.value),Ge.value.handleMouseUp(Me,re,E.value.length-1),_.recordSnapshotCacheWithPositionChange("renderChart",re.id)}},Oe=Me=>{lt(C.value)&&(Me.preventDefault(),Me.dataTransfer.dropEffect="copy",Ge.value.handleDragOver(Me))},ze=Me=>{lt(C.value)&&(Me.stopPropagation(),I.setClickComponentStatus(!1),I.setInEditorStatus(!0),I.setCurComponent({component:null,index:null}))},Ke=()=>{Ge.value.canvasInit()},et=(Me=!0)=>{(m.value||v.value==="tab")&&(Le.value=!0,setTimeout(function(){D.value&&(bt(),pt(()=>{Ge.value.canvasInit(),Ge.value.afterInitOk(function(){Le.value=!1})})),I.setDataPrepareState(!0),lt(C.value)&&Me&&_.recordSnapshotCache("renderChart")},500))},ht=()=>{pt(()=>{D.value&&(bt(),pt(()=>{Ge.value.canvasSizeInit(),nt()}))})},nt=()=>{pt(()=>{if(D.value){let Me=D.value.clientWidth,re=D.value.clientHeight;if(ge.value=Math.floor(Me*100/p.value.width),Be.value=Math.floor(re*100/p.value.height),me.value=Math.min(ge.value,Be.value),Zt()&&lt(C.value)){const he=N.value?4:1;I.setCanvasStyleScale(me.value*he)}}})},bt=()=>{be.screenWidth=D.value.clientWidth-4,be.screenHeight=D.value.clientHeight,fe.value=be.screenWidth/M.value.x,a.value=be.screenHeight/M.value.y,ce.value=0,Ve.value=0,F.value=!0,lt(C.value)&&I.setBashMatrixInfo({baseWidth:fe.value,baseHeight:a.value,baseMarginLeft:ce.value,baseMarginTop:Ve.value})},Z=Me=>{Ge.value.addItemBox(Me)},xe=Me=>{setTimeout(()=>{Me.canvasId=C.value,I.addComponent({component:Me,index:void 0,isFromGroup:!0}),Z(Me),et()},500)};gn(()=>{window.addEventListener("resize",ht),Qi().listenTo(document.getElementById(y.value),()=>{ht()}),et(),lt(C.value)&&(Te.on("handleNew",Ee),Te.on("event-canvas-size-init",ht)),Te.on("moveOutFromTab-"+C.value,xe),Te.on("matrix-canvasInit",et)}),ia(()=>{lt(C.value)&&(Te.off("handleNew",Ee),Te.off("event-canvas-size-init",ht)),Te.off("moveOutFromTab-"+C.value,xe),Te.off("matrix-canvasInit",et)});const Ie=()=>({baseWidth:fe.value,baseHeight:a.value}),se=(Me=1)=>{setTimeout(()=>{var re;W.value.scrollTo({top:(Me-1)*a.value,behavior:"smooth"}),(re=Ge.value)==null||re.watermarkUpdate()})},ke=()=>{lt(C.value)&&(I.mainScrollTop=W.value.scrollTop)};return mn(()=>m.value,()=>{m.value&&ht()}),u({addItemBox:Z,canvasInit:et,canvasInitImmediately:Ke,getBaseMatrixSize:Ie}),(Me,re)=>{const he=Ao;return x(),ee("div",{ref_key:"canvasOut",ref:D,id:De.value,class:Ht(["content",{"render-active":Le.value}])},[T(he,{"canvas-style-data":l(p),"component-data":l(E),"canvas-id":l(C)},null,8,["canvas-style-data","component-data","canvas-id"]),G("div",{id:y.value,ref_key:"canvasInner",ref:W,class:Ht(["db-canvas",{"db-canvas-dashboard":!l(Zt)()}]),style:ct($.value),onDrop:ye,onDragover:Oe,onMousedown:ze,onScroll:ke},[F.value?(x(),le(ir,{key:0,ref_key:"cyGridster",ref:Ge,"component-data":l(E),"canvas-style-data":l(p),"canvas-view-info":l(S),"canvas-id":l(C),"base-margin-left":ce.value,"base-margin-top":Ve.value,"base-width":fe.value,"base-height":a.value,"font-family":c.fontFamily,onScrollCanvasAdjust:se},null,8,["component-data","canvas-style-data","canvas-view-info","canvas-id","base-margin-left","base-margin-top","base-width","base-height","font-family"])):ae("",!0)],46,Tc)],10,Mc)}}});const lr=Vt(Vc,[["__scopeId","data-v-1d55defc"]]),Op=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})),sr=vt({__name:"DeCustomTab",props:{hideTitle:Boolean,fontColor:String,activeColor:String,borderColor:String,borderActiveColor:String,styleType:{type:String,default:"",validator:c=>["","radioGroup"].includes(c)}},setup(c){const u=c,b=z(()=>[{"--de-font-color":u.fontColor},{"--de-active-color":u.activeColor},{"--de-border-color":u.borderColor},{"--de-border-active-color":u.borderActiveColor}]),p=z(()=>u.styleType?[u.styleType,u.fontColor&&"fontColor",u.activeColor&&"activeColor"]:[u.fontColor&&"fontColor",u.activeColor&&"activeColor",E.value?"noBorder":u.borderColor&&"borderColor",u.borderActiveColor&&"borderActiveColor",u.hideTitle&&"no-header"]),E=z(()=>u.borderColor==="none");return(S,C)=>{const m=Xi;return x(),le(m,Tr({class:["de-tabs",...p.value],style:b.value},S.$attrs),{default:A(()=>[ii(S.$slots,"default")]),_:3},16,["class","style"])}}});const Dc={key:0},Pc={class:"el-dropdown-link"},Ac={class:"dialog-footer"},Ec=vt({__name:"Component",props:{canvasStyleData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},element:{type:Object,default(){return{propValue:[]}}},isEdit:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"canvas"},scale:{type:Number,required:!1,default:1},searchCount:{type:Number,required:!1,default:0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(c){const u=Rt(),b=ra(),{tabMoveInActiveId:p,bashMatrixInfo:E,editMode:S,mobileInPc:C}=$t(u),m=J(null);let v=null;const{t:y}=In(),I=c,{element:_,isEdit:M,showPosition:Q,canvasStyleData:N,canvasViewInfo:D,dvInfo:W,scale:F,searchCount:ge}=on(I),Be=z(()=>_.value.titleBackground.active.innerImage.replace("board/","").replace(".svg","")),me=z(()=>_.value.titleBackground.inActive.innerImage.replace("board/","").replace(".svg","")),be=pe=>{var H;const{backgroundImageEnable:ue,backgroundType:U,innerImage:X}=_.value.titleBackground.inActive;return _.value.editableTabsValue!==pe&&!_.value.titleBackground.multiply&&((H=_.value.titleBackground)==null?void 0:H.enable)&&ue&&U==="innerImage"&&typeof X=="string"},fe=pe=>{var H;const{backgroundImageEnable:ue,backgroundType:U,innerImage:X}=_.value.titleBackground.active;return(_.value.editableTabsValue===pe||_.value.titleBackground.multiply)&&((H=_.value.titleBackground)==null?void 0:H.enable)&&ue&&U==="innerImage"&&typeof X=="string"},a=()=>{var pe;(pe=_.value.propValue)==null||pe.forEach(ue=>{var X;const U=_.value.editableTabsValue===ue.name?ha.resume:ha.paused;(X=ue.componentData)==null||X.forEach(H=>{U(H.id),H.component==="Group"&&H.propValue.forEach(K=>{U(K.id)})})})},Le=()=>{Ve.hoverFlag=!0},ce=()=>{Ve.hoverFlag=!1},Ve=Bn({activeTabName:"",curItem:{},textarea:"",dialogVisible:!1,tabShow:!0,hoverFlag:!1}),Ge=J(!1),De=J("none");let $;const Ee=z(()=>{var pe,ue;return _.value&&_.value.style&&((pe=_.value.style)==null?void 0:pe.showTabTitle)===!1?!1:(ue=_.value.style)==null?void 0:ue.showTabTitle}),ye=z(()=>S.value==="edit"&&M.value&&!C.value),Oe=Zt()?"light":"dark",ze=()=>{setTimeout(()=>{if(_.value.propValue.length>1){const pe=document.getElementById("tab-"+_.value.propValue[_.value.propValue.length-1].name);Ge.value=pe.parentNode.clientWidth>m.value.clientWidth-100}else Ge.value=!1})},Ke=(pe,ue)=>({command:pe,param:ue}),et=z(()=>W.value.type==="dashboard"&&N.value.dashboard.gap==="yes"?N.value.dashboard.gapSize:0);function ht(){Ve.curItem.title=Ve.textarea,Ve.dialogVisible=!1,b.recordSnapshotCache("sureCurTitle")}function nt(){const ue={name:Ka(),title:y("visualization.new_tab"),componentData:[],closable:!0};_.value.propValue.push(ue),_.value.editableTabsValue=ue.name,b.recordSnapshotCache("addTab")}function bt(pe){Ve.curItem=pe;let ue=_.value.propValue.length;for(;ue--;)if(_.value.propValue[ue].name===pe.name){_.value.propValue.splice(ue,1);const U=(ue-1+_.value.propValue.length)%_.value.propValue.length;_.value.editableTabsValue=_.value.propValue[U].name,Ve.tabShow=!1,pt(()=>{Ve.tabShow=!0})}}function Z(pe){nt();const ue=_.value.propValue[_.value.propValue.length-1],U={},X=_.value.id+"--"+ue.name;ue.componentData=qi(X,pe.componentData,U),u.updateCopyCanvasView(U)}function xe(pe){Ve.activeTabName=pe.name,Ve.curItem=pe,Ve.textarea=pe.title,Ve.dialogVisible=!0}function Ie(pe){switch(pe.command){case"editTitle":xe(pe.param);break;case"deleteCur":bt(pe.param),b.recordSnapshotCache("deleteCur");break;case"copyCur":Z(pe.param),b.recordSnapshotCache("copyCur");break}}const se=()=>{if(W.value.id){const pe=["canvas","canvasDataV","edit"].includes(Q.value)?"snapshot":"core";Gi(W.value.id,pe).then(ue=>{u.setNowPanelTrackInfo(ue.data)})}},ke=pe=>{_.value.propValue.forEach((ue,U)=>{if(_.value.editableTabsValue===ue.name)if(Zt()){Te.emit("removeMatrixItemById-canvas-main",pe.id),u.setCurComponent({component:null,index:null}),pe.canvasId=_.value.id+"--"+ue.name;const X=$.refs["tabCanvas_"+U][0];if(X){const H=X.getBaseMatrixSize();wo(pe,H),pe.x=1,pe.y=200,pe.style.left=0,pe.style.top=0,ue.componentData.push(pe),X.addItemBox(pe),pt(()=>{X.canvasInitImmediately()})}}else{const X=Wi(pe.id);u.deleteComponent(X),u.setCurComponent({component:null,index:null}),pe.canvasId=_.value.id+"--"+ue.name,Ei(pe,_.value),ue.componentData.push(pe)}}),se()},Me=pe=>{Zt()&&wo(pe,E.value,!0),Te.emit("removeMatrixItemById-"+pe.canvasId,pe.id),u.setCurComponent({component:null,index:null}),Zt()?Te.emit("moveOutFromTab-canvas-main",pe):re(pe),se()},re=pe=>{const{left:ue,top:U}=_.value.style;pe.style.left=pe.style.left+ue,pe.style.top=pe.style.top+U,pe.canvasId="canvas-main",u.addComponent({component:pe,index:void 0,isFromGroup:!0})},he=z(()=>p.value&&p.value===_.value.id),st=z(()=>Ge.value?"tab-head-left":"tab-head-"+_.value.style.headHorizontalPosition),Re=pe=>{if(pe){const{backdropFilterEnable:ue,backdropFilter:U,backgroundColorSelect:X,backgroundColor:H,backgroundImageEnable:K,backgroundType:tt,outerImage:Ne,innerPadding:Je,borderRadius:jt}=pe;let ne={padding:Je*F.value+"px",borderRadius:jt+"px"},Pe="";return X&&H&&(Pe=H),K&&tt==="outerImage"&&typeof Ne=="string"?ne.background=`url(${To(Ne)}) no-repeat ${Pe}`:ne["background-color"]=Pe,ue&&(ne["backdrop-filter"]="blur("+U+"px)"),ne}return{}},at=pe=>{var U,X;let ue={};return _.value.editableTabsValue===pe?(ue={textDecoration:_.value.style.textDecoration,fontStyle:_.value.style.fontStyle,fontWeight:_.value.style.fontWeight,fontSize:(_.value.style.activeFontSize||18)+"px",lineHeight:(_.value.style.activeFontSize||18)+"px"},(U=_.value.titleBackground)!=null&&U.enable&&(ue={...ue,...Re(_.value.titleBackground.active)})):(ue={textDecoration:_.value.style.textDecoration,fontStyle:_.value.style.fontStyle,fontWeight:_.value.style.fontWeight,fontSize:(_.value.style.fontSize||16)+"px",lineHeight:(_.value.style.fontSize||16)+"px"},(X=_.value.titleBackground)!=null&&X.enable&&(ue={...ue,...Re(_.value.titleBackground.multiply?_.value.titleBackground.active:_.value.titleBackground.inActive)})),ue},xt=z(()=>_.value&&_.value.style&&_.value.style.headFontColor&&typeof _.value.style.headFontColor=="string"?_.value.style.headFontColor:"none"),At=z(()=>_.value&&_.value.style&&_.value.style.headFontActiveColor&&typeof _.value.style.headFontActiveColor=="string"?_.value.style.headFontActiveColor:"none"),Tt=z(()=>_.value&&_.value.style&&_.value.style.headBorderActiveColor&&typeof _.value.style.headBorderActiveColor=="string"?_.value.style.headBorderActiveColor:"none"),mt=z(()=>!!Ve.textarea&&!!Ve.textarea.trim()),We=Ui(()=>{a()},500);mn(()=>F.value,()=>{We()}),mn(()=>_.value,()=>{ze(),We()},{deep:!0});const zt=()=>{Ve.tabShow=!1,pt(()=>{Ve.tabShow=!0})};mn(()=>ye.value,()=>{Wt()});const Wt=()=>{var pe;if(v&&clearInterval(v),v=null,!ye.value&&(pe=_.value.carousel)!=null&&pe.enable){const ue=(_.value.carousel.time||5)*1e3;let U=1;v=setInterval(()=>{if(!Ve.hoverFlag){const X=U%_.value.propValue.length;U++,pt(()=>{_.value.editableTabsValue=_.value.propValue[X].name})}},ue)}};return gn(()=>{document.addEventListener("visibilitychange",a),_.value.propValue.length>0&&(_.value.editableTabsValue=_.value.propValue[0].name),ze(),["canvas","canvasDataV","edit"].includes(Q.value)&&!C.value&&(Te.on("onTabMoveIn-"+_.value.id,ke),Te.on("onTabMoveOut-"+_.value.id,Me),Te.on("onTabSortChange-"+_.value.id,zt)),$=ri(),Wt(),pt(()=>{xa(_.value)}),setTimeout(()=>{a()},1e3)}),ia(()=>{document.removeEventListener("visibilitychange",a),["canvas","canvasDataV","edit"].includes(Q.value)&&!C.value&&(Te.off("onTabMoveIn-"+_.value.id,ke),Te.off("onTabMoveOut-"+_.value.id,Me),Te.off("onTabSortChange-"+_.value.id,zt))}),Pi(()=>{v&&(clearInterval(v),v=null)}),(pe,ue)=>{const U=Xa("ArrowDown"),X=Sn,H=Vo,K=Do,tt=Po,Ne=ci,Je=Bi,jt=xn,ne=Fa;return Ve.tabShow?(x(),ee("div",{key:0,style:{width:"100%",height:"100%"},class:Ht([[st.value,`ed-tabs-${l(Oe)}`,{"title-hidde-tab":!Ee.value},{"title-show-tab":Ee.value}],"custom-tabs-head"]),ref_key:"tabComponentRef",ref:m},[T(sr,{modelValue:l(_).editableTabsValue,"onUpdate:modelValue":ue[1]||(ue[1]=Pe=>l(_).editableTabsValue=Pe),onTabAdd:nt,addable:ye.value,"font-color":xt.value,"active-color":At.value,"border-color":De.value,"border-active-color":Tt.value,"hide-title":!Ee.value},{default:A(()=>[(x(!0),ee(Bt,null,kn(l(_).propValue,Pe=>(x(),le(Ne,{key:Pe.name,class:"el-tab-pane-custom",lazy:ye.value,label:Pe.title,name:Pe.name},{label:A(()=>[G("div",{class:"custom-tab-title",onMousedown:ue[0]||(ue[0]=Qn(()=>{},["stop"]))},[G("span",{class:"title-inner",style:ct(at(Pe.name))},[Qe(_e(Pe.title)+" ",1),Ft(T(Oa,{style:ct({color:l(_).titleBackground.active.innerImageColor,pointerEvents:"none"}),name:Be.value},null,8,["style","name"]),[[Kt,fe(Pe.name)]]),Ft(T(Oa,{style:ct({color:l(_).titleBackground.inActive.innerImageColor,pointerEvents:"none"}),name:me.value},null,8,["style","name"]),[[Kt,be(Pe.name)]]),ye.value?(x(),ee("span",Dc,[T(tt,{"popper-class":"custom-de-tab-dropdown",effect:l(Oe),trigger:"click",onCommand:Ie},{dropdown:A(()=>[T(K,{style:ct({"font-family":c.fontFamily})},{default:A(()=>[T(H,{command:Ke("editTitle",Pe)},{default:A(()=>[Qe(_e(l(y)("visualization.edit_title")),1)]),_:1},8,["command"]),T(H,{command:Ke("copyCur",Pe)},{default:A(()=>[Qe(_e(l(y)("visualization.copy")),1)]),_:1},8,["command"]),l(_).propValue.length>1?(x(),le(H,{key:0,command:Ke("deleteCur",Pe)},{default:A(()=>[Qe(_e(l(y)("visualization.delete")),1)]),_:1},8,["command"])):ae("",!0)]),_:2},1032,["style"])]),default:A(()=>[G("span",Pc,[l(M)?(x(),le(X,{key:0},{default:A(()=>[T(U)]),_:1})):ae("",!0)])]),_:2},1032,["effect"])])):ae("",!0)],4)],32)]),_:2},1032,["lazy","label","name"]))),128)),(x(!0),ee(Bt,null,kn(l(_).propValue,(Pe,ot)=>(x(),ee("div",{class:Ht(["tab-content-custom",{"switch-hidden":l(_).editableTabsValue!==Pe.name}]),key:Pe.name+"-content",onMouseenter:Le,onMouseleave:ce},[l(M)&&!l(C)?(x(),le(lr,{key:0,ref_for:!0,ref:"tabCanvas_"+ot,"component-data":Pe.componentData,"canvas-style-data":l(N),"canvas-view-info":l(D),"canvas-id":l(_).id+"--"+Pe.name,class:Ht(he.value?"canvas-move-in":""),"canvas-position":"tab","canvas-active":l(_).editableTabsValue===Pe.name,"font-family":c.fontFamily},null,8,["component-data","canvas-style-data","canvas-view-info","canvas-id","class","canvas-active","font-family"])):(x(),le(pi,{key:1,ref_for:!0,ref:"dashboardPreview","dv-info":l(W),"cur-gap":et.value,"component-data":Pe.componentData,"canvas-style-data":{},"canvas-view-info":l(D),"canvas-id":l(_).id+"--"+Pe.name,"preview-active":l(_).editableTabsValue===Pe.name,"show-position":l(Q),"outer-scale":l(F),"font-family":c.fontFamily,"outer-search-count":l(ge)},null,8,["dv-info","cur-gap","component-data","canvas-view-info","canvas-id","preview-active","show-position","outer-scale","font-family","outer-search-count"]))],34))),128))]),_:1},8,["modelValue","addable","font-color","active-color","border-color","border-active-color","hide-title"]),T(ne,{title:"编辑标题","append-to-body":!0,modelValue:Ve.dialogVisible,"onUpdate:modelValue":ue[4]||(ue[4]=Pe=>Ve.dialogVisible=Pe),width:"30%","show-close":!1,"close-on-click-modal":!1,center:""},{footer:A(()=>[G("span",Ac,[T(jt,{onClick:ue[3]||(ue[3]=Pe=>Ve.dialogVisible=!1)},{default:A(()=>[...ue[5]||(ue[5]=[Qe("取消",-1)])]),_:1}),T(jt,{disabled:!mt.value,type:"primary",onClick:ht},{default:A(()=>[...ue[6]||(ue[6]=[Qe("确认",-1)])]),_:1},8,["disabled"])])]),default:A(()=>[T(Je,{modelValue:Ve.textarea,"onUpdate:modelValue":ue[2]||(ue[2]=Pe=>Ve.textarea=Pe),maxlength:"50",placeholder:pe.$t("dataset.input_content")},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue"])],2)):ae("",!0)}}});const ur=Vt(Ec,[["__scopeId","data-v-cbd2f5e3"]]),Fp=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),Hc={class:"svg-triangle-container"},Lc={version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"},Oc=["points","stroke","fill","stroke-width"],Fc=vt({__name:"Component",props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default(){return{propValue:null}}}},setup(c){const u=c,{element:b}=on(u),p=J("");mn(()=>b.value.style.width,()=>{S()}),mn(()=>b.value.style.height,()=>{S()}),gn(()=>{S()});const E=z(()=>b.value.style.borderActive?b.value.style.borderWidth:0),S=()=>{const{width:m,height:v}=b.value.style;C(m,v)},C=(m,v)=>{const I=[[.5,.05],[1,.95],[0,.95]].map(_=>m*_[0]+" "+v*_[1]);p.value=I.toString()};return(m,v)=>(x(),ee("div",Hc,[(x(),ee("svg",Lc,[G("polygon",{ref:"star",points:p.value,stroke:l(b).style.borderColor,fill:l(b).style.backgroundColor,"stroke-width":E.value},null,8,Oc)]))]))}});const Bc=Vt(Fc,[["__scopeId","data-v-ae1df061"]]),zc={class:"attr-list de-collapse-style"},qc=vt({__name:"Attr",setup(c){const u=Rt(),{curComponent:b}=$t(u);return(p,E)=>(x(),ee("div",zc,[T(Nl,{element:l(b)},null,8,["element"])]))}}),Nc={key:0,class:"main-frame"},$c=["id","src"],jc={key:1,class:"frame-mask edit-mask"},Rc={style:{opacity:"1"}},Wc={style:{"font-weight":"bold",color:"lawngreen"}},Gc={key:2,class:"frame-mask preview-top-mask"},Zc={key:3,class:"frame-mask preview-right-mask"},Uc={key:4,class:"frame-mask preview-left-mask"},Xc={key:5,class:"frame-mask"},Yc={key:1,class:"info-class"},Jc=vt({__name:"ComponentFrame",props:{propValue:{type:String,require:!0},element:{type:Object},isEdit:{type:Boolean,require:!1,default:!0},active:{type:Boolean,require:!1,default:!1},screenShot:{type:Boolean,default:!1}},setup(c){const{t:u}=In(),b=c,{element:p,isEdit:E,screenShot:S}=on(b),C=Bn({pOption:{},frameShow:!0}),m=()=>{C.frameShow=!1,pt(()=>{C.frameShow=!0})};return gn(()=>{yt({name:"frameLinksChange-"+p.value.id,callback:function(){m()}})}),(v,y)=>{const I=Yi;return x(),le(I,{class:"main-frame"},{default:A(()=>[l(p).frameLinks.src?(x(),ee("div",Nc,[C.frameShow?(x(),ee("iframe",{key:0,id:"iframe-"+l(p).id,src:l(p).frameLinks.src,scrolling:"auto",frameborder:"0",class:"main-frame main-de-iframe"},null,8,$c)):ae("",!0),l(E)?(x(),ee("div",jc,[G("span",Rc,[G("span",Wc,_e(l(u)("visualization.edit_web_tips")),1)])])):ae("",!0),l(E)?(x(),ee("div",Gc)):ae("",!0),l(E)?(x(),ee("div",Zc)):ae("",!0),l(E)?(x(),ee("div",Uc)):ae("",!0),l(S)?(x(),ee("div",Xc)):ae("",!0)])):(x(),ee("div",Yc,[G("span",null,_e(l(u)("visualization.link_add_tips_pre")),1)]))]),_:1})}}});const Qc=Vt(Jc,[["__scopeId","data-v-1ad3a219"]]),Kc=vt({__name:"DvPreview",props:{canvasStylePreview:{required:!0,type:Object},canvasDataPreview:{required:!0,type:Object},canvasViewInfoPreview:{required:!0,type:Object},dvInfo:{required:!0,type:Object},curPreviewGap:{required:!1,type:Number,default:0},showLinkageButton:{type:Boolean,default:!0},showPosition:{required:!1,type:String,default:"preview"},downloadStatus:{required:!1,type:Boolean,default:!1}},setup(c,{expose:u}){const b=Rt(),{fullscreenFlag:p}=$t(b),E=J(null),S=J(null),C=J(!0),m=J("heightFirst"),v=c,y=()=>{E.value.restore()},I=z(()=>M.value==="heightFirst"?"preview-content-inner-height-first":M.value==="full"?"preview-content-inner-full":M.value==="keep"?"preview-content-inner-size-keep":"preview-content-inner-width-first"),_=z(()=>({flexDirection:v.canvasStylePreview.screenAdaptor==="heightFirst"?"row":"column"})),M=z(()=>v.canvasStylePreview.screenAdaptor==="keepProportion"?m.value:v.canvasStylePreview.screenAdaptor),Q=N=>{const{width:D,height:W}=N,{innerWidth:F,innerHeight:ge}=E.value.getPreviewCanvasSize();D>F||W<ge?m.value="heightFirst":m.value="widthFirst"};return gn(()=>{const N=new ResizeObserver(D=>{for(let W of D)console.log("元素新尺寸:",W.contentRect),Q(W.contentRect)});S.value&&N.observe(S.value),ia(()=>{N.disconnect()})}),u({restore:y}),(N,D)=>(x(),ee("div",{id:"de-preview-content",ref_key:"dePreviewOuterRef",ref:S,class:Ht([{"de-screen-full":l(p)},"content-outer"]),style:ct(_.value)},[G("div",{class:Ht(["content-inner",I.value])},[c.canvasStylePreview&&C.value?(x(),le(pi,{key:0,ref_key:"dePreviewRef",ref:E,"component-data":c.canvasDataPreview,"canvas-style-data":c.canvasStylePreview,"canvas-view-info":c.canvasViewInfoPreview,"dv-info":c.dvInfo,"cur-gap":c.curPreviewGap,"show-position":c.showPosition,"download-status":c.downloadStatus,"outer-screen-adaptor":M.value,"show-linkage-button":c.showLinkageButton},null,8,["component-data","canvas-style-data","canvas-view-info","dv-info","cur-gap","show-position","download-status","outer-screen-adaptor","show-linkage-button"])):ae("",!0)],2)],6))}});const ed=vt({__name:"PreviewCanvas",props:{publicLinkStatus:{type:Boolean,required:!1,default:!1},isSelector:{type:Boolean,default:!1},outerId:{type:Boolean,default:!1},ticketArgs:Pr.string.def(null)},setup(c,{expose:u}){const b=Ar(),p=Rt(),{t:E}=In(),S=Er(),C=J(null),m=J(!1),v=Bn({canvasDataPreview:null,canvasStylePreview:null,canvasViewInfoPreview:null,dvInfo:null,curPreviewGap:0,initState:!0,editPreview:!1,showPosition:"preview",showOffset:{top:3,left:3},containerMainHeight:"1000px"}),y=c,I=async(be,fe,a=!1)=>{const Le=S.jumpInfoParam||An.currentRoute.value.query.jumpInfoParam;let ce;if(Le){ce=JSON.parse(Mi.decode(decodeURIComponent(Le)));const ye={sourceDvId:ce.sourceDvId,sourceViewId:ce.sourceViewId,sourceFieldId:null,targetDvId:be,resourceTable:v.editPreview?"snapshot":"core"};try{await ol(ye).then(Oe=>{p.setNowTargetPanelJumpInfo(Oe.data)})}catch(Oe){console.error(Oe)}}let Ve=null;try{Ve=JSON.parse(y.ticketArgs)}catch(ye){console.error(ye)}const Ge=Ve&&Object.keys(Ve);let De;await vs(be).then(ye=>{p.setNowPanelOuterParamsInfoV2(ye.data,be)});const $=An.currentRoute.value.query.attachParams;if($||Ge)try{$&&(De=JSON.parse(Mi.decode(decodeURIComponent($)))),Ge&&(De=Object.assign({},De,Ve))}catch(ye){console.error(ye),La.error(E("visualization.outer_param_decode_error"))}const Ee=()=>{if(v.canvasStylePreview.refreshBrowserEnable&&Rr()){const ye=v.canvasStylePreview.refreshBrowserUnit==="minute"?60:1,Oe=v.canvasStylePreview.refreshBrowserTime*ye*1e3;setTimeout(()=>{window.location.reload()},Oe)}};await il(be,{busiFlag:fe,resourceTable:v.editPreview?"snapshot":"core",onlyPreview:!!y.outerId},async function({canvasDataResult:ye,canvasStyleResult:Oe,dvInfo:ze,canvasViewInfoPreview:Ke,curPreviewGap:et}){v.dvInfo=ze,v.dvInfo.status&&(ce||!a&&De)&&await Br(ye),v.canvasDataPreview=ye,v.canvasStylePreview=Oe,v.canvasViewInfoPreview=Ke,v.editPreview&&(v.dvInfo.status=1),v.curPreviewGap=et,v.dvInfo.status&&(ce&&p.addViewTrackFilter(ce),a||(v.initState=!1,p.addOuterParamsFilter(De),v.initState=!0)),y.publicLinkStatus&&(document.title=ze.name,jr(ze.name)),Ee(),await pt(()=>{rl({resourceId:be})})})},_=be=>{m.value=!0,pt(()=>{const fe=C.value.querySelector(".canvas-container");ui(be,fe,v.dvInfo.name,()=>{m.value=!1})})};mn(()=>({path:b.path,params:b.params}),()=>{location.reload()},{deep:!0});let M=null,Q=null;const N=()=>M(!0),D=()=>Q(!0);gn(async()=>{yt({name:"canvasDownload",callback:function($="img"){_($)}}),await Promise.all([new Promise($=>M=$),new Promise($=>Q=$)]);let be=y.outerId||S.dvId||An.currentRoute.value.query.dvId;An.currentRoute.value.query.jumpInfoParam&&An.currentRoute.value.query.dvId&&(be=An.currentRoute.value.query.dvId);const fe=An.currentRoute.value.query.ignoreParams==="true",a=An.currentRoute.value.query.popWindow==="true",Le=window.self!==window.top;v.editPreview=An.currentRoute.value.query.editPreview==="true",p.setIframeFlag(Le),p.setIsPopWindow(a),v.showPosition=v.editPreview?"edit-preview":"preview";const{dvType:ce,callBackFlag:Ve,taskId:Ge,showWatermark:De}=An.currentRoute.value.query;if(Ge&&p.setCanvasAttachInfo({taskId:Ge,showWatermark:De}),be){await I(be,ce,fe);return}p.setEmbeddedCallBack(Ve||"no"),window.matchMedia("print").addListener(async $=>{$.matches&&await me()})});const W=z(()=>{var be;return((be=v.canvasStylePreview)==null?void 0:be.screenAdaptor)==="keep"}),F=z(()=>[{"--top-show-offset":v.showOffset.top},{"--left-show-offset":v.showOffset.left},{"--print-height":v.containerMainHeight}]),ge=J(null),Be=async()=>{ge.value&&(v.containerMainHeight=await ge.value.getDownloadStatusMainHeightV2())},me=async()=>{await Be()};return u({loadCanvasDataAsync:I}),(be,fe)=>{var Le,ce;const a=Ja;return x(),ee(Bt,null,[Ft((x(),ee("div",{class:Ht(["content",{"canvas_keep-size":W.value}]),ref_key:"previewCanvasContainer",ref:C,style:ct(F.value)},[T(Ao,{style:{position:"fixed"},"canvas-id":"canvas-main","canvas-style-data":v.canvasStylePreview||{},"component-data":v.canvasDataPreview||[]},null,8,["canvas-style-data","component-data"]),v.canvasStylePreview&&v.initState&&((Le=v.dvInfo)==null?void 0:Le.type)==="dataV"?(x(),le(Kc,{key:0,ref:"dvPreviewRef",style:{height:"100vh"},"canvas-data-preview":v.canvasDataPreview,"canvas-style-preview":v.canvasStylePreview,"canvas-view-info-preview":v.canvasViewInfoPreview,"dv-info":v.dvInfo,"cur-preview-gap":v.curPreviewGap,"is-selector":y.isSelector,"download-status":m.value,"show-pop-bar":!0,"show-position":v.showPosition,"show-linkage-button":!1},null,8,["canvas-data-preview","canvas-style-preview","canvas-view-info-preview","dv-info","cur-preview-gap","is-selector","download-status","show-position"])):ae("",!0),v.canvasStylePreview&&v.initState&&((ce=v.dvInfo)==null?void 0:ce.type)==="dashboard"?(x(),le(pi,{key:1,ref_key:"dvPreview",ref:ge,"component-data":v.canvasDataPreview,"canvas-style-data":v.canvasStylePreview,"canvas-view-info":v.canvasViewInfoPreview,"dv-info":v.dvInfo,"cur-gap":v.curPreviewGap,"is-selector":y.isSelector,"download-status":m.value,"show-pop-bar":!0,"show-position":v.showPosition,"show-linkage-button":!1},null,8,["component-data","canvas-style-data","canvas-view-info","dv-info","cur-gap","is-selector","download-status","show-position"])):ae("",!0),v.initState?ae("",!0):(x(),le(Co,{key:2,description:l(E)("visualization.no_params_tips"),"img-type":"noneWhite"},null,8,["description"]))],6)),[[a,!v.initState]]),T(l(Ha),{jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvTmV3V2luZG93SGFuZGxlcg==",onLoaded:N,onLoadFail:N}),T(l(Ha),{jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvRW50cmFuY2Vz",onInitIframe:D,onLoadFail:D})],64)}}});const cr=Vt(ed,[["__scopeId","data-v-1b66f04e"]]),Bp=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"})),td={class:"label-content-details"},nd=["title"],ad={class:"m-dialog-footer"},od=vt({__name:"SelectScreenDialog",emits:["selectConfirm"],setup(c,{expose:u,emit:b}){const p=J(!1),E=()=>{p.value=!1},{t:S}=In(),C=b,m=Bn({panelList:[],dvSelectProps:{label:"name",children:"children",value:"id",isLeaf:"leaf",disabled:"disabled"},curScreenId:null,dvType:"dashboard"}),v=z(()=>m.dvType==="dataV"?S("work_branch.big_data_screen"):S("work_branch.dashboard")),y=N=>{const{dvType:D,screenId:W}=N;m.dvType=D,p.value=!0,m.curScreenId=W,I(D)},I=N=>{Ul({busiFlag:N,resourceTable:"core"}).then(W=>{var F;W&&((F=W[0])==null?void 0:F.id)==="0"?m.panelList=W[0].children:m.panelList=W,m.panelList=ll(m.panelList)})},_=N=>{N.leaf&&N.id!==m.curScreenId&&(m.curScreenId=N.id)},M=()=>{p.value=!1},Q=()=>{C("selectConfirm",m.curScreenId),M()};return u({init:y}),(N,D)=>{const W=pn,F=Sn,ge=Zl,Be=Ji,me=xn,be=Fa;return x(),le(be,{modelValue:p.value,"onUpdate:modelValue":D[1]||(D[1]=fe=>p.value=fe),"show-close":!0,"close-on-click-modal":!1,title:l(S)("visualization.select_resource",[v.value]),"append-to-body":"",onClose:E,width:"400"},{footer:A(()=>[G("span",ad,[T(me,{secondary:"",onClick:M},{default:A(()=>[Qe(_e(l(S)("commons.close")),1)]),_:1}),T(me,{type:"primary",onClick:Q},{default:A(()=>[Qe(_e(l(S)("commons.confirm")),1)]),_:1})])]),default:A(()=>[T(Be,{style:{position:"relative"},prop:"rid"},{default:A(()=>[T(ge,{modelValue:m.curScreenId,"onUpdate:modelValue":D[0]||(D[0]=fe=>m.curScreenId=fe),data:m.panelList,props:m.dvSelectProps,"render-after-expand":!1,filterable:"",onNodeClick:_,class:"dv-selector"},{default:A(({node:fe,data:a})=>[G("div",td,[a.leaf?(x(),le(F,{key:0,size:"18px",style:{display:"inline-block"}},{default:A(()=>[T(W,{name:"dv-dashboard-spine"},{default:A(()=>[T(l(Xl),{class:"svg-icon"})]),_:1})]),_:1})):(x(),le(F,{key:1,size:"18px",style:{display:"inline-block"}},{default:A(()=>[T(W,{name:"dv-folder"},{default:A(()=>[T(l(Yl),{class:"svg-icon"})]),_:1})]),_:1})),G("span",{style:{"margin-left":"8px","font-size":"14px"},title:fe.label},_e(fe.label),9,nd)])]),_:1},8,["modelValue","data","props"])]),_:1})]),_:1},8,["modelValue","title"])}}});const id=Vt(od,[["__scopeId","data-v-95b3877a"]]),rd={key:0},ld={class:"el-dropdown-link"},sd={key:1,class:"chose-screen"},ud={class:"dialog-footer"},cd=vt({__name:"Component",props:{canvasStyleData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},element:{type:Object,default(){return{propValue:[]}}},isEdit:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"canvas"},scale:{type:Number,required:!1,default:1},searchCount:{type:Number,required:!1,default:0},fontFamily:{type:String,required:!1,default:"inherit"}},setup(c){const u=Rt(),b=ra(),{tabMoveInActiveId:p,bashMatrixInfo:E,editMode:S,mobileInPc:C}=$t(u),m=J(null);let v=null;const{t:y}=In(),I=J(null),_=c,{element:M,isEdit:Q,showPosition:N,canvasStyleData:D,canvasViewInfo:W,dvInfo:F,scale:ge,searchCount:Be}=on(_),me=F.value.type==="dataV"?y("work_branch.big_data_screen"):y("work_branch.dashboard"),be=z(()=>M.value.titleBackground.active.innerImage.replace("board/","").replace(".svg","")),fe=z(()=>M.value.titleBackground.inActive.innerImage.replace("board/","").replace(".svg","")),a=U=>{var tt;const{backgroundImageEnable:X,backgroundType:H,innerImage:K}=M.value.titleBackground.inActive;return M.value.editableTabsValue!==U&&!M.value.titleBackground.multiply&&((tt=M.value.titleBackground)==null?void 0:tt.enable)&&X&&H==="innerImage"&&typeof K=="string"},Le=U=>{var tt;const{backgroundImageEnable:X,backgroundType:H,innerImage:K}=M.value.titleBackground.active;return(M.value.editableTabsValue===U||M.value.titleBackground.multiply)&&((tt=M.value.titleBackground)==null?void 0:tt.enable)&&X&&H==="innerImage"&&typeof K=="string"},ce=()=>{var U;(U=M.value.propValue)==null||U.forEach(X=>{var K;const H=M.value.editableTabsValue===X.name?ha.resume:ha.paused;(K=X.componentData)==null||K.forEach(tt=>{H(tt.id),tt.component==="Group"&&tt.propValue.forEach(Ne=>{H(Ne.id)})})})},Ve=()=>{De.hoverFlag=!0},Ge=()=>{De.hoverFlag=!1},De=Bn({activeTabName:"",curItem:{},textarea:"",dialogVisible:!1,tabShow:!0,hoverFlag:!1,panelList:[]}),$=J(!1),Ee=J("none");let ye;const Oe=z(()=>{var U,X;return M.value&&M.value.style&&((U=M.value.style)==null?void 0:U.showTabTitle)===!1?!1:(X=M.value.style)==null?void 0:X.showTabTitle}),ze=z(()=>S.value==="edit"&&Q.value&&!C.value),Ke=Zt()?"light":"dark",et=()=>{setTimeout(()=>{if(M.value.propValue.length>1){const U=document.getElementById("tab-"+M.value.propValue[M.value.propValue.length-1].name);$.value=U.parentNode.clientWidth>m.value.clientWidth-100}else $.value=!1})},ht=(U,X)=>({command:U,param:X});z(()=>F.value.type==="dashboard"&&D.value.dashboard.gap==="yes"?D.value.dashboard.gapSize:0);function nt(){De.curItem.title=De.textarea,De.dialogVisible=!1,b.recordSnapshotCache("sureCurTitle")}function bt(){const X={name:Ka(),title:y("visualization.new_screen_page"),screenId:null,closable:!0};M.value.propValue.push(X),M.value.editableTabsValue=X.name,b.recordSnapshotCache("addTab")}function Z(U){De.curItem=U;let X=M.value.propValue.length;for(;X--;)if(M.value.propValue[X].name===U.name){M.value.propValue.splice(X,1);const H=(X-1+M.value.propValue.length)%M.value.propValue.length;M.value.editableTabsValue=M.value.propValue[H].name,De.tabShow=!1,pt(()=>{De.tabShow=!0})}}function xe(U){bt();const X=M.value.propValue[M.value.propValue.length-1],H={},K=M.value.id+"--"+X.name;X.componentData=qi(K,U.componentData,H),u.updateCopyCanvasView(H)}function Ie(U){De.activeTabName=U.name,De.curItem=U,De.textarea=U.title,De.dialogVisible=!0}function se(U){switch(U.command){case"editTitle":Ie(U.param);break;case"deleteCur":Z(U.param),b.recordSnapshotCache("deleteCur");break;case"copyCur":xe(U.param),b.recordSnapshotCache("copyCur");break;case"changeScreen":zt(U.param.screenId);break}}const ke=()=>{if(F.value.id){const U=["canvas","canvasDataV","edit"].includes(N.value)?"snapshot":"core";Gi(F.value.id,U).then(X=>{u.setNowPanelTrackInfo(X.data)})}},Me=U=>{M.value.propValue.forEach((X,H)=>{if(M.value.editableTabsValue===X.name)if(Zt()){Te.emit("removeMatrixItemById-canvas-main",U.id),u.setCurComponent({component:null,index:null}),U.canvasId=M.value.id+"--"+X.name;const K=ye.refs["tabCanvas_"+H][0];if(K){const tt=K.getBaseMatrixSize();wo(U,tt),U.x=1,U.y=200,U.style.left=0,U.style.top=0,X.componentData.push(U),K.addItemBox(U),pt(()=>{K.canvasInitImmediately()})}}else{const K=Wi(U.id);u.deleteComponent(K),u.setCurComponent({component:null,index:null}),U.canvasId=M.value.id+"--"+X.name,Ei(U,M.value),X.componentData.push(U)}}),ke()},re=U=>{Zt()&&wo(U,E.value,!0),Te.emit("removeMatrixItemById-"+U.canvasId,U.id),u.setCurComponent({component:null,index:null}),Zt()?Te.emit("moveOutFromTab-canvas-main",U):he(U),ke()},he=U=>{const{left:X,top:H}=M.value.style;U.style.left=U.style.left+X,U.style.top=U.style.top+H,U.canvasId="canvas-main",u.addComponent({component:U,index:void 0,isFromGroup:!0})};z(()=>p.value&&p.value===M.value.id);const st=z(()=>$.value?"tab-head-left":"tab-head-"+M.value.style.headHorizontalPosition),Re=U=>{if(U){const{backdropFilterEnable:X,backdropFilter:H,backgroundColorSelect:K,backgroundColor:tt,backgroundImageEnable:Ne,backgroundType:Je,outerImage:jt,innerPadding:ne,borderRadius:Pe}=U;let ot={padding:ne*ge.value+"px",borderRadius:Pe+"px"},$e="";return K&&tt&&($e=tt),Ne&&Je==="outerImage"&&typeof jt=="string"?ot.background=`url(${To(jt)}) no-repeat ${$e}`:ot["background-color"]=$e,X&&(ot["backdrop-filter"]="blur("+H+"px)"),ot}return{}},at=U=>{var H,K;let X={};return M.value.editableTabsValue===U?(X={textDecoration:M.value.style.textDecoration,fontStyle:M.value.style.fontStyle,fontWeight:M.value.style.fontWeight,fontSize:(M.value.style.activeFontSize||18)+"px",lineHeight:(M.value.style.activeFontSize||18)+"px"},(H=M.value.titleBackground)!=null&&H.enable&&(X={...X,...Re(M.value.titleBackground.active)})):(X={textDecoration:M.value.style.textDecoration,fontStyle:M.value.style.fontStyle,fontWeight:M.value.style.fontWeight,fontSize:(M.value.style.fontSize||16)+"px",lineHeight:(M.value.style.fontSize||16)+"px"},(K=M.value.titleBackground)!=null&&K.enable&&(X={...X,...Re(M.value.titleBackground.multiply?M.value.titleBackground.active:M.value.titleBackground.inActive)})),X},xt=z(()=>M.value&&M.value.style&&M.value.style.headFontColor&&typeof M.value.style.headFontColor=="string"?M.value.style.headFontColor:"none"),At=z(()=>M.value&&M.value.style&&M.value.style.headFontActiveColor&&typeof M.value.style.headFontActiveColor=="string"?M.value.style.headFontActiveColor:"none"),Tt=z(()=>M.value&&M.value.style&&M.value.style.headBorderActiveColor&&typeof M.value.style.headBorderActiveColor=="string"?M.value.style.headBorderActiveColor:"none"),mt=z(()=>!!De.textarea&&!!De.textarea.trim()),We=Ui(()=>{ce()},500),zt=U=>{const X={screenId:U,dvType:F.value.type};I.value.init(X)};mn(()=>ge.value,()=>{We()}),mn(()=>M.value,()=>{et(),We()},{deep:!0});const Wt=()=>{De.tabShow=!1,pt(()=>{De.tabShow=!0})},pe=U=>{M.value.propValue.forEach(X=>{M.value.editableTabsValue===X.name&&(X.screenId=null,pt(()=>{X.screenId=U,b.recordSnapshotCache("selectNewScreen")}))})};mn(()=>ze.value,()=>{ue()});const ue=()=>{var U;if(v&&clearInterval(v),v=null,!ze.value&&(U=M.value.carousel)!=null&&U.enable){const X=(M.value.carousel.time||5)*1e3;let H=1;v=setInterval(()=>{if(!De.hoverFlag){const K=H%M.value.propValue.length;H++,pt(()=>{M.value.editableTabsValue=M.value.propValue[K].name})}},X)}};return gn(()=>{document.addEventListener("visibilitychange",ce),M.value.propValue.length>0&&(M.value.editableTabsValue=M.value.propValue[0].name),et(),["canvas","canvasDataV","edit"].includes(N.value)&&!C.value&&(Te.on("onTabMoveIn-"+M.value.id,Me),Te.on("onTabMoveOut-"+M.value.id,re),Te.on("onTabSortChange-"+M.value.id,Wt)),ye=ri(),ue(),pt(()=>{xa(M.value)}),setTimeout(()=>{ce()},1e3)}),ia(()=>{document.removeEventListener("visibilitychange",ce),["canvas","canvasDataV","edit"].includes(N.value)&&!C.value&&(Te.off("onTabMoveIn-"+M.value.id,Me),Te.off("onTabMoveOut-"+M.value.id,re),Te.off("onTabSortChange-"+M.value.id,Wt))}),Pi(()=>{v&&(clearInterval(v),v=null)}),(U,X)=>{const H=Xa("ArrowDown"),K=Sn,tt=Vo,Ne=Do,Je=Po,jt=ci,ne=xn,Pe=Bi,ot=Fa;return De.tabShow?(x(),ee("div",{key:0,style:{width:"100%",height:"100%"},class:Ht([[st.value,`ed-tabs-${l(Ke)}`,{"title-hidde-tab":!Oe.value},{"title-show-tab":Oe.value}],"custom-tabs-head"]),ref_key:"tabComponentRef",ref:m},[T(sr,{modelValue:l(M).editableTabsValue,"onUpdate:modelValue":X[1]||(X[1]=$e=>l(M).editableTabsValue=$e),onTabAdd:bt,addable:ze.value,"font-color":xt.value,"active-color":At.value,"border-color":Ee.value,"border-active-color":Tt.value,"hide-title":!Oe.value},{default:A(()=>[(x(!0),ee(Bt,null,kn(l(M).propValue,$e=>(x(),le(jt,{key:$e.name,class:"el-tab-pane-custom",lazy:ze.value,label:$e.title,name:$e.name},{label:A(()=>[G("div",{class:"custom-tab-title",onMousedown:X[0]||(X[0]=Qn(()=>{},["stop"]))},[G("span",{class:"title-inner",style:ct(at($e.name))},[Qe(_e($e.title)+" ",1),Ft(T(Oa,{style:ct({color:l(M).titleBackground.active.innerImageColor,pointerEvents:"none"}),name:be.value},null,8,["style","name"]),[[Kt,Le($e.name)]]),Ft(T(Oa,{style:ct({color:l(M).titleBackground.inActive.innerImageColor,pointerEvents:"none"}),name:fe.value},null,8,["style","name"]),[[Kt,a($e.name)]]),ze.value?(x(),ee("span",rd,[T(Je,{"popper-class":"custom-de-tab-dropdown",effect:l(Ke),trigger:"click",onCommand:se},{dropdown:A(()=>[T(Ne,{style:ct({"font-family":c.fontFamily})},{default:A(()=>[T(tt,{command:ht("changeScreen",$e)},{default:A(()=>[Qe(_e(l(y)("visualization.change_screen_page",[l(me)])),1)]),_:1},8,["command"]),T(tt,{command:ht("editTitle",$e)},{default:A(()=>[Qe(_e(l(y)("visualization.edit_title")),1)]),_:1},8,["command"]),l(M).propValue.length>1?(x(),le(tt,{key:0,command:ht("deleteCur",$e)},{default:A(()=>[Qe(_e(l(y)("visualization.delete")),1)]),_:1},8,["command"])):ae("",!0)]),_:2},1032,["style"])]),default:A(()=>[G("span",ld,[l(Q)?(x(),le(K,{key:0},{default:A(()=>[T(H)]),_:1})):ae("",!0)])]),_:2},1032,["effect"])])):ae("",!0)],4)],32)]),_:2},1032,["lazy","label","name"]))),128)),(x(!0),ee(Bt,null,kn(l(M).propValue,$e=>(x(),ee("div",{class:Ht(["tab-content-custom",{"switch-hidden":l(M).editableTabsValue!==$e.name}]),key:$e.name+"-content",onMouseenter:Ve,onMouseleave:Ge},[$e.screenId?(x(),le(cr,{key:0,"outer-id":$e.screenId,ref_for:!0,ref:"dashboardPreview"},null,8,["outer-id"])):(x(),ee("div",sd,[G("span",null,[T(ne,{onClick:Xt=>zt($e.screenId),text:"",style:{"font-family":"inherit",color:"#646a73"},icon:"Plus"},{default:A(()=>[Qe(_e(l(F).type==="dataV"?l(y)("visualization.select_target_screen_tips"):l(y)("visualization.select_target_dashboard_tips")),1)]),_:1},8,["onClick"])])]))],34))),128))]),_:1},8,["modelValue","addable","font-color","active-color","border-color","border-active-color","hide-title"]),T(ot,{title:"编辑标题","append-to-body":!0,modelValue:De.dialogVisible,"onUpdate:modelValue":X[4]||(X[4]=$e=>De.dialogVisible=$e),width:"30%","show-close":!1,"close-on-click-modal":!1,center:""},{footer:A(()=>[G("span",ud,[T(ne,{onClick:X[3]||(X[3]=$e=>De.dialogVisible=!1)},{default:A(()=>[...X[5]||(X[5]=[Qe("取消",-1)])]),_:1}),T(ne,{disabled:!mt.value,type:"primary",onClick:nt},{default:A(()=>[...X[6]||(X[6]=[Qe("确认",-1)])]),_:1},8,["disabled"])])]),default:A(()=>[T(Pe,{modelValue:De.textarea,"onUpdate:modelValue":X[2]||(X[2]=$e=>De.textarea=$e),maxlength:"50",placeholder:U.$t("dataset.input_content")},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue"]),T(id,{ref_key:"selectScreenDialogRef",ref:I,onSelectConfirm:pe},null,512)],2)):ae("",!0)}}});const dr=Vt(cd,[["__scopeId","data-v-2eb19012"]]),zp=Object.freeze(Object.defineProperty({__proto__:null,default:dr},Symbol.toStringTag,{value:"Module"})),fr={VText:Hr,VQuery:Or,VTextAttr:Fr,Group:rr,GroupAttr:Cl,UserView:xl,UserViewAttr:Sl,Picture:kl,PictureAttr:Il,DynamicBackground:Ml,DynamicBackgroundAttr:Tl,CanvasBoard:ul,CanvasBoardAttr:Pl,CanvasIcon:Al,CanvasIconAttr:El,DeTabs:ur,DeTabsAttr:Hl,DeGraphical:Ll,DeGraphicalAttr:Ol,CircleShape:Fl,CircleShapeAttr:Bl,RectShape:zl,RectShapeAttr:ql,SvgTriangle:Bc,SvgTriangleAttr:qc,DeTimeClock:$l,DeTimeClockAttr:jl,GroupArea:Rl,GroupAreaAttr:Wl,DeFrame:Qc,DeFrameAttr:Gl,DeVideo:Ql,DeVideoAttr:Kl,DeStreamMedia:es,DeStreamMediaAttr:ts,ScrollText:ns,ScrollTextAttr:as,PopArea:Eo,PopAreaAttr:os,PictureGroup:is,PictureGroupAttr:rs,DeDecoration:Vl,DeDecorationAttr:Dl,DeScreen:dr,DeScreenAttr:Jl};function go(c){return fr[c]}function qp(c){const u=c.component==="UserView"&&c.innerType==="picture-group"?"PictureGroupAttr":c.component+"Attr";return fr[u]}const dd=Di("viewSelectorStore",{state:()=>({enable:!1,viewIdList:[]}),getters:{getEnable(){return this.enable},getViewIdList(){return this.viewIdList}},actions:{setEnable(c){this.enable=c},remove(c){let u=this.viewIdList.length;if(u){if(!c){this.viewIdList=[];return}for(;u--;)this.viewIdList[u]===c&&this.viewIdList.splice(u,1)}},add(c){this.viewIdList.includes(c)||this.viewIdList.push(c)},clear(){this.enable=!1,this.viewIdList=[]}}}),fd=()=>dd(Li),pd={class:"bar-main"},vd=vt({__name:"ComponentSelector",props:{resourceId:{type:String,required:!1}},setup(c){const u=fd(),b=J(!1),p=c;gn(()=>{b.value=u.getViewIdList.includes(p.resourceId)});const E=S=>{S?u.add(p.resourceId):u.remove(p.resourceId)};return(S,C)=>{const m=Ni;return x(),ee("div",pd,[T(m,{modelValue:b.value,"onUpdate:modelValue":C[0]||(C[0]=v=>b.value=v),onChange:E},null,8,["modelValue"])])}}});const hd=Vt(vd,[["__scopeId","data-v-5e14b4cf"]]),md=["title"],gd=["id"],yd=vt({__name:"ComponentWrapper",props:{curStyle:{type:Object},active:{type:Boolean,default:!1},popActive:{type:Boolean,default:!1},canvasStyleData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},config:{type:Object,required:!0,default(){return{component:null,propValue:null,request:null,linkage:null,type:null,events:null,style:null,id:null,animations:null}}},viewInfo:{type:Object,required:!1},index:{required:!0,type:[Number,String],default:0},showPosition:{required:!1,type:String,default:"preview"},canvasId:{type:String,default:"canvas-main"},searchCount:{type:Number,required:!1,default:0},scale:{type:Number,required:!1,default:100},isSelector:{type:Boolean,default:!1},suffixId:{type:String,required:!1,default:"common"},fontFamily:{type:String,required:!1,default:"inherit"},optType:{type:String,required:!1},scrollMain:{type:Number,default:0}},emits:["userViewEnlargeOpen","datasetParamsInit","onPointClick"],setup(c,{emit:u}){const b=J(null),p=J(null),E=Rt(),S=J(!1),C=["width","height","top","left","rotate"],m=J(null),v=["width","height","top","left","rotate","borderActive","borderWidth","borderRadius","borderStyle","borderColor"],y=c,{config:I,showPosition:_,index:M,canvasStyleData:Q,canvasViewInfo:N,dvInfo:D,searchCount:W,scale:F,suffixId:ge,scrollMain:Be}=on(y),me=J(null),be=u,fe="wrapper-outer-id-"+I.value.id,a=z(()=>"enlarge-inner-content-"+I.value.id),Le=()=>{yt().emitter.emit("l7-prepare-picture",I.value.id),S.value=!0,setTimeout(()=>{const re=document.getElementById(a.value);Qa(a.value,"canvas-main",F.value/100),ui("img",re,"图表",()=>{Zi(a.value),S.value=!1,yt().emitter.emit("l7-unprepare-picture",I.value.id)})},1e3)},ce=re=>{var he,st;if(_.value.includes("multiplexing")&&(p.value.multiplexingCheckOut(),re==null||re.stopPropagation(),re==null||re.preventDefault()),!["rich-text"].includes(I.value.innerType)&&["popEdit","preview"].includes(_.value)||E.mobileInPc){if(Ve(),(st=(he=re.target)==null?void 0:he.className)!=null&&st.includes("ed-input__inner"))return;re==null||re.stopPropagation(),re==null||re.preventDefault()}},Ve=()=>{Te.emit("componentClick"),E.setInEditorStatus(!0),E.setClickComponentStatus(!0),E.setCurComponent({component:I.value,index:M.value})},Ge=re=>I.value.component.includes("Svg")?bo(re,["top","left","width","height","rotate","backgroundColor","borderWidth","borderStyle","borderColor"]):bo(re,re.borderActive?C:v),De=()=>{Te.emit("v-hover",I.value.id)},$=z(()=>{if(I.value.commonBackground){const{backdropFilterEnable:re,backdropFilter:he,backgroundColorSelect:st,backgroundColor:Re,backgroundImageEnable:at,backgroundType:xt,outerImage:At,innerPadding:Tt,borderRadius:mt}=I.value.commonBackground;let We={padding:Tt*Z.value+"px",borderRadius:mt+"px"},zt="";return st&&Re&&(zt=Re),at&&xt==="outerImage"&&typeof At=="string"?We.background=`url(${To(At)}) no-repeat ${zt}`:We["background-color"]=zt,I.value.component!=="UserView"&&(We.overflow="hidden"),re&&(We["backdrop-filter"]="blur("+he+"px)"),We}return{}}),Ee=z(()=>{const{backgroundImageEnable:re,backgroundType:he,innerImage:st}=I.value.commonBackground;return re&&he==="innerImage"&&typeof st=="string"}),ye=z(()=>Ee.value?I.value.commonBackground.innerImage.replace("board/","").replace(".svg",""):null),Oe=z(()=>{var re;if(I.value.multiDimensional&&((re=I.value.multiDimensional)!=null&&re.enable)){const he=I.value.style.width,st=I.value.style.height,Re=I.value.multiDimensional.x,at=I.value.multiDimensional.y,xt=Re*Math.PI/180,At=at*Math.PI/180,Tt=Math.abs(he*Math.cos(At))+Math.abs(st*Math.sin(xt)),mt=Math.abs(st*Math.cos(xt))+Math.abs(he*Math.sin(At)),We=(Tt-he)/2;return{padding:`${(mt-st)/2}px ${We}px`,transform:`rotateX(${I.value.multiDimensional.x}deg) rotateY(${I.value.multiDimensional.y}deg) rotateZ(${I.value.multiDimensional.z}deg)`}}else return{}}),ze=re=>{be("onPointClick",re)},Ke=z(()=>_.value.includes("preview")&&(["Picture","CanvasIcon","CircleShape","SvgTriangle","RectShape","ScrollText"].includes(I.value.component)||["indicator","rich-text"].includes(I.value.innerType))&&I.value.events&&I.value.events.checked&&(Zt()||!Zt()&&!Ea())&&_.value!=="canvas-multiplexing"),et=re=>{["indicator"].includes(I.value.innerType)||ht(re)},ht=re=>{if(Ke.value){if(I.value.events.type==="showHidden")pt(()=>{E.popAreaActiveSwitch()});else if(I.value.events.type==="jump"){const he=I.value.events.jump.value,st=I.value.events.jump.type;try{st==="newPop"?m.value.previewInit({url:he,size:"middle"}):st==="_blank"?window.originOpen?window.originOpen(he,"_blank"):window.open(he,"_blank"):bt(window.open(he,st))}catch{console.warn("url 格式错误:"+he)}}else I.value.events.type==="refreshDataV"?yt().emitter.emit("componentRefresh"):I.value.events.type==="fullScreen"?yt().emitter.emit("canvasFullscreen"):I.value.events.type==="download"&&yt().emitter.emit("canvasDownload");re==null||re.preventDefault(),re==null||re.stopPropagation()}},nt=J(null),bt=re=>{if(nt!=null&&nt.value){const he={methodName:"initOpenHandler",args:re};nt.value.invokeMethod(he)}},Z=z(()=>F.value/100),xe=z(()=>y.popActive||E.mobileInPc&&y.active),Ie=z(()=>{var re;return lt(y.canvasId)&&I.value.freeze&&!Ea()&&Be.value-((re=I.value.style)==null?void 0:re.top)>0}),se=z(()=>({eventEnable:Ke.value,eventType:I.value.events.type})),ke=z(()=>E.mobileInPc&&_.value==="edit"),Me=(re,he)=>{he==="syncPcDesign"&&(re.preventDefault(),re.stopPropagation()),yt().emitter.emit("onMobileStatusChange",{type:he,value:I.value.id})};return(re,he)=>{var at,xt,At,Tt,mt;const st=Sn,Re=Ja;return Ft((x(),ee("div",{class:Ht(["wrapper-outer",[l(_)+"-"+l(I).component,{"freeze-component":Ie.value}]]),id:fe,onMousedown:ce,onMouseenter:De,"element-loading-text":"导出中...","element-loading-background":"rgba(255, 255, 255, 1)"},[ke.value?(x(),ee("div",{key:0,title:re.$t("visualization.sync_pc_design"),class:"refresh-from-pc",onClick:he[0]||(he[0]=We=>Me(We,"syncPcDesign"))},[T(st,null,{default:A(()=>[T(pn,{name:"icon_replace_outlined"},{default:A(()=>[T(l(Oi),{class:"svg-icon"})]),_:1})]),_:1})],8,md)):ae("",!0),!l(_).includes("canvas")&&!y.isSelector?(x(),le(nr,{key:1,class:Ht(["wrapper-edit-bar",{"wrapper-edit-bar-active":c.active}]),ref_key:"componentEditBarRef",ref:p,"canvas-id":c.canvasId,index:l(M),element:l(I),"show-position":l(_),onComponentImageDownload:Le,onUserViewEnlargeOpen:he[1]||(he[1]=We=>be("userViewEnlargeOpen",We)),onDatasetParamsInit:he[2]||(he[2]=()=>be("datasetParamsInit"))},null,8,["canvas-id","index","element","show-position","class"])):ae("",!0),y.isSelector&&l(I).component==="UserView"&&((at=l(I).propValue)==null?void 0:at.innerType)!=="rich-text"?(x(),le(hd,{key:2,"resource-id":l(I).id},null,8,["resource-id"])):ae("",!0),G("div",{class:"wrapper-inner",ref_key:"componentWrapperInnerRef",ref:b,id:a.value,style:ct($.value)},[G("div",{class:Ht(["wrapper-inner-adaptor",{"pop-wrapper-inner":xe.value,"event-active":Ke.value}]),style:ct(Oe.value),onMousedown:et},[(x(),le(Za(l(go)(l(I).component)),{view:c.viewInfo,ref_key:"component",ref:me,class:"component","canvas-style-data":l(Q),"opt-type":c.optType,"dv-info":l(D),"dv-type":l(D).type,"canvas-view-info":l(N),style:ct(Ge((xt=l(I))==null?void 0:xt.style)),curStyle:c.curStyle,"prop-value":(At=l(I))==null?void 0:At.propValue,element:l(I),request:(Tt=l(I))==null?void 0:Tt.request,linkage:(mt=l(I))==null?void 0:mt.linkage,"show-position":l(_),"search-count":l(W),scale:Z.value,disabled:!0,"is-edit":!1,"suffix-id":l(ge),"font-family":c.fontFamily,active:c.active,"common-params":se.value,onOnPointClick:ze,onOnComponentEvent:ht},null,40,["view","canvas-style-data","opt-type","dv-info","dv-type","canvas-view-info","style","curStyle","prop-value","element","request","linkage","show-position","search-count","scale","suffix-id","font-family","active","common-params"]))],38),Ee.value?(x(),le(Oa,{key:0,style:ct({color:l(I).commonBackground.innerImageColor,pointerEvents:"none"}),name:ye.value},null,8,["style","name"])):ae("",!0)],12,gd),T(l(Ha),{ref_key:"openHandler",ref:nt,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512),T(ls,{ref_key:"dePreviewPopDialogRef",ref:m},null,512)],34)),[[Re,S.value]])}}});const Ho=Vt(yd,[["__scopeId","data-v-b453c4df"]]),bd=vt({__name:"DeFullscreen",props:{themes:{type:String,default:"light"},componentType:{type:String,default:"button"},showPosition:{required:!1,type:String,default:"preview"}},setup(c,{expose:u}){const b=Rt(),p=c,E=()=>{const m=!!document.fullscreenElement;b.setFullscreenFlag(m),p.showPosition==="edit"&&b.setEditMode(m?"preview":"edit"),p.showPosition==="dvEdit"&&yt().emitter.emit("canvasScrollRestore")},S=()=>{const m=document.querySelector("body");document.fullscreenElement?document.exitFullscreen():m==null||m.requestFullscreen()},C=m=>{m.key==="Escape"&&document.fullscreenElement&&document.exitFullscreen()};return gn(()=>{document.addEventListener("fullscreenchange",E),document.addEventListener("keydown",C)}),ia(()=>{document.removeEventListener("fullscreenchange",E),document.removeEventListener("keydown",C)}),u({toggleFullscreen:S}),(m,v)=>(x(),ee("span"))}}),_d={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function wd(c,u){return x(),ee("svg",_d,[...u[0]||(u[0]=[G("path",{d:"M2.85738 4.85729L9.98911 11.989L2.85738 19.1207C2.66212 19.316 2.66212 19.6326 2.85738 19.8279L3.56449 20.535C3.75975 20.7302 4.07634 20.7302 4.2716 20.535L12.1104 12.6961C12.501 12.3056 12.501 11.6724 12.1104 11.2819L4.2716 3.44308C4.07634 3.24782 3.75975 3.24782 3.56449 3.44308L2.85738 4.15018C2.66212 4.34545 2.66212 4.66203 2.85738 4.85729Z"},null,-1),G("path",{d:"M11.7431 4.85729L18.8749 11.989L11.7431 19.1207C11.5479 19.316 11.5479 19.6326 11.7431 19.8279L12.4502 20.535C12.6455 20.7302 12.9621 20.7302 13.1573 20.535L20.9962 12.6961C21.3867 12.3056 21.3867 11.6724 20.9962 11.2819L13.1573 3.44308C12.9621 3.24782 12.6455 3.24782 12.4502 3.44308L11.7431 4.15018C11.5479 4.34545 11.5479 4.66203 11.7431 4.85729Z"},null,-1)])])}const Cd={render:wd},xd={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Sd(c,u){return x(),ee("svg",xd,[...u[0]||(u[0]=[G("path",{d:"M12.2496 19.1355L5.11783 12.0038L12.2496 4.87206C12.4448 4.6768 12.4448 4.36022 12.2496 4.16495L11.5424 3.45785C11.3472 3.26259 11.0306 3.26259 10.8353 3.45785L2.99651 11.2967C2.60598 11.6872 2.60598 12.3204 2.99651 12.7109L10.8353 20.5497C11.0306 20.745 11.3472 20.745 11.5424 20.5497L12.2496 19.8426C12.4448 19.6474 12.4448 19.3308 12.2496 19.1355Z"},null,-1),G("path",{d:"M21.1497 19.1355L14.018 12.0038L21.1497 4.87206C21.345 4.6768 21.345 4.36022 21.1497 4.16495L20.4426 3.45785C20.2473 3.26259 19.9307 3.26259 19.7355 3.45785L11.8967 11.2967C11.5061 11.6872 11.5061 12.3204 11.8967 12.7109L19.7355 20.5497C19.9307 20.745 20.2473 20.745 20.4426 20.5497L21.1497 19.8426C21.345 19.6474 21.345 19.3308 21.1497 19.1355Z"},null,-1)])])}const kd={render:Sd},Id={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Md(c,u){return x(),ee("svg",Id,[...u[0]||(u[0]=[G("path",{d:"M9.00839 13.9974C9.28453 13.9974 9.53453 14.1093 9.71549 14.2903C9.89646 14.4712 10.0084 14.7212 10.0084 14.9974V20.1572C10.0084 20.4333 9.78453 20.6572 9.50839 20.6572H8.50839C8.23224 20.6572 8.00839 20.4333 8.00839 20.1572V17.4974L4.09289 21.4116C3.89762 21.6069 3.58104 21.6069 3.38578 21.4116L2.67867 20.7045C2.48341 20.5092 2.48341 20.1927 2.67867 19.9974L6.68001 15.9974H3.83559C3.55945 15.9974 3.33559 15.7735 3.33559 15.4974V14.4974C3.33559 14.2212 3.55945 13.9974 3.83559 13.9974H9.00839ZM19.919 2.58865C20.1142 2.39338 20.4308 2.39338 20.6261 2.58865L21.3332 3.29575C21.5284 3.49102 21.5284 3.8076 21.3332 4.00286L17.3318 8.00286H20.1763C20.4524 8.00286 20.6763 8.22672 20.6763 8.50286V9.50286C20.6763 9.779 20.4524 10.0029 20.1763 10.0029H15.0035C14.7273 10.0029 14.4773 9.89093 14.2964 9.70997C14.1154 9.529 14.0035 9.279 14.0035 9.00286V3.84309C14.0035 3.56695 14.2273 3.34309 14.5035 3.34309H15.5035C15.7796 3.34309 16.0035 3.56695 16.0035 3.84309V6.50281L19.919 2.58865Z"},null,-1)])])}const Td={render:Md},Vd={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Dd(c,u){return x(),ee("svg",Vd,[...u[0]||(u[0]=[G("path",{d:"M7.1518 11.5968C7.31452 11.4341 7.57834 11.4341 7.74106 11.5968L8.33031 12.186C8.49303 12.3487 8.49303 12.6126 8.33031 12.7753L4.99587 16.1086H7.36621C7.59633 16.1086 7.78288 16.2952 7.78288 16.5253V17.3586C7.78288 17.5887 7.59633 17.7753 7.36621 17.7753H3.05555C2.82544 17.7753 2.6171 17.682 2.4663 17.5312C2.3155 17.3804 2.22222 17.1721 2.22222 16.9419V12.6421C2.22222 12.412 2.40877 12.2255 2.63889 12.2255H3.47222C3.70234 12.2255 3.88889 12.412 3.88889 12.6421V14.8586L7.1518 11.5968ZM16.9367 2.22217C17.1668 2.22217 17.3751 2.31544 17.5259 2.46625C17.6767 2.61705 17.77 2.82538 17.77 3.0555V7.35531C17.77 7.58543 17.5835 7.77198 17.3533 7.77198H16.52C16.2899 7.77198 16.1033 7.58543 16.1033 7.35531V5.13888L12.8404 8.40068C12.6777 8.5634 12.4139 8.5634 12.2512 8.40068L11.6619 7.81142C11.4992 7.6487 11.4992 7.38489 11.6619 7.22217L14.9964 3.88883H12.626C12.3959 3.88883 12.2094 3.70229 12.2094 3.47217V2.63883C12.2094 2.40872 12.3959 2.22217 12.626 2.22217H16.9367Z"},null,-1)])])}const Pd={render:Dd},Ad={class:"bar-first"},Ed={class:"bar-content"},Hd={class:"link-icon-active"},Ld={class:"link-icon-active"},Od={id:"fullscreenElement",class:"link-icon-active",style:{"padding-right":"4px"}},Fd=vt({__name:"LinkOptBar",props:{canvasStyleData:{type:Object,required:!0}},setup(c){var Q;const u=Rt(),b=c,{canvasStyleData:p}=on(b),{fullscreenFlag:E}=$t(u),{t:S}=In(),C=Bn({fullscreenElement:null,barActive:!1,fullWidth:((Q=An.currentRoute.value.query)==null?void 0:Q.fromLink)==="true"?126:94}),m=z(()=>{var D,W;let N="link-bar-main-light";return((W=(D=p.value)==null?void 0:D.dashboard)==null?void 0:W.themeColor)==="dark"&&(N="link-bar-main-dark"),N}),v=z(()=>{var N;return((N=An.currentRoute.value.query)==null?void 0:N.fromLink)==="true"}),y=()=>{C.barActive=!C.barActive},I=()=>{document.fullscreenElement?document.exitFullscreen().catch(N=>{console.error("Exit fullscreen failed:",N)}):yt().emitter.emit("canvasFullscreen")},_=()=>{const N=localStorage.getItem("beforeJumpUrl");localStorage.removeItem("beforeJumpUrl"),window.location.href=N,window.location.reload()},M=()=>{yt().emitter.emit("canvasDownload","pdf")};return(N,D)=>{const W=fa;return x(),ee("div",{id:"fullscreenElement",ref:"widget-div",class:Ht(["link-bar-main bar-light",[{"link-bar-main-active":C.barActive},m.value]]),style:ct({"--fullWidth":C.fullWidth+"px","--fullContent":28-C.fullWidth+"px","--firstHoveMove":32-C.fullWidth+"px"})},[G("div",Ad,[T(W,{content:C.barActive?l(S)("visualization.fold"):l(S)("visualization.expand")},{default:A(()=>[T(l(Sn),{style:{width:"16px",height:"16px"},onClick:y},{default:A(()=>[C.barActive?(x(),le(pn,{key:0,name:"icon_down_right_outlined"},{default:A(()=>[T(l(Cd))]),_:1})):(x(),le(pn,{key:1,name:"icon_up_left_outlined"},{default:A(()=>[T(l(kd))]),_:1}))]),_:1})]),_:1},8,["content"])]),G("div",Ed,[D[0]||(D[0]=G("div",{class:"bar-diver"},null,-1)),Ft(G("div",Hd,[T(W,{content:l(S)("visualization.back_parent")},{default:A(()=>[T(l(Sn),{style:{width:"16px",height:"16px"},onClick:_},{default:A(()=>[T(pn,{name:"icon_left_outlined"},{default:A(()=>[T(l(us),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])],512),[[Kt,v.value]]),G("div",Ld,[T(W,{content:l(S)("visualization.export_pdf")},{default:A(()=>[T(l(Sn),{style:{width:"16px",height:"16px"},onClick:M},{default:A(()=>[T(pn,{name:"icon_download_outlined"},{default:A(()=>[T(l(Pa),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])]),G("div",Od,[T(W,{content:l(E)?l(S)("visualization.ext_fullscreen"):l(S)("visualization.fullscreen")},{default:A(()=>[T(l(Sn),{style:{width:"16px",height:"16px"},onClick:I},{default:A(()=>[l(E)?(x(),le(pn,{key:0,name:"icon_minify_outlined"},{default:A(()=>[T(l(Td),{class:"svg-icon"})]),_:1})):(x(),le(pn,{key:1,name:"icon_magnify_outlined"},{default:A(()=>[T(l(Pd),{class:"svg-icon"})]),_:1}))]),_:1})]),_:1},8,["content"])])])],6)}}});const Bd=Vt(Fd,[["__scopeId","data-v-9235835a"]]),zd=vt({__name:"DePreview",props:{canvasStyleData:{type:Object,required:!0},componentData:{type:Object,required:!0},canvasViewInfo:{type:Object,required:!0},dvInfo:{type:Object,required:!0},canvasId:{type:String,required:!1,default:"canvas-main"},showPosition:{required:!1,type:String,default:"preview"},previewActive:{type:Boolean,default:!0},downloadStatus:{type:Boolean,default:!1},userId:{type:String,require:!1},outerScale:{type:Number,required:!1,default:1},outerSearchCount:{type:Number,required:!1,default:0},isSelector:{type:Boolean,default:!1},showPopBar:{type:Boolean,default:!1},fontFamily:{type:String,required:!1,default:"inherit"},showLinkageButton:{type:Boolean,default:!0},outerScreenAdaptor:{type:String,required:!1,default:null}},emits:["onResetLayout"],setup(c,{expose:u,emit:b}){const p=Rt(),{pcMatrixCount:E,curComponent:S,mobileInPc:C,canvasState:m,inMobile:v}=$t(p),y=J(null),I=J(null),_=b,M=J(null),Q=J(!1),N=cs(),{t:D}=In(),W=c,{canvasStyleData:F,componentData:ge,dvInfo:Be,canvasId:me,canvasViewInfo:be,showPosition:fe,previewActive:a,downloadStatus:Le,outerScale:ce,outerSearchCount:Ve,showPopBar:Ge,fontFamily:De,outerScreenAdaptor:$}=on(W),Ee="preview-"+me.value,ye=J(100),Oe=J(100),ze=J(100),Ke=J(null),et=J(10),ht=J(10),nt=J(null),bt=J(0),Z=J(null),xe=J(!1),Ie=z(()=>Be.value.type==="dashboard"),se=Bn({initState:!0,scrollMain:0}),ke=z(()=>{var ie;return $.value||((ie=F.value)==null?void 0:ie.screenAdaptor)}),Me=z(()=>Ve.value+bt.value),re=z(()=>ke.value!=="full"),he=z(()=>Zt()&&ke.value==="withWidth"),st=z(()=>{var ie;return!!((ie=An.currentRoute.value.query)!=null&&ie.report)}),Re=z(()=>ge.value.filter(ie=>ie.category&&ie.category==="hidden"&&(!(ie!=null&&ie.dashboardHidden)||(ie==null?void 0:ie.dashboardHidden)&&Ea()))),at=z(()=>ge.value.filter(ie=>(ie==null?void 0:ie.category)!=="hidden"&&ie.component!=="GroupArea"&&(!(ie!=null&&ie.dashboardHidden)||(ie==null?void 0:ie.dashboardHidden)&&Ea()))),xt=z(()=>{var qe,_t,St,en,wn,Yt;let ie={};return lt(me.value)&&!Zt()&&(ie.overflowY="hidden !important"),F.value&&F.value.width&&lt(me.value)&&(ie=Io(F.value),ke.value==="keep"?(ie.height=((qe=F.value)==null?void 0:qe.height)+"px",ie.width=((_t=F.value)==null?void 0:_t.width)+"px",ie.margin="auto"):ke.value==="keepProportion"?(ie["aspect-ratio"]=((St=F.value)==null?void 0:St.width)/((en=F.value)==null?void 0:en.height),ie.height="auto",ie.width="auto"):(ie.height=Ie.value?Le.value?Tt():"100%":!ke.value||ke.value==="widthFirst"?_o((wn=F.value)==null?void 0:wn.height,ze.value)+"px":"100%",ie.width=!Ie.value&&ke.value==="heightFirst"?_o((Yt=F.value)==null?void 0:Yt.width,Oe.value)+"px":"100%")),ie}),At=()=>{var _t;if(!((_t=Ke.value)!=null&&_t.childNodes))return pt(()=>{xt.value.height=Tt()}),"100%";const ie=Ke.value.childNodes;let qe=0;return ie.forEach(St=>{var jn,Kn;const en=((jn=St.style)==null?void 0:jn.top)||0,wn=((Kn=St.style)==null?void 0:Kn.height)||0,Yt=parseFloat(en)||0,Jt=parseFloat(wn)||0,$n=Yt+Jt;$n>qe&&(qe=$n)}),`${qe}px`},Tt=()=>{var _t;if(!((_t=Ke.value)!=null&&_t.childNodes))return pt(()=>{xt.value.height=Tt()}),"100%";const ie=Ke.value.childNodes;let qe=0;return ie.forEach(St=>{const en=(St.offsetHeight||0)+(St.offsetTop||0);en>qe&&(qe=en)}),`${qe}px!important`};mn(()=>a.value,()=>{a.value&&We()}),yt({name:"tabCanvasChange-"+me.value,callback:function(){We()}}),yt({name:"componentRefresh",callback:function(){lt(me.value)&&ue()}}),yt({name:"canvasFullscreen",callback:function(){lt(me.value)&&M.value.toggleFullscreen()}});const mt=()=>{Le.value||pt(()=>{var ie,qe,_t;if(Ke.value){let St=Ke.value.clientWidth,en=Ke.value.clientHeight;if(ye.value=St*100/F.value.width,he.value?Oe.value=ye.value*.7:Oe.value=en*100/F.value.height,ze.value=Zt()&&!he.value?Math.floor(Math.min(ye.value,Oe.value)):ye.value,Ie.value)et.value=St/E.value.x,he.value?ht.value=et.value*1.6:ht.value=en/E.value.y,ze.value=lt(me.value)?ze.value*1.2:ce.value*100;else{const wn=re.value?ze.value:Oe.value;ds(at.value,F.value,ze.value||ce.value*100,wn||ce.value*100,ce.value*100),ze.value=lt(me.value)?ze.value:ce.value*100}xe.value=!0,_("onResetLayout"),Q.value=!1,((ie=Ke.value)==null?void 0:ie.clientHeight)-((_t=(qe=Ke.value)==null?void 0:qe.parentNode)==null?void 0:_t.clientHeight)>0&&(Q.value=!0)}})},We=()=>{st.value||mt()},zt=ie=>Ai(ie,{dvModel:Be.value.type,cellWidth:et.value,cellHeight:ht.value,curGap:Wt.value}),Wt=z(()=>{var ie,qe,_t;return Ie.value&&((ie=p.canvasStyleData.dashboard)==null?void 0:ie.gap)==="yes"?(_t=(qe=p.canvasStyleData)==null?void 0:qe.dashboard)==null?void 0:_t.gapSize:0}),pe=()=>{if(F.value.refreshViewEnable&&fe.value==="preview"){bt.value=0,Z.value&&clearInterval(Z.value);let ie=3e5;F.value.refreshTime&&F.value.refreshTime>0&&(F.value.refreshUnit==="second"?ie=F.value.refreshTime*1e3:ie=F.value.refreshTime*6e4),Z.value=setInterval(()=>{ue()},ie)}},ue=()=>{bt.value++,lt(me.value)&&sl(Be.value.id,Be.value.type)},U=(ie="preview-canvas-main")=>{Be.value.watermarkInfo&&lt(me.value)&&!Le.value&&Qa(ie,me.value,ze.value/100)},X=ie=>{const qe=ie.data;console.info("Received Message: "+JSON.stringify(qe)),(qe==null?void 0:qe.targetSourceId)===Be.value.id+""&&lt(me.value)&&(qe.type==="attachParams"?K(qe):qe.type==="webParams"&&H(qe))},H=ie=>{const qe=ie.params;p.addWebParamsFilter(qe,at.value)},K=ie=>{const qe=ie.params;se.initState=!1,p.addOuterParamsFilter(qe,at.value,"outer"),se.initState=!0};gn(()=>{pe(),mt(),window.addEventListener("resize",We),Qi().listenTo(document.getElementById(Ee),()=>{We(),U()}),window.addEventListener("message",X)}),ia(()=>{p.canvasStateChange({key:"curPointArea",value:"base"}),clearInterval(Z.value),window.removeEventListener("message",X)});const tt=(ie,qe)=>{nt.value.dialogInit(F.value,be.value[qe.id],qe,ie,{scale:ze.value/100})},Ne=()=>{fe.value!=="viewDialog"&&(p.setCurComponent({component:null,index:null}),(!S.value||S.value&&S.value.category!=="hidden")&&p.canvasStateChange({key:"curPointArea",value:"base"}))},Je=ie=>{try{if(console.info("de_inner_params send"),window["dataease-embedded-host"]&&(y!=null&&y.value)){const qe={methodName:"embeddedInteractive",args:{eventName:"de_inner_params",args:ie}};y.value.invokeMethod(qe)}else{console.info("de_inner_params send to host");const qe={type:"dataease-embedded-interactive",eventName:"de_inner_params",args:ie};window.parent.postMessage(qe,"*")}}catch{console.warn("de_inner_params send error")}},jt=z(()=>{var ie;return((ie=F.value)==null?void 0:ie.popupAvailable)&&lt(me.value)}),ne=z(()=>jt.value&&Re.value&&Re.value.length>0&&!v.value&&F.value.popupButtonAvailable),Pe=ie=>{var qe;(qe=I.value)==null||qe.optInit(ie)},ot=z(()=>Be.value.type==="dataV"&&me.value==="canvas-main"),$e=z(()=>!!(F.value.suspensionButtonAvailable&&!v.value&&!C.value&&Ge.value&&!N)),Xt=()=>{},En=()=>{se.scrollMain=Ke.value.scrollTop},qt=z(()=>{var ie;return((ie=Be.value)==null?void 0:ie.status)===0&&lt(me.value)});return u({restore:We,getPreviewCanvasSize:()=>({innerWidth:Ke.value.clientWidth,innerHeight:Ke.value.clientHeight}),getDownloadStatusMainHeightV2:At}),(ie,qe)=>(x(),ee(Bt,null,[se.initState?(x(),ee("div",{key:0,id:Ee,class:Ht(["canvas-container",{"de-download-custom":l(Le),"datav-preview":ot.value,"datav-preview-unpublish":qt.value}]),style:ct(xt.value),ref_key:"previewCanvas",ref:Ke,onMousedown:Ne,onScroll:En},[ne.value?(x(),le(ss,{key:0,"is-fixed":Q.value},null,8,["is-fixed"])):ae("",!0),jt.value?(x(),le(Eo,{key:1,"dv-info":l(Be),"canvas-id":l(me),"canvas-style-data":l(F),canvasViewInfo:l(be),"pop-component-data":Re.value,scale:ze.value,"canvas-state":l(m),"show-position":"preview"},null,8,["dv-info","canvas-id","canvas-style-data","canvasViewInfo","pop-component-data","scale","canvas-state"])):ae("",!0),c.showLinkageButton?(x(),le(Ao,{key:2,"canvas-id":l(me),"canvas-style-data":l(F),"component-data":at.value,"is-fixed":Q.value},null,8,["canvas-id","canvas-style-data","component-data","is-fixed"])):ae("",!0),xe.value&&!qt.value?(x(!0),ee(Bt,{key:3},kn(at.value,(_t,St)=>Ft((x(),le(Ho,{active:_t.id===(l(S)||{}).id,"canvas-id":l(me),"canvas-style-data":l(F),"dv-info":l(Be),"cur-style":zt(_t),"canvas-view-info":l(be),"view-info":l(be)[_t.id],key:St,config:_t,style:ct(zt(_t)),"show-position":l(fe),"search-count":Me.value,scale:l(C)&&l(Zt)()?100:ze.value,"is-selector":W.isSelector,"font-family":l(F).fontFamily||l(De),"scroll-main":se.scrollMain,onUserViewEnlargeOpen:en=>tt(en,_t),onDatasetParamsInit:en=>Pe(_t),onOnPointClick:Je,index:St},null,8,["active","canvas-id","canvas-style-data","dv-info","cur-style","canvas-view-info","view-info","config","style","show-position","search-count","scale","is-selector","font-family","scroll-main","onUserViewEnlargeOpen","onDatasetParamsInit","index"])),[[Kt,_t.isShow]])),128)):ae("",!0),qt.value?(x(),le(Co,{key:4,description:l(D)("visualization.resource_not_published"),"img-type":"none"},null,8,["description"])):ae("",!0),T(fi,{ref_key:"userViewEnlargeRef",ref:nt},null,512)],38)):ae("",!0),se.initState?ae("",!0):(x(),le(Co,{key:1,description:"参数不能为空","img-type":"noneWhite"})),T(bd,{ref_key:"fullScreeRef",ref:M},null,512),T(or,{ref_key:"customDatasetParamsRef",ref:I},null,512),T(l(Ha),{ref_key:"openHandler",ref:y,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512),$e.value?(x(),le(Bd,{key:2,ref:"link-opt-bar",terminal:"pc","canvas-style-data":l(F),onLinkExportPdf:Xt},null,8,["canvas-style-data"])):ae("",!0)],64))}});const pi=Vt(zd,[["__scopeId","data-v-3931fc37"]]);export{ou as C,lr as D,cr as P,bd as _,Dp as a,bu as b,Pp as c,_s as d,ir as e,qp as f,Kc as g,Xs as h,ps as i,lu as j,Ho as k,yu as l,Ao as m,pi as n,vs as o,fi as p,Ap as q,Hp as r,Lp as s,Op as t,Ep as u,Fp as v,Bp as w,zp as x};
