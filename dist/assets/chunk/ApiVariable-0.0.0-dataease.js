import{o as G,n as E,j as W,G as H,y as J}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{p as f}from"./index-0.0.0-dataease.js";import{E as Q}from"./el-row-0.0.0-dataease.js";import{E as X}from"./el-col-0.0.0-dataease.js";import{K as M,E as Y}from"./ApiTestModel-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{a as Z,E as ee}from"./el-select-0.0.0-dataease.js";import{i as ae}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as le}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as oe}from"./icon_add_outlined-0.0.0-dataease.js";import{g as $}from"./util-0.0.0-dataease.js";import{d as te}from"./vuedraggable-es-0.0.0-dataease.js";import{d as ne,y as N,t as de,aj as ue,x as se,f as n,O as p,a4 as O,_ as c,j as l,i as t,u as s,g as r,W as b,a6 as h,a3 as re}from"./vue-0.0.0-dataease.js";import{_ as ie}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";const pe={class:"api-variable"},ce={key:0,class:"kv-description"},me=ne({__name:"ApiVariable",props:{keyPlaceholder:f.string.def(""),valuePlaceholder:f.string.def(""),description:f.string.def(""),type:f.string.def(""),isReadOnly:f.bool.def(!1),parameters:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(u){const V=u,{t:d}=G(),x=N(()=>V.keyPlaceholder||d("datasource.key"));N(()=>V.valuePlaceholder||d("datasource.value"));const{parameters:i,suggestions:k}=de(V);ue(()=>{(i.value.length===0||i.value[i.value.length-1].name)&&i.value.push(new M({type:"text",nameType:"fixed",enable:!0,required:!0,uuid:$(),contentType:"text/plain"}))});const P=o=>{o.type==="file"?o.contentType="application/octet-stream":o.type==="text"?o.contentType="text/plain":o.contentType="application/json"},R=o=>{U()||i.value.splice(o,1)},A=()=>{i.value.push(new M({type:"text",enable:!0,nameType:"fixed",uuid:$(),contentType:"text/plain"}))},U=()=>i.value.length===1,j=(o,m)=>{const g=o?k.value.filter(F(o)):k.value;m(g)},F=o=>m=>m.value.toLowerCase().indexOf(o.toLowerCase())===0,L=o=>{o.value=""};se("api-active-name");const B=[{label:d("data_source.parameter"),value:"params"},{label:d("data_source.page_parameter"),value:"pageParams"},{label:d("data_source.fixed_value"),value:"fixed"},{label:d("data_source.time_function"),value:"timeFun"},{label:d("data_source.customize"),value:"custom"}],I=[{label:"${pageNumber}",value:"${pageNumber}"},{label:"${pageSize}",value:"${pageSize}"},{label:"${pageToken}",value:"${pageToken}"}],D=[{label:d("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:d("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(o,m)=>{const g=E,S=W,y=Z,_=ee,T=H,z=Y,v=X,w=J,K=Q,q=E;return n(),p("div",pe,[u.description?(n(),p("span",ce,O(u.description),1)):c("",!0),l(s(te),{class:"draggable-content_api",tag:"div",list:s(i),handle:".handle"},{item:t(({element:a,index:C})=>[(n(),p("div",{key:C,style:{"margin-bottom":"16px"}},[l(K,{gutter:8},{default:t(()=>[l(S,{class:"drag handle"},{default:t(()=>[l(g,{name:"icon_drag_outlined"},{default:t(()=>[l(s(ae),{class:"svg-icon"})]),_:1})]),_:1}),l(v,{span:6},{default:t(()=>[s(k)?(n(),r(z,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:u.isReadOnly,"fetch-suggestions":j,placeholder:x.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),r(T,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:u.isReadOnly,maxlength:"200",placeholder:x.value,"show-word-limit":""},{prepend:t(()=>[u.type==="body"?(n(),r(_,{key:0,modelValue:a.type,"onUpdate:modelValue":e=>a.type=e,disabled:u.isReadOnly,class:"kv-type",onChange:m[0]||(m[0]=e=>P(o.item))},{default:t(()=>[l(y,{value:"text"}),l(y,{value:"json"})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"])):c("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1024),l(v,{span:3},{default:t(()=>[l(_,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>L(a)},{default:t(()=>[(n(),p(b,null,h(B,e=>l(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),a.type!=="file"?(n(),r(v,{key:0,span:6},{default:t(()=>[!o.needMock&&a.nameType==="params"?(n(),r(_,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:t(()=>[(n(!0),p(b,null,h(u.valueList,e=>(n(),r(y,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])):c("",!0),!o.needMock&&a.nameType==="timeFun"?(n(),r(_,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:t(()=>[(n(),p(b,null,h(D,e=>l(y,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])):c("",!0),!o.needMock&&a.nameType==="pageParams"?(n(),r(_,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:t(()=>[(n(),p(b,null,h(I,e=>l(y,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])):c("",!0),a.nameType!=="params"&&a.nameType!=="timeFun"&&a.nameType!=="pageParams"?(n(),r(T,{key:3,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:u.isReadOnly,class:"input-with-autocomplete",placeholder:a.nameType==="fixed"?s(d)("data_source.value"):s(d)("data_source.name_use_parameters"),"value-key":"name","highlight-first-item":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):c("",!0)]),_:2},1024)):c("",!0),l(v,{span:7},{default:t(()=>[l(T,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:o.$t("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),l(v,{span:1},{default:t(()=>[l(w,{class:"api-variable_del",text:"",disabled:U()||u.isReadOnly,onClick:e=>R(C)},{icon:t(()=>[l(g,null,{default:t(()=>[l(s(le),{class:"svg-icon"})]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))]),_:1},8,["list"]),l(w,{style:{"margin-top":"14px"},onClick:A,text:""},{icon:t(()=>[l(q,{name:"icon_add_outlined"},{default:t(()=>[l(s(oe),{class:"svg-icon"})]),_:1})]),default:t(()=>[re(" "+O(s(d)("data_source.add_parameters")),1)]),_:1})])}}});const De=ie(me,[["__scopeId","data-v-75cf94ca"]]);export{De as default};
