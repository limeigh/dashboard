import{f as W,e as M}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{e as Y,A as G,y as H,r as J,af as Q,C as X,i as Z,p as ee}from"./element-plus-secondary-0.0.0-dataease.js";import{i as ae}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as le}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as te}from"./icon_add_outlined-0.0.0-dataease.js";import{p as f}from"./index-0.0.0-dataease.js";import{K as $}from"./ApiTestModel-0.0.0-dataease.js";import{g as N}from"./util-0.0.0-dataease.js";import{d as oe}from"./vuedraggable-0.0.0-dataease.js";import{d as ne,k as E,t as re,a7 as ie,i as de,o as n,c as p,Y as R,R as m,W as l,U as o,u as d,T as u,S as b,a8 as h,_ as ue}from"./@vue-0.0.0-dataease.js";import{_ as se}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";const pe={class:"api-variable"},me={key:0,class:"kv-description"},ce=ne({__name:"ApiVariable",props:{keyPlaceholder:f.string.def(""),valuePlaceholder:f.string.def(""),description:f.string.def(""),type:f.string.def(""),isReadOnly:f.bool.def(!1),parameters:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(i){const V=i,{t:r}=W(),x=E(()=>V.keyPlaceholder||r("datasource.key"));E(()=>V.valuePlaceholder||r("datasource.value"));const{parameters:s,suggestions:k}=re(V);ie(()=>{(s.value.length===0||s.value[s.value.length-1].name)&&s.value.push(new $({type:"text",nameType:"fixed",enable:!0,required:!0,uuid:N(),contentType:"text/plain"}))});const A=t=>{t.type==="file"?t.contentType="application/octet-stream":t.type==="text"?t.contentType="text/plain":t.contentType="application/json"},O=t=>{U()||s.value.splice(t,1)},P=()=>{s.value.push(new $({type:"text",enable:!0,nameType:"fixed",uuid:N(),contentType:"text/plain"}))},U=()=>s.value.length===1,F=(t,c)=>{const g=t?k.value.filter(L(t)):k.value;c(g)},L=t=>c=>c.value.toLowerCase().indexOf(t.toLowerCase())===0,B=t=>{t.value=""};de("api-active-name");const I=[{label:r("data_source.parameter"),value:"params"},{label:r("data_source.page_parameter"),value:"pageParams"},{label:r("data_source.fixed_value"),value:"fixed"},{label:r("data_source.time_function"),value:"timeFun"},{label:r("data_source.customize"),value:"custom"}],S=[{label:"${pageNumber}",value:"${pageNumber}"},{label:"${pageSize}",value:"${pageSize}"},{label:"${pageToken}",value:"${pageToken}"}],D=[{label:r("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:r("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(t,c)=>{const g=M,j=Y,y=G,_=H,T=J,z=Q,v=X,w=Z,K=ee,q=M;return n(),p("div",pe,[i.description?(n(),p("span",me,R(i.description),1)):m("",!0),l(d(oe),{class:"draggable-content_api",tag:"div",list:d(s),handle:".handle"},{item:o(({element:a,index:C})=>[(n(),p("div",{key:C,style:{"margin-bottom":"16px"}},[l(K,{gutter:8},{default:o(()=>[l(j,{class:"drag handle"},{default:o(()=>[l(g,{name:"icon_drag_outlined"},{default:o(()=>[l(d(ae),{class:"svg-icon"})]),_:1})]),_:1}),l(v,{span:6},{default:o(()=>[d(k)?(n(),u(z,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:i.isReadOnly,"fetch-suggestions":F,placeholder:x.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),u(T,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:i.isReadOnly,maxlength:"200",placeholder:x.value,"show-word-limit":""},{prepend:o(()=>[i.type==="body"?(n(),u(_,{key:0,modelValue:a.type,"onUpdate:modelValue":e=>a.type=e,disabled:i.isReadOnly,class:"kv-type",onChange:c[0]||(c[0]=e=>A(t.item))},{default:o(()=>[l(y,{value:"text"}),l(y,{value:"json"})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"])):m("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1024),l(v,{span:3},{default:o(()=>[l(_,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>B(a)},{default:o(()=>[(n(),p(b,null,h(I,e=>l(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),a.type!=="file"?(n(),u(v,{key:0,span:6},{default:o(()=>[!t.needMock&&a.nameType==="params"?(n(),u(_,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(!0),p(b,null,h(i.valueList,e=>(n(),u(y,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])):m("",!0),!t.needMock&&a.nameType==="timeFun"?(n(),u(_,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(),p(b,null,h(D,e=>l(y,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])):m("",!0),!t.needMock&&a.nameType==="pageParams"?(n(),u(_,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(),p(b,null,h(S,e=>l(y,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])):m("",!0),a.nameType!=="params"&&a.nameType!=="timeFun"&&a.nameType!=="pageParams"?(n(),u(T,{key:3,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:i.isReadOnly,class:"input-with-autocomplete",placeholder:a.nameType==="fixed"?d(r)("data_source.value"):d(r)("data_source.name_use_parameters"),"value-key":"name","highlight-first-item":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):m("",!0)]),_:2},1024)):m("",!0),l(v,{span:7},{default:o(()=>[l(T,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:t.$t("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),l(v,{span:1},{default:o(()=>[l(w,{class:"api-variable_del",text:"",disabled:U()||i.isReadOnly,onClick:e=>O(C)},{icon:o(()=>[l(g,null,{default:o(()=>[l(d(le),{class:"svg-icon"})]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))]),_:1},8,["list"]),l(w,{style:{"margin-top":"14px"},onClick:P,text:""},{icon:o(()=>[l(q,{name:"icon_add_outlined"},{default:o(()=>[l(d(te),{class:"svg-icon"})]),_:1})]),default:o(()=>[ue(" "+R(d(r)("data_source.add_parameters")),1)]),_:1})])}}});const Ta=se(ce,[["__scopeId","data-v-75cf94ca"]]);export{Ta as default};
