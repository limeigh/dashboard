import{u,a as h,r as o}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as d}from"./interactive-0.0.0-dataease.js";import{a as f,g as m}from"./index-0.0.0-dataease.js";const{wsCache:i}=f(),s=u(),c=h(),a=d(),S=(l,t=!1)=>{c.clear(),c.$reset(),s.clear(),s.$reset(),a.clear(),a.$reset(),g();let r="/workbranch/index";o.currentRoute.value.fullPath&&(r=o.currentRoute.value.fullPath);let e=window.location.pathname;if(e){if(e.includes("oidcbi/")){if(t)return;e=e.replace("oidcbi/",""),e.includes("mobile.html")&&(e=e.replace("mobile.html","")),e=e.substring(0,e.length-1),window.location.href=e+"/oidcbi/oidc/logout";return}else if(e.includes("casbi/")){if(t)return;e=e.replace("casbi/",""),e.includes("mobile.html")&&(e=e.replace("mobile.html","")),e=e.substring(0,e.length-1);const n=window.location.href;window.location.href=e+"/casbi/cas/logout?service="+n;return}e=e.substring(0,e.length-1)}i.get("custom_auth_logout_url")&&(window.location.href=i.get("custom_auth_logout_url")),o.push(l?r:`/login?redirect=${r}`)},g=()=>{Object.keys(i.storage).forEach(t=>{(t.startsWith("de-plugin-")||t==="de-platform-client"||t==="pwd-validity-period"||t==="xpack-model-distributed")&&(i.delete(m(t)),i.delete(t))})};export{S as l};
