import{u,a as h,r}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as d}from"./interactive-0.0.0-dataease.js";import{b as m}from"./index-0.0.0-dataease.js";const{wsCache:i}=m(),s=u(),c=h(),n=d(),w=(l,t=!1)=>{c.clear(),c.$reset(),s.clear(),s.$reset(),n.clear(),n.$reset(),f();let o="/workbranch/index";r.currentRoute.value.fullPath&&(o=r.currentRoute.value.fullPath);let e=window.location.pathname;if(e){if(e.includes("oidcbi/")){if(t)return;e=e.replace("oidcbi/",""),e.includes("mobile.html")&&(e=e.replace("mobile.html","")),e=e.substring(0,e.length-1),window.location.href=e+"/oidcbi/oidc/logout";return}else if(e.includes("casbi/")){if(t)return;e=e.replace("casbi/",""),e.includes("mobile.html")&&(e=e.replace("mobile.html","")),e=e.substring(0,e.length-1);const a=window.location.href;window.location.href=e+"/casbi/cas/logout?service="+a;return}e=e.substring(0,e.length-1)}i.get("custom_auth_logout_url")&&(window.location.href=i.get("custom_auth_logout_url")),r.push(l?o:`/login?redirect=${o}`)},f=()=>{Object.keys(i.storage).forEach(t=>{(t.startsWith("de-plugin-")||t==="de-platform-client"||t==="pwd-validity-period"||t==="xpack-model-distributed")&&i.delete(t)})};export{w as l};
