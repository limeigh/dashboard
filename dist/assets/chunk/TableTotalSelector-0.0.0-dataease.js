import{h as be,z as ge,w as Te,P as he,Q as we,r as Se,y as ve,C as Fe,e as Ve,x as xe,i as ye,M as Ne,A as Ce}from"./element-plus-secondary-0.0.0-dataease.js";import{d as Ie,w as Ae,l as pe,k as X,i as H,r as K,b as ke,ae as Ue,o as u,c as y,W as o,U as m,T as v,_ as g,Y as T,u as n,z as c,R as N,$ as U,a0 as E,a as O,S as C,a8 as I,n as Ee}from"./@vue-0.0.0-dataease.js";import{h as De}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{b as Z,ay as _}from"./chart-0.0.0-dataease.js";import Le from"./CustomAggrEdit-0.0.0-dataease.js";import{h as z,x as ee,E as te,P as $e}from"./lodash-es-0.0.0-dataease.js";import{_ as Me}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./icon_search-outline_outlined-0.0.0-dataease.js";import"./icon_adjustment_outlined-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease2.js";import"./@codemirror-0.0.0-dataease.js";import"./@lezer-0.0.0-dataease.js";import"./style-mod-0.0.0-dataease.js";import"./crelt-0.0.0-dataease.js";import"./@marijn-0.0.0-dataease.js";import"./w3c-keyname-0.0.0-dataease.js";import"./codemirror-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./field-list-0.0.0-dataease.js";const Oe={key:1},ze={style:{display:"flex"}},Ge={style:{flex:"1"}},Be=Ie({__name:"TableTotalSelector",props:{chart:{type:Object,required:!0},themes:{type:String,default:"dark"},propertyInner:{type:Array}},emits:["onTableTotalChange"],setup(a,{emit:le}){const{t:r}=De(),x=a;Ae([()=>x.chart.customAttr.tableTotal,()=>x.chart.xAxis,()=>x.chart.yAxis],()=>{J()},{deep:!0});const G=[{name:r("chart.none"),value:"NONE"},{name:r("chart.sum"),value:"SUM"},{name:r("chart.avg"),value:"AVG"},{name:r("chart.max"),value:"MAX"},{name:r("chart.min"),value:"MIN"},{name:r("commons.custom"),value:"CUSTOM"}],t=pe({tableTotalForm:z(_),rowSubTotalItem:{},rowTotalItem:{},colSubTotalItem:{},colTotalItem:{},totalCfg:[],totalCfgAttr:"",totalItem:{},selectedSubTotalDimensionName:"",selectedSubTotalDimension:void 0,subTotalDimensionList:[],basicStyleForm:JSON.parse(JSON.stringify(Z))}),ae=X(()=>{const s=x.chart;return s.customAttr.basicStyle.quotaPosition!=="row"&&s.xAxisExt.length&&s.yAxis.length>1}),oe=X(()=>{const s=x.chart;return s.customAttr.basicStyle.quotaPosition==="row"&&s.customAttr.basicStyle.tableLayoutMode!=="tree"&&s.xAxis.length&&s.xAxisExt.length&&s.yAxis.length>1});function me(s){t.selectedSubTotalDimension=ee(t.subTotalDimensionList,e=>e.name===s)}function j(){const s=[];for(let e=0;e<t.subTotalDimensionList.length;e++)t.subTotalDimensionList[e].checked&&s.push(t.subTotalDimensionList[e].name);t.tableTotalForm.row.subTotalsDimensions=s,w("row")}const re=()=>{var f;const s=[];if(x.chart.xAxis.length>=2)for(let i=0;i<x.chart.xAxis.length-1;i++){const d=$e(t.tableTotalForm.row.subTotalsDimensions,x.chart.xAxis[i].dataeaseName);s.push({displayName:x.chart.xAxis[i].name,name:x.chart.xAxis[i].dataeaseName,checked:t.tableTotalForm.row.subTotalsDimensionsNew?d:!0})}t.subTotalDimensionList=s;const e=ee(t.subTotalDimensionList,i=>i.name===t.selectedSubTotalDimensionName);e?t.selectedSubTotalDimension=e:(t.selectedSubTotalDimensionName=(f=s[0])==null?void 0:f.name,t.selectedSubTotalDimension=s[0]),t.tableTotalForm.row.subTotalsDimensionsNew||(t.tableTotalForm.row.subTotalsDimensionsNew=!0,j())},se=le,w=s=>{se("onTableTotalChange",t.tableTotalForm,s)},J=()=>{var V,p,k;const s=(p=(V=x.chart)==null?void 0:V.customAttr)==null?void 0:p.tableTotal;s&&(s.row&&(s.row.subTotalsDimensionsNew=!!((k=s.row)!=null&&k.subTotalsDimensionsNew)),t.tableTotalForm=te(z(s),z(_)));const e=x.chart.yAxis;if((e==null?void 0:e.length)>0){const F=e.map(b=>b.dataeaseName);F.indexOf(t.tableTotalForm.row.totalSortField)===-1&&(t.tableTotalForm.row.totalSortField=e[0].dataeaseName),F.indexOf(t.tableTotalForm.col.totalSortField)===-1&&(t.tableTotalForm.col.totalSortField=e[0].dataeaseName)}else t.tableTotalForm.row.totalSortField="",t.tableTotalForm.col.totalSortField="";[{...t.tableTotalForm.row.calcTotals},{...t.tableTotalForm.row.calcSubTotals},{...t.tableTotalForm.col.calcTotals},{...t.tableTotalForm.col.calcSubTotals}].forEach(F=>{ne(F.cfg,e)}),[[t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg],[t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg],[t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg],[t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg]].forEach(F=>{const[b,h]=F;if(!h.length){b.dataeaseName="",b.aggregation="",b.originName="";return}const D=h.findIndex($=>$.dataeaseName===b.dataeaseName);D!==-1?b.aggregation=h[D].aggregation:(b.dataeaseName=h[0].dataeaseName,b.aggregation=h[0].aggregation,b.originName=h[0].originName,b.label=h[0].label)});const d=z(x.chart.customAttr.basicStyle);t.basicStyleForm=te(d,z(Z)),re()},A=s=>{var e;return(e=x.propertyInner)==null?void 0:e.includes(s)},B=(s,e)=>{for(let f=0;f<e.length;f++){const i=e[f];if(i.dataeaseName===s.dataeaseName){s.aggregation=i.aggregation,s.originName=i.originName,s.label=i.label;return}}},L=(s,e,f)=>{for(let i=0;i<e.length;i++){const d=e[i];if(d.dataeaseName===s.dataeaseName){d.aggregation=s.aggregation,d.label=s.label;break}}s.aggregation=="CUSTOM"&&!s.originName||w(f)},ne=(s,e)=>{if(!s.length){e.forEach(i=>{s.push({dataeaseName:i.dataeaseName,aggregation:"SUM",label:i.chartShowName??i.name})});return}if(!e.length){s.splice(0,s.length);return}const f=s.reduce((i,d)=>(i[d.dataeaseName]=d,i),{});s.splice(0,s.length),e.forEach(i=>{var d;s.push({dataeaseName:i.dataeaseName,aggregation:f[i.dataeaseName]?f[i.dataeaseName].aggregation:"SUM",originName:f[i.dataeaseName]?f[i.dataeaseName].originName:"",label:(d=f[i.dataeaseName])!=null&&d.label?f[i.dataeaseName].label:i.chartShowName??i.name})})},Y=H("quota",()=>[]),ie=H("dimension",()=>[]),q=K(),P=K(!1),R=(s,e,f)=>{P.value=!0,t.totalCfg=e,t.totalCfgAttr=f,t.totalItem=s,Ee(()=>{q.value.initEdit(s,Y().filter(i=>i.id!=="-1"))})},Q=()=>{P.value=!1},de=()=>{var e;q.value.setFieldForm();const s=z(q.value.fieldForm);(e=t.totalCfg)==null||e.forEach(f=>{f.dataeaseName===s.dataeaseName&&(f.originName=s.originName,ue(f),t.totalItem.originName=f.originName)}),Q(),w(t.totalCfgAttr)},ue=s=>{s.extField=2,s.chartId=x.chart.id,s.datasetGroupId=x.chart.tableId,s.lastSyncTime=null,s.columnIndex=ie().length+Y().length,s.deExtractType=s.deType};return ke(()=>{J()}),(s,e)=>{const f=be,i=ge,d=Te,V=he,p=we,k=Se,F=Ce,b=ve,h=Fe,D=Ue("Setting"),$=Ve,fe=xe,W=ye,ce=Ne;return u(),y(C,null,[o(fe,{size:"small",ref:"tableTotalForm",model:t.tableTotalForm,"label-position":"top"},{default:m(()=>{var M;return[A("row")?(u(),v(f,{key:0,"content-position":"center",class:c("divider-style-"+a.themes)},{default:m(()=>[g(T(n(r)("chart.row_cfg")),1)]),_:1},8,["class"])):N("",!0),U(o(d,{label:n(r)("chart.total_show"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(i,{effect:a.themes,modelValue:t.tableTotalForm.row.showGrandTotals,"onUpdate:modelValue":e[0]||(e[0]=l=>t.tableTotalForm.row.showGrandTotals=l),onChange:e[1]||(e[1]=l=>w("row.showGrandTotals"))},{default:m(()=>[g(T(n(r)("chart.show")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),[[E,A("row")]]),U(O("div",null,[o(d,{label:n(r)("chart.total_position"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(p,{effect:a.themes,modelValue:t.tableTotalForm.row.reverseLayout,"onUpdate:modelValue":e[2]||(e[2]=l=>t.tableTotalForm.row.reverseLayout=l),onChange:e[3]||(e[3]=l=>w("row.reverseLayout"))},{default:m(()=>[o(V,{effect:a.themes,label:!0},{default:m(()=>[g(T(n(r)("chart.total_pos_top")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:!1},{default:m(()=>[g(T(n(r)("chart.total_pos_bottom")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),o(d,{label:n(r)("chart.table_grand_total_label"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(k,{effect:a.themes,placeholder:n(r)("chart.table_grand_total_label"),size:"small",maxlength:"20",modelValue:t.tableTotalForm.row.label,"onUpdate:modelValue":e[4]||(e[4]=l=>t.tableTotalForm.row.label=l),clearable:"",onChange:e[5]||(e[5]=l=>w("row.label"))},null,8,["effect","placeholder","modelValue"])]),_:1},8,["label","class"]),o(d,{label:n(r)("chart.aggregation"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(h,{span:11},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.rowTotalItem.dataeaseName,"onUpdate:modelValue":e[6]||(e[6]=l=>t.rowTotalItem.dataeaseName=l),placeholder:n(r)("chart.aggregation"),onChange:e[7]||(e[7]=l=>B(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg))},{default:m(()=>[(u(!0),y(C,null,I(a.chart.yAxis,l=>(u(),v(F,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1}),o(h,{span:t.rowTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.rowTotalItem.aggregation,"onUpdate:modelValue":e[8]||(e[8]=l=>t.rowTotalItem.aggregation=l),placeholder:n(r)("chart.aggregation"),onChange:e[9]||(e[9]=l=>L(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg,"row.calcTotals.cfg"))},{default:m(()=>[(u(),y(C,null,I(G,l=>o(F,{key:l.value,label:l.name,value:l.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["span"]),t.rowTotalItem.aggregation==="CUSTOM"?(u(),v(h,{key:0,span:2,offset:1},{default:m(()=>[o($,null,{default:m(()=>[o(D,{onClick:e[10]||(e[10]=l=>R(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg,"row.calcTotals.cfg"))})]),_:1})]),_:1})):N("",!0)]),_:1},8,["label","class"]),oe.value?(u(),v(d,{key:0,class:c(["form-item","form-item-"+a.themes]),label:n(r)("chart.table_field_total_label")},{default:m(()=>[o(k,{effect:a.themes,placeholder:n(r)("chart.table_field_total_label"),size:"small",maxlength:"20",modelValue:t.rowTotalItem.label,"onUpdate:modelValue":e[11]||(e[11]=l=>t.rowTotalItem.label=l),clearable:"",onChange:e[12]||(e[12]=l=>L(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg,"row.calcTotals.cfg"))},null,8,["effect","placeholder","modelValue"])]),_:1},8,["label","class"])):N("",!0),a.chart.type==="table-pivot"?(u(),v(d,{key:1,label:n(r)("chart.total_sort"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(p,{effect:a.themes,modelValue:t.tableTotalForm.row.totalSort,"onUpdate:modelValue":e[13]||(e[13]=l=>t.tableTotalForm.row.totalSort=l),onChange:e[14]||(e[14]=l=>w("row.totalSort"))},{default:m(()=>[o(V,{effect:a.themes,label:"none"},{default:m(()=>[g(T(n(r)("chart.total_sort_none")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:"asc"},{default:m(()=>[g(T(n(r)("chart.total_sort_asc")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:"desc"},{default:m(()=>[g(T(n(r)("chart.total_sort_desc")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"])):N("",!0),a.chart.type==="table-pivot"&&t.tableTotalForm.row.totalSort!=="none"?(u(),v(d,{key:2,label:n(r)("chart.total_sort_field"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.tableTotalForm.row.totalSortField,"onUpdate:modelValue":e[15]||(e[15]=l=>t.tableTotalForm.row.totalSortField=l),class:"form-item-select",placeholder:n(r)("chart.total_sort_field"),onChange:e[16]||(e[16]=l=>w("row.totalSortField"))},{default:m(()=>[(u(!0),y(C,null,I(a.chart.yAxis,l=>(u(),v(F,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["label","class"])):N("",!0)],512),[[E,A("row")&&t.tableTotalForm.row.showGrandTotals]]),U(o(d,{label:n(r)("chart.sub_total_show"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(i,{effect:a.themes,modelValue:t.tableTotalForm.row.showSubTotals,"onUpdate:modelValue":e[17]||(e[17]=l=>t.tableTotalForm.row.showSubTotals=l),disabled:a.chart.xAxis.length<2,onChange:e[18]||(e[18]=l=>w("row"))},{default:m(()=>[g(T(n(r)("chart.show")),1)]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["label","class"]),[[E,A("row")]]),A("row")&&t.tableTotalForm.row.showSubTotals?(u(),y("div",Oe,[O("div",ze,[e[61]||(e[61]=O("div",{style:{width:"22px","flex-direction":"row"}},null,-1)),O("div",Ge,[o(d,{class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.selectedSubTotalDimensionName,"onUpdate:modelValue":e[19]||(e[19]=l=>t.selectedSubTotalDimensionName=l),disabled:a.chart.xAxis.length<2||t.basicStyleForm.tableLayoutMode==="tree",onChange:me},{default:m(()=>[(u(!0),y(C,null,I(t.subTotalDimensionList,l=>(u(),v(F,{key:l.name,label:l.displayName,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["class"]),t.selectedSubTotalDimension?(u(),v(d,{key:0,class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(i,{effect:a.themes,modelValue:t.selectedSubTotalDimension.checked,"onUpdate:modelValue":e[20]||(e[20]=l=>t.selectedSubTotalDimension.checked=l),disabled:a.chart.xAxis.length<2||t.basicStyleForm.tableLayoutMode==="tree",onChange:j},{default:m(()=>[g(T(n(r)("chart.show")),1)]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["class"])):N("",!0)])]),o(d,{label:n(r)("chart.total_position"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(p,{effect:a.themes,modelValue:t.tableTotalForm.row.reverseSubLayout,"onUpdate:modelValue":e[21]||(e[21]=l=>t.tableTotalForm.row.reverseSubLayout=l),disabled:a.chart.xAxis.length<2||t.basicStyleForm.tableLayoutMode==="tree",onChange:e[22]||(e[22]=l=>w("row"))},{default:m(()=>[o(V,{effect:a.themes,label:!0},{default:m(()=>[g(T(n(r)("chart.total_pos_top")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:!1},{default:m(()=>[g(T(n(r)("chart.total_pos_bottom")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["label","class"]),o(d,{label:n(r)("chart.total_label"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(k,{effect:a.themes,disabled:a.chart.xAxis.length<2,placeholder:n(r)("chart.total_label"),modelValue:t.tableTotalForm.row.subLabel,"onUpdate:modelValue":e[23]||(e[23]=l=>t.tableTotalForm.row.subLabel=l),size:"small",maxlength:"20",clearable:"",onChange:e[24]||(e[24]=l=>w("row.subLabel"))},null,8,["effect","disabled","placeholder","modelValue"])]),_:1},8,["label","class"]),o(d,{label:n(r)("chart.aggregation"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(h,{span:11},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.rowSubTotalItem.dataeaseName,"onUpdate:modelValue":e[25]||(e[25]=l=>t.rowSubTotalItem.dataeaseName=l),disabled:a.chart.xAxis.length<2,placeholder:n(r)("chart.aggregation"),onChange:e[26]||(e[26]=l=>B(t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg))},{default:m(()=>[(u(!0),y(C,null,I(a.chart.yAxis,l=>(u(),v(F,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","disabled","placeholder"])]),_:1}),o(h,{span:t.rowSubTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.rowSubTotalItem.aggregation,"onUpdate:modelValue":e[27]||(e[27]=l=>t.rowSubTotalItem.aggregation=l),disabled:a.chart.xAxis.length<2,placeholder:n(r)("chart.aggregation"),onChange:e[28]||(e[28]=l=>L(t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg,"row"))},{default:m(()=>[(u(),y(C,null,I(G,l=>o(F,{key:l.value,label:l.name,value:l.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","disabled","placeholder"])]),_:1},8,["span"]),t.rowSubTotalItem.aggregation==="CUSTOM"?(u(),v(h,{key:0,span:2,offset:1},{default:m(()=>[o($,null,{default:m(()=>[o(D,{onClick:e[29]||(e[29]=l=>R(t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg,"row.calcSubTotals.cfg"))})]),_:1})]),_:1})):N("",!0)]),_:1},8,["label","class"])])):N("",!0),A("col")?(u(),v(f,{key:2,"content-position":"center",class:c("divider-style-"+a.themes)},{default:m(()=>[g(T(n(r)("chart.col_cfg")),1)]),_:1},8,["class"])):N("",!0),U(o(d,{label:n(r)("chart.total_show"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(i,{effect:a.themes,modelValue:t.tableTotalForm.col.showGrandTotals,"onUpdate:modelValue":e[30]||(e[30]=l=>t.tableTotalForm.col.showGrandTotals=l),onChange:e[31]||(e[31]=l=>w("col"))},{default:m(()=>[g(T(n(r)("chart.show")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),[[E,A("col")]]),U(O("div",null,[o(d,{label:n(r)("chart.total_position"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(p,{effect:a.themes,modelValue:t.tableTotalForm.col.reverseLayout,"onUpdate:modelValue":e[32]||(e[32]=l=>t.tableTotalForm.col.reverseLayout=l),onChange:e[33]||(e[33]=l=>w("col"))},{default:m(()=>[o(V,{effect:a.themes,label:!0},{default:m(()=>[g(T(n(r)("chart.total_pos_left")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:!1},{default:m(()=>[g(T(n(r)("chart.total_pos_right")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),o(d,{label:n(r)("chart.table_grand_total_label"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(k,{effect:a.themes,placeholder:n(r)("chart.table_grand_total_label"),size:"small",maxlength:"20",modelValue:t.tableTotalForm.col.label,"onUpdate:modelValue":e[34]||(e[34]=l=>t.tableTotalForm.col.label=l),clearable:"",onBlur:e[35]||(e[35]=l=>w("col.label"))},null,8,["effect","placeholder","modelValue"])]),_:1},8,["label","class"]),o(d,{label:n(r)("chart.aggregation"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(h,{span:11},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.colTotalItem.dataeaseName,"onUpdate:modelValue":e[36]||(e[36]=l=>t.colTotalItem.dataeaseName=l),placeholder:n(r)("chart.aggregation"),onChange:e[37]||(e[37]=l=>B(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg))},{default:m(()=>[(u(!0),y(C,null,I(a.chart.yAxis,l=>(u(),v(F,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1}),o(h,{span:t.colTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.colTotalItem.aggregation,"onUpdate:modelValue":e[38]||(e[38]=l=>t.colTotalItem.aggregation=l),placeholder:n(r)("chart.aggregation"),onChange:e[39]||(e[39]=l=>L(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg,"col.calcTotals.cfg"))},{default:m(()=>[(u(),y(C,null,I(G,l=>o(F,{key:l.value,label:l.name,value:l.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["span"]),t.colTotalItem.aggregation==="CUSTOM"?(u(),v(h,{key:0,span:2,offset:1},{default:m(()=>[o($,null,{default:m(()=>[o(D,{onClick:e[40]||(e[40]=l=>R(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg,"col.calcTotals.cfg"))})]),_:1})]),_:1})):N("",!0)]),_:1},8,["label","class"]),ae.value?(u(),v(d,{key:0,class:c(["form-item","form-item-"+a.themes]),label:n(r)("chart.table_field_total_label")},{default:m(()=>[o(k,{effect:a.themes,placeholder:n(r)("chart.table_field_total_label"),size:"small",maxlength:"20",modelValue:t.colTotalItem.label,"onUpdate:modelValue":e[41]||(e[41]=l=>t.colTotalItem.label=l),clearable:"",onChange:e[42]||(e[42]=l=>L(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg,"col.calcTotals.cfg"))},null,8,["effect","placeholder","modelValue"])]),_:1},8,["label","class"])):N("",!0),a.chart.type==="table-pivot"?(u(),v(d,{key:1,label:n(r)("chart.total_sort"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(p,{effect:a.themes,modelValue:t.tableTotalForm.col.totalSort,"onUpdate:modelValue":e[43]||(e[43]=l=>t.tableTotalForm.col.totalSort=l),onChange:e[44]||(e[44]=l=>w("col"))},{default:m(()=>[o(V,{effect:a.themes,label:"none"},{default:m(()=>[g(T(n(r)("chart.total_sort_none")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:"asc"},{default:m(()=>[g(T(n(r)("chart.total_sort_asc")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:"desc"},{default:m(()=>[g(T(n(r)("chart.total_sort_desc")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"])):N("",!0),U(o(d,{label:n(r)("chart.total_sort_field"),class:"form-item"},{default:m(()=>[o(b,{effect:a.themes,modelValue:t.tableTotalForm.col.totalSortField,"onUpdate:modelValue":e[45]||(e[45]=l=>t.tableTotalForm.col.totalSortField=l),class:"form-item-select",placeholder:n(r)("chart.total_sort_field"),onChange:e[46]||(e[46]=l=>w("col"))},{default:m(()=>[(u(!0),y(C,null,I(a.chart.yAxis,l=>(u(),v(F,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["label"]),[[E,a.chart.type==="table-pivot"&&((M=t.tableTotalForm.col)==null?void 0:M.totalSort)!=="none"]])],512),[[E,A("col")&&t.tableTotalForm.col.showGrandTotals]]),U(o(d,{label:n(r)("chart.sub_total_show"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(i,{effect:a.themes,modelValue:t.tableTotalForm.col.showSubTotals,"onUpdate:modelValue":e[47]||(e[47]=l=>t.tableTotalForm.col.showSubTotals=l),disabled:a.chart.xAxisExt.length<2,onChange:e[48]||(e[48]=l=>w("col"))},{default:m(()=>[g(T(n(r)("chart.show")),1)]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["label","class"]),[[E,A("col")]]),U(O("div",null,[o(d,{label:n(r)("chart.total_position"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>{var l;return[o(p,{effect:a.themes,modelValue:t.tableTotalForm.col.reverseSubLayout,"onUpdate:modelValue":e[49]||(e[49]=S=>t.tableTotalForm.col.reverseSubLayout=S),disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,onChange:e[50]||(e[50]=S=>w("col"))},{default:m(()=>[o(V,{effect:a.themes,label:!0},{default:m(()=>[g(T(n(r)("chart.total_pos_left")),1)]),_:1},8,["effect"]),o(V,{effect:a.themes,label:!1},{default:m(()=>[g(T(n(r)("chart.total_pos_right")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue","disabled"])]}),_:1},8,["label","class"]),o(d,{label:n(r)("chart.total_label"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>{var l;return[o(k,{effect:a.themes,disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,placeholder:n(r)("chart.total_label"),modelValue:t.tableTotalForm.col.subLabel,"onUpdate:modelValue":e[51]||(e[51]=S=>t.tableTotalForm.col.subLabel=S),size:"small",maxlength:"20",clearable:"",onChange:e[52]||(e[52]=S=>w("col.subLabel"))},null,8,["effect","disabled","placeholder","modelValue"])]}),_:1},8,["label","class"]),o(d,{label:n(r)("chart.aggregation"),class:c(["form-item","form-item-"+a.themes])},{default:m(()=>[o(h,{span:11},{default:m(()=>{var l;return[o(b,{effect:a.themes,modelValue:t.colSubTotalItem.dataeaseName,"onUpdate:modelValue":e[53]||(e[53]=S=>t.colSubTotalItem.dataeaseName=S),disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,placeholder:n(r)("chart.aggregation"),onChange:e[54]||(e[54]=S=>B(t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg))},{default:m(()=>[(u(!0),y(C,null,I(a.chart.yAxis,S=>(u(),v(F,{key:S.dataeaseName,label:S.name,value:S.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","disabled","placeholder"])]}),_:1}),o(h,{span:t.colSubTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:m(()=>{var l;return[o(b,{effect:a.themes,modelValue:t.colSubTotalItem.aggregation,"onUpdate:modelValue":e[55]||(e[55]=S=>t.colSubTotalItem.aggregation=S),disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,placeholder:n(r)("chart.aggregation"),onChange:e[56]||(e[56]=S=>L(t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg,"col.calcSubTotals.cfg"))},{default:m(()=>[(u(),y(C,null,I(G,S=>o(F,{key:S.value,label:S.name,value:S.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","disabled","placeholder"])]}),_:1},8,["span"]),t.colSubTotalItem.aggregation==="CUSTOM"?(u(),v(h,{key:0,span:2,offset:1},{default:m(()=>[o($,null,{default:m(()=>[o(D,{onClick:e[57]||(e[57]=l=>R(t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg,"col.calcSubTotals.cfg"))})]),_:1})]),_:1})):N("",!0)]),_:1},8,["label","class"])],512),[[E,A("col")&&t.tableTotalForm.col.showSubTotals]])]}),_:1},8,["model"]),o(ce,{modelValue:P.value,"onUpdate:modelValue":e[60]||(e[60]=M=>P.value=M),width:"1000px",title:"自定义聚合公式","close-on-click-modal":!1},{footer:m(()=>[o(W,{secondary:"",onClick:e[58]||(e[58]=M=>Q())},{default:m(()=>[g(T(n(r)("dataset.cancel")),1)]),_:1}),o(W,{type:"primary",onClick:e[59]||(e[59]=M=>de())},{default:m(()=>[g(T(n(r)("dataset.confirm")),1)]),_:1})]),default:m(()=>[o(Le,{ref_key:"calcEdit",ref:q},null,512)]),_:1},8,["modelValue"])],64)}}});const fl=Me(Be,[["__scopeId","data-v-70f2bbe4"]]);export{fl as default};
