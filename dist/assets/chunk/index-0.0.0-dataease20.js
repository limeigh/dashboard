import{d as ae,r as be,X as ve,y as V,x as Ne,h as E,w as he,o as Ve,Y as we,f as b,O as M,R as X,u as n,T as q,S as $,a9 as S,Z as C,j as K,i as L,g as x,_ as J,at as ye,a8 as O,C as ge}from"./vue-0.0.0-dataease.js";import{ah as re,al as A,a3 as N,a5 as Ie,a2 as Ee,a4 as Se,j as Q,G as Ce,ao as Le}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{l as xe,a2 as _e,B as f,a3 as Ae,E as Pe,i as Fe,U as _,a8 as ee,aL as Be,ap as ke,_ as De,t as Te,a7 as te,w as ze}from"./index-0.0.0-dataease.js";import{d as w}from"./lodash-0.0.0-dataease.js";import{v as ne}from"./index-0.0.0-dataease18.js";const Me=xe({id:{type:String,default:void 0},effect:{type:String,default:"light"},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:_e,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:l=>l===null||f(l)||["min","max"].includes(l),default:null},name:String,placeholder:String,precision:{type:Number,validator:l=>l>=0&&l===Number.parseInt(`${l}`,10)},validateEvent:{type:Boolean,default:!0},...Ae(["ariaLabel"])}),$e={[re]:(l,P)=>P!==l,blur:l=>l instanceof FocusEvent,focus:l=>l instanceof FocusEvent,[A]:l=>f(l)||w(l),[N]:l=>f(l)||w(l)},Ke=ae({name:"ElInputNumber"}),Oe=ae({...Ke,props:Me,emits:$e,setup(l,{expose:P,emit:c}){const r=l,{t:U}=Pe(),d=Fe("input-number"),p=be(),s=ve({currentValue:r.modelValue,userInput:null}),{formItem:v}=Ie(),j=V(()=>f(r.modelValue)&&r.modelValue<=r.min),G=V(()=>f(r.modelValue)&&r.modelValue>=r.max),R=Ne("$custom-style-filter",{}),le=E("svg",{width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},[E("path",{d:"M5.99952 7.93206L10.0654 3.86619C10.163 3.76856 10.3213 3.76856 10.4189 3.86619L10.7725 4.21975C10.8701 4.31738 10.8701 4.47567 10.7725 4.5733L6.35307 8.99272C6.15781 9.18798 5.84122 9.18798 5.64596 8.99272L1.22654 4.5733C1.12891 4.47567 1.12891 4.31738 1.22654 4.21975L1.5801 3.86619C1.67773 3.76856 1.83602 3.76856 1.93365 3.86619L5.99952 7.93206Z"})]),se=E("svg",{width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},[E("path",{d:"M6.00048 4.06794L1.93462 8.13381C1.83699 8.23144 1.6787 8.23144 1.58107 8.13381L1.22751 7.78025C1.12988 7.68262 1.12988 7.52433 1.22751 7.4267L5.64693 3.00728C5.84219 2.81202 6.15878 2.81202 6.35404 3.00728L10.7735 7.4267C10.8711 7.52433 10.8711 7.68262 10.7735 7.78025L10.4199 8.13381C10.3223 8.23144 10.164 8.23144 10.0663 8.13381L6.00048 4.06794Z"})]),ue=V(()=>{const e=Z(r.step);return _(r.precision)?Math.max(Z(r.modelValue),e):(e>r.precision,r.precision)}),F=V(()=>r.controls&&r.controlsPosition==="right"),Y=Ee(),h=Se(),B=V(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(w(e))return"";if(f(e)){if(Number.isNaN(e))return"";_(r.precision)||(e=e.toFixed(r.precision))}return e}),k=(e,t)=>{if(_(t)&&(t=ue.value),t===0)return Math.round(e);let a=String(e);const u=a.indexOf(".");if(u===-1||!a.replace(".","").split("")[u+t])return e;const g=a.length;return a.charAt(g-1)==="5"&&(a=`${a.slice(0,Math.max(0,g-1))}6`),Number.parseFloat(Number(a).toFixed(t))},Z=e=>{if(w(e))return 0;const t=e.toString(),a=t.indexOf(".");let u=0;return a!==-1&&(u=t.length-a-1),u},W=(e,t=1)=>f(e)?k(e+r.step*t):s.currentValue,D=()=>{if(r.readonly||h.value||G.value)return;const e=Number(B.value)||0,t=W(e);y(t),c(A,s.currentValue),z()},T=()=>{if(r.readonly||h.value||j.value)return;const e=Number(B.value)||0,t=W(e,-1);y(t),c(A,s.currentValue),z()},H=(e,t)=>{const{max:a,min:u,step:i,precision:m,stepStrictly:g,valueOnClear:I}=r;a<u&&Te("InputNumber","min should not be greater than max.");let o=Number(e);if(w(e)||Number.isNaN(o))return null;if(e===""){if(I===null)return null;o=ge(I)?{min:u,max:a}[I]:I}return g&&(o=k(Math.round(o/i)*i,m),o!==e&&t&&c(N,o)),_(m)||(o=k(o,m)),(o>a||o<u)&&(o=o>a?a:u,t&&c(N,o)),o},y=(e,t=!0)=>{var a;const u=s.currentValue,i=H(e);if(!t){c(N,i);return}u===i&&e||(s.userInput=null,c(N,i),u!==i&&c(re,i,u),r.validateEvent&&((a=v==null?void 0:v.validate)==null||a.call(v,"change").catch(m=>te())),s.currentValue=i)},ie=e=>{s.userInput=e;const t=e===""?null:Number(e);c(A,t),y(t,!1)},oe=e=>{const t=e!==""?Number(e):"";(f(t)&&!Number.isNaN(t)||e==="")&&y(t),z(),s.userInput=null},ce=()=>{var e,t;(t=(e=p.value)==null?void 0:e.focus)==null||t.call(e)},de=()=>{var e,t;(t=(e=p.value)==null?void 0:e.blur)==null||t.call(e)},me=e=>{c("focus",e)},fe=e=>{var t,a;s.userInput=null,Le()&&s.currentValue===null&&((t=p.value)!=null&&t.input)&&(p.value.input.value=""),c("blur",e),r.validateEvent&&((a=v==null?void 0:v.validate)==null||a.call(v,"blur").catch(u=>te()))},z=()=>{s.currentValue!==r.modelValue&&(s.currentValue=r.modelValue)},pe=e=>{document.activeElement===e.target&&e.preventDefault()};return he(()=>r.modelValue,(e,t)=>{const a=H(e,!0);s.userInput===null&&a!==t&&(s.currentValue=a)},{immediate:!0}),Ve(()=>{var e;const{min:t,max:a,modelValue:u}=r,i=(e=p.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(a)?i.setAttribute("aria-valuemax",String(a)):i.removeAttribute("aria-valuemax"),Number.isFinite(t)?i.setAttribute("aria-valuemin",String(t)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),i.setAttribute("aria-disabled",String(h.value)),!f(u)&&u!=null){let m=Number(u);Number.isNaN(m)&&(m=null),c(N,m)}i.addEventListener("wheel",pe,{passive:!1})}),we(()=>{var e,t;const a=(e=p.value)==null?void 0:e.input;a==null||a.setAttribute("aria-valuenow",`${(t=s.currentValue)!=null?t:""}`)}),P({focus:ce,blur:de}),(e,t)=>(b(),M("div",{class:$([n(d).b(),n(d).m(n(Y)),n(d).m(e.effect),n(d).is("disabled",n(h)),n(d).is("without-controls",!e.controls),n(d).is("controls-right",n(F))]),onDragstart:O(()=>{},["prevent"])},[e.controls?X((b(),M("span",{key:0,role:"button",style:q(n(ee)(n(R),["border","text"])),"aria-label":n(U)("el.inputNumber.decrease"),class:$([n(d).e("decrease"),n(d).is("disabled",n(j))]),onKeydown:S(T,["enter"])},[C(e.$slots,"decrease-icon",{},()=>[K(n(Q),{size:"12"},{default:L(()=>[n(F)?(b(),x(n(le),{key:0})):(b(),x(n(Be),{key:1}))]),_:1})])],46,["aria-label","onKeydown"])),[[n(ne),T]]):J("v-if",!0),e.controls?X((b(),M("span",{key:1,role:"button",style:q(n(ee)(n(R),["border","text"])),"aria-label":n(U)("el.inputNumber.increase"),class:$([n(d).e("increase"),n(d).is("disabled",n(G))]),onKeydown:S(D,["enter"])},[C(e.$slots,"increase-icon",{},()=>[K(n(Q),{size:"12"},{default:L(()=>[n(F)?(b(),x(n(se),{key:0})):(b(),x(n(ke),{key:1}))]),_:1})])],46,["aria-label","onKeydown"])),[[n(ne),D]]):J("v-if",!0),K(n(Ce),{id:e.id,ref_key:"input",ref:p,type:"number",step:e.step,"model-value":n(B),placeholder:e.placeholder,readonly:e.readonly,disabled:n(h),size:n(Y),max:e.max,min:e.min,name:e.name,effect:e.effect,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[S(O(D,["prevent"]),["up"]),S(O(T,["prevent"]),["down"])],onBlur:fe,onFocus:me,onInput:ie,onChange:oe},ye({_:2},[e.$slots.prefix?{name:"prefix",fn:L(()=>[C(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:L(()=>[C(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","effect","aria-label","onKeydown"])],42,["onDragstart"]))}});var Ue=De(Oe,[["__file","input-number.vue"]]);const We=ze(Ue);export{We as E};
