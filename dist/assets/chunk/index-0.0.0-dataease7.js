import{E as W,e as L,b as Lt,m as Ba,i as z,q as Xe,f as Aa,r as Fa,G as Oa,H as Wa,I as ja,t as Za,h as qa,g as Ya,L as Ja,R as Ga,S as Ka,W as Xa,C as Qa,p as eo,T as to,U as ao,V as oo,M as lo,Z as so,v as no}from"./element-plus-secondary-0.0.0-dataease.js";import{o as i,c as g,aU as io,a as p,d as ro,l as oe,k as ue,r as C,x as Le,w as co,b as uo,aq as po,$ as H,W as t,Z as Qe,u as e,U as a,Y as c,R as m,S as D,a8 as et,z as G,_,T as v,V as ye,X as tt,a0 as be,n as Vt,h as Ce,s as mo}from"./@vue-0.0.0-dataease.js";import{i as It}from"./icon_down_outlined-1-0.0.0-dataease.js";import{i as $t}from"./icon_down_outlined-0.0.0-dataease.js";import{i as fo}from"./icon_copy_filled-0.0.0-dataease.js";import{i as _o}from"./icon_dataset-0.0.0-dataease.js";import{i as go}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as vo,_ as ho,t as yo}from"./index.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import{i as bo}from"./icon_rename_outlined-0.0.0-dataease.js";import{d as Mt}from"./dv-folder-0.0.0-dataease.js";import{d as Co,i as wo}from"./icon_file-add_outlined-0.0.0-dataease.js";import{i as zt}from"./icon_search-outline_outlined-0.0.0-dataease.js";import{d as To,a as xo}from"./dv-sort-desc-0.0.0-dataease.js";import{i as Ht}from"./icon_add_outlined-0.0.0-dataease.js";import{i as ko}from"./icon_info_outlined-0.0.0-dataease.js";import{i as at}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as Rt}from"./icon_replace_outlined-0.0.0-dataease.js";import{i as So}from"./icon-maybe_outlined-0.0.0-dataease.js";import{d as Do}from"./option-0.0.0-dataease.js";import{G as Pt}from"./GridTable-0.0.0-dataease.js";import Ut from"./DeResourceArrow-0.0.0-dataease.js";import{_ as Bt}from"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import{f as No,e as w,i as At}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{f as le}from"./attr-0.0.0-dataease23.js";import{a as Eo,e as Lo,m as Vo,g as se,u as Io}from"./index-0.0.0-dataease.js";import{j as $o,k as Mo,m as zo,n as Ho,o as Ro,p as Po,q as Ft,r as ot,t as Uo,w as lt,x as Ot,y as Bo,e as Ao,z as Fo,A as Oo,B as Wo,C as jo,D as Zo}from"./datasource-0.0.0-dataease.js";import qo from"./CreatDsGroup-0.0.0-dataease2.js";import{u as Yo,b as Jo}from"./vue-router_2-0.0.0-dataease.js";import Go from"./DatasetDetail-0.0.0-dataease.js";import{t as we}from"./util-0.0.0-dataease.js";import{E as st}from"./EmptyBackground-0.0.0-dataease.js";import{d as Wt}from"./dayjs-0.0.0-dataease.js";import{useAppStoreWithOut as Ko}from"./app-0.0.0-dataease.js";import{_ as Xo}from"./index.vue_vue_type_style_index_0_lang-0.0.0-dataease3.js";import jt from"./ExcelInfoBase-0.0.0-dataease.js";import Qo from"./SheetTabs-0.0.0-dataease.js";import{_ as S}from"./BaseInfoItem.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import Ve from"./BaseInfoContent-0.0.0-dataease.js";import{u as el}from"./useMoveLine-0.0.0-dataease.js";import{i as tl}from"./interactive-0.0.0-dataease.js";import{t as Zt}from"./treeSortUtils-0.0.0-dataease.js";import{i as qt}from"./field-list-0.0.0-dataease.js";import{i as Yt}from"./datasource-list-0.0.0-dataease.js";import{b as al}from"./login-0.0.0-dataease.js";import{s as Y}from"./encryption-0.0.0-dataease.js";import{h as B,d as ol}from"./lodash-es-0.0.0-dataease.js";import{_ as ll}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./icon_left_outlined-0.0.0-dataease.js";import"./icon_right_outlined-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./icon_more_outlined-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./icon_close_outlined-0.0.0-dataease.js";import"./DsTypeList-0.0.0-dataease.js";import"./EditorDetail-0.0.0-dataease.js";import"./icon_calendar_outlined-0.0.0-dataease.js";import"./de-copy-0.0.0-dataease.js";import"./de-delete-0.0.0-dataease.js";import"./icon_warning_filled-0.0.0-dataease.js";import"./ApiHttpRequestDraw.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./icon_expand-right_filled-0.0.0-dataease.js";import"./ApiHttpRequestForm-0.0.0-dataease.js";import"./ApiKeyValue-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./ApiTestModel-0.0.0-dataease.js";import"./vuedraggable-0.0.0-dataease.js";import"./ApiBody-0.0.0-dataease.js";import"./ApiVariable-0.0.0-dataease.js";import"./CodeEdit.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./vue3-ace-editor-0.0.0-dataease.js";import"./ace-builds-0.0.0-dataease.js";import"./resize-observer-polyfill-0.0.0-dataease.js";import"./Pagination-0.0.0-dataease.js";import"./ApiAuthConfig.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";import"./Cron.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./ExcelDetail.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./icon_upload_outlined-0.0.0-dataease.js";import"./ExcelInfo-0.0.0-dataease.js";import"./icon_excel-0.0.0-dataease.js";import"./vue-uuid-0.0.0-dataease.js";import"./uuid-0.0.0-dataease.js";import"./FinishPage-0.0.0-dataease.js";import"./ExcelRemoteDetail-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./jsencrypt-0.0.0-dataease.js";const sl={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function nl(A,N){return i(),g("svg",sl,[...N[0]||(N[0]=[io('<g clip-path="url(#clip0_4327_361639)"><path d="M6 11.5C9.03757 11.5 11.5 9.03757 11.5 6C11.5 2.96243 9.03757 0.5 6 0.5C2.96243 0.5 0.5 2.96243 0.5 6C0.5 9.03757 2.96243 11.5 6 11.5Z" fill="#F54A45"></path><path d="M5.75 3.5C5.61193 3.5 5.5 3.61193 5.5 3.75V6.75C5.5 6.88807 5.61193 7 5.75 7H6.25C6.38807 7 6.5 6.88807 6.5 6.75V3.75C6.5 3.61193 6.38807 3.5 6.25 3.5H5.75Z" fill="white"></path><path d="M5.75 7.5C5.61193 7.5 5.5 7.61193 5.5 7.75V8.25C5.5 8.38807 5.61193 8.5 5.75 8.5H6.25C6.38807 8.5 6.5 8.38807 6.5 8.25V7.75C6.5 7.61193 6.38807 7.5 6.25 7.5H5.75Z" fill="white"></path></g><defs><clipPath id="clip0_4327_361639"><rect width="12" height="12" fill="white"></rect></clipPath></defs>',2)])])}const il={render:nl},rl={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function cl(A,N){return i(),g("svg",rl,[...N[0]||(N[0]=[p("g",{id:"icon_dataset_outlined"},[p("path",{id:"Union",d:"M0.833344 6.36987C0.833344 6.04308 1.02435 5.74646 1.32184 5.61123L9.65517 1.82335C9.87428 1.72376 10.1257 1.72376 10.3448 1.82335L18.6782 5.61123C18.9757 5.74646 19.1667 6.04308 19.1667 6.36987V14.4849C19.1667 14.8006 18.9883 15.0891 18.706 15.2303L10.3727 19.3969C10.1381 19.5142 9.86194 19.5142 9.62733 19.3969L1.294 15.2303C1.01168 15.0891 0.833344 14.8006 0.833344 14.4849V6.36987ZM16.0149 6.2314L10 3.49737L3.95267 6.24616L9.96664 8.83681L16.0149 6.2314ZM10.8333 10.2782V17.3032L17.5 13.9699V7.40638L10.8333 10.2782ZM2.50001 7.43512V13.9699L9.16668 17.3032V10.3069L2.50001 7.43512Z",fill:"currentColor"})],-1)])])}const Jt={render:cl},dl={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ul(A,N){return i(),g("svg",dl,[...N[0]||(N[0]=[p("g",{id:"icon_new-item_outlined"},[p("path",{id:"Vector",d:"M12.2493 1.16602C12.4041 1.16602 12.5524 1.22747 12.6618 1.33687C12.7712 1.44627 12.8327 1.59464 12.8327 1.74935V12.2493C12.8327 12.4041 12.7712 12.5524 12.6618 12.6618C12.5524 12.7712 12.4041 12.8327 12.2493 12.8327H1.74935C1.59464 12.8327 1.44627 12.7712 1.33687 12.6618C1.22747 12.5524 1.16602 12.4041 1.16602 12.2493V1.74935C1.16602 1.59464 1.22747 1.44627 1.33687 1.33687C1.44627 1.22747 1.59464 1.16602 1.74935 1.16602H12.2493ZM11.3743 2.33268H2.62435C2.55291 2.33269 2.48396 2.35892 2.43057 2.40639C2.37719 2.45386 2.34308 2.51928 2.33472 2.59022L2.33268 2.62435V11.3743C2.33269 11.4458 2.35892 11.5147 2.40639 11.5681C2.45386 11.6215 2.51928 11.6556 2.59022 11.664L2.62435 11.666H11.3743C11.4458 11.666 11.5147 11.6398 11.5681 11.5923C11.6215 11.5448 11.6556 11.4794 11.664 11.4085L11.666 11.3743V2.62435C11.666 2.54699 11.6353 2.47281 11.5806 2.41811C11.5259 2.36341 11.4517 2.33268 11.3743 2.33268ZM7.29102 4.08268C7.32932 4.08268 7.36724 4.09023 7.40263 4.10488C7.43802 4.11954 7.47017 4.14103 7.49725 4.16811C7.52434 4.19519 7.54582 4.22735 7.56048 4.26273C7.57514 4.29812 7.58268 4.33605 7.58268 4.37435V6.41602H9.62435C9.66265 6.41602 9.70058 6.42356 9.73597 6.43822C9.77135 6.45288 9.8035 6.47436 9.83059 6.50144C9.85767 6.52853 9.87916 6.56068 9.89381 6.59607C9.90847 6.63145 9.91602 6.66938 9.91602 6.70768V7.29102C9.91602 7.32932 9.90847 7.36725 9.89381 7.40263C9.87916 7.43802 9.85767 7.47017 9.83059 7.49726C9.8035 7.52434 9.77135 7.54582 9.73597 7.56048C9.70058 7.57514 9.66265 7.58268 9.62435 7.58268H7.58268V9.62435C7.58268 9.66265 7.57514 9.70058 7.56048 9.73597C7.54582 9.77135 7.52434 9.80351 7.49725 9.83059C7.47017 9.85767 7.43802 9.87916 7.40263 9.89381C7.36724 9.90847 7.32932 9.91602 7.29102 9.91602H6.70768C6.66938 9.91602 6.63145 9.90847 6.59607 9.89381C6.56068 9.87916 6.52853 9.85767 6.50144 9.83059C6.47436 9.80351 6.45288 9.77135 6.43822 9.73597C6.42356 9.70058 6.41602 9.66265 6.41602 9.62435V7.58268H4.37435C4.33605 7.58268 4.29812 7.57514 4.26273 7.56048C4.22735 7.54582 4.19519 7.52434 4.16811 7.49726C4.14103 7.47017 4.11954 7.43802 4.10488 7.40263C4.09023 7.36725 4.08268 7.32932 4.08268 7.29102V6.70768C4.08268 6.66938 4.09023 6.63145 4.10488 6.59607C4.11954 6.56068 4.14103 6.52853 4.16811 6.50144C4.19519 6.47436 4.22735 6.45288 4.26273 6.43822C4.29812 6.42356 4.33605 6.41602 4.37435 6.41602H6.41602V4.37435C6.41602 4.33605 6.42356 4.29812 6.43822 4.26273C6.45288 4.22735 6.47436 4.19519 6.50144 4.16811C6.52853 4.14103 6.56068 4.11954 6.59607 4.10488C6.63145 4.09023 6.66938 4.08268 6.70768 4.08268H7.29102Z",fill:"white"})],-1)])])}const pl={render:ul},ml={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function fl(A,N){return i(),g("svg",ml,[...N[0]||(N[0]=[p("path",{d:"M5 3V21H19V3H5ZM4 1H20C20.5523 1 21 1.46904 21 2.04762V21.9524C21 22.531 20.5523 23 20 23H4C3.44772 23 3 22.531 3 21.9524V2.04762C3 1.46904 3.44772 1 4 1ZM7.5 7H11.5C11.7761 7 12 7.22386 12 7.5V8.5C12 8.77614 11.7761 9 11.5 9H7.5C7.22386 9 7 8.77614 7 8.5V7.5C7 7.22386 7.22386 7 7.5 7ZM7.5 11H16.5C16.7761 11 17 11.2239 17 11.5V12.5C17 12.7761 16.7761 13 16.5 13H7.5C7.22386 13 7 12.7761 7 12.5V11.5C7 11.2239 7.22386 11 7.5 11ZM7.5 15H16.5C16.7761 15 17 15.2239 17 15.5V16.5C17 16.7761 16.7761 17 16.5 17H7.5C7.22386 17 7 16.7761 7 16.5V15.5C7 15.2239 7.22386 15 7.5 15Z"},null,-1)])])}const Gt={render:fl},_l={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function gl(A,N){return i(),g("svg",_l,[...N[0]||(N[0]=[p("g",{id:"icon_succeed_filled","clip-path":"url(#clip0_3515_155051)"},[p("path",{id:"Union",d:"M0.666016 7.99935C0.666016 12.0493 3.94935 15.3327 7.99935 15.3327C12.0494 15.3327 15.3327 12.0493 15.3327 7.99935C15.3327 3.94935 12.0494 0.666016 7.99935 0.666016C3.94935 0.666016 0.666016 3.94935 0.666016 7.99935ZM10.7617 5.9837C10.8242 5.92121 10.909 5.88611 10.9974 5.88611C11.0857 5.88611 11.1705 5.92121 11.233 5.9837L11.7044 6.45537C11.7668 6.51788 11.8019 6.60265 11.8019 6.69104C11.8019 6.77942 11.7668 6.86419 11.7044 6.9267L7.46169 11.1694C7.39918 11.2319 7.31441 11.267 7.22602 11.267C7.13763 11.267 7.05286 11.2319 6.99035 11.1694L4.55035 8.72903C4.48786 8.66652 4.45276 8.58176 4.45276 8.49337C4.45276 8.40498 4.48786 8.32021 4.55035 8.2577L5.02135 7.78604C5.08386 7.72354 5.16863 7.68844 5.25702 7.68844C5.34541 7.68844 5.43018 7.72354 5.49269 7.78604L7.22602 9.51937L10.7617 5.9837Z",fill:"#34C724"})],-1),p("defs",null,[p("clipPath",{id:"clip0_3515_155051"},[p("rect",{width:"16",height:"16",fill:"white"})])],-1)])])}const Kt={render:gl},vl={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function hl(A,N){return i(),g("svg",vl,[...N[0]||(N[0]=[p("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92506 5.925 1.00006 12 1.00006C18.075 1.00006 23 5.92506 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z"},null,-1),p("path",{d:"M12.0002 10.586L9.02524 7.61099C8.93147 7.51726 8.80432 7.4646 8.67174 7.4646C8.53916 7.4646 8.412 7.51726 8.31824 7.61099L7.61124 8.31799C7.5175 8.41176 7.46484 8.53891 7.46484 8.67149C7.46484 8.80407 7.5175 8.93123 7.61124 9.02499L10.5862 12L7.61124 14.975C7.5175 15.0688 7.46484 15.1959 7.46484 15.3285C7.46484 15.4611 7.5175 15.5882 7.61124 15.682L8.31824 16.389C8.412 16.4827 8.53916 16.5354 8.67174 16.5354C8.80432 16.5354 8.93147 16.4827 9.02524 16.389L12.0002 13.414L14.9752 16.389C15.069 16.4827 15.1962 16.5354 15.3287 16.5354C15.4613 16.5354 15.5885 16.4827 15.6822 16.389L16.3892 15.682C16.483 15.5882 16.5356 15.4611 16.5356 15.3285C16.5356 15.1959 16.483 15.0688 16.3892 14.975L13.4142 12L16.3892 9.02499C16.483 8.93123 16.5356 8.80407 16.5356 8.67149C16.5356 8.53891 16.483 8.41176 16.3892 8.31799L15.6822 7.61099C15.5885 7.51726 15.4613 7.4646 15.3287 7.4646C15.1962 7.4646 15.069 7.51726 14.9752 7.61099L12.0002 10.586Z",fill:"white"},null,-1)])])}const Xt={render:hl},yl={class:"datasource-manage"},bl={class:"resource-tree"},Cl={class:"tree-header"},wl={class:"icon-methods"},Tl={class:"title"},xl={key:0,class:"flex-align-center"},kl={key:0,class:"ed-dropdown-menu__item--divided"},Sl={class:"custom-tree-node",style:{position:"relative"}},Dl=["title"],Nl=["title"],El={key:3,class:"icon-more"},Ll={class:"datasource-info"},Vl={class:"info-method"},Il=["title"],$l={class:"create-user"},Ml={class:"right-btn flex-align-center"},zl={class:"tab-border"},Hl={key:0,class:"datasource-table"},Rl={class:"search-operate"},Pl={class:"info-table"},Ul={class:"flex-align-center"},Bl={key:0,class:"api-card-content"},Al={class:"name"},Fl=["title"],Ol={key:0,class:"de-tag error-color"},Wl={key:1,class:"de-tag success-color"},jl={class:"req-title"},Zl={class:"req-value"},ql={key:0,class:"excel-table"},Yl={class:"sheet-table-content"},Jl={class:"table-name"},Gl={class:"table-value"},Kl={class:"table-name"},Xl={class:"table-value"},Ql={class:"flex-align-center icon"},es={class:"flex-align-center"},ts={class:"flex-align-center"},as={class:"dialog-footer"};function os(A){return typeof A=="function"||Object.prototype.toString.call(A)==="[object Object]"&&!mo(A)}const ls=ro({__name:"index",setup(A){const N=Yo(),Qt=tl(),{wsCache:K}=Eo(),{t:l}=No(),Te=Jo(),xe=Ko(),h=oe({datasourceTree:[],dsTableData:[],paginationConfig:{currentPage:1,pageSize:10,total:0},curSortType:"time_desc",filterTable:[]}),X=oe({paginationConfig:{currentPage:1,pageSize:10,total:0}}),Ie=ue(()=>xe.getIsDataEaseBi),nt=ue(()=>xe.getIsIframe),$e=Lo(),it=o=>{if(Ie.value){$e.clearState(),$e.setDatasourceId(n.id),$e.setTableName(o),Io().emitter.emit("changeCurrentComponent","DatasetEditor");return}K.set(se("ds-info-id"),n.id),Te.push({path:"/dataset-form",query:{datasourceId:n.id,tableName:o}})},{width:Me,node:ea}=el("DATASOURCE"),ze=oe({tableName:"",name:""}),He=C(!1),pe=C(""),me=C(""),Re=C(!1),ta=C([]),ke=C(!1),Se=C(!0),ne=C(),ie=C(""),rt=[{label:l("chart.move_to"),svgName:vo,command:"move"},{label:l("data_set.rename"),svgName:bo,command:"rename"},{label:l("common.delete"),divided:!0,svgName:go,command:"delete"}],ct=Do.reduce((o,s)=>(o[s.type]=s.name,o),{}),aa=ue(()=>[{label:l("datasource.create"),svgName:_o,command:"datasource"},{label:l("deDataset.new_folder"),divided:!0,svgName:Mt,command:"folder"}]),Pe=C(!1),oa=o=>{Object.assign(ze,o),Re.value=!0,Pe.value=!0,$o({tableName:o.tableName,datasourceId:n.id,isCross:!1}).then(s=>{h.dsTableData=s.data}).finally(()=>{Pe.value=!1})},fe=Le([]),la=o=>{h.datasourceTree=Zt(fe.value,o),h.curSortType=o,K.set(se("TreeSort-datasource"),h.curSortType)},dt=o=>{h.datasourceTree=Zt(fe.value,o),h.curSortType=o},sa=o=>{h.paginationConfig.currentPage=1,h.paginationConfig.pageSize=o},Ue=o=>{h.paginationConfig.currentPage=o},na=o=>{X.paginationConfig.currentPage=1,X.paginationConfig.pageSize=o,Je()},ia=o=>{X.paginationConfig.currentPage=o,Je()};let ut=0;const ra=o=>{ut=o.scrollTop},pt=C(),ca=o=>o.map(s=>({key:s.originName,deType:s.deType,dataKey:s.originName,title:s.name,width:150,headerCellRenderer:({column:r})=>{let u;return t("div",{class:"flex-align-center"},[t(L,{style:{marginRight:"6px"}},{default:()=>[t(w,{className:`field-icon-${le[r.deType]}`},os(u=Ce(qt[le[r.deType]],{class:`svg-icon field-icon-${le[r.deType]}`}))?u:{default:()=>[u]})]}),t("span",{class:"ellipsis",title:r.title,style:{width:"120px"}},[r.title])])}})),Be=C(!1),mt=C([]),da=o=>{Be.value=!0,Fo(o).then(s=>{var r,u;mt.value=ca(((r=s==null?void 0:s.data)==null?void 0:r.fields)||[]),bt.value=((u=s==null?void 0:s.data)==null?void 0:u.data)||[]}).finally(()=>{Be.value=!1})},ua=()=>{let o=oe(B(J));Object.assign(o,B(n)),Mo(o.id).then(s=>{if(s.data.type.startsWith("API")){let r=0;const u=JSON.parse(s.data.status);for(let f=0;f<u.length;f++){u[f].status==="Error"&&r++;for(let T=0;T<o.apiConfiguration.length;T++)n.apiConfiguration[T].name===u[T].name&&(n.apiConfiguration[T].status=u[T].status)}r===0?(_e(h.datasourceTree,o.id,Math.abs(o.extraFlag)),W.success(l("data_source.verification_successful"))):(_e(h.datasourceTree,o.id,-Math.abs(o.extraFlag)),W.error(l("data_source.verification_failed")))}else _e(h.datasourceTree,o.id,Math.abs(o.extraFlag)),W.success(l("data_source.verification_successful"))}).catch(()=>{_e(h.datasourceTree,o.id,-Math.abs(o.extraFlag))})},De=C(!1),ft=C(""),pa=o=>{const{syncRate:s,simpleCronValue:r,simpleCronType:u,startTime:f,endTime:T,cron:M}=o;let R="-",P="-";f&&(R=Wt(new Date(f)).format("YYYY-MM-DD HH:mm:ss")),T&&(P=Wt(new Date(T)).format("YYYY-MM-DD HH:mm:ss"));let E=[];switch(s){case"RIGHTNOW":E.push(l("dataset.execute_once"));break;case"CRON":E.push(`${l("dataset.cron_config")}: ${M}`),E.push(`${l("dataset.start_time")}: ${R}`),E.push(`${l("dataset.end_time")}: ${P}`);break;case"SIMPLE_CRON":const V=l(`common.${u}`);E.push(`${l("dataset.simple_cron")}: ${l("common.every")}${r}${V}${l("data_source.update_once")}`),E.push(`${l("dataset.start_time")}: ${R}`),E.push(`${l("dataset.end_time")}: ${P}`);break}return E},ma=o=>{ft.value=o,De.value=!0},j=C([]),fa=o=>{j.value=o,j.value.forEach(s=>{ct[s.type]=s.name})},_a=o=>{if((j==null?void 0:j.value.length)===0||!o.leaf)return null;const s=j.value.filter(r=>r.type===o.type);return s&&s.length>0?s[0].icon:null},ga=o=>{const s=j.value.filter(r=>r.type===o);return s&&s.length>0?s[0].icon:null},va=o=>o.leaf?Yt[o.type]:Mt,_t=o=>{ie.value=o.value,da({table:o.value,id:n.id})},Ne=Le([]),gt=()=>{Ue(1),h.filterTable=Z.value.filter(o=>o.tableName.toLowerCase().includes(pe.value.toLowerCase())),h.paginationConfig.total=h.filterTable.length},ha=ue(()=>{const{currentPage:o,pageSize:s}=h.paginationConfig;return h.filterTable.slice((o-1)*s,o*s)}),J={name:"",createBy:"",creator:"",createTime:"",description:"",id:0,size:0,nodeType:"",type:"",fileName:"",configuration:null,syncSetting:null,apiConfiguration:[],weight:0,enableDataFill:!1,extraFlag:0},n=oe(B(J)),vt=ue(()=>({creator:n.creator,createTime:we(n.createTime)})),ya=(o,s,r,u)=>{let f=ot,T=l("data_set.moved_successfully");switch(u){case"move":f=ot,T=l("data_set.moved_successfully");break;case"rename":f=Wo,T=l("data_set.rename_successful");break;default:f=Oo,T=l("data_source.create_successfully");break}f(o).then(M=>{M!==void 0&&(s(),W.success(T),ce())}).finally(()=>{r()})},Ae=C(!1),Fe=C(!1),re=C(!1),F=C(""),ce=()=>{ta.value=[],Ae.value=!0;let o=We[Number(K.get(se("TreeSort-backend")))??1].value;o=K.get(se("TreeSort-datasource"))??o;const s={busiFlag:"datasource"};Qt.setInteractive(s).then(r=>{const u=r||[];if(u.length&&u[0].id==="0"&&u[0].name==="root"){He.value=u[0].weight>=7,h.datasourceTree=u[0].children||[],fe.value=B(e(h.datasourceTree)),dt(o);return}fe.value=B(e(h.datasourceTree)),h.datasourceTree=u,dt(o)}).finally(()=>{Fe.value=!0,Ae.value=!1,Ca();const r=n.id;r&&(Object.assign(n,B(J)),ht(h.datasourceTree,r),setTimeout(()=>{me.value&&ge.value.filter(me.value),ge.value.setCurrentKey(n.id,!0)},100))})},ba=()=>{zo().then(o=>{re.value=o.data}).catch(o=>{console.warn(o==null?void 0:o.message)})},_e=(o,s,r)=>{o.some(u=>{var f;return u.id===s?(u.extraFlag=r,!0):((f=u.children)!=null&&f.length&&_e(u.children,s,r),!1)})},ht=(o,s)=>{o.some(r=>{var u;return r.id===s?(je(r),!0):((u=r.children)!=null&&u.length&&ht(r.children,s),!1)})},Oe=C(),We=[{name:l("visualization.time_asc"),value:"time_asc"},{name:l("visualization.time_desc"),value:"time_desc",divided:!0},{name:l("visualization.name_asc"),value:"name_asc"},{name:l("visualization.name_desc"),value:"name_desc"}],yt=ue(()=>We.find(o=>o.value===h.curSortType).name),Z=Le([]),bt=Le([]),je=o=>{if(!o.leaf){ge.value.setCurrentKey(null);return}let s=jo;return o.weight<7&&(s=Zo),s(o.id).then(r=>{let{name:u,createBy:f,id:T,createTime:M,creator:R,type:P,pid:E,configuration:V,syncSetting:U,apiConfigurationStr:I,paramsStr:x,fileName:b,size:k,description:Q,lastSyncTime:ee,enableDataFill:q}=r.data;V&&(V=JSON.parse(Y(V,F.value))),x&&(x=JSON.parse(Y(x,F.value))),I&&(I=JSON.parse(Y(I,F.value))),Object.assign(n,{name:u,pid:E,description:Q,fileName:b,size:k,createTime:M,creator:R,createBy:f,id:T,type:P,configuration:V,syncSetting:U,apiConfiguration:I,paramsConfiguration:x,weight:o.weight,lastSyncTime:ee,enableDataFill:q,extraFlag:o.extraFlag}),ie.value="",ve.value="config",pe.value="",Ue(1),kt(ve.value)})},Ze=o=>{ne.value.init(null,o==null?void 0:o.id,null,re.value)},qe=C(!1),ge=C(),Ee=C([]),Ye=C(!0);co(me,o=>{ge.value.filter(o)});const Ca=()=>{Ye.value=!1,Vt(()=>{Ye.value=!0,Vt(()=>{var o;(o=pt.value)==null||o.setScrollTop(ut)})})},Ct=C([]),Je=()=>{qe.value=!0,Ho(X.paginationConfig.currentPage,X.paginationConfig.pageSize,n.id).then(o=>{Ct.value=o.data.records,X.paginationConfig.total=o.data.total})},wa=o=>{Ro({name:o.name,tableName:o.deTableName,datasourceId:n.id}).then(()=>{W.success(l("datasource.req_completed"))})},Ta=()=>{Po({datasourceId:n.id}).then(()=>{W.success(l("datasource.req_completed"))})},xa=o=>{o.id&&Ee.value.push(o.id)},ka=o=>{o.id&&Ee.value.splice(Ee.value.indexOf(o.id),1)},Sa=(o,s)=>{var r;return o?(r=s.name)==null?void 0:r.toLowerCase().includes(o.toLowerCase()):!0},wt=o=>(n.type.startsWith("Excel")&&(n.editType=o),Ft(n.id).then(s=>{var te;let r=j.value.filter(O=>O.type==s.data.type),{name:u,createBy:f,id:T,createTime:M,creator:R,type:P,pid:E,configuration:V,syncSetting:U,apiConfigurationStr:I,paramsStr:x,fileName:b,size:k,description:Q,lastSyncTime:ee,enableDataFill:q}=s.data;V&&(V=JSON.parse(Y(V,F.value))),x&&(x=JSON.parse(Y(x,F.value))),I&&(I=JSON.parse(Y(I,F.value)));let $=oe(B(J));Object.assign($,{name:u,pid:E,description:Q,fileName:b,size:k,createTime:M,creator:R,createBy:f,id:T,type:P,configuration:V,syncSetting:U,apiConfiguration:I,paramsConfiguration:x,lastSyncTime:ee,enableDataFill:q,isPlugin:r&&r.length>0,staticMap:(te=r[0])==null?void 0:te.staticMap}),ne.value.init($,null,null,re.value)})),Da=async o=>{await je(o),wt()},{handleDrop:Na,allowDrop:Ea,handleDragStart:La}=yo(h,"datasourceTree",ot,"datasource",fe),Va=async o=>{Ft(o.id).then(s=>{var te;let{name:r,createBy:u,id:f,createTime:T,creator:M,type:R,pid:P,configuration:E,syncSetting:V,apiConfigurationStr:U,paramsStr:I,fileName:x,size:b,description:k,lastSyncTime:Q,enableDataFill:ee}=s.data,q=j.value.filter(O=>O.type==s.data.type);E&&(E=JSON.parse(Y(E,F.value))),I&&(I=JSON.parse(Y(I,F.value))),U&&(U=JSON.parse(Y(U,F.value)));let $=oe(B(J));if(Object.assign($,{name:r,pid:P,description:k,fileName:x,size:b,createTime:T,creator:M,createBy:u,id:f,type:R,configuration:E,syncSetting:V,apiConfiguration:U,paramsConfiguration:I,lastSyncTime:Q,enableDataFill:ee,isPlugin:q&&q.length>0,staticMap:(te=q[0])==null?void 0:te.staticMap}),$.id="",$.copy=!0,$.name=l("datasource.copy"),$.type.startsWith("API"))for(let O=0;O<$.apiConfiguration.length;O++)$.apiConfiguration[O].deTableName="";ne.value.init($,null,null,re.value)})},Tt=(o,s)=>{o==="datasource"&&Ze(s),o==="folder"&&Oe.value.createInit(o,s||{})},xt=C(),Ia=(o,s,r)=>{var u;if(o==="copy"){Va(s);return}if(o==="delete"){let f={confirmButtonText:l("common.sure"),cancelButtonText:l("common.cancel"),confirmButtonType:"danger",type:"warning",tip:"",autofocus:!1,showClose:!1};(u=s.children)!=null&&u.length?f.tip=l("data_source.operate_with_caution"):delete f.tip,r!=="folder"?Uo(s.id).then(T=>{if(T===!0){const M=()=>{xt.value.getChartData({queryType:"datasource",num:s.id,label:s.name})};Xe.confirm("",{confirmButtonType:"danger",type:"warning",autofocus:!1,confirmButtonText:l("common.sure"),showClose:!1,dangerouslyUseHTMLString:!0,message:Ce("div",null,[Ce("p",{style:"margin-bottom: 8px;"},l("datasource.this_data_source")),Ce("p",{class:"tip"},l("data_source.confirm_to_delete")),Ce(z,{text:!0,onClick:M,style:"margin-left: -4px;"},l("data_source.view_blood_relationship"))])}).then(()=>{lt(s.id).then(()=>{s.id===n.id&&Object.assign(n,B(J)),ce(),W.success(l("dataset.delete_success"))})})}else Xe.confirm(l("datasource.this_data_source"),f).then(()=>{lt(s.id).then(()=>{s.id===n.id&&Object.assign(n,B(J)),ce(),W.success(l("dataset.delete_success"))})})}):Xe.confirm(l("data_set.delete_this_folder"),f).then(()=>{lt(s.id).then(()=>{s.id===n.id&&Object.assign(n,B(J)),ce(),W.success(l("dataset.delete_success"))})})}else Oe.value.createInit(r,s,o)},kt=o=>{switch(o){case"config":Z.value=[],n.type.startsWith("Excel")&&Ot({datasourceId:n.id}).then(s=>{Ne.value=s.data.map(r=>{const{name:u,tableName:f}=r;return{value:u,label:f}}),Ne.value.length&&!ie.value&&(ie.value=Ne.value[0].value,_t(ie)),Z.value=s.data});break;case"table":Z.value=[],Ot({datasourceId:n.id}).then(s=>{Z.value=s.data,gt(),(n.type.startsWith("API")||n.type==="ExcelRemote")&&Bo({datasourceId:n.id}).then(r=>{for(let u=0;u<h.filterTable.length;u++)for(let f=0;f<r.data.length;f++)h.filterTable[u].tableName===r.data[f].tableName&&(h.filterTable[u].lastUpdateTime=r.data[f].lastUpdateTime,h.filterTable[u].status=r.data[f].status);for(let u=0;u<Z.value.length;u++)for(let f=0;f<r.data.length;f++)Z.value[u].tableName===r.data[f].tableName&&(Z.value[u].lastUpdateTime=r.data[f].lastUpdateTime,Z.value[u].status=r.data[f].status)})});break}},$a=()=>{ce()};let St=null;const Dt=o=>{St=o},Ge=C(!1),Ke=C(!1),Nt=o=>{const s=new FormData;return s.append("file",St.raw),s.append("type",""),s.append("editType",o),s.append("id",n.id||0),Ge.value=o===0,Ke.value=o===1,Ao(s).then(r=>{(r==null?void 0:r.code)===0&&(n.editType=o,ne.value.init(n,n.id,r,re.value))}).finally(()=>{Ge.value=!1,Ke.value=!1})},ve=C("table"),Ma={children:"children",label:"name"},za=()=>{const o=K.get(se("TreeSort-datasource"));o&&(h.curSortType=o)},Ha=ol((o,s)=>{const u=["dashboard","dataV","dataset","datasource"].findIndex(f=>f==="datasource");return u<0||!Vo(s,u+1)?Ea(o,s):(W.warning(l("free.save_error")),!1)},300);uo(()=>{var r,u;const o=K.get(se("ds-info-id"))||N.params.id;n.id=o||N.query.id||"",K.delete(se("ds-info-id")),za(),ce(),ba();const{opt:s}=((u=(r=Te==null?void 0:Te.currentRoute)==null?void 0:r.value)==null?void 0:u.query)||{};s&&s==="create"&&ne.value.init(null,null,null,re.value),al().then(f=>{F.value=f.data})});const de=C(!0),Et=o=>{de.value=o},Ra=()=>{xe.setArrowSide(!0)},Pa=()=>{xe.setArrowSide(!1)},Ua=o=>o?[{label:l("common.copy"),svgName:fo,command:"copy"}].concat(rt):rt;return(o,s)=>{const r=Aa,u=Fa,f=Oa,T=Wa,M=ja,R=Za,P=qa,E=Ya,V=Ja,U=Ga,I=Ka,x=Xa,b=Qa,k=eo,Q=to,ee=ao,q=oo,$=lo,te=so,O=po("permission"),he=no;return H((i(),g("div",yl,[t(Ut,{style:Qe({left:(de.value?e(Me)-12:0)+"px"}),onChangeSideTreeStatus:Et,isInside:!de.value},null,8,["style","isInside"]),t(e(Ba),{onMouseenter:Ra,onMouseleave:Pa,class:G(["resource-area",{retract:!de.value}]),ref_key:"node",ref:ea,style:Qe({width:e(Me)+"px"})},{default:a(()=>[t(Ut,{isInside:!de.value,style:Qe({left:(de.value?e(Me)-12:0)+"px"}),onChangeSideTreeStatus:Et},null,8,["isInside","style"]),p("div",bl,[p("div",Cl,[p("div",wl,[p("span",Tl,c(e(l)("datasource.datasource")),1),He.value?(i(),g("div",xl,[t(r,{effect:"dark",content:e(l)("deDataset.new_folder"),placement:"top"},{default:a(()=>[t(e(L),{class:"custom-icon btn",style:{marginRight:"20px"},onClick:s[0]||(s[0]=d=>Tt("folder"))},{default:a(()=>[t(e(w),{name:"dv-new-folder"},{default:a(()=>[t(e(Co),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"]),t(r,{effect:"dark",content:e(l)("datasource.create"),placement:"top"},{default:a(()=>[t(e(L),{class:"custom-icon btn",onClick:Ze},{default:a(()=>[t(e(w),{name:"icon_file-add_outlined"},{default:a(()=>[t(e(wo),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])])):m("",!0)]),t(u,{placeholder:e(l)("commons.search"),modelValue:me.value,"onUpdate:modelValue":s[1]||(s[1]=d=>me.value=d),clearable:"",class:"search-bar"},{prefix:a(()=>[t(e(L),null,{default:a(()=>[t(e(w),{name:"icon_search-outline_outlined"},{default:a(()=>[t(e(zt),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["placeholder","modelValue"]),t(M,{onCommand:la,trigger:"click"},{dropdown:a(()=>[t(T,{style:{width:"246px"}},{default:a(()=>[(i(),g(D,null,et(We,d=>(i(),g(D,{key:d.value},[t(f,{class:G(["ed-select-dropdown__item",d.value===h.curSortType&&"selected"]),command:d.value},{default:a(()=>[_(c(d.name),1)]),_:2},1032,["class","command"]),d.divided?(i(),g("li",kl)):m("",!0)],64))),64))]),_:1})]),default:a(()=>[t(e(L),{class:"filter-icon-span"},{default:a(()=>[t(r,{offset:16,effect:"dark",content:yt.value,placement:"top"},{default:a(()=>[t(e(w),{name:"dv-sort-asc",class:"opt-icon"},{default:a(()=>[h.curSortType.includes("asc")?(i(),v(e(To),{key:0,class:"svg-icon opt-icon"})):m("",!0)]),_:1})]),_:1},8,["content"]),t(r,{offset:16,effect:"dark",content:yt.value,placement:"top"},{default:a(()=>[t(e(w),{name:"dv-sort-desc",class:"opt-icon"},{default:a(()=>[h.curSortType.includes("desc")?(i(),v(e(xo),{key:0,class:"svg-icon opt-icon"})):m("",!0)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})]),t(e(Lt),{onScroll:ra,ref_key:"scrollbarRef",ref:pt,class:"custom-tree"},{default:a(()=>[Ye.value?(i(),v(R,{key:0,menu:"",ref_key:"dsListTree",ref:ge,"node-key":"id",onNodeExpand:xa,onNodeCollapse:ka,"filter-node-method":Sa,"default-expanded-keys":Ee.value,data:h.datasourceTree,props:Ma,onNodeDragStart:e(La),"allow-drop":e(Ha),onNodeDrop:e(Na),draggable:"",onNodeClick:je},{default:a(({node:d,data:y})=>[p("span",Sl,[t(e(L),{class:G(y.leaf&&"icon-border"),style:{"font-size":"18px"}},{default:a(()=>[t(e(w),{"static-content":_a(y)},{default:a(()=>[(i(),v(ye(va(y)),{class:"svg-icon"}))]),_:2},1032,["static-content"])]),_:2},1032,["class"]),y.extraFlag<=-1?(i(),v(e(L),{key:0,style:{position:"absolute",top:"10px",left:"10px","font-size":"12px"}},{default:a(()=>[t(e(w),null,{default:a(()=>[t(e(il),{class:"svg-icon"})]),_:1})]),_:1})):m("",!0),y.extraFlag>-1?(i(),g("span",{key:1,title:d.label,class:G(["label-tooltip ellipsis",y.type==="Excel"&&"excel"])},c(d.label),11,Dl)):(i(),v(r,{key:2,effect:"dark",content:`${e(l)("data_set.invalid_data_source")}: ${d.label}`,placement:"top"},{default:a(()=>[p("span",{title:d.label,class:G(["label-tooltip ellipsis",y.type==="Excel"&&"excel"])},c(d.label),11,Nl)]),_:2},1032,["content"])),y.weight>=7?(i(),g("div",El,[y.leaf?y.type!=="Excel"?(i(),v(e(L),{key:1,class:"hover-icon",onClick:tt(ae=>Da(y),["stop"])},{default:a(()=>[t(e(w),{name:"icon_edit_outlined"},{default:a(()=>[t(e(at),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])):m("",!0):(i(),v(e(Bt),{key:0,"icon-size":"24px",onHandleCommand:ae=>Tt(ae,y),"menu-list":aa.value,"icon-name":e(Ht),placement:"bottom-start"},null,8,["onHandleCommand","menu-list","icon-name"])),t(e(Bt),{onHandleCommand:ae=>Ia(ae,y,y.leaf?"datasource":"folder"),"menu-list":Ua(!["Excel"].includes(y.type)&&y.leaf)},null,8,["onHandleCommand","menu-list"])])):m("",!0)])]),_:1},8,["default-expanded-keys","data","onNodeDragStart","allow-drop","onNodeDrop"])):m("",!0)]),_:1},512)])]),_:1},8,["class","style"]),p("div",{class:G(["datasource-content",{auto:nt.value||Ie.value,h100:Ie.value||nt.value}])},[!h.datasourceTree.length&&Fe.value?(i(),v(st,{key:0,description:e(l)("data_source.no_data_source"),"img-type":"none"},{default:a(()=>[He.value?(i(),v(e(z),{key:0,onClick:s[2]||(s[2]=()=>Ze()),type:"primary"},{icon:a(()=>[t(e(w),{name:"icon_add_outlined"},{default:a(()=>[t(e(Ht),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("datasource.create")),1)]),_:1})):m("",!0)]),_:1},8,["description"])):n.id?(i(),g(D,{key:1},[p("div",Ll,[p("div",Vl,[t(e(L),{class:"icon-border"},{default:a(()=>[t(e(w),{"static-content":ga(n.type)},{default:a(()=>[(i(),v(ye(e(Yt)[n.type]),{class:"svg-icon"}))]),_:1},8,["static-content"])]),_:1}),p("span",{title:n.name,class:"name ellipsis"},c(n.name),9,Il),t(P,{style:{margin:"0 12px"},direction:"vertical"}),p("span",$l,c(e(l)("visualization.create_by"))+":"+c(n.creator),1),t(E,{offset:8,"show-arrow":"",placement:"bottom",width:"290",trigger:"hover"},{reference:a(()=>[t(e(L),{size:"16px",class:"create-user"},{default:a(()=>[t(e(w),{name:"icon_info_outlined"},{default:a(()=>[t(e(ko),{class:"svg-icon"})]),_:1})]),_:1})]),default:a(()=>[t(Go,{"create-time":vt.value.createTime,creator:vt.value.creator},null,8,["create-time","creator"])]),_:1}),p("div",Ml,[H((i(),v(e(z),{secondary:"",onClick:s[3]||(s[3]=d=>it(null))},{icon:a(()=>[t(e(w),{name:"icon_dataset_outlined"},{default:a(()=>[t(e(Jt),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("data_set.a_new_dataset")),1)]),_:1})),[[O,["dataset"]]]),n.type!=="Excel"&&n.weight>=7?(i(),v(e(z),{key:0,secondary:"",onClick:ua},{default:a(()=>[_(c(e(l)("datasource.validate")),1)]),_:1})):m("",!0),n.type==="Excel"?(i(),g(D,{key:1},[n.weight>=7?(i(),v(V,{key:0,action:"",multiple:!1,ref:"uploadAgain","show-file-list":!1,accept:".xls,.xlsx,.csv","on-change":Dt,"http-request":()=>Nt(0),name:"file"},{trigger:a(()=>[H((i(),v(e(z),{class:"replace-excel",type:"primary"},{icon:a(()=>[t(e(w),{name:"icon_edit_outlined"},{default:a(()=>[t(e(at),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("data_source.replace_data")),1)]),_:1})),[[he,Ge.value]])]),_:1},8,["http-request"])):m("",!0),n.weight>=7?(i(),v(V,{key:1,action:"",multiple:!1,ref:"uploadAgain","show-file-list":!1,accept:".xls,.xlsx,.csv","on-change":Dt,"http-request":()=>Nt(1),name:"file"},{trigger:a(()=>[H((i(),v(e(z),{type:"primary"},{icon:a(()=>[t(e(w),{name:"icon_new-item_outlined"},{default:a(()=>[t(e(pl),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("data_source.append_data")),1)]),_:1})),[[he,Ke.value]])]),_:1},8,["http-request"])):m("",!0)],64)):n.weight>=7?(i(),v(e(z),{key:2,onClick:s[4]||(s[4]=d=>wt()),type:"primary"},{icon:a(()=>[t(e(w),{name:"icon_edit_outlined"},{default:a(()=>[t(e(at),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("chart.edit")),1)]),_:1})):m("",!0)])]),p("div",zl,[t(I,{modelValue:ve.value,"onUpdate:modelValue":s[5]||(s[5]=d=>ve.value=d),onTabChange:kt},{default:a(()=>[t(U,{label:e(l)("datasource.config"),name:"config"},null,8,["label"]),t(U,{label:e(l)("datasource.table"),name:"table"},null,8,["label"])]),_:1},8,["modelValue"])])]),ve.value==="table"?(i(),g("div",Hl,[p("div",Rl,[t(u,{ref:"search",modelValue:pe.value,"onUpdate:modelValue":s[6]||(s[6]=d=>pe.value=d),placeholder:e(l)("commons.search"),clearable:"",onInput:gt,style:{width:"240px"}},{prefix:a(()=>[t(e(L),null,{default:a(()=>[t(e(w),{name:"icon_search-outline_outlined"},{default:a(()=>[t(e(zt),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"])]),p("div",Pl,[t(Pt,{pagination:h.paginationConfig,"table-data":ha.value,"is-search":!!pe.value.trim(),onSizeChange:sa,onCurrentChange:Ue},{default:a(()=>[t(x,{key:"tableName",prop:"tableName",label:e(l)("datasource.table_name")},null,8,["label"]),n.type.startsWith("API")?(i(),v(x,{key:"status",prop:"status",label:e(l)("data_source.latest_update_status")},{default:a(d=>[p("div",Ul,[d.row.status==="Completed"?(i(),g(D,{key:0},[t(e(L),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(w),{name:"icon_succeed_filled"},{default:a(()=>[t(e(Kt),{class:"svg-icon"})]),_:1})]),_:1}),_(" "+c(e(l)("dataset.completed")),1)],64)):m("",!0),d.row.status==="UnderExecution"?(i(),g(D,{key:1},[_(c(e(l)("dataset.underway")),1)],64)):m("",!0),d.row.status==="Error"||d.row.status==="Warning"?(i(),g(D,{key:2},[t(e(L),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(w),{class:"field-icon-red",name:"icon_close_filled"},{default:a(()=>[t(e(Xt),{class:"svg-icon field-icon-red"})]),_:1})]),_:1}),_(" "+c(e(l)("dataset.error")),1)],64)):m("",!0)])]),_:1},8,["label"])):m("",!0),["excel","api"].includes(n.type.toLowerCase())||n.type.startsWith("API")?(i(),v(x,{key:"lastUpdateTime",prop:"lastUpdateTime",label:e(l)("data_source.latest_update_time")},{default:a(d=>[p("span",null,c(e(we)(d.row.lastUpdateTime)),1)]),_:1},8,["label"])):m("",!0),t(x,{key:"__operation",label:e(l)("commons.operating"),fixed:"right",width:"108"},{default:a(d=>[t(r,{effect:"dark",content:e(l)("data_set.a_new_dataset"),placement:"top"},{default:a(()=>[H((i(),v(e(z),{onClick:tt(y=>it(d.row.tableName),["stop"]),text:""},{icon:a(()=>[t(e(w),{name:"icon_dataset_outlined"},{default:a(()=>[t(e(Jt),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])),[[O,["dataset"]]])]),_:2},1032,["content"]),t(r,{effect:"dark",content:e(l)("visualization.details"),placement:"top"},{default:a(()=>[t(e(z),{onClick:tt(y=>oa(d.row),["stop"]),text:""},{icon:a(()=>[t(e(w),{name:"icon_describe_outlined"},{default:a(()=>[t(e(Gt),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["pagination","table-data","is-search"])])])):(i(),g(D,{key:1},[t(Ve,{name:e(l)("datasource.base_info")},{default:a(d=>[d.active?(i(),g(D,{key:0},[t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("data_source.data_source_name")},{default:a(()=>[_(c(n.name),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.type")},{default:a(()=>[_(c(e(ct)[n.type]),1)]),_:1},8,["label"])]),_:1})]),_:1}),t(k,{gutter:24},{default:a(()=>[n.type==="Excel"?(i(),v(b,{key:0,span:12},{default:a(()=>[t(S,{label:e(l)("data_source.document")},{default:a(()=>[t(jt,{name:n.fileName,size:n.size},null,8,["name","size"])]),_:1},8,["label"])]),_:1})):m("",!0),n.type==="ExcelRemote"?(i(),v(b,{key:1,span:12},{default:a(()=>[t(S,{label:e(l)("datasource.remote_excel_url")},{default:a(()=>[_(c(n.configuration.url),1)]),_:1},8,["label"])]),_:1})):m("",!0),n.type==="ExcelRemote"?(i(),v(b,{key:2,span:12},{default:a(()=>[t(S,{label:e(l)("data_source.document")},{default:a(()=>[t(jt,{name:n.fileName,size:n.size},null,8,["name","size"])]),_:1},8,["label"])]),_:1})):m("",!0),n.type.startsWith("Excel")?m("",!0):(i(),v(b,{key:3,span:24},{default:a(()=>[t(S,{label:e(l)("common.description")},{default:a(()=>[_(c(n.description),1)]),_:1},8,["label"])]),_:1}))]),_:1}),!["Excel","es"].includes(n.type)&&!n.type.startsWith("API")&&!n.type.startsWith("Excel")&&n.weight>=7?(i(),g(D,{key:0},[H(t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.host")},{default:a(()=>[_(c(n.configuration.host),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[be,n.configuration.urlType!=="jdbcUrl"]]),H(t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.port")},{default:a(()=>[_(c(n.configuration.port),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.data_base")},{default:a(()=>[_(c(n.configuration.dataBase),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[be,n.configuration.urlType!=="jdbcUrl"]]),H(t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.user_name")},{default:a(()=>[_(c(n.configuration.username),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.extra_params")},{default:a(()=>[_(c(n.configuration.extraParams),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[be,n.configuration.urlType!=="jdbcUrl"]]),H(t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.jdbcUrl")},{default:a(()=>[_(c(n.configuration.jdbcUrl),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[be,n.configuration.urlType==="jdbcUrl"]]),H(t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.user_name")},{default:a(()=>[_(c(n.configuration.username),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[be,n.configuration.urlType==="jdbcUrl"]]),t(k,{gutter:24},{default:a(()=>[!["es","api"].includes(n.type.toLowerCase())&&n.configuration.urlType!=="jdbcUrl"?(i(),g("span",{key:0,class:"de-expand",onClick:s[7]||(s[7]=y=>Se.value=!Se.value)},[_(c(e(l)("data_source.ssh_settings"))+" ",1),t(e(L),null,{default:a(()=>[t(e(w),null,{default:a(()=>[(i(),v(ye(Se.value?e($t):e(It))))]),_:1})]),_:1})])):m("",!0)]),_:1}),Se.value?(i(),g(D,{key:0},[n.configuration.useSSH?(i(),v(k,{key:0,gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("data_source.host")},{default:a(()=>[_(c(n.configuration.sshHost),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("data_source.port")},{default:a(()=>[_(c(n.configuration.sshPort),1)]),_:1},8,["label"])]),_:1})]),_:1})):m("",!0),n.configuration.useSSH?(i(),v(k,{key:1,gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.user_name")},{default:a(()=>[_(c(n.configuration.sshUserName),1)]),_:1},8,["label"])]),_:1})]),_:1})):m("",!0)],64)):m("",!0),t(k,{gutter:24},{default:a(()=>[["es","api"].includes(n.type.toLowerCase())?m("",!0):(i(),g("span",{key:0,class:"de-expand",onClick:s[8]||(s[8]=y=>ke.value=!ke.value)},[_(c(e(l)("datasource.priority"))+" ",1),t(e(L),null,{default:a(()=>[t(e(w),null,{default:a(()=>[(i(),v(ye(ke.value?e($t):e(It))))]),_:1})]),_:1})]))]),_:1}),ke.value?(i(),g(D,{key:1},[t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.initial_pool_size")},{default:a(()=>[_(c(n.configuration.initialPoolSize||5),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.min_pool_size")},{default:a(()=>[_(c(n.configuration.minPoolSize||5),1)]),_:1},8,["label"])]),_:1})]),_:1}),t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.max_pool_size")},{default:a(()=>[_(c(n.configuration.maxPoolSize||5),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{value:n.configuration.queryTimeout,label:e(l)("datasource.query_timeout")},{default:a(()=>[_(c(n.configuration.queryTimeout||"30")+c(e(l)("common.second")),1)]),_:1},8,["value","label"])]),_:1})]),_:1})],64)):m("",!0),t(e(At),{nodeInfo:n,jsname:"L2NvbXBvbmVudC9kYXRhLWZpbGxpbmcvRGF0YXNvdXJjZURhdGFGaWxsaW5nSW5mbw=="},null,8,["nodeInfo"])],64)):m("",!0),["es"].includes(n.type)&&n.weight>=7?(i(),v(k,{key:1,gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("datasource.datasource_url")},{default:a(()=>[_(c(n.configuration.url),1)]),_:1},8,["label"])]),_:1})]),_:1})):m("",!0)],64)):m("",!0)]),_:1},8,["name"]),n.type.startsWith("API")&&n.weight>=7?(i(),v(Ve,{key:0,name:e(l)("datasource.data_table")},{default:a(d=>[d.active?(i(),g("div",Bl,[(i(!0),g(D,null,et(n.apiConfiguration,y=>(i(),g("div",{key:y.id,class:"api-card"},[t(k,null,{default:a(()=>[t(b,{span:19},{default:a(()=>[p("span",Al,[p("span",{class:"ellipsis",title:y.name},c(y.name),9,Fl)]),y.status==="Error"?(i(),g("span",Ol,c(e(l)("datasource.invalid")),1)):m("",!0),y.status==="Success"?(i(),g("span",Wl,c(e(l)("datasource.valid")),1)):m("",!0)]),_:2},1024),t(b,{style:{"text-align":"right"},span:5},{default:a(()=>[t(e(z),{onClick:ae=>wa(y),text:""},{icon:a(()=>[t(e(w),{name:"icon_replace_outlined"},{default:a(()=>[t(e(Rt),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024),p("div",null,c(e(l)("data_source.data_time"))+" "+c(e(we)(y.updateTime)),1),p("div",jl,[p("span",null,c(e(l)("datasource.method")),1),p("span",null,c(e(l)("datasource.url")),1)]),p("div",Zl,[p("span",null,c(y.method),1),t(r,{effect:"dark",content:y.url,placement:"top"},{default:a(()=>[p("span",null,c(y.url),1)]),_:2},1032,["content"])])]))),128))])):m("",!0),t(e(z),{onClick:Ta,class:"update-records",text:""},{icon:a(()=>[t(e(w),{name:"icon_replace_outlined"},{default:a(()=>[t(e(Rt),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("data_source.update_all")),1)]),_:1})]),_:1},8,["name"])):m("",!0),n.type.startsWith("Excel")?(i(),v(Ve,{key:1,name:e(l)("dataset.data_preview"),time:n.lastSyncTime,showTime:n.type==="ExcelRemote"},{default:a(d=>[d.active?(i(),g("div",ql,[t(Qo,{"active-tab":ie.value,onTabClick:_t,"tab-list":Ne.value},null,8,["active-tab","tab-list"]),p("div",Yl,[t(ee,null,{default:a(({height:y,width:ae})=>[H((i(),v(Q,{columns:mt.value,"header-class":"excel-header-cell",data:bt.value,width:ae,height:y,fixed:""},{empty:a(()=>[t(st,{description:e(l)("data_set.no_data"),"img-type":"noneWhite"},null,8,["description"])]),_:1},8,["columns","data","width","height"])),[[he,Be.value]])]),_:1})])])):m("",!0)]),_:1},8,["name","time","showTime"])):m("",!0),(n.type.startsWith("API")||n.type==="ExcelRemote")&&n.weight>=7?(i(),v(Ve,{key:2,name:e(l)("dataset.update_setting"),time:n.lastSyncTime},{default:a(d=>[d.active?(i(),v(k,{key:0,gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("dataset.update_type")},{default:a(()=>[_(c(e(l)(`dataset.${n.syncSetting.updateType}`)),1)]),_:1},8,["label"])]),_:1}),t(b,{span:12},{default:a(()=>[t(S,{label:e(l)("dataset.execute_rate")},{default:a(()=>[(i(!0),g(D,null,et(pa(n.syncSetting),y=>(i(),g("p",{class:"value",key:y},c(y),1))),128))]),_:1},8,["label"])]),_:1})]),_:1})):m("",!0),t(e(z),{onClick:Je,class:"update-records",text:""},{icon:a(()=>[t(e(w),{name:"icon_describe_outlined"},{default:a(()=>[t(e(Gt),{class:"svg-icon"})]),_:1})]),default:a(()=>[_(" "+c(e(l)("dataset.update_records")),1)]),_:1})]),_:1},8,["name","time"])):m("",!0)],64))],64)):Fe.value?(i(),v(st,{key:2,description:e(l)("data_source.on_the_left"),"img-type":"select"},null,8,["description"])):m("",!0)],2),t(Xo,{onRefresh:$a,ref_key:"datasourceEditor",ref:ne},null,512),t($,{title:e(l)("common.detail"),modelValue:Re.value,"onUpdate:modelValue":s[9]||(s[9]=d=>Re.value=d),class:"ds-table-drawer",width:"840px",top:"60px"},{default:a(()=>[t(k,{gutter:24},{default:a(()=>[t(b,{span:12},{default:a(()=>[p("p",Jl,c(e(l)("datasource.table_name")),1),p("p",Gl,c(ze.tableName),1)]),_:1}),t(b,{span:12},{default:a(()=>[p("p",Kl,c(e(l)("datasource.table_description")),1),p("p",Xl,c(ze.name||"-"),1)]),_:1})]),_:1}),t(e(Lt),null,{default:a(()=>[H((i(),v(q,{"header-cell-class-name":"header-cell",data:h.dsTableData,stripe:"",style:{width:"100%"}},{default:a(()=>[t(x,{prop:"originName",label:e(l)("datasource.column_name")},null,8,["label"]),t(x,{prop:"type",label:e(l)("datasource.field_type")},{default:a(d=>[p("div",Ql,[t(e(L),null,{default:a(()=>[t(e(w),{class:G(`field-icon-${e(le)[d.row.deType]}`)},{default:a(()=>[(i(),v(ye(e(qt)[e(le)[d.row.deType]]),{class:G(["svg-icon",`field-icon-${e(le)[d.row.deType]}`])},null,8,["class"]))]),_:2},1032,["class"])]),_:2},1024),_(" "+c(e(l)(`dataset.${e(le)[d.row.deType]}`)+`${d.row.deType===3?"("+e(l)("dataset.float")+")":""}`),1)])]),_:1},8,["label"]),t(x,{prop:"name","show-overflow-tooltip":"",label:e(l)("datasource.field_description")},null,8,["label"])]),_:1},8,["data"])),[[he,Pe.value]])]),_:1})]),_:1},8,["title","modelValue"]),t(qo,{onFinish:ya,ref_key:"creatDsFolder",ref:Oe},null,512),t(te,{modelValue:qe.value,"onUpdate:modelValue":s[10]||(s[10]=d=>qe.value=d),title:e(l)("dataset.update_records"),"close-on-press-escape":!1,"close-on-click-modal":!1,"modal-class":"record-drawer",direction:"rtl",size:"840px"},{default:a(()=>[t(Pt,{pagination:X.paginationConfig,"table-data":Ct.value,onSizeChange:na,onCurrentChange:ia},{default:a(()=>[t(x,{prop:"name",label:e(l)("datasource.data_table")},null,8,["label"]),t(x,{prop:"triggerType",label:e(l)("datasource.sync_rate")},{default:a(d=>[p("div",es,[d.row.triggerType==="CRON"?(i(),g(D,{key:0},[_(c(e(l)("datasource.cron_config")),1)],64)):m("",!0),d.row.triggerType==="RIGHTNOW"?(i(),g(D,{key:1},[_(c(e(l)("datasource.execute_once")),1)],64)):m("",!0),d.row.triggerType==="SIMPLE_CRON"?(i(),g(D,{key:2},[_(c(e(l)("datasource.simple_cron")),1)],64)):m("",!0),d.row.triggerType==="MANUAL"?(i(),g(D,{key:3},[_(c(e(l)("datasource.manual")),1)],64)):m("",!0)])]),_:1},8,["label"]),t(x,{prop:"startTime",label:e(l)("datasource.start_time")},{default:a(d=>[p("span",null,c(e(we)(d.row.startTime)),1)]),_:1},8,["label"]),t(x,{prop:"endTime",label:e(l)("datasource.end_time")},{default:a(d=>[p("span",null,c(e(we)(d.row.endTime)),1)]),_:1},8,["label"]),t(x,{prop:"taskStatus",label:e(l)("data_source.update_result")},{default:a(d=>[p("div",ts,[d.row.taskStatus==="Completed"?(i(),g(D,{key:0},[t(e(L),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(w),{name:"icon_succeed_filled"},{default:a(()=>[t(e(Kt),{class:"svg-icon"})]),_:1})]),_:1}),_(" "+c(e(l)("dataset.completed")),1)],64)):m("",!0),d.row.taskStatus==="UnderExecution"?(i(),g(D,{key:1},[_(c(e(l)("dataset.underway")),1)],64)):m("",!0),d.row.taskStatus==="Error"||d.row.taskStatus==="Warning"?(i(),g(D,{key:2},[t(e(L),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(w),{class:"field-icon-red",name:"icon_close_filled"},{default:a(()=>[t(e(Xt),{class:"svg-icon field-icon-red"})]),_:1})]),_:1}),_(" "+c(e(l)("dataset.error"))+" ",1),t(e(L),{onClick:y=>ma(d.row.info),class:"error-info"},{default:a(()=>[t(e(w),{name:"icon-maybe_outlined"},{default:a(()=>[t(e(So),{class:"svg-icon"})]),_:1})]),_:1},8,["onClick"])],64)):m("",!0)])]),_:1},8,["label"])]),_:1},8,["pagination","table-data"])]),_:1},8,["modelValue","title"]),t($,{modelValue:De.value,"onUpdate:modelValue":s[12]||(s[12]=d=>De.value=d),"close-on-press-escape":!1,"close-on-click-modal":!1,title:e(l)("data_source.failure_details"),width:"600px"},{footer:a(()=>[p("span",as,[t(e(z),{secondary:"",onClick:s[11]||(s[11]=d=>De.value=!1)},{default:a(()=>[_(c(e(l)("chart.close")),1)]),_:1})])]),default:a(()=>[p("span",null,c(ft.value),1)]),_:1},8,["modelValue","title"]),t(ho,{ref_key:"relationChartRef",ref:xt},null,512),t(e(At),{jsname:"L2NvbXBvbmVudC9wbHVnaW5zLWhhbmRsZXIvRHNDYXRlZ29yeUhhbmRsZXI=",onLoadDsPlugin:fa})])),[[he,Ae.value]])}}});const Fi=ll(ls,[["__scopeId","data-v-962c3203"]]);export{Fi as default};
