import{i as R}from"./interactive-0.0.0-dataease.js";import{v as W,o as V,x as j}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{s as w}from"./ShortcutOption-0.0.0-dataease.js";import{y as q,b as z}from"./index-0.0.0-dataease.js";import A from"./Workbranch-0.0.0-dataease.js";import{n as O}from"./none-0.0.0-dataease.js";import{s as X,b as J}from"./index-0.0.0-dataease32.js";import{s as M}from"./index-0.0.0-dataease59.js";import{s as Q}from"./index-0.0.0-dataease33.js";import"./index-0.0.0-dataease30.js";import"./index-0.0.0-dataease60.js";import{C as H,e as K}from"./lodash-0.0.0-dataease.js";import{d as ee,r as i,X as te,y as b,w as ae,o as se,f as l,O as d,P as p,j as v,i as F,u as n,W as h,a6 as S,g as _,_ as B,a4 as le,T as ne}from"./vue-0.0.0-dataease.js";import{_ as oe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./icon_dashboard-0.0.0-dataease.js";import"./index-0.0.0-dataease29.js";import"./use-route-0.0.0-dataease.js";const ie={class:"mobile-panel-list"},re={class:"workbranch-cell-group"},ce={key:0,class:"empty-img-mobile"},ue=["src"],me={class:"empty-tips"},de=ee({__name:"index",emits:["setLoading"],setup(pe,{emit:N}){const Y=q(),{t:g}=V(),{wsCache:f}=z("sessionStorage"),s=i("recent"),r=i(""),c=te({tableData:[],curTypeList:[]}),P=R(),o=N,G=()=>{o("setLoading",!0),w.loadData({type:"panel",keyword:"",asc:!1}).then(e=>{c.tableData=(e.data||[]).filter(t=>t.extFlag===1)}).finally(()=>{o("setLoading",!1),x()})},U=()=>{o("setLoading",!0),j.post({url:"/share/query",data:{type:"panel",keyword:"",asc:!1}}).then(e=>{c.tableData=(e.data||[]).filter(t=>t.extFlag===1)}).finally(()=>{o("setLoading",!1),x()})},u=i([{title:g("work_branch.recent"),name:"recent",disabled:!1},{title:"我的收藏",name:"store",disabled:!1},{title:g("visualization.share_out"),name:"share",disabled:!1}]),Z=b(()=>H(u.value,e=>e.name)),y=i([]),m=b(()=>{const e=K(L.length?u.value:[]);for(const t of y.value)e.push(t);return e}),k=b(()=>P.getData),L=(()=>{const e=["panel","screen","dataset","datasource"],t=[];for(const a in k.value)k.value[a].menuAuth&&t.push(e[parseInt(a)]);return u.value[0].disabled=!(t!=null&&t.length),u.value[1].disabled=!t.includes("panel")&&!t.includes("screen"),t})(),T={recent:"数据",store:"收藏",share:"分享"},$=e=>{y.value.push(e),T[e.name]=e.shortName},x=()=>{r.value=c.tableData.length?"":`暂无${T[s.value]}`},C=i(!1);ae(()=>m.value.length,()=>{m.value.length>0&&!C.value&&(C.value=!0,s.value=m.value[0].name)});const D=({name:e,disabled:t})=>{t||(e==="recent"||e==="store"?(o("setLoading",!0),w.setBusiFlag(e),G()):e==="share"?U():r.value=void 0)};se(()=>{s.value=f.get("activeTab")||"recent",f.set("activeTab",""),L.length&&D({name:s.value,disabled:!1})});const I=e=>{e.extFlag1!==0&&(f.set("activeTab",s.value),Y.push({path:"/panel/mobile",query:{dvId:e.resourceId}}))},E=e=>new Date(e).toLocaleString();return(e,t)=>(l(),d(h,null,[p("div",ie,[v(n(Q),null,{default:F(()=>[v(n(M),{"safe-area-inset-top":"",title:"工作台"}),v(n(X),{onClickTab:D,active:s.value,"onUpdate:active":t[0]||(t[0]=a=>s.value=a)},{default:F(()=>[(l(!0),d(h,null,S(m.value,a=>(l(),_(n(J),{key:a.name,disabled:a.disabled,name:a.name,title:a.title},null,8,["disabled","name","title"]))),128))]),_:1},8,["active"])]),_:1}),p("div",re,[Z.value.includes(s.value)?(l(!0),d(h,{key:0},S(c.tableData,a=>(l(),_(A,{onClick:fe=>I(a),key:a.id,style:ne({color:a.extFlag1===0?"#bbbfc4":"#1f2329"}),size:"large",label:a.name,time:E(a.lastEditTime||a.time)},null,8,["onClick","style","label","time"]))),128)):s.value==="data-filling"?(l(),_(n(W),{key:1,jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5lVGFibGU="})):B("",!0)]),r.value?(l(),d("div",ce,[p("img",{width:"125",height:"125",src:n(O),alt:""},null,8,ue),p("div",me,le(r.value),1)])):B("",!0)]),v(n(W),{jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5l",onLoaded:$})],64))}});const Re=oe(de,[["__scopeId","data-v-20712930"]]);export{Re as default};
