import{E as y,w as b,i as P,x as h}from"./element-plus-secondary-0.0.0-dataease.js";import{h as x,k as v}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{r as w}from"./encryption-0.0.0-dataease.js";import{l as V}from"./logout-0.0.0-dataease.js";import{_ as n}from"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{h as E}from"./lodash-es-0.0.0-dataease.js";import{d as q,l as F,r as U,o as C,T as $,U as s,W as i,u as m,_ as k,Y as B}from"./@vue-0.0.0-dataease.js";import{_ as I}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./jsencrypt-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./interactive-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";const z=q({__name:"UpdatePwd",setup(A){const{t:o}=x(),t=F(E({pwd:"",newPwd:"",confirm:""})),_=(a,r,e)=>{r===t.pwd&&e(new Error(o("system.be_the_same")));const l=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[~!@#$%^&*()_+\-\={}|":<>?`[\];',.\/])[a-zA-Z0-9~!@#$%^&*()_+\-\={}|":<>?`[\];',.\/]{8,20}$/;if(new RegExp(l).test(r))e();else{const p=o("user.pwd_pattern_error");e(new Error(p))}},c=(a,r,e)=>{r!==t.newPwd?e(new Error(o("system.twice_are_inconsistent"))):e()},f={pwd:[{required:!0,message:o("common.require"),trigger:"blur"},{min:6,max:20,message:o("commons.input_limit",[6,20]),trigger:"blur"}],newPwd:[{required:!0,message:o("common.require"),trigger:"blur"},{validator:_,trigger:"blur"}],confirm:[{required:!0,message:o("common.require"),trigger:"blur"},{min:8,max:20,message:o("commons.input_limit",[8,20]),trigger:"blur"},{validator:c,trigger:"blur"}]},d=U(),g=()=>{d.value.validate(a=>{if(a){const r=w(t.pwd),e=w(t.newPwd);v.post({url:"/user/modifyPwd",data:{pwd:r,newPwd:e}}).then(()=>{y.success(o("system.log_in_again")),V()})}})};return(a,r)=>{const e=b,l=P,u=h;return C(),$(u,{ref_key:"updatePwdForm",ref:d,"require-asterisk-position":"right",model:t,rules:f,class:"mt16","label-width":"80px","label-position":"top"},{default:s(()=>[i(e,{label:m(o)("system.original_password"),prop:"pwd"},{default:s(()=>[i(m(n),{modelValue:t.pwd,"onUpdate:modelValue":r[0]||(r[0]=p=>t.pwd=p),"show-password":"",type:"password",placeholder:m(o)("system.the_original_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(e,{label:m(o)("system.new_password"),prop:"newPwd"},{default:s(()=>[i(m(n),{modelValue:t.newPwd,"onUpdate:modelValue":r[1]||(r[1]=p=>t.newPwd=p),"show-password":"",type:"password",placeholder:m(o)("system.the_new_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(e,{label:m(o)("system.confirm_password"),prop:"confirm"},{default:s(()=>[i(m(n),{modelValue:t.confirm,"onUpdate:modelValue":r[2]||(r[2]=p=>t.confirm=p),"show-password":"",type:"password",placeholder:m(o)("system.the_confirmation_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(l,{onClick:g,type:"primary"},{default:s(()=>[k(B(m(o)("common.save")),1)]),_:1})]),_:1},8,["model"])}}});const Xo=I(z,[["__scopeId","data-v-bfc09543"]]);export{Xo as default};
