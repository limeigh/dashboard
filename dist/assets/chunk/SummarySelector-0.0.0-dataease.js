import{r as z,w as D,y as M,z as $,x as J,A as R}from"./element-plus-secondary-0.0.0-dataease.js";import{h as W}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{b as g}from"./chart-0.0.0-dataease.js";import{d as Y}from"./dvMain-0.0.0-dataease.js";import{s as j}from"./pinia-0.0.0-dataease.js";import{F as q,x as w,h as V,E as P}from"./lodash-es-0.0.0-dataease.js";import{d as G,l as H,w as K,k as Q,b as X,o as n,c as f,W as l,U as p,T as b,u as x,z as c,R as A,S as v,a8 as C,_ as Z,Y as tt,a as et}from"./@vue-0.0.0-dataease.js";import{_ as mt}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";const rt={style:{width:"100%"}},ot={class:"indented-container"},it=G({__name:"SummarySelector",props:{chart:{type:Object,required:!0},themes:{type:String,default:"dark"},propertyInner:{type:Array}},emits:["onBasicStyleChange"],setup(r,{emit:N}){const E=Y(),{batchOptStatus:L}=j(E),{t:u}=W(),s=r,B=o=>{var e;return(e=s.propertyInner)==null?void 0:e.includes(o)},t=H({basicStyleForm:JSON.parse(JSON.stringify(g)),currentAxis:void 0,currentAxisSummary:void 0}),I=N,S=(o,e=!1)=>{I("onBasicStyleChange",{data:t.basicStyleForm,requestData:e},o)};K([()=>s.chart.customAttr.basicStyle.showSummary,()=>s.chart.xAxis,()=>s.chart.yAxis],()=>{k()},{deep:!0});function _(){return s.chart.type==="table-info"?q(s.chart.xAxis,o=>[2,3,4].includes(o.deType)):s.chart.yAxis}const T=Q(()=>_()),O=[{key:"sum",name:u("chart.sum")},{key:"avg",name:u("chart.avg")},{key:"max",name:u("chart.max")},{key:"min",name:u("chart.min")}];function F(o){t.currentAxisSummary=w(t.basicStyleForm.seriesSummary,e=>e.field===o)}const k=()=>{const o=V(s.chart.customAttr.basicStyle);t.basicStyleForm=P(o,V(g));const e=_(),y=[];for(let a=0;a<e.length;a++){const d=e[a];let i=w(t.basicStyleForm.seriesSummary,h=>h.field===d.dataeaseName);i?(i.summary==null&&(i.summary="sum"),i.show==null&&(i.show=!0)):i={field:d.dataeaseName,summary:"sum",show:!0},y.push(i)}t.basicStyleForm.seriesSummary=y,t.basicStyleForm.seriesSummary.length>0&&t.basicStyleForm.showSummary?(t.currentAxis=t.basicStyleForm.seriesSummary[0].field,F(t.currentAxis)):(t.currentAxis=void 0,t.currentAxisSummary=void 0)};return X(()=>{k()}),(o,e)=>{const y=z,a=D,d=R,i=M,h=$,U=J;return n(),f("div",rt,[l(U,{ref:"summaryForm",disabled:!t.basicStyleForm.showSummary,model:t.basicStyleForm,size:"small","label-position":"top"},{default:p(()=>[B("summaryLabel")?(n(),b(a,{key:0,label:x(u)("chart.table_summary_label"),class:c(["form-item-"+r.themes,"form-item"])},{default:p(()=>[l(y,{modelValue:t.basicStyleForm.summaryLabel,"onUpdate:modelValue":e[0]||(e[0]=m=>t.basicStyleForm.summaryLabel=m),type:"text",effect:r.themes,"max-length":10,onBlur:e[1]||(e[1]=m=>S("summaryLabel"))},null,8,["modelValue","effect"])]),_:1},8,["label","class"])):A("",!0),x(L)?A("",!0):(n(),b(a,{key:1,class:c(["form-item","form-item-"+r.themes])},{default:p(()=>[l(i,{modelValue:t.currentAxis,"onUpdate:modelValue":e[2]||(e[2]=m=>t.currentAxis=m),class:c(["form-item-"+r.themes,"form-item"]),effect:r.themes,onChange:F},{default:p(()=>[(n(!0),f(v,null,C(T.value,m=>(n(),b(d,{key:m.dataeaseName,value:m.dataeaseName,label:m.chartShowName??m.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","class","effect"])]),_:1},8,["class"])),t.currentAxis&&t.currentAxisSummary?(n(),f(v,{key:2},[l(a,{class:c(["form-item","form-item-"+r.themes])},{default:p(()=>[l(h,{size:"small",effect:r.themes,modelValue:t.currentAxisSummary.show,"onUpdate:modelValue":e[3]||(e[3]=m=>t.currentAxisSummary.show=m),onChange:e[4]||(e[4]=m=>S("seriesSummary"))},{default:p(()=>[Z(tt(x(u)("chart.table_show_summary")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),et("div",ot,[l(a,{class:c(["form-item","form-item-"+r.themes])},{default:p(()=>[l(i,{modelValue:t.currentAxisSummary.summary,"onUpdate:modelValue":e[5]||(e[5]=m=>t.currentAxisSummary.summary=m),class:c(["form-item-"+r.themes,"form-item"]),effect:r.themes,disabled:!t.currentAxisSummary.show,onChange:e[6]||(e[6]=m=>S("seriesSummary"))},{default:p(()=>[(n(),f(v,null,C(O,m=>l(d,{key:m.key,value:m.key,label:m.name},null,8,["value","label"])),64))]),_:1},8,["modelValue","class","effect","disabled"])]),_:1},8,["class"])])],64)):A("",!0)]),_:1},8,["disabled","model"])])}}});const bm=mt(it,[["__scopeId","data-v-7b7846cc"]]);export{bm as default};
