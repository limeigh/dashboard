import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{E as U}from"./el-checkbox-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as z,a as M}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as $,a as j}from"./el-form-item-0.0.0-dataease.js";import{o as J,G as P}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{b as k}from"./chart-0.0.0-dataease.js";import{d as W}from"./dvMain-0.0.0-dataease.js";import{d as q,af as G,X as R,w as X,y as Y,o as H,f as u,O as p,j as l,i as n,g as b,u as x,S as d,_ as A,W as v,a6 as w,a3 as K,a4 as Q,P as Z}from"./vue-0.0.0-dataease.js";import{E as ee,w as V,e as E,D as te}from"./lodash-0.0.0-dataease.js";import{_ as me}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const ae={style:{width:"100%"}},re={class:"indented-container"},se=q({__name:"SummarySelector",props:{chart:{type:Object,required:!0},themes:{type:String,default:"dark"},propertyInner:{type:Array}},emits:["onBasicStyleChange"],setup(a,{emit:C}){const N=W(),{batchOptStatus:L}=G(N),{t:c}=J(),o=a,B=r=>{var t;return(t=o.propertyInner)==null?void 0:t.includes(r)},e=R({basicStyleForm:JSON.parse(JSON.stringify(k)),currentAxis:void 0,currentAxisSummary:void 0}),I=C,S=(r,t=!1)=>{I("onBasicStyleChange",{data:e.basicStyleForm,requestData:t},r)};X([()=>o.chart.customAttr.basicStyle.showSummary,()=>o.chart.xAxis,()=>o.chart.yAxis],()=>{F()},{deep:!0});function _(){return o.chart.type==="table-info"?ee(o.chart.xAxis,r=>[2,3,4].includes(r.deType)):o.chart.yAxis}const O=Y(()=>_()),T=[{key:"sum",name:c("chart.sum")},{key:"avg",name:c("chart.avg")},{key:"max",name:c("chart.max")},{key:"min",name:c("chart.min")}];function g(r){e.currentAxisSummary=V(e.basicStyleForm.seriesSummary,t=>t.field===r)}const F=()=>{const r=E(o.chart.customAttr.basicStyle);e.basicStyleForm=te(r,E(k));const t=_(),f=[];for(let i=0;i<t.length;i++){const y=t[i];let s=V(e.basicStyleForm.seriesSummary,h=>h.field===y.dataeaseName);s?(s.summary==null&&(s.summary="sum"),s.show==null&&(s.show=!0)):s={field:y.dataeaseName,summary:"sum",show:!0},f.push(s)}e.basicStyleForm.seriesSummary=f,e.basicStyleForm.seriesSummary.length>0&&e.basicStyleForm.showSummary?(e.currentAxis=e.basicStyleForm.seriesSummary[0].field,g(e.currentAxis)):(e.currentAxis=void 0,e.currentAxisSummary=void 0)};return H(()=>{F()}),(r,t)=>{const f=P,i=$,y=M,s=z,h=U,D=j;return u(),p("div",ae,[l(D,{ref:"summaryForm",disabled:!e.basicStyleForm.showSummary,model:e.basicStyleForm,size:"small","label-position":"top"},{default:n(()=>[B("summaryLabel")?(u(),b(i,{key:0,label:x(c)("chart.table_summary_label"),class:d(["form-item-"+a.themes,"form-item"])},{default:n(()=>[l(f,{modelValue:e.basicStyleForm.summaryLabel,"onUpdate:modelValue":t[0]||(t[0]=m=>e.basicStyleForm.summaryLabel=m),type:"text",effect:a.themes,"max-length":10,onBlur:t[1]||(t[1]=m=>S("summaryLabel"))},null,8,["modelValue","effect"])]),_:1},8,["label","class"])):A("",!0),x(L)?A("",!0):(u(),b(i,{key:1,class:d(["form-item","form-item-"+a.themes])},{default:n(()=>[l(s,{modelValue:e.currentAxis,"onUpdate:modelValue":t[2]||(t[2]=m=>e.currentAxis=m),class:d(["form-item-"+a.themes,"form-item"]),effect:a.themes,onChange:g},{default:n(()=>[(u(!0),p(v,null,w(O.value,m=>(u(),b(y,{key:m.dataeaseName,value:m.dataeaseName,label:m.chartShowName??m.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","class","effect"])]),_:1},8,["class"])),e.currentAxis&&e.currentAxisSummary?(u(),p(v,{key:2},[l(i,{class:d(["form-item","form-item-"+a.themes])},{default:n(()=>[l(h,{size:"small",effect:a.themes,modelValue:e.currentAxisSummary.show,"onUpdate:modelValue":t[3]||(t[3]=m=>e.currentAxisSummary.show=m),onChange:t[4]||(t[4]=m=>S("seriesSummary"))},{default:n(()=>[K(Q(x(c)("chart.table_show_summary")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),Z("div",re,[l(i,{class:d(["form-item","form-item-"+a.themes])},{default:n(()=>[l(s,{modelValue:e.currentAxisSummary.summary,"onUpdate:modelValue":t[5]||(t[5]=m=>e.currentAxisSummary.summary=m),class:d(["form-item-"+a.themes,"form-item"]),effect:a.themes,disabled:!e.currentAxisSummary.show,onChange:t[6]||(t[6]=m=>S("seriesSummary"))},{default:n(()=>[(u(),p(v,null,w(T,m=>l(y,{key:m.key,value:m.key,label:m.name},null,8,["value","label"])),64))]),_:1},8,["modelValue","class","effect","disabled"])]),_:1},8,["class"])])],64)):A("",!0)]),_:1},8,["disabled","model"])])}}});const Ye=me(se,[["__scopeId","data-v-7b7846cc"]]);export{Ye as default};
