import{E as L,K as $,w as A,z as B,A as D,y as O,r as P,N as R,B as J,x as T,i as W,p as M,C as K}from"./element-plus-secondary-0.0.0-dataease.js";import{l as Y,b as j,o as q,T as G,U as o,W as r,u as i,_ as p,Y as k,$ as H,a0 as Q,a as d}from"./@vue-0.0.0-dataease.js";import{a as F,w as X}from"./watermark-0.0.0-dataease.js";import{personInfoApi as Z}from"./user-0.0.0-dataease.js";import{g,w as ee}from"./watermark-0.0.0-dataease2.js";import{f as te}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import re from"./ParamsTips-0.0.0-dataease.js";import{_ as ae}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";const oe=""+new URL("../png/watermark-demo-light-0.0.0-dataease.png",import.meta.url).href,me=""+new URL("../png/watermark-demo-dark-0.0.0-dataease.png",import.meta.url).href;const le={__name:"index",setup(ie){const{t:m}=te(),e=Y({userLoginInfo:{username:"",nickName:"",ip:""},cmOption:{tabSize:2,styleActiveLine:!0,lineNumbers:!0,line:!0,mode:"text/x-textile",theme:"solarized",hintOptions:{completeSingle:!1}},watermarkFormSource:null,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#999999","#000000","#FFFFFF"],watermarkForm:{enable:!1,enablePanelCustom:!1,type:"userName",content:"${time}-${ip}-${nickName}",watermark_color:"#999999",watermark_x_space:100,watermark_y_space:100,watermark_fontsize:20}}),x=()=>{w()},y=()=>{w()},V=()=>{e.watermarkForm={...e.watermarkFormSource};const a={settingContent:JSON.stringify(e.watermarkForm)};F(a).then(()=>{}),w()},v=()=>{const a={settingContent:JSON.stringify(e.watermarkForm)};F(a).then(()=>{L.success("保存成功")})},z=a=>{X().then(t=>{a(t)})},C=a=>{Z().then(t=>{a(t)})},N=()=>{z(a=>{e.watermarkForm=JSON.parse(a.data.settingContent),e.watermarkFormSource={...e.watermarkForm},w()})},w=()=>{let a,t=120;e.watermarkForm.type==="custom"?(a=e.watermarkForm.content,a=a.replaceAll("${ip}",e.userLoginInfo.ip),a=a.replaceAll("${username}",e.userLoginInfo.name),a=a.replaceAll("${nickName}",e.userLoginInfo.account),a=a.replaceAll("${time}",g()),t=a.length*e.watermarkForm.watermark_fontsize*.75,t=t>350?350:t):e.watermarkForm.type==="nickName"?a=e.userLoginInfo.account:e.watermarkForm.type==="ip"?(a=e.userLoginInfo.ip,t=a.length*e.watermarkForm.watermark_fontsize+30):e.watermarkForm.type==="time"?(a=g(),t=200):a=e.userLoginInfo.name;const u={watermark_enable:e.watermarkForm.enable,watermark_txt:a,watermark_width:t,watermark_color:e.watermarkForm.watermark_color,watermark_x_space:e.watermarkForm.watermark_x_space,watermark_y_space:e.watermarkForm.watermark_y_space,watermark_fontsize:e.watermarkForm.watermark_fontsize+"px"},n=document.getElementById("de-watermark-server");n&&n.remove(),e.watermarkForm.enable&&ee(u,"watermark-demo")};return j(()=>{C(a=>{e.userLoginInfo=a.data,N()})}),(a,t)=>{const u=$,n=A,E=B,s=D,I=O,S=P,U=R,_=J,h=T,f=W,c=M,b=K;return q(),G(c,{class:"watermark-table__content"},{default:o(()=>[r(c,{class:"watermark-main-outer"},{default:o(()=>[r(b,{class:"main-col-left",span:12},{default:o(()=>[r(h,{ref:"watermarkForm",model:e.watermarkForm,"label-width":"120px",size:"middle"},{default:o(()=>[r(n,{label:i(m)("watermark.enable"),style:{"text-align":"left"}},{default:o(()=>[r(u,{size:"middle",modelValue:e.watermarkForm.enable,"onUpdate:modelValue":t[0]||(t[0]=l=>e.watermarkForm.enable=l),onChange:x},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:"",style:{"text-align":"left"}},{default:o(()=>[r(E,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.enablePanelCustom,"onUpdate:modelValue":t[1]||(t[1]=l=>e.watermarkForm.enablePanelCustom=l)},null,8,["disabled","modelValue"]),p(" "+k(i(m)("watermark.enable_panel_custom")),1)]),_:1}),r(n,{label:i(m)("watermark.content"),style:{"text-align":"left"}},{default:o(()=>[r(I,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.type,"onUpdate:modelValue":t[2]||(t[2]=l=>e.watermarkForm.type=l)},{default:o(()=>[r(s,{label:i(m)("watermark.custom_content"),value:"custom"},null,8,["label"]),r(s,{label:i(m)("watermark.account"),value:"userName"},null,8,["label"]),r(s,{label:i(m)("watermark.nick_name"),value:"nickName"},null,8,["label"]),r(s,{label:i(m)("watermark.ip"),value:"ip"},null,8,["label"]),r(s,{label:i(m)("watermark.now"),value:"time"},null,8,["label"])]),_:1},8,["disabled","modelValue"])]),_:1},8,["label"]),H(r(n,{label:"",style:{"text-align":"left"}},{default:o(()=>[r(re),r(S,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.content,"onUpdate:modelValue":t[3]||(t[3]=l=>e.watermarkForm.content=l),type:"textarea",autosize:{minRows:4,maxRows:4}},null,8,["disabled","modelValue"])]),_:1},512),[[Q,e.watermarkForm.type==="custom"]]),r(n,{label:i(m)("watermark.watermark_color"),style:{"text-align":"left"}},{default:o(()=>[r(U,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.watermark_color,"onUpdate:modelValue":t[4]||(t[4]=l=>e.watermarkForm.watermark_color=l),predefine:e.predefineColors,size:"middle"},null,8,["disabled","modelValue","predefine"])]),_:1},8,["label"]),r(n,{label:i(m)("watermark.watermark_font_size"),style:{"text-align":"left"}},{default:o(()=>[r(_,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.watermark_fontsize,"onUpdate:modelValue":t[5]||(t[5]=l=>e.watermarkForm.watermark_fontsize=l),min:12,max:32,size:"middle"},null,8,["disabled","modelValue"]),t[8]||(t[8]=p(" px ",-1))]),_:1},8,["label"]),r(n,{label:i(m)("watermark.horizontal"),style:{"text-align":"left"}},{default:o(()=>[r(_,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.watermark_x_space,"onUpdate:modelValue":t[6]||(t[6]=l=>e.watermarkForm.watermark_x_space=l),min:10,max:400},null,8,["disabled","modelValue"]),t[9]||(t[9]=p(" px ",-1))]),_:1},8,["label"]),r(n,{label:i(m)("watermark.vertical"),style:{"text-align":"left"}},{default:o(()=>[r(_,{disabled:!e.watermarkForm.enable,modelValue:e.watermarkForm.watermark_y_space,"onUpdate:modelValue":t[7]||(t[7]=l=>e.watermarkForm.watermark_y_space=l),min:10,max:400},null,8,["disabled","modelValue"]),t[10]||(t[10]=p(" px ",-1))]),_:1},8,["label"])]),_:1},8,["model"]),r(c,{style:{"margin-left":"53px","text-align":"left"}},{default:o(()=>[r(f,{size:"middle",type:"i",onClick:V},{default:o(()=>[p(k(i(m)("watermark.reset")),1)]),_:1}),r(f,{size:"middle",type:"info",onClick:y},{default:o(()=>[p(k(i(m)("watermark.preview")),1)]),_:1}),r(f,{type:"primary",size:"middle",onClick:v},{default:o(()=>[p(k(i(m)("watermark.save")),1)]),_:1})]),_:1})]),_:1}),r(b,{span:12,style:{height:"100%"}},{default:o(()=>[...t[11]||(t[11]=[d("div",{id:"watermark-demo",style:{position:"relative",width:"100%",height:"100%",padding:"20px"}},[d("div",{class:"demo-preview"},[d("img",{style:{height:"100%"},src:oe})]),d("div",{class:"demo-preview",style:{"margin-top":"15px"}},[d("img",{style:{height:"100%"},src:me})])],-1)])]),_:1})]),_:1})]),_:1})}}},vr=ae(le,[["__scopeId","data-v-2d025feb"]]);export{vr as default};
