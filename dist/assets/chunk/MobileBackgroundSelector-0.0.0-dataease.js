import{i as F,z as T,w as $,N as W,e as J,L as q,p as A,x as Y,E as G}from"./element-plus-secondary-0.0.0-dataease.js";import{a as H}from"./chart-0.0.0-dataease.js";import{b as K,u as h,i as k}from"./imgUtils-0.0.0-dataease.js";import{s as Q}from"./snapshot-0.0.0-dataease.js";import{h as X}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import Z from"./ImgViewDialog-0.0.0-dataease.js";import{u as ee}from"./index-0.0.0-dataease.js";import{d as te}from"./dvMain-0.0.0-dataease.js";import{s as oe}from"./pinia-0.0.0-dataease.js";import{h as ie}from"./lodash-es-0.0.0-dataease.js";import{d as re,r as le,l as me,b as ae,w as se,ae as ne,o as b,c as C,a as n,W as r,U as a,_ as g,Y as c,u as t,z as p,R as y,T as pe}from"./@vue-0.0.0-dataease.js";import{_ as de}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./login-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";const ce={class:"mobile-background-selector"},ue={class:"indented-container"},ge={class:"indented-item"},fe={class:"indented-container"},be=15e6,_e=re({__name:"MobileBackgroundSelector",props:{themes:{default:"light"}},emits:["styleChange"],setup(Se,{emit:V}){const E=Q(),{t:u}=X(),_=le(null),S=te(),{canvasStyleData:e}=oe(S),z=V,l=me({fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1}),I=()=>{_.value.click()},U=()=>{G.success(u("visualization.pic_size_error"))},w=o=>{const i=o.target.files[0];if(i.size>be){U();return}h(i,d=>{e.value.mobileSetting.background=d,l.fileList=[{url:k(e.value.mobileSetting.background)}],s()})},v=()=>{e.value.mobileSetting.background?l.fileList.push({url:k(e.value.mobileSetting.background)}):l.fileList=[]},M=()=>{l.uploadDisabled=!1,e.value.mobileSetting.background=null,l.fileList=[],s()},B=o=>{l.dialogImageUrl=o.url,l.dialogVisible=!0},L=o=>{h(o.file,i=>{e.value.mobileSetting.background=i,s()})},s=()=>{N()},N=()=>{z("styleChange");const o=ie(e.value);S.setCanvasStyle(o),ee().emitter.emit("onMobileStatusChange",{type:"setCanvasStyle",value:JSON.parse(JSON.stringify(t(o)))}),E.recordSnapshotCache("commitStyle")};return ae(()=>{v()}),se(()=>e.value.mobileSetting.background,()=>{v()}),(o,i)=>{const d=T,f=$,D=W,O=ne("Plus"),P=J,R=q,x=A,j=Y;return b(),C("div",ce,[n("input",{id:"input",ref_key:"files",ref:_,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:i[0]||(i[0]=m=>{m.target.value=""}),onChange:w},null,544),r(d,{size:"small",effect:o.themes,modelValue:t(e).mobileSetting.customSetting,"onUpdate:modelValue":i[1]||(i[1]=m=>t(e).mobileSetting.customSetting=m),onChange:s},{default:a(()=>[g(c(o.$t("visualization.mobile_style_setting_tips")),1)]),_:1},8,["effect","modelValue"]),r(j,{"label-position":"top",style:{width:"100%","padding-left":"22px","margin-bottom":"16px"}},{default:a(()=>[r(f,{class:p(["form-item no-margin-bottom","form-item-"+o.themes])},{default:a(()=>[r(d,{size:"small",effect:o.themes,disabled:!t(e).mobileSetting.customSetting,modelValue:t(e).mobileSetting.backgroundColorSelect,"onUpdate:modelValue":i[2]||(i[2]=m=>t(e).mobileSetting.backgroundColorSelect=m),onChange:s},{default:a(()=>[g(c(o.$t("chart.color")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),n("div",ue,[n("div",ge,[r(f,{class:p(["form-item","form-item-"+o.themes])},{default:a(()=>[r(D,{modelValue:t(e).mobileSetting.color,"onUpdate:modelValue":i[3]||(i[3]=m=>t(e).mobileSetting.color=m),effect:o.themes,disabled:!t(e).mobileSetting.backgroundColorSelect,"trigger-width":108,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:t(H),onChange:s},null,8,["modelValue","effect","disabled","predefine"])]),_:1},8,["class"])])]),r(f,{class:p(["form-item no-margin-bottom","form-item-"+o.themes])},{default:a(()=>[r(d,{size:"small",effect:o.themes,disabled:!t(e).mobileSetting.customSetting,modelValue:t(e).mobileSetting.backgroundImageEnable,"onUpdate:modelValue":i[4]||(i[4]=m=>t(e).mobileSetting.backgroundImageEnable=m),onChange:s},{default:a(()=>[g(c(t(u)("visualization.background")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),n("div",fe,[n("div",{class:p(["indented-item",{disabled:!t(e).mobileSetting.backgroundImageEnable}])},[n("div",{class:p(["avatar-uploader-container",`img-area_${o.themes}`])},[r(R,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":B,"on-remove":M,"before-upload":t(K),"http-request":L,"file-list":l.fileList,disabled:!t(e).mobileSetting.backgroundImageEnable},{default:a(()=>[r(P,null,{default:a(()=>[r(O)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),r(x,null,{default:a(()=>[t(e).mobileSetting.background?y("",!0):(b(),C("span",{key:0,style:{"margin-top":"2px"},class:p(["image-hint",`image-hint_${o.themes}`])},c(t(u)("visualization.pic_import_tips",["1M"])),3)),t(e).mobileSetting.background?(b(),pe(t(F),{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:I,disabled:!t(e).mobileSetting.backgroundImageEnable},{default:a(()=>[g(c(t(u)("visualization.re_upload")),1)]),_:1},8,["disabled"])):y("",!0)]),_:1})],2),r(Z,{modelValue:l.dialogVisible,"onUpdate:modelValue":i[5]||(i[5]=m=>l.dialogVisible=m),"image-url":l.dialogImageUrl},null,8,["modelValue","image-url"])],2)])]),_:1})])}}});const xo=de(_e,[["__scopeId","data-v-1855bb22"]]);export{xo as default};
