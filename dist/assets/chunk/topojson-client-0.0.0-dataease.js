function b(r){return r}function h(r){if(r==null)return b;var n,i,a=r.scale[0],c=r.scale[1],o=r.translate[0],f=r.translate[1];return function(s,g){g||(n=i=0);var l=2,e=s.length,t=new Array(e);for(t[0]=(n+=s[0])*a+o,t[1]=(i+=s[1])*c+f;l<e;)t[l]=s[l],++l;return t}}function d(r,n){for(var i,a=r.length,c=a-n;c<--a;)i=r[c],r[c++]=r[a],r[a]=i}function x(r,n){return typeof n=="string"&&(n=r.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(i){return m(r,i)})}:m(r,n)}function m(r,n){var i=n.id,a=n.bbox,c=n.properties==null?{}:n.properties,o=v(r,n);return i==null&&a==null?{type:"Feature",properties:c,geometry:o}:a==null?{type:"Feature",id:i,properties:c,geometry:o}:{type:"Feature",id:i,bbox:a,properties:c,geometry:o}}function v(r,n){var i=h(r.transform),a=r.arcs;function c(e,t){t.length&&t.pop();for(var u=a[e<0?~e:e],p=0,y=u.length;p<y;++p)t.push(i(u[p],p));e<0&&d(t,y)}function o(e){return i(e)}function f(e){for(var t=[],u=0,p=e.length;u<p;++u)c(e[u],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=f(e);t.length<4;)t.push(t[0]);return t}function g(e){return e.map(s)}function l(e){var t=e.type,u;switch(t){case"GeometryCollection":return{type:t,geometries:e.geometries.map(l)};case"Point":u=o(e.coordinates);break;case"MultiPoint":u=e.coordinates.map(o);break;case"LineString":u=f(e.arcs);break;case"MultiLineString":u=e.arcs.map(f);break;case"Polygon":u=g(e.arcs);break;case"MultiPolygon":u=e.arcs.map(g);break;default:return null}return{type:t,coordinates:u}}return l(n)}export{x as f};
