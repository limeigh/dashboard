import{d as w,r,o as M,a as h,f as g,O as E,_ as I,n as k}from"./vue-0.0.0-dataease.js";import{_ as B}from"./_plugin-vue_export-helper-0.0.0-dataease.js";const C=["id"],x=w({__name:"OnlineMapGaode",props:{mapKey:{},securityCode:{}},setup(m){const c=r("de-map-container"),_=[116.397428,39.90923],t=r(null),l=r(!1),s=m,f=()=>{if(!s.mapKey)return;const e=`https://webapi.amap.com/maps?v=2.0&key=${s.mapKey}`;v(e).then(()=>{var n;if(t.value){(n=t.value)==null||n.destroy(),t.value=null,l.value=!0,setTimeout(()=>{c.value=c.value+"-de-",l.value=!1,k(()=>{i()})},1500);return}i()}).catch(n=>{console.error(n),t.value&&(t.value.destroy(),t.value=null)})},i=()=>{window.AMap&&(t.value=new window.AMap.Map(c.value,{viewMode:"2D",zoom:11,center:_}))},v=o=>new Promise(function(e,n){var p;const u="de-gaode-script-id";let d=document.getElementById(u);d&&((p=d.parentElement)==null||p.removeChild(d),d=null,window.AMap=null);const a=document.createElement("script");a.id=u,a.onload=function(){return e(null)},a.onerror=function(){return n(new Error("Load script from ".concat(o," failed")))},a.src=o;const y=document.head||document.getElementsByTagName("head")[0];(document.body||y).appendChild(a)});return M(()=>{f()}),h(()=>{var n;const o="de-gaode-script-id";let e=document.getElementById(o);e&&((n=e.parentElement)==null||n.removeChild(e),e=null,window.AMap=null)}),(o,e)=>l.value?I("",!0):(g(),E("div",{key:0,class:"de-map-container",id:c.value},null,8,C))}});const O=B(x,[["__scopeId","data-v-b65a5291"]]);export{O as default};
