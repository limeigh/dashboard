import{d as P}from"./dayjs.min-0.0.0-dataease.js";import{t as ge,u as ke,b as he,T as G,a as Se,c as _e,d as Pe,e as Te,D as Ce,C as De}from"./el-date-picker-0.0.0-dataease.js";import{l as Ve,q as we,_ as Re,E as xe,i as J,w as Ae}from"./index-0.0.0-dataease.js";import{d as Q,x as Ee,y as f,r as W,f as Oe,O as ye,P as p,S as u,u as t,a4 as D,j as V,_ as Me,A as B,L as Be,a2 as He}from"./vue-0.0.0-dataease.js";import{E as Ie}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{v as H}from"./lodash-0.0.0-dataease.js";const Ke=Ve({...ge,parsedValue:{type:we(Array)}}),Ne=Q({__name:"panel-time-range",props:Ke,emits:["pick","select-range","set-picker-option"],setup(h,{emit:r}){const o=h,m=(e,a)=>{const s=[];for(let l=e;l<=a;l++)s.push(l);return s},{t:S,lang:v}=xe(),n=J("time"),w=J("picker"),R=Ee("EP_PICKER_BASE"),{arrowControl:T,disabledHours:I,disabledMinutes:K,disabledSeconds:N,defaultValue:x}=R.props,X=f(()=>[n.be("range-picker","body"),n.be("panel","content"),n.is("arrow",T),k.value?"has-seconds":""]),Y=f(()=>[n.be("range-picker","body"),n.be("panel","content"),n.is("arrow",T),k.value?"has-seconds":""]),b=f(()=>o.parsedValue[0]),g=f(()=>o.parsedValue[1]),Z=ke(o),ee=()=>{r("pick",Z.value,!1)},k=f(()=>o.format.includes("ss")),U=f(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),ae=(e=!1)=>{r("pick",[b.value,g.value],e)},ne=e=>{j(e.millisecond(0),g.value)},te=e=>{j(b.value,e.millisecond(0))},se=e=>{const a=e.map(l=>P(l).locale(v.value)),s=L(a);return a[0].isSame(s[0])&&a[1].isSame(s[1])},j=(e,a)=>{o.visible&&r("pick",[e,a],!0)},oe=f(()=>b.value>g.value),C=W([0,2]),le=(e,a)=>{r("select-range",e,a,"min"),C.value=[e,a]},F=f(()=>k.value?11:8),re=(e,a)=>{r("select-range",e,a,"max");const s=t(F);C.value=[e+s,a+s]},ce=e=>{const a=k.value?[0,3,6,11,14,17]:[0,3,8,11],s=["hours","minutes"].concat(k.value?["seconds"]:[]),c=(a.indexOf(C.value[0])+e+a.length)%a.length,i=a.length/2;c<i?y.start_emitSelectRange(s[c]):y.end_emitSelectRange(s[c-i])},ie=e=>{const a=e.code,{left:s,right:l,up:c,down:i}=Ie;if([s,l].includes(a)){ce(a===s?-1:1),e.preventDefault();return}if([c,i].includes(a)){const d=a===c?-1:1,_=C.value[0]<F.value?"start":"end";y[`${_}_scrollDown`](d),e.preventDefault();return}},A=(e,a)=>{const s=I?I(e):[],l=e==="start",i=(a||(l?g.value:b.value)).hour(),d=l?m(i+1,23):m(0,i-1);return H(s,d)},E=(e,a,s)=>{const l=K?K(e,a):[],c=a==="start",i=s||(c?g.value:b.value),d=i.hour();if(e!==d)return l;const _=i.minute(),M=c?m(_+1,59):m(0,_-1);return H(l,M)},O=(e,a,s,l)=>{const c=N?N(e,a,s):[],i=s==="start",d=l||(i?g.value:b.value),_=d.hour(),M=d.minute();if(e!==_||a!==M)return c;const z=d.second(),be=i?m(z+1,59):m(0,z-1);return H(c,be)},L=([e,a])=>[$(e,"start",!0,a),$(a,"end",!1,e)],{getAvailableHours:ue,getAvailableMinutes:de,getAvailableSeconds:pe}=he(A,E,O),{timePickerOptions:y,getAvailableTime:$,onSetOption:q}=Se({getAvailableHours:ue,getAvailableMinutes:de,getAvailableSeconds:pe}),me=e=>e?B(e)?e.map(a=>P(a,o.format).locale(v.value)):P(e,o.format).locale(v.value):null,fe=e=>e?B(e)?e.map(a=>a.format(o.format)):e.format(o.format):null,ve=()=>{if(B(x))return x.map(a=>P(a).locale(v.value));const e=P(x).locale(v.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",fe]),r("set-picker-option",["parseUserInput",me]),r("set-picker-option",["isValidValue",se]),r("set-picker-option",["handleKeydownInput",ie]),r("set-picker-option",["getDefaultValue",ve]),r("set-picker-option",["getRangeAvailableTime",L]),(e,a)=>e.actualVisible?(Oe(),ye("div",{key:0,class:u([t(n).b("range-picker"),t(w).b("panel")])},[p("div",{class:u(t(n).be("range-picker","content"))},[p("div",{class:u(t(n).be("range-picker","cell"))},[p("div",{class:u(t(n).be("range-picker","header"))},D(t(S)("el.datepicker.startTime")),3),p("div",{class:u(t(X))},[V(G,{ref:"minSpinner",role:"start","show-seconds":t(k),"am-pm-mode":t(U),"arrow-control":t(T),"spinner-date":t(b),"disabled-hours":A,"disabled-minutes":E,"disabled-seconds":O,onChange:ne,onSetOption:t(q),onSelectRange:le},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),p("div",{class:u(t(n).be("range-picker","cell"))},[p("div",{class:u(t(n).be("range-picker","header"))},D(t(S)("el.datepicker.endTime")),3),p("div",{class:u(t(Y))},[V(G,{ref:"maxSpinner",role:"end","show-seconds":t(k),"am-pm-mode":t(U),"arrow-control":t(T),"spinner-date":t(g),"disabled-hours":A,"disabled-minutes":E,"disabled-seconds":O,onChange:te,onSetOption:t(q),onSelectRange:re},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),p("div",{class:u(t(n).be("panel","footer"))},[p("button",{type:"button",class:u([t(n).be("panel","btn"),"cancel"]),onClick:s=>ee()},D(t(S)("el.datepicker.cancel")),11,["onClick"]),p("button",{type:"button",class:u([t(n).be("panel","btn"),"confirm"]),disabled:t(oe),onClick:s=>ae()},D(t(S)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Me("v-if",!0)}});var Ue=Re(Ne,[["__file","panel-time-range.vue"]]);P.extend(_e);var je=Q({name:"ElTimePicker",install:null,props:{...Pe,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(h,r){const o=W(),[m,S]=h.isRange?["timerange",Ue]:["time",Te],v=n=>r.emit("update:modelValue",n);return Be("ElPopperOptions",h.popperOptions),r.expose({focus:()=>{var n;(n=o.value)==null||n.focus()},blur:()=>{var n;(n=o.value)==null||n.blur()},handleOpen:()=>{var n;(n=o.value)==null||n.handleOpen()},handleClose:()=>{var n;(n=o.value)==null||n.handleClose()}}),()=>{var n;const w=(n=h.format)!=null?n:Ce;return V(De,He(h,{ref:o,type:m,format:w,"onUpdate:modelValue":v}),{default:R=>V(S,R,null)})}}});const Je=Ae(je);export{Je as E};
