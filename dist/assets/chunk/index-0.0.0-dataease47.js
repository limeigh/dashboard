import{a as s}from"./index-0.0.0-dataease.js";import{e as D}from"./eventBus-0.0.0-dataease.js";import{d as T}from"./dvMain-0.0.0-dataease.js";import{v as W,N as e}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{_ as F}from"./MobileInPc.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import{W as y,T as b}from"./canvasUtils-0.0.0-dataease.js";import{d as j,r as L,aj as Q,a as U,f as E,O as Z,P as $,g as R,_ as G,j as H,u as q,W as A}from"./vue-0.0.0-dataease.js";import{_ as K}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./DePreview-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./Component-0.0.0-dataease18.js";import"./DeShortcutKey-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./canvasStyle-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./Component-0.0.0-dataease17.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-form-item-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./el-tree-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tree-select-0.0.0-dataease.js";import"./el-checkbox-group-0.0.0-dataease.js";import"./el-tabs-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./el-dropdown-menu-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import"./icon_more_outlined-0.0.0-dataease.js";import"./more_v-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./icon_dataset-0.0.0-dataease.js";import"./icon_warning_filled-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./vuedraggable-es-0.0.0-dataease.js";import"./time-format-0.0.0-dataease.js";import"./dayjs.min-0.0.0-dataease.js";import"./time-format-dayjs-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./EmptyBackground-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./el-time-picker-0.0.0-dataease.js";import"./el-date-picker-0.0.0-dataease.js";import"./arrays-0.0.0-dataease.js";import"./index-0.0.0-dataease18.js";import"./el-input-number-0.0.0-dataease.js";import"./icon_admin_outlined-0.0.0-dataease.js";import"./index-0.0.0-dataease27.js";import"./index-0.0.0-dataease20.js";import"./index-0.0.0-dataease28.js";import"./index-0.0.0-dataease29.js";import"./use-route-0.0.0-dataease.js";import"./index-0.0.0-dataease30.js";import"./index-0.0.0-dataease31.js";import"./index-0.0.0-dataease32.js";import"./index-0.0.0-dataease33.js";import"./el-virtual-list-0.0.0-dataease.js";import"./raf-0.0.0-dataease.js";import"./el-select-v2-0.0.0-dataease.js";import"./fixed-size-list-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./field-list-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./Attr-0.0.0-dataease22.js";import"./CommonAttr-0.0.0-dataease.js";import"./el-collapse-item-0.0.0-dataease.js";import"./CommonBorderSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-color-picker-0.0.0-dataease.js";import"./position-0.0.0-dataease.js";import"./BackgroundOverallCommon-0.0.0-dataease.js";import"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import"./board-list-0.0.0-dataease.js";import"./ImgViewDialog-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./icon_italic_outlined-0.0.0-dataease.js";import"./icon_right-alignment_outlined-0.0.0-dataease.js";import"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./CollapseSwitchItem-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";import"./icon_replace_outlined-0.0.0-dataease.js";import"./icon_download_outlined-0.0.0-dataease.js";import"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./watermark-0.0.0-dataease2.js";import"./user-0.0.0-dataease.js";import"./el-divider-0.0.0-dataease.js";import"./ChartComponentS2-0.0.0-dataease.js";import"./ViewTrackBar-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./ChartError-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./LinkageSet-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./dv-empty-0.0.0-dataease.js";import"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./Component-0.0.0-dataease16.js";import"./index-0.0.0-dataease34.js";import"./ChartComponentG2Plot-0.0.0-dataease.js";import"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./DrillPath-0.0.0-dataease.js";import"./DeRichTextView-0.0.0-dataease.js";import"./Component-0.0.0-dataease12.js";import"./ChartEmptyInfo-0.0.0-dataease.js";import"./chart-dark-list-0.0.0-dataease.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./Component-0.0.0-dataease13.js";import"./Attr-0.0.0-dataease16.js";import"./Component-0.0.0-dataease10.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import"./Component-0.0.0-dataease5.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease3.js";import"./Attr-0.0.0-dataease.js";import"./Component-0.0.0-dataease3.js";import"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import"./Attr-0.0.0-dataease9.js";import"./Component-0.0.0-dataease6.js";import"./Attr-0.0.0-dataease6.js";import"./Component-0.0.0-dataease4.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease4.js";import"./Component-0.0.0-dataease14.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease5.js";import"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import"./Attr-0.0.0-dataease10.js";import"./Component-0.0.0-dataease11.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease6.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease7.js";import"./Attr-0.0.0-dataease7.js";import"./Component-0.0.0-dataease9.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease8.js";import"./Component-0.0.0-dataease7.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease9.js";import"./Component-0.0.0-dataease15.js";import"./Attr-0.0.0-dataease19.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease10.js";import"./Attr-0.0.0-dataease15.js";import"./DatasetSelect-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./Threshold-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./Component-0.0.0-dataease2.js";import"./icon_left_outlined-0.0.0-dataease.js";const tt={class:"panel-mobile"},ot=j({__name:"index",setup(it){const l=L(!1),a=T(),x=i=>{i.x=1,i.sizeX=72,i.y=a.componentData.reduce((t,o)=>Math.max(t,o.y+o.sizeY),1),i.sizeY=20},M=i=>{if(i.data.type==="panelInit"){const{componentData:t,canvasStyleData:o,dvInfo:n,canvasViewInfo:m,isEmbedded:v}=i.data.value;if(t.forEach(r=>{var d;const{mx:c,my:g,mSizeX:_,mSizeY:V,mStyle:S,mCommonBackground:B,mEvents:u,mPropValue:h}=r;r.x=c,r.y=g,r.sizeX=_,r.sizeY=V,r.style=e(S||r.style),r.commonBackground=e(B||r.commonBackground),r.events=e(u||r.events),r.component==="VQuery"&&(r.propValue=e(h||r.propValue)),r.component==="DeTabs"&&((d=r.propValue)==null||d.forEach(k=>{var f;(f=k.componentData)==null||f.forEach(p=>{const{mStyle:C,mCommonBackground:I,mEvents:w,mPropValue:z}=p;p.style=e(C||p.style),p.commonBackground=e(I||p.commonBackground),p.events=e(w||p.events),p.component==="VQuery"&&(p.propValue=e(z||p.propValue))})}))}),a.setComponentData(t),a.setMobileInPc(!0),a.setCanvasStyle(o),a.updateCurDvInfo(n),a.setCanvasViewInfo(m),D.emit("doCanvasInit-canvas-main"),v)return;l.value=!0}if(i.data.type==="componentStyleChange"){const{type:t,component:o,otherComponent:n}=i.data.value;if(t==="renderChart")y(o),s().emitter.emit("renderChart-"+o.id,o);else if(t==="calcData")y(o),s().emitter.emit("calcData-"+o.id,o);else if(t==="updateTitle")y(o),s().emitter.emit("updateTitle-"+o.id);else if(["style","commonBackground","events","propValue"].includes(t)){const m=b(o.id);m[t]=o[t]}else if(["syncPcDesign"].includes(t)){const m=b(o.id);m.style=o.style,m.commonBackground=o.commonBackground,m.events=o.events,m.propValue=o.propValue,y(n),m.component==="VQuery"?s().emitter.emit("renderChart-"+o.id,n):m.component==="UserView"&&s().emitter.emit("calcData-"+o.id,n)}}if(i.data.type==="addToMobile"){const t=i.data.value;x(t),a.componentData.push(t),D.emit("doCanvasInit-canvas-main")}i.data.type==="setCanvasStyle"&&a.setCanvasStyle(i.data.value),["mobileSave","mobilePatch"].includes(i.data.type)&&window.parent.postMessage({type:`${i.data.type}FromMobile`,value:a.componentData.reduce((t,o)=>{var u;const{x:n,y:m,sizeX:v,sizeY:r,id:c,component:g,propValue:_,style:V,events:S,commonBackground:B}=o;return t[c]={x:n,y:m,sizeX:v,sizeY:r,component:g,events:e(S),propValue:e(_),style:JSON.parse(JSON.stringify(V)),commonBackground:JSON.parse(JSON.stringify(B))},o.component==="DeTabs"&&(t[c].tab={},(u=o.propValue)==null||u.forEach(h=>{var d;(d=h.componentData)==null||d.forEach(k=>{const{x:f,y:p,sizeX:C,sizeY:I,id:w,style:z,events:P,propValue:Y,commonBackground:X}=k;t[c].tab[w]={x:f,y:p,sizeX:C,sizeY:I,style:JSON.parse(JSON.stringify(z)),events:e(P),propValue:e(Y),commonBackground:JSON.parse(JSON.stringify(X))}})})),t},{})},"*")},N=()=>{l.value=!1,setTimeout(()=>{l.value=!0})},J=(i,t)=>{window.parent.postMessage({type:i,value:t},"*")};Q(()=>{window.parent.postMessage({type:"panelInit",value:!0},"*"),window.addEventListener("message",M),s({name:"onMobileStatusChange",callback:({type:i,value:t})=>{O(i,t)}}),s({name:"curComponentChange",callback:({type:i,value:t})=>{J(i,t)}})});const O=(i,t)=>{window.parent.postMessage({type:i,value:t},"*"),i==="delFromMobile"&&D.emit("removeMatrixItemById-canvas-main",t)};return U(()=>{window.removeEventListener("message",M)}),(i,t)=>(E(),Z(A,null,[$("div",tt,[l.value?(E(),R(F,{key:0})):G("",!0)]),H(q(W),{onInitIframe:N,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvRW50cmFuY2Vz"})],64))}});const Zr=K(ot,[["__scopeId","data-v-5cda801d"]]);export{Zr as default};
