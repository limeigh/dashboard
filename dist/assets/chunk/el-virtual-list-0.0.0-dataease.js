import{O as Y}from"./lodash-0.0.0-dataease.js";import{y as d,q as J,d as Q,r as F,X as tt,u as b,w as et,a as rt,h as B,a8 as nt}from"./vue-0.0.0-dataease.js";import{as as m,l as N,q as g,i as P,aM as at}from"./index-0.0.0-dataease.js";import{m as ot}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{c as st,r as lt}from"./raf-0.0.0-dataease.js";var G=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function it(t,e){return!!(t===e||G(t)&&G(e))}function ct(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!it(t[n],e[n]))return!1;return!0}function ut(t,e){e===void 0&&(e=ct);var n=null;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var c=t.apply(this,a);return n={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){n=null},i}const Mt=()=>{const e=J().proxy.$props;return d(()=>{const n=(i,a,o)=>({});return e.perfMode?Y(n):ut(n)})},wt=50,_t="itemRendered",zt="scroll",dt="forward",mt="backward",Ct="auto",It="smart",Ot="start",xt="center",Dt="end",E="horizontal",k="vertical",ft="ltr",q="rtl",vt="negative",ht="positive-ascending",gt="positive-descending",pt={[E]:"left",[k]:"top"},St=20,A=m({type:g([Number,Function]),required:!0}),M=m({type:Number}),w=m({type:Number,default:2}),yt=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),T=m({type:Number,required:!0}),H=m({type:String,values:["horizontal","vertical"],default:k}),V=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>ot([])},direction:yt,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Ft=N({cache:w,estimatedItemSize:M,layout:H,initScrollOffset:_,total:T,itemSize:A,...V}),z={type:Number,default:6},$={type:Number,default:0},j={type:Number,default:2},Bt=N({columnCache:w,columnWidth:A,estimatedColumnWidth:M,estimatedRowHeight:M,initScrollLeft:_,initScrollTop:_,itemKey:{type:g(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:w,rowHeight:A,totalColumn:T,totalRow:T,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:$,scrollbarEndGap:j,role:String,...V}),bt=N({alwaysOn:Boolean,class:String,layout:H,total:T,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:$,endGap:j,visible:Boolean}),Pt=(t,e)=>t<e?dt:mt,Gt=t=>t===ft||t===q||t===E,kt=t=>t===q;let v=null;function qt(t=!1){if(v===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?v=gt:(e.scrollLeft=1,e.scrollLeft===0?v=vt:v=ht),document.body.removeChild(e),v}return v}function Et({move:t,size:e,bar:n},i){const a={},o=`translate${n.axis}(${t}px)`;return a[n.size]=e,a.transform=o,a.msTransform=o,a.webkitTransform=o,i==="horizontal"?a.height="100%":a.width="100%",a}const Ht=Q({name:"ElVirtualScrollBar",props:bt,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=d(()=>t.startGap+t.endGap),i=P("virtual-scrollbar"),a=P("scrollbar"),o=F(),c=F();let C=null,R=null;const l=tt({isDragging:!1,traveled:0}),s=d(()=>at[t.layout]),I=d(()=>t.clientSize-b(n)),K=d(()=>({position:"absolute",width:`${E===t.layout?I.value:t.scrollbarSize}px`,height:`${E===t.layout?t.scrollbarSize:I.value}px`,[pt[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const r=t.ratio,u=t.clientSize;if(r>=100)return Number.POSITIVE_INFINITY;if(r>=50)return r*u/100;const f=u/3;return Math.floor(Math.min(Math.max(r*u,St),f))}),U=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const r=`${L.value}px`;return Et({bar:s.value,size:r,move:l.traveled},t.layout)}),h=d(()=>Math.floor(t.clientSize-L.value-b(n))),W=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",p);const r=b(c);r&&(R=document.onselectstart,document.onselectstart=()=>!1,r.addEventListener("touchmove",S,{passive:!0}),r.addEventListener("touchend",p))},O=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",p),document.onselectstart=R,R=null;const r=b(c);r&&(r.removeEventListener("touchmove",S),r.removeEventListener("touchend",p))},x=r=>{r.stopImmediatePropagation(),!(r.ctrlKey||[1,2].includes(r.button))&&(l.isDragging=!0,l[s.value.axis]=r.currentTarget[s.value.offset]-(r[s.value.client]-r.currentTarget.getBoundingClientRect()[s.value.direction]),e("start-move"),W())},p=()=>{l.isDragging=!1,l[s.value.axis]=0,e("stop-move"),O()},S=r=>{const{isDragging:u}=l;if(!u||!c.value||!o.value)return;const f=l[s.value.axis];if(!f)return;st(C);const y=(o.value.getBoundingClientRect()[s.value.direction]-r[s.value.client])*-1,X=c.value[s.value.offset]-f,D=y-X;C=lt(()=>{l.traveled=Math.max(t.startGap,Math.min(D,h.value)),e("scroll",D,h.value)})},Z=r=>{const u=Math.abs(r.target.getBoundingClientRect()[s.value.direction]-r[s.value.client]),f=c.value[s.value.offset]/2,y=u-f;l.traveled=Math.max(0,Math.min(y,h.value)),e("scroll",y,h.value)};return et(()=>t.scrollFrom,r=>{l.isDragging||(l.traveled=Math.ceil(r*h.value))}),rt(()=>{O()}),()=>B("div",{role:"presentation",ref:o,class:[i.b(),t.class,(t.alwaysOn||l.isDragging)&&"always-on"],style:K.value,onMousedown:nt(Z,["stop","prevent"]),onTouchstartPrevent:x},B("div",{ref:c,class:a.e("thumb"),style:U.value,onMousedown:x},[]))}});export{Ct as A,mt as B,xt as C,wt as D,Dt as E,dt as F,E as H,_t as I,q as R,zt as S,k as V,Ft as a,bt as b,qt as c,ht as d,vt as e,Ht as f,Pt as g,gt as h,kt as i,Ot as j,It as k,Gt as l,Mt as u,Bt as v};
