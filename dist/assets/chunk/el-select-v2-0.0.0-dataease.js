import{d as Ee,f as k,O as K,a4 as X,S as V,T as _,y as h,x as Te,Z as P,P as $,a8 as U,e as Oe,j as T,i as L,r as E,w as ue,u as Fe,a2 as _e,ak as vl,n as re,B as ke,al as hl,X as at,A as ge,K as De,G as gt,o as gl,t as bt,L as yt,a7 as bl,R as et,_ as x,W as St,a6 as Vt,a3 as Ct,g as ie,a9 as we,ag as yl,l as tt,U as Sl,at as Vl,ad as Cl,ae as Il}from"./vue-0.0.0-dataease.js";import{u as wl,a as Ol,E as kl}from"./index-0.0.0-dataease4.js";import{t as It,E as Tl}from"./index-0.0.0-dataease6.js";import{k as El,a3 as Et,ah as Mt,E as $t,a5 as Ml,a6 as $l,ad as Nl,ae as zl,af as Ll,a2 as Rl,j as Bl}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as Nt}from"./el-checkbox-0.0.0-dataease.js";import{_ as He,i as ye,l as zt,q as Z,Y as Fl,a2 as Dl,ae as Hl,B as nt,aa as Al,a3 as Pl,E as Lt,U as Kl,a8 as Rt,av as Wl,ak as jl,a7 as Ul,o as he,w as Gl}from"./index-0.0.0-dataease.js";import{a as F,h as Ql,n as lt,u as ql}from"./lodash-0.0.0-dataease.js";import{c as Yl,F as Zl}from"./fixed-size-list-0.0.0-dataease.js";import{A as wt,C as Ot,E as Xl,j as Jl,D as xl,l as kt,k as _l}from"./el-virtual-list-0.0.0-dataease.js";import{e as ea}from"./strings-0.0.0-dataease.js";import{C as ta}from"./index-0.0.0-dataease5.js";import{u as la}from"./el-select-0.0.0-dataease.js";const aa=Ee({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:ye("select")}}});function na(e,n,s,c,o,r){return k(),K("div",{class:V(e.ns.be("group","title")),style:_({...e.style,lineHeight:`${e.height}px`})},X(e.item.label),7)}var oa=He(aa,[["render",na],["__file","group-item.vue"]]);function Bt(e,{emit:n}){return{hoverItem:()=>{e.disabled||n("hover",e.index)},selectOptionClick:()=>{e.disabled||n("select",e.item,e.index)}}}const Ft={label:"label",value:"value",disabled:"disabled",options:"options"};function Ae(e){const n=h(()=>({...Ft,...e.props}));return{aliasProps:n,getLabel:f=>F(f,n.value.label),getValue:f=>F(f,n.value.value),getDisabled:f=>F(f,n.value.disabled),getOptions:f=>F(f,n.value.options)}}const sa=zt({allowCreate:Boolean,autocomplete:{type:Z(String),default:"none"},showChecked:Boolean,tagColor:String,radio:Boolean,automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:El,default:Fl},effect:{type:Z(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:32},id:String,loading:Boolean,loadingText:String,modelValue:{type:Z([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Z(Array),required:!0},placeholder:{type:String},teleported:wl.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Z(Object),default:()=>({})},remote:Boolean,size:Dl,props:{type:Z(Object),default:()=>Ft},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:4},showArrow:{type:Boolean,default:!1},placement:{type:Z(String),values:Ol,default:"bottom-start"},fallbackPlacements:{type:Z(Array),default:["bottom-start","top-start","right","left"]},tagType:{...It.type,default:"info"},tagEffect:{...It.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return Hl(e)||nt(e)}},...Al,...Pl(["ariaLabel"])}),Dt=zt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Z(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),ia={[Et]:e=>!0,[Mt]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},ra={hover:e=>nt(e),select:(e,n)=>!0},ot=Symbol("ElSelectV2Injection"),ua=Ee({props:Dt,emits:ra,setup(e,{emit:n}){const s=Te(ot),c=ye("select"),{hoverItem:o,selectOptionClick:r}=Bt(e,{emit:n}),{getLabel:f}=Ae(s.props);return{ns:c,hoverItem:o,selectOptionClick:r,getLabel:f}}});function da(e,n,s,c,o,r){return k(),K("li",{"aria-selected":e.selected,style:_(e.style),class:V([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:e.hoverItem,onClick:U(e.selectOptionClick,["stop"])},[P(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[$("span",null,X(e.getLabel(e.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var ca=He(ua,[["render",da],["__file","option-item.vue"]]);const fa=Ee({props:Dt,components:{ElCheckbox:Nt},emits:["select","hover"],setup(e,{emit:n}){const s=Te("displayInputValue"),c=ye("select"),o=b=>{n("select",b)},r=b=>b.replace(s.value,`<span style="color: #3370FF;">${s.value}</span>`),{hoverItem:f,selectOptionClick:v}=Bt(e,{emit:n});return{ns:c,hoverItem:f,replaceFun:r,onSelectCheckbox:o,selectOptionClick:v}}});function pa(e,n,s,c,o,r){const f=Oe("el-checkbox");return k(),K("li",{"aria-selected":e.selected,style:_(e.style),class:V([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering),e.ns.be("dropdown","item-checkbox")]),onMousemove:e.hoverItem,onClick:U(()=>{e.item.checked=!e.item.checked,e.onSelectCheckbox(e.index)},["stop"])},[P(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[T(f,{title:e.item.label,onClick:U(()=>{},["stop"]),onChange:v=>e.onSelectCheckbox(e.index),modelValue:e.item.checked,"onUpdate:modelValue":v=>e.item.checked=v},{default:L(()=>[$("span",{innerHTML:e.replaceFun(e.item.label)},null,8,["innerHTML"])]),_:1},8,["title","onClick","onChange","modelValue","onUpdate:modelValue"])])],46,["aria-selected","onMousemove","onClick"])}var ma=He(fa,[["render",pa],["__file","option-item-checkbox.vue"]]);const be=(e,n,s)=>{const{itemSize:c}=e,{items:o,lastVisitedIndex:r}=s;if(n>r){let f=0;if(r>=0){const v=o[r];f=v.offset+v.size}for(let v=r+1;v<=n;v++){const b=c(v);o[v]={offset:f,size:b},f+=b}s.lastVisitedIndex=n}return o[n]},va=(e,n,s)=>{const{items:c,lastVisitedIndex:o}=n;return(o>0?c[o].offset:0)>=s?Ht(e,n,0,o,s):ha(e,n,Math.max(0,o),s)},Ht=(e,n,s,c,o)=>{for(;s<=c;){const r=s+Math.floor((c-s)/2),f=be(e,r,n).offset;if(f===o)return r;f<o?s=r+1:f>o&&(c=r-1)}return Math.max(0,s-1)},ha=(e,n,s,c)=>{const{total:o}=e;let r=1;for(;s<o&&be(e,s,n).offset<c;)s+=r,r*=2;return Ht(e,n,Math.floor(s/2),Math.min(s,o-1),c)},Tt=({total:e},{items:n,estimatedItemSize:s,lastVisitedIndex:c})=>{let o=0;if(c>=e&&(c=e-1),c>=0){const v=n[c];o=v.offset+v.size}const f=(e-c-1)*s;return o+f},ga=Yl({name:"ElDynamicSizeList",getItemOffset:(e,n,s)=>be(e,n,s).offset,getItemSize:(e,n,{items:s})=>s[n].size,getEstimatedTotalSize:Tt,getOffset:(e,n,s,c,o)=>{const{height:r,layout:f,width:v}=e,b=kt(f)?v:r,C=be(e,n,o),g=Tt(e,o),d=Math.max(0,Math.min(g-b,C.offset)),y=Math.max(0,C.offset-b+C.size);switch(s===_l&&(c>=y-b&&c<=d+b?s=wt:s=Ot),s){case Jl:return d;case Xl:return y;case Ot:return Math.round(y+(d-y)/2);case wt:default:return c>=y&&c<=d?c:c<y?y:d}},getStartIndexForOffset:(e,n,s)=>va(e,s,n),getStopIndexForStartIndex:(e,n,s,c)=>{const{height:o,total:r,layout:f,width:v}=e,b=kt(f)?v:o,C=be(e,n,c),g=s+b;let d=C.offset+C.size,y=n;for(;y<r-1&&d<g;)y++,d+=be(e,y,c).size;return y},initCache({estimatedItemSize:e=xl},n){const s={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return s.clearCacheAfterIndex=(c,o=!0)=>{var r,f;s.lastVisitedIndex=Math.min(s.lastVisitedIndex,c-1),(r=n.exposed)==null||r.getItemStyleCache(-1),o&&((f=n.proxy)==null||f.$forceUpdate())},s},clearCache:!1,validateProps:({itemSize:e})=>{}});function ba(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!vl(e)}const ya={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var Sa=Ee({name:"ElSelectDropdown",props:ya,setup(e,{slots:n,expose:s,emit:c}){const o=Te(ot),r=ye("select"),{getLabel:f,getValue:v,getDisabled:b}=Ae(o.props),{t:C}=Lt(),g=E([]),d=E(),{props:{modelValue:y,showChecked:S,valueKey:M}}=o,l=E(!1),G=E(!1),Se=Te("$custom-style-filter",{}),D=h(()=>e.data.length);ue(()=>D.value,()=>{var i,p;S&&q(),(p=(i=o.tooltipRef.value).updatePopper)==null||p.call(i)}),ue(()=>o.props.modelValue,i=>{if(S){e.data.forEach(O=>{O.checked=i.includes(F(O,M))});const p=i.length;l.value=p===D.value,G.value=p>0&&p<D.value}},{deep:!0});const ee=i=>{o.onHover(i-1),re(()=>{o.onHover(i),q()})},de=i=>{l.value=i,e.data.forEach(p=>{p.checked=i}),G.value=!1,ee(0)};if(S){e.data.forEach(p=>{p.checked=y.includes(F(p,M))});const i=y.length;l.value=i===D.value,G.value=i>0&&i<D.value}const q=()=>{const i=e.data.filter(p=>p.checked).length;l.value=i===D.value,G.value=i>0&&i<D.value},Pe=i=>{c("confirmChecked",(o.props.options||[]).filter(p=>p.checked),i)},Ke=()=>{de(!1)},W=h(()=>Kl(o.props.estimatedOptionHeight)),Ve=h(()=>W.value?{itemSize:o.props.itemHeight}:{estimatedSize:o.props.estimatedOptionHeight,itemSize:i=>g.value[i]}),ce=(i=[],p)=>{const{props:{valueKey:O}}=o;return ke(p)?i&&i.some(R=>hl(F(R,O))===F(p,O)):i.includes(p)},Me=(i,p)=>{if(ke(p)){const{valueKey:O}=o.props;return F(i,O)===F(p,O)}else return i===p},$e=(i,p)=>o.props.multiple?ce(i,v(p)):Me(i,v(p)),Ne=(i,p)=>{const{disabled:O,multiple:R,multipleLimit:H}=o.props;return O||!p&&(R?H>0&&i.length>=H:!1)},ze=i=>e.hoveringIndex===i;s({listRef:d,isSized:W,isItemDisabled:Ne,isItemHovering:ze,isItemSelected:$e,scrollToItem:i=>{const p=d.value;p&&p.scrollToItem(i)},resetScrollTop:()=>{const i=d.value;i&&i.resetScrollTop()}});const Le=i=>{const{index:p,data:O,style:R}=i,H=Fe(W),{itemSize:j,estimatedSize:Y}=Fe(Ve),{modelValue:Q}=o.props,{onSelect:fe,onHover:le}=o,z=O[p];if(z.type==="Group")return T(oa,{item:z,style:R,height:H?j:Y},null);const ae=$e(Q,z),ne=Ne(Q,ae),Re=ze(p);return S?T(ma,_e(i,{disabled:z.disabled||ne,created:!!z.created,hovering:Re,item:z,onSelect:ee,onHover:le}),{default:pe=>{var oe;return((oe=n.default)==null?void 0:oe.call(n,pe))||T("span",null,[z.label])}}):T(ca,_e(i,{selected:ae,disabled:b(z)||ne,created:!!z.created,hovering:Re,item:z,onSelect:fe,onHover:le}),{default:pe=>{var oe;return((oe=n.default)==null?void 0:oe.call(n,pe))||T("span",null,[f(z)])}})},{onKeyboardNavigate:te,onKeyboardSelect:w}=o,I=()=>{te("forward")},J=()=>{te("backward")},Ue=i=>{const{code:p}=i,{tab:O,esc:R,down:H,up:j,enter:Y,numpadEnter:Q}=$t;switch([R,H,j,Y,Q].includes(p)&&(i.preventDefault(),i.stopPropagation()),p){case O:case R:break;case H:I();break;case j:J();break;case Y:case Q:w();break}};return()=>{var i,p,O,R;let H;const{data:j,width:Y}=e,{height:Q,multiple:fe,scrollbarAlwaysOn:le}=o.props,z=Fe(W)?Zl:ga;return T("div",{class:[r.b("dropdown"),r.is("multiple",fe)],style:{width:`${Y}px`}},[(i=n.header)==null?void 0:i.call(n),S?T("div",{class:[r.b("dropdown__item"),r.be("dropdown","item-checkbox")]},[T(Nt,{modelValue:l.value,indeterminate:G.value,onChange:de},ba(H=C("el.colorpicker.selectAll"))?H:{default:()=>[H]})]):null,((p=n.loading)==null?void 0:p.call(n))||((O=n.empty)==null?void 0:O.call(n))||T(z,_e({ref:d},Fe(Ve),{className:`${r.be("dropdown","list")} ${S&&r.be("dropdown","list-checkbox")}`,scrollbarAlwaysOn:le,data:j,height:Q,width:Y,total:j.length,onKeydown:Ue}),{default:ae=>T(Le,ae,null)}),S?T("div",{class:[r.b("btn-group")],style:Rt(Se,["border"])},[T("div",{onClick:Ke,class:[r.b("btn")],style:{color:"#000000",background:"#ffffff"}},[C("el.datepicker.clear")]),T("div",{onClick:Pe,class:[r.b("btn")],style:{color:"#ffffff",background:"#3370FF"}},[C("el.datepicker.confirm")])]):null,(R=n.footer)==null?void 0:R.call(n)])}}});function Va(e,n){const{aliasProps:s,getLabel:c,getValue:o}=Ae(e),r=E(0),f=E(),v=h(()=>e.allowCreate&&e.filterable);function b(S){const M=l=>c(l)===S;return e.options&&e.options.some(M)||n.createdOptions.some(M)}function C(S){v.value&&(e.multiple&&S.created?r.value++:f.value=S)}function g(S){if(v.value)if(S&&S.length>0){if(b(S))return;const M={[s.value.value]:S,[s.value.label]:S,created:!0,[s.value.disabled]:!1};n.createdOptions.length>=r.value?n.createdOptions[r.value]=M:n.createdOptions.push(M)}else if(e.multiple)n.createdOptions.length=r.value;else{const M=f.value;n.createdOptions.length=0,M&&M.created&&n.createdOptions.push(M)}}function d(S){if(!v.value||!S||!S.created||S.created&&e.reserveKeyword&&n.inputValue===c(S))return;const M=n.createdOptions.findIndex(l=>o(l)===o(S));~M&&(n.createdOptions.splice(M,1),r.value--)}function y(){v.value&&(n.createdOptions.length=0,r.value=0)}return{createNewOption:g,removeNewOption:d,selectNewOption:C,clearAllNewOption:y}}const Ca=(e,n)=>{const{t:s}=Lt(),c=ye("select"),o=ye("input"),{form:r,formItem:f}=Ml(),{inputId:v}=$l(e,{formItemContext:f}),{aliasProps:b,getLabel:C,getValue:g,getDisabled:d,getOptions:y}=Ae(e),{valueOnClear:S,isEmptyValue:M}=Wl(e),l=at({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),G=E(-1),Se=E(),D=E(),ee=E(),de=E(),q=E(),Pe=E(),Ke=E(),W=E(),Ve=E(),ce=E(),{isComposing:Me,handleCompositionStart:$e,handleCompositionEnd:Ne,handleCompositionUpdate:ze}=Nl({afterComposition:t=>ht(t)}),{wrapperRef:We,isFocused:je,handleBlur:st}=zl(q,{beforeFocus(){return J.value},afterFocus(){e.automaticDropdown&&!I.value&&(I.value=!0,l.menuVisibleOnFocus=!0)},beforeBlur(t){var a,u;return((a=ee.value)==null?void 0:a.isFocusInsideContent(t))||((u=de.value)==null?void 0:u.isFocusInsideContent(t))},afterBlur(){I.value=!1,l.menuVisibleOnFocus=!1}}),Le=h(()=>le("")),te=h(()=>e.loading?!1:e.options.length>0||l.createdOptions.length>0),w=E([]),I=E(!1),J=h(()=>e.disabled||(r==null?void 0:r.disabled)),Ue=h(()=>{var t;return(t=r==null?void 0:r.statusIcon)!=null?t:!1}),i=h(()=>{const t=w.value.length*e.itemHeight;return t>e.height?e.height:t}),p=h(()=>e.multiple?ge(e.modelValue)&&e.modelValue.length>0:!M(e.modelValue)),O=h(()=>e.clearable&&!J.value&&l.inputHovering&&p.value),R=h(()=>e.remote&&e.filterable?"":jl),H=h(()=>R.value&&c.is("reverse",I.value)),j=h(()=>(f==null?void 0:f.validateState)||""),Y=h(()=>{if(j.value)return Ll[j.value]}),Q=h(()=>e.remote?300:0),fe=h(()=>e.loading?e.loadingText||s("el.select.loading"):e.remote&&!l.inputValue&&!te.value?!1:e.filterable&&l.inputValue&&te.value&&w.value.length===0?e.noMatchText||s("el.select.noMatch"):te.value?null:e.noDataText||s("el.select.noData")),le=t=>{const a=new RegExp(ea(t),"i"),u=e.filterable&&De(e.filterMethod),m=e.filterable&&e.remote&&De(e.remoteMethod),N=A=>u||m?!0:t?a.test(C(A)||""):!0;return e.loading?[]:[...l.createdOptions,...e.options].reduce((A,se)=>{const ve=y(se);if(ge(ve)){const Be=ve.filter(N);Be.length>0&&A.push({label:C(se),type:"Group"},...Be)}else(e.remote||N(se))&&A.push(se);return A},[])},z=()=>{w.value=le(l.inputValue)},ae=h(()=>{const t=new Map;return Le.value.forEach((a,u)=>{t.set(B(g(a)),{option:a,index:u})}),t}),ne=h(()=>{const t=new Map;return w.value.forEach((a,u)=>{t.set(B(g(a)),{option:a,index:u})}),t}),Re=h(()=>w.value.every(t=>d(t))),pe=Rl(),oe=h(()=>pe.value==="small"?"small":"default"),Ce=()=>{var t;if(nt(e.fitInputWidth)){G.value=e.fitInputWidth;return}const a=((t=Se.value)==null?void 0:t.offsetWidth)||200;!e.fitInputWidth&&te.value?re(()=>{G.value=Math.max(a,At())}):G.value=a},At=()=>{var t,a;const m=document.createElement("canvas").getContext("2d"),N=c.be("dropdown","item"),se=(((a=(t=W.value)==null?void 0:t.listRef)==null?void 0:a.innerRef)||document).querySelector(`.${N}`);if(se===null||m===null)return 0;const ve=getComputedStyle(se),Be=Number.parseFloat(ve.paddingLeft)+Number.parseFloat(ve.paddingRight);return m.font=ve.font,w.value.reduce((fl,pl)=>{const ml=m.measureText(C(pl));return Math.max(ml.width,fl)},0)+Be},Pt=()=>{if(!D.value)return 0;const t=window.getComputedStyle(D.value);return Number.parseFloat(t.gap||"6px")},Kt=h(()=>{const t=Pt();return{maxWidth:`${ce.value&&e.maxCollapseTags===1?l.selectionWidth-l.collapseItemWidth-t:l.selectionWidth}px`}}),Wt=h(()=>({maxWidth:`${l.selectionWidth}px`})),jt=h(()=>ge(e.modelValue)?e.modelValue.length===0&&!l.inputValue:e.filterable?!l.inputValue:!0),Ut=h(()=>{var t;const a=(t=e.placeholder)!=null?t:s("el.select.placeholder");return e.multiple||!p.value?a:l.selectedLabel}),Gt=h(()=>{var t,a;return(a=(t=ee.value)==null?void 0:t.popperRef)==null?void 0:a.contentRef}),Qt=h(()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&ne.value.has(e.modelValue[t-1])){const{index:a}=ne.value.get(e.modelValue[t-1]);return a}}else if(!M(e.modelValue)&&ne.value.has(e.modelValue)){const{index:t}=ne.value.get(e.modelValue);return t}return-1}),qt=h({get(){return I.value&&fe.value!==!1},set(t){I.value=t}}),Yt=h(()=>e.multiple?e.collapseTags?l.cachedOptions.slice(0,e.maxCollapseTags):l.cachedOptions:[]),Zt=h(()=>e.multiple?e.collapseTags?l.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:it,removeNewOption:Ge,selectNewOption:rt,clearAllNewOption:Qe}=Va(e,l),qe=()=>{J.value||(l.menuVisibleOnFocus?l.menuVisibleOnFocus=!1:I.value=!I.value)},ut=()=>{l.inputValue.length>0&&!I.value&&(I.value=!0),it(l.inputValue),Ye(l.inputValue)},dt=Ql(ut,Q.value),Ye=t=>{l.previousQuery===t||Me.value||(l.previousQuery=t,e.filterable&&De(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&De(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&w.value.length?re(Xt):re(rl))},Xt=()=>{const t=w.value.filter(m=>!m.disabled&&m.type!=="Group"),a=t.find(m=>m.created),u=t[0];l.hoveringIndex=Ze(w.value,a||u)},Jt=t=>{lt(e.modelValue,t)||n(Mt,t)},me=t=>{n(Et,t),Jt(t),l.previousValue=e.multiple?String(t):t},Ze=(t=[],a)=>{if(!ke(a))return t.indexOf(a);const u=e.valueKey;let m=-1;return t.some((N,A)=>F(N,u)===F(a,u)?(m=A,!0):!1),m},B=t=>ke(t)?F(t,e.valueKey):t,ct=()=>{Ce()},ft=()=>{l.selectionWidth=D.value.getBoundingClientRect().width},xt=()=>{l.collapseItemWidth=ce.value.getBoundingClientRect().width},Xe=()=>{var t,a;(a=(t=ee.value)==null?void 0:t.updatePopper)==null||a.call(t)},pt=()=>{var t,a;(a=(t=de.value)==null?void 0:t.updatePopper)==null||a.call(t)},_t=t=>{l.cachedOptions=[...t],me(t.map(a=>a.value)),Ie()},mt=t=>{if(e.multiple){let a=e.modelValue.slice();const u=Ze(a,g(t));u>-1?(a=[...a.slice(0,u),...a.slice(u+1)],l.cachedOptions.splice(u,1),Ge(t)):(e.multipleLimit<=0||a.length<e.multipleLimit)&&(a=[...a,g(t)],l.cachedOptions.push(t),rt(t)),me(a),t.created&&Ye(""),e.filterable&&!e.reserveKeyword&&(l.inputValue="")}else l.selectedLabel=C(t),me(g(t)),I.value=!1,rt(t),t.created||Qe();Ie()},el=(t,a)=>{let u=e.modelValue.slice();const m=Ze(u,g(a));m>-1&&!J.value&&(u=[...e.modelValue.slice(0,m),...e.modelValue.slice(m+1)],l.cachedOptions.splice(m,1),me(u),n("remove-tag",g(a)),Ge(a)),t.stopPropagation(),Ie()},Ie=()=>{var t;(t=q.value)==null||t.focus()},tl=()=>{var t;if(I.value){I.value=!1,re(()=>{var a;return(a=q.value)==null?void 0:a.blur()});return}(t=q.value)==null||t.blur()},ll=()=>{l.inputValue.length>0?l.inputValue="":I.value=!1},al=t=>ql(t,a=>!l.cachedOptions.some(u=>g(u)===a&&d(u))),nl=t=>{if(e.multiple&&t.code!==$t.delete&&l.inputValue.length===0){t.preventDefault();const a=e.modelValue.slice(),u=al(a);if(u<0)return;const m=a[u];a.splice(u,1);const N=l.cachedOptions[u];l.cachedOptions.splice(u,1),Ge(N),me(a),n("remove-tag",m)}},ol=()=>{let t;ge(e.modelValue)?t=[]:t=S.value,e.multiple?l.cachedOptions=[]:l.selectedLabel="",I.value=!1,me(t),n("clear"),Qe(),Ie()},vt=(t,a=void 0)=>{const u=w.value;if(!["forward","backward"].includes(t)||J.value||u.length<=0||Re.value||Me.value)return;if(!I.value)return qe();a===void 0&&(a=l.hoveringIndex);let m=-1;t==="forward"?(m=a+1,m>=u.length&&(m=0)):t==="backward"&&(m=a-1,(m<0||m>=u.length)&&(m=u.length-1));const N=u[m];if(d(N)||N.type==="Group")return vt(t,m);l.hoveringIndex=m,Je(m)},sl=()=>{if(I.value)~l.hoveringIndex&&w.value[l.hoveringIndex]&&mt(w.value[l.hoveringIndex]);else return qe()},il=t=>{l.hoveringIndex=t??-1},rl=()=>{e.multiple?l.hoveringIndex=w.value.findIndex(t=>e.modelValue.some(a=>B(a)===B(t))):l.hoveringIndex=w.value.findIndex(t=>B(t)===B(e.modelValue))},ht=t=>{if(l.inputValue=t.target.value,e.remote)dt();else return ut()},ul=t=>{if(I.value=!1,je.value){const a=new FocusEvent("focus",t);st(a)}},dl=()=>(l.isBeforeHide=!1,re(()=>{~Qt.value&&Je(l.hoveringIndex)})),Je=t=>{W.value.scrollToItem(t)},cl=(t,a)=>{const u=B(t);if(ae.value.has(u)){const{option:m}=ae.value.get(u);return m}if(a&&a.length){const m=a.find(N=>B(g(N))===u);if(m)return m}return{[b.value.value]:t,[b.value.label]:t}},xe=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const a=l.cachedOptions.slice();l.cachedOptions.length=0,l.previousValue=e.modelValue.toString();for(const u of e.modelValue){const m=cl(u,a);l.cachedOptions.push(m)}}else l.cachedOptions=[],l.previousValue=void 0;else if(p.value){l.previousValue=e.modelValue;const a=w.value,u=a.findIndex(m=>B(g(m))===B(e.modelValue));~u?l.selectedLabel=C(a[u]):(!l.selectedLabel||t)&&(l.selectedLabel=B(e.modelValue))}else l.selectedLabel="",l.previousValue=void 0;Qe(),Ce()};return ue(()=>e.fitInputWidth,()=>{Ce()}),ue(I,t=>{t?(e.persistent||Ce(),Ye("")):(l.inputValue="",l.previousQuery=null,l.isBeforeHide=!0,it("")),n("visible-change",t)}),ue(()=>e.modelValue,(t,a)=>{var u;(!t||ge(t)&&t.length===0||e.multiple&&!lt(t.toString(),l.previousValue)||!e.multiple&&B(t)!==B(l.previousValue))&&xe(!0),!lt(t,a)&&e.validateEvent&&((u=f==null?void 0:f.validate)==null||u.call(f,"change").catch(N=>Ul()))},{deep:!0}),ue(()=>e.options,()=>{const t=q.value;(!t||t&&document.activeElement!==t)&&xe()},{deep:!0,flush:"post"}),ue(()=>w.value,()=>(Ce(),W.value&&re(W.value.resetScrollTop))),gt(()=>{l.isBeforeHide||z()}),gt(()=>{const{valueKey:t,options:a}=e,u=new Map;for(const m of a){const N=g(m);let A=N;if(ke(A)&&(A=F(N,t)),u.get(A))break;u.set(A,!0)}}),gl(()=>{xe()}),he(Se,ct),he(D,ft),he(W,Xe),he(We,Xe),he(Ve,pt),he(ce,xt),{inputId:v,collapseTagSize:oe,currentPlaceholder:Ut,expanded:I,emptyText:fe,popupHeight:i,debounce:Q,allOptions:Le,filteredOptions:w,iconComponent:R,iconReverse:H,tagStyle:Kt,collapseTagStyle:Wt,popperSize:G,dropdownMenuVisible:qt,hasModelValue:p,shouldShowPlaceholder:jt,selectDisabled:J,selectSize:pe,needStatusIcon:Ue,showClearBtn:O,states:l,isFocused:je,nsSelect:c,nsInput:o,inputRef:q,menuRef:W,tagMenuRef:Ve,tooltipRef:ee,tagTooltipRef:de,selectRef:Se,wrapperRef:We,selectionRef:D,prefixRef:Pe,suffixRef:Ke,collapseItemRef:ce,popperRef:Gt,validateState:j,validateIcon:Y,showTagList:Yt,collapseTagList:Zt,debouncedOnInputChange:dt,deleteTag:el,getLabel:C,getValue:g,getDisabled:d,getValueKey:B,handleClear:ol,handleClickOutside:ul,handleDel:nl,handleEsc:ll,focus:Ie,blur:tl,handleMenuEnter:dl,handleResize:ct,resetSelectionWidth:ft,updateTooltip:Xe,updateTagTooltip:pt,updateOptions:z,toggleMenu:qe,scrollTo:Je,onInput:ht,onKeyboardNavigate:vt,onKeyboardSelect:sl,onSelect:mt,onSelectMutiple:_t,onHover:il,handleCompositionStart:$e,handleCompositionEnd:Ne,handleCompositionUpdate:ze}},Ia=Ee({name:"ElSelectV2",components:{ElSelectMenu:Sa,ElTag:Tl,ElTooltip:kl,ElIcon:Bl},directives:{ClickOutside:ta},props:sa,emits:ia,setup(e,{emit:n}){const s=h(()=>{const{modelValue:g,multiple:d}=e,y=d?[]:void 0;return ge(g)?d?g:y:d?y:g}),c=Te("$custom-style-filter",{}),o=Ca(at({...bt(e),modelValue:s}),n),{calculatorRef:r,inputStyle:f}=la();yt(ot,{props:at({...bt(e),height:o.popupHeight,modelValue:s}),expanded:o.expanded,tooltipRef:o.tooltipRef,onSelect:o.onSelect,onHover:o.onHover,onKeyboardNavigate:o.onKeyboardNavigate,onKeyboardSelect:o.onKeyboardSelect});const v=h(()=>o.states.inputValue);yt("displayInputValue",v);const b=(g,d)=>{o.onSelectMutiple(g),o.handleClickOutside(d)},C=h(()=>e.multiple?o.states.cachedOptions.map(g=>g.label):o.states.selectedLabel);return{...o,modelValue:s,selectedLabel:C,calculatorRef:r,inputStyle:f,confirmChecked:b,formatterStyle:Rt,customStyle:c}}});function wa(e,n,s,c,o,r){const f=Oe("el-tag"),v=Oe("el-tooltip"),b=Oe("el-icon"),C=Oe("el-select-menu"),g=bl("click-outside");return et((k(),K("div",{ref:"selectRef",class:V([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:d=>e.states.inputHovering=!0,onMouseleave:d=>e.states.inputHovering=!1},[T(v,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:d=>e.states.isBeforeHide=!1},{default:L(()=>[$("div",{ref:"wrapperRef",class:V([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:U(e.toggleMenu,["prevent"]),style:_([e.formatterStyle(e.customStyle,["background"]),e.customStyle.border&&{boxShadow:`0 0 0 1px ${e.customStyle.border} inset`}])},[e.$slots.prefix?(k(),K("div",{key:0,ref:"prefixRef",class:V(e.nsSelect.e("prefix"))},[P(e.$slots,"prefix")],2)):x("v-if",!0),$("div",{ref:"selectionRef",class:V([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?P(e.$slots,"tag",{key:0},()=>[(k(!0),K(St,null,Vt(e.showTagList,d=>(k(),K("div",{key:e.getValueKey(e.getValue(d)),class:V(e.nsSelect.e("selected-item"))},[T(f,{closable:!e.selectDisabled&&!e.getDisabled(d),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:_(e.tagStyle),onClose:y=>e.deleteTag(y,d),color:e.tagColor},{default:L(()=>[$("span",{class:V(e.nsSelect.e("tags-text"))},[P(e.$slots,"label",{label:e.getLabel(d),value:e.getValue(d)},()=>[Ct(X(e.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose","color"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(k(),ie(v,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:L(()=>[$("div",{ref:"collapseItemRef",class:V(e.nsSelect.e("selected-item"))},[T(f,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:_(e.collapseTagStyle),"disable-transitions":"",color:e.tagColor},{default:L(()=>[$("span",{class:V(e.nsSelect.e("tags-text"))}," + "+X(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style","color"])],2)]),content:L(()=>[$("div",{ref:"tagMenuRef",class:V(e.nsSelect.e("selection"))},[(k(!0),K(St,null,Vt(e.collapseTagList,d=>(k(),K("div",{key:e.getValueKey(e.getValue(d)),class:V(e.nsSelect.e("selected-item"))},[T(f,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(d),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,color:e.tagColor,"disable-transitions":"",onClose:y=>e.deleteTag(y,d)},{default:L(()=>[$("span",{class:V(e.nsSelect.e("tags-text"))},[P(e.$slots,"label",{label:e.getLabel(d),value:e.getValue(d)},()=>[Ct(X(e.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","color","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):x("v-if",!0)]):x("v-if",!0),$("div",{class:V([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[et($("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":d=>e.states.inputValue=d,style:_([e.inputStyle,e.formatterStyle(e.customStyle,["text"])]),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:V([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[we(U(d=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),we(U(d=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),we(U(e.onKeyboardSelect,["stop","prevent"]),["enter"]),we(U(e.handleEsc,["stop","prevent"]),["esc"]),we(U(e.handleDel,["stop"]),["delete"])],onClick:U(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[yl,e.states.inputValue]]),e.filterable?(k(),K("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:V(e.nsSelect.e("input-calculator")),textContent:X(e.states.inputValue)},null,10,["textContent"])):x("v-if",!0)],2),e.shouldShowPlaceholder?(k(),K("div",{key:1,class:V([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)]),style:_(e.formatterStyle(e.customStyle,["text"]))},[e.hasModelValue?P(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[$("span",null,X(e.currentPlaceholder),1)]):(k(),K("span",{key:1},X(e.currentPlaceholder),1))],6)):x("v-if",!0)],2),$("div",{ref:"suffixRef",class:V(e.nsSelect.e("suffix"))},[e.iconComponent?et((k(),ie(b,{key:0,class:V([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:L(()=>[(k(),ie(tt(e.iconComponent)))]),_:1},8,["class"])),[[Sl,!e.showClearBtn]]):x("v-if",!0),e.showClearBtn&&e.clearIcon?(k(),ie(b,{key:1,class:V([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:U(e.handleClear,["prevent","stop"])},{default:L(()=>[(k(),ie(tt(e.clearIcon)))]),_:1},8,["class","onClick"])):x("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(k(),ie(b,{key:2,class:V([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:L(()=>[(k(),ie(tt(e.validateIcon)))]),_:1},8,["class"])):x("v-if",!0)],2)],14,["onClick"])]),content:L(()=>[T(C,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,onConfirmChecked:e.confirmChecked,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},Vl({default:L(d=>[P(e.$slots,"default",Cl(Il(d)))]),_:2},[e.$slots.header?{name:"header",fn:L(()=>[$("div",{class:V(e.nsSelect.be("dropdown","header"))},[P(e.$slots,"header")],2)])}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:L(()=>[$("div",{class:V(e.nsSelect.be("dropdown","loading"))},[P(e.$slots,"loading")],2)])}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:L(()=>[$("div",{class:V(e.nsSelect.be("dropdown","empty"))},[P(e.$slots,"empty",{},()=>[$("span",null,X(e.emptyText),1)])],2)])}:void 0,e.$slots.footer?{name:"footer",fn:L(()=>[$("div",{class:V(e.nsSelect.be("dropdown","footer"))},[P(e.$slots,"footer")],2)])}:void 0]),1032,["data","width","onConfirmChecked","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[g,e.handleClickOutside,e.popperRef]])}var Oa=He(Ia,[["render",wa],["__file","select.vue"]]);const Aa=Gl(Oa);export{Aa as E};
