import{p as o,z as T}from"./index-0.0.0-dataease.js";import{E as R}from"./el-table-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as B}from"./el-pagination-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import{o as j}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as k}from"./EmptyBackground-0.0.0-dataease.js";import{d as L,ac as G,aj as O,X as F,y as E,r as W,w as _,f as c,O as v,R as N,g as C,i as y,a2 as w,av as z,u as D,j as x,_ as U,S as V,Z as H,n as A}from"./vue-0.0.0-dataease.js";import{_ as M}from"./_plugin-vue_export-helper-0.0.0-dataease.js";const X=(n,f)=>{const p=[],{columns:e}=n,[i]=f.slots.default(),{children:u=[]}=i||{};return e!=null&&e.length?(u.forEach(d=>{const{prop:b,key:h,type:S}=d.props||{};(e.includes(b)||h==="_operation"||S==="selection")&&p.push(d)}),p):u},Z={key:1,style:{width:"100%"}},$={key:0,class:"pagination-cont"},q=L({__name:"GridTable",props:{columns:o.arrayOf(o.string),isSearch:o.bool.def(!1),showPagination:o.bool.def(!0),multipleSelection:o.array.def(()=>[]),pagination:o.object,isRememberSelected:o.bool.def(!1),selectedFlags:o.string.def("id"),tableData:o.array,emptyDesc:o.string,emptyImg:o.string,border:o.bool.def(!1),showEmptyImg:o.bool.def(!0),dataLoading:o.bool.def(!1)},setup(n,{expose:f}){const{t:p}=j(),e=n,i=G(),u=()=>{Object.keys(i).forEach(a=>{a.startsWith("on")?["onSizeChange","onCurrentChange"].includes(a)?t.paginationEvent[a.slice(2)]=i[a]:t.tableEvent[a.slice(2)]=i[a]:t.tableAttrs[a]=i[a]})},d=a=>{s.value.toggleRowSelection(a,!0)},b=()=>{s.value.toggleAllSelection()},h=()=>{s.value.clearSelection()},S=a=>{t.multipleSelectionCache=[...t.multipleSelectionCache,...a];const r=t.multipleSelectionCache.map(l=>l[e.selectedFlags]),g=[];e.tableData.forEach(l=>{const m=r.indexOf(l[e.selectedFlags]);m!==-1&&(s.value.toggleRowSelection(l,!0),g.push(m))}),g.sort().reduceRight((l,m)=>{t.multipleSelectionCache.splice(m,1)},0)};O(()=>{u()});const t=F({paginationEvent:{},paginationDefault:{currentPage:1,pageSizes:[10,20,50,100],pageSize:10,layout:"total, prev, pager, next, sizes, jumper",total:0},multipleSelectionCache:[],tableEvent:{},tableAttrs:{}}),I=E(()=>e.emptyImg?e.emptyImg:e.isSearch?"tree":"noneWhite"),s=W(null),P=E(()=>[...t.multipleSelectionCache,...e.multipleSelection]);return _(e.pagination,()=>{t.paginationDefault={...t.paginationDefault,...e.pagination}},{deep:!0,immediate:!0}),_(e.tableData,()=>{if(A(()=>{s.value.doLayout()}),!e.isRememberSelected)return;const a=[...e.multipleSelection];A(()=>{S(a)})},{deep:!0}),f({toggleRowSelection:d,clearSelection:h,toggleAllSelection:b,multipleSelectionAll:P}),(a,r)=>{const g=T;return c(),v("div",{class:V(["flex-table",!n.tableData.length&&"no-data"])},[N((c(),C(D(R),w({ref_key:"table",ref:s,border:n.border},t.tableAttrs,{data:n.tableData,style:{width:"100%",height:"100%"}},z(t.tableEvent)),{empty:y(()=>[e.showEmptyImg?(c(),C(k,{key:0,description:e.emptyDesc?e.emptyDesc:D(p)("data_set.no_data"),"img-type":I.value||"noneWhite"},null,8,["description","img-type"])):(c(),v("div",Z))]),default:y(()=>[x(X,{columns:n.columns},{default:y(()=>[H(a.$slots,"default",{},void 0,!0)]),_:3},8,["columns"])]),_:3},16,["border","data"])),[[g,e.dataLoading]]),n.showPagination&&n.tableData.length?(c(),v("div",$,[x(D(B),w({"current-page":t.paginationDefault.currentPage,"onUpdate:currentPage":r[0]||(r[0]=l=>t.paginationDefault.currentPage=l),"page-size":t.paginationDefault.pageSize,"onUpdate:pageSize":r[1]||(r[1]=l=>t.paginationDefault.pageSize=l),background:""},t.paginationDefault,z(t.paginationEvent)),null,16,["current-page","page-size"])])):U("",!0)],2)}}});const re=M(q,[["__scopeId","data-v-a3659898"]]);export{re as G};
