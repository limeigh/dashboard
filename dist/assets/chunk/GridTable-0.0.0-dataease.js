import{v as I,V as R,a5 as k}from"./element-plus-secondary-0.0.0-dataease.js";import{E as B}from"./EmptyBackground-0.0.0-dataease.js";import{p as n}from"./index-0.0.0-dataease.js";import{f as L}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as j,P as G,a7 as W,l as F,k as E,r as O,w as _,o as c,c as v,$ as U,T as C,U as y,M as w,aj as z,u as D,W as x,R as V,z as M,L as N,n as P}from"./@vue-0.0.0-dataease.js";import{_ as $}from"./_plugin-vue_export-helper-0.0.0-dataease.js";const H=(o,f)=>{const p=[],{columns:e}=o,[i]=f.slots.default(),{children:u=[]}=i||{};return e!=null&&e.length?(u.forEach(d=>{const{prop:b,key:h,type:S}=d.props||{};(e.includes(b)||h==="_operation"||S==="selection")&&p.push(d)}),p):u},q={key:1,style:{width:"100%"}},J={key:0,class:"pagination-cont"},K=j({__name:"GridTable",props:{columns:n.arrayOf(n.string),isSearch:n.bool.def(!1),showPagination:n.bool.def(!0),multipleSelection:n.array.def(()=>[]),pagination:n.object,isRememberSelected:n.bool.def(!1),selectedFlags:n.string.def("id"),tableData:n.array,emptyDesc:n.string,emptyImg:n.string,border:n.bool.def(!1),showEmptyImg:n.bool.def(!0),dataLoading:n.bool.def(!1)},setup(o,{expose:f}){const{t:p}=L(),e=o,i=G(),u=()=>{Object.keys(i).forEach(a=>{a.startsWith("on")?["onSizeChange","onCurrentChange"].includes(a)?t.paginationEvent[a.slice(2)]=i[a]:t.tableEvent[a.slice(2)]=i[a]:t.tableAttrs[a]=i[a]})},d=a=>{s.value.toggleRowSelection(a,!0)},b=()=>{s.value.toggleAllSelection()},h=()=>{s.value.clearSelection()},S=a=>{t.multipleSelectionCache=[...t.multipleSelectionCache,...a];const r=t.multipleSelectionCache.map(l=>l[e.selectedFlags]),g=[];e.tableData.forEach(l=>{const m=r.indexOf(l[e.selectedFlags]);m!==-1&&(s.value.toggleRowSelection(l,!0),g.push(m))}),g.sort().reduceRight((l,m)=>{t.multipleSelectionCache.splice(m,1)},0)};W(()=>{u()});const t=F({paginationEvent:{},paginationDefault:{currentPage:1,pageSizes:[10,20,50,100],pageSize:10,layout:"total, prev, pager, next, sizes, jumper",total:0},multipleSelectionCache:[],tableEvent:{},tableAttrs:{}}),T=E(()=>e.emptyImg?e.emptyImg:e.isSearch?"tree":"noneWhite"),s=O(null),A=E(()=>[...t.multipleSelectionCache,...e.multipleSelection]);return _(e.pagination,()=>{t.paginationDefault={...t.paginationDefault,...e.pagination}},{deep:!0,immediate:!0}),_(e.tableData,()=>{if(P(()=>{s.value.doLayout()}),!e.isRememberSelected)return;const a=[...e.multipleSelection];P(()=>{S(a)})},{deep:!0}),f({toggleRowSelection:d,clearSelection:h,toggleAllSelection:b,multipleSelectionAll:A}),(a,r)=>{const g=I;return c(),v("div",{class:M(["flex-table",!o.tableData.length&&"no-data"])},[U((c(),C(D(R),w({ref_key:"table",ref:s,border:o.border},t.tableAttrs,{data:o.tableData,style:{width:"100%",height:"100%"}},z(t.tableEvent)),{empty:y(()=>[e.showEmptyImg?(c(),C(B,{key:0,description:e.emptyDesc?e.emptyDesc:D(p)("data_set.no_data"),"img-type":T.value||"noneWhite"},null,8,["description","img-type"])):(c(),v("div",q))]),default:y(()=>[x(H,{columns:o.columns},{default:y(()=>[N(a.$slots,"default",{},void 0,!0)]),_:3},8,["columns"])]),_:3},16,["border","data"])),[[g,e.dataLoading]]),o.showPagination&&o.tableData.length?(c(),v("div",J,[x(D(k),w({"current-page":t.paginationDefault.currentPage,"onUpdate:currentPage":r[0]||(r[0]=l=>t.paginationDefault.currentPage=l),"page-size":t.paginationDefault.pageSize,"onUpdate:pageSize":r[1]||(r[1]=l=>t.paginationDefault.pageSize=l),background:""},t.paginationDefault,z(t.paginationEvent)),null,16,["current-page","page-size"])])):V("",!0)],2)}}});const ae=$(K,[["__scopeId","data-v-a3659898"]]);export{ae as G};
