import{o as j,n as E,j as $,G as z,y as G}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{p}from"./index-0.0.0-dataease.js";import{E as W}from"./el-row-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{a as q,E as H}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as J}from"./el-col-0.0.0-dataease.js";import{K as M,E as Q}from"./ApiTestModel-0.0.0-dataease.js";import{i as X}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as Y}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as Z}from"./icon_add_outlined-0.0.0-dataease.js";import{d as ee}from"./vuedraggable-es-0.0.0-dataease.js";import{d as ae,y as C,t as le,aj as oe,x as te,f as n,O as h,j as l,i as o,P as ne,u as r,g as i,_ as c,W as w,a6 as x,a3 as de,a4 as ue}from"./vue-0.0.0-dataease.js";import{_ as se}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";const re={class:"api-key-value"},ie={style:{"margin-bottom":"16px"}},ce=ae({__name:"ApiKeyValue",props:{keyPlaceholder:p.string.def(""),valuePlaceholder:p.string.def(""),unShowSelect:p.bool.def(!1),isReadOnly:p.bool.def(!1),needMock:p.bool.def(!1),showDesc:p.bool.def(!1),items:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(d){const g=d,{t:u}=j(),V=C(()=>g.keyPlaceholder||u("datasource.key"));C(()=>g.valuePlaceholder||u("datasource.value"));const{suggestions:_,items:s}=le(g);oe(()=>{(!s.value.length||s.value[s.value.length-1].name)&&s.value.push(new M({enable:!0,name:"",value:""}));for(let t=0;t<s.value.length;t++)s.value[t].hasOwnProperty("nameType")||(s.value[t].nameType="fixed")}),te("api-active-name");const O=t=>{U()||s.value.splice(t,1)},N=()=>{s.value.push(new M({enable:!0,nameType:"fixed"}))},U=()=>s.value.length===1,S=(t,y)=>{const f=t?_.value.filter(R(t)):_.value;y(f)},A=t=>{t.value=""},R=t=>y=>y.value.toLowerCase().indexOf(t.toLowerCase())===0,B=[{label:u("data_source.parameter"),value:"params"},{label:u("data_source.fixed_value"),value:"fixed"},{label:u("data_source.time_function"),value:"timeFun"},{label:u("data_source.customize"),value:"custom"}],D=[{label:u("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:u("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(t,y)=>{const f=E,F=$,v=z,L=Q,m=J,b=q,k=H,T=G,P=W,I=E;return n(),h("div",re,[l(r(ee),{tag:"div",list:r(s),handle:".handle",class:"draggable-content_api"},{item:o(({element:a,index:K})=>[ne("div",ie,[l(P,{gutter:8},{default:o(()=>[l(F,{class:"drag handle"},{default:o(()=>[l(f,{name:"icon_drag_outlined"},{default:o(()=>[l(r(X),{class:"svg-icon"})]),_:1})]),_:1}),d.unShowSelect?c("",!0):(n(),i(m,{key:0,span:6},{default:o(()=>[r(_)?(n(),i(L,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:400,"fetch-suggestions":S,placeholder:V.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),i(v,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:"200",placeholder:V.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1024)),l(m,{span:3},{default:o(()=>[l(k,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>A(a)},{default:o(()=>[(n(),h(w,null,x(B,e=>l(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),d.unShowSelect?(n(),i(m,{key:1,span:8},{default:o(()=>[r(_).length?(n(),i(v,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:"200",placeholder:V.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):c("",!0)]),_:2},1024)):c("",!0),l(m,{span:6},{default:o(()=>[!d.needMock&&a.nameType==="params"?(n(),i(k,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(!0),h(w,null,x(d.valueList,e=>(n(),i(b,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])):c("",!0),!d.needMock&&a.nameType==="timeFun"?(n(),i(k,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(),h(w,null,x(D,e=>l(b,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])):c("",!0),!d.needMock&&a.nameType!=="params"&&a.nameType!=="timeFun"?(n(),i(v,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:d.isReadOnly,placeholder:a.nameType==="fixed"?r(u)("data_source.value"):r(u)("data_source.name_use_parameters"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):c("",!0)]),_:2},1024),d.showDesc?(n(),i(m,{key:2,span:7},{default:o(()=>[l(v,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:r(u)("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)):c("",!0),l(m,{span:1},{default:o(()=>[l(T,{class:"api-variable_del",text:"",disabled:U(),onClick:e=>O(K)},{icon:o(()=>[l(f,{name:"icon_delete-trash_outlined"},{default:o(()=>[l(r(Y),{class:"svg-icon"})]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["list"]),l(T,{style:{"margin-top":"14px"},onClick:N,text:""},{icon:o(()=>[l(I,{name:"icon_add_outlined"},{default:o(()=>[l(r(Z),{class:"svg-icon"})]),_:1})]),default:o(()=>[de(" "+ue(r(u)("data_source.add_parameters")),1)]),_:1})])}}});const Le=se(ce,[["__scopeId","data-v-c216d6fd"]]);export{Le as default};
