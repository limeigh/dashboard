var A=Object.defineProperty;var E=(r,i,s)=>i in r?A(r,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[i]=s;var d=(r,i,s)=>(E(r,typeof i!="symbol"?i+"":i,s),s);import{M as I,D as _,V as S,z as m,W as B,A as k,o as x,B as y}from"./@codemirror-0.0.0-dataease.js";import{b as C}from"./codemirror-0.0.0-dataease.js";import{p as l}from"./index-0.0.0-dataease.js";import{d as R,o as W,c as q,Z as O}from"./@vue-0.0.0-dataease.js";import{_ as T}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@lezer-0.0.0-dataease.js";import"./style-mod-0.0.0-dataease.js";import"./crelt-0.0.0-dataease.js";import"./@marijn-0.0.0-dataease.js";import"./w3c-keyname-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./element-plus-secondary-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";const V=["id"],z=R({__name:"CodeMirror",props:{domId:l.string.def("editor"),height:l.string.def("250px"),quotaMap:l.arrayOf(String).def(()=>[]),dimensionMap:l.arrayOf(String).def(()=>[]),regexp:{type:RegExp,default:/\[(.*?)\]/g}},emits:["change"],setup(r,{expose:i,emit:s}){const p=r,v=s;return i({codeComInit:(h,u)=>{function w(t){let a,e=t[0],n=1;for(;n<t.length;){const o=t[n],c=t[n+1];if(n+=2,(o==="optionalAccess"||o==="optionalCall")&&e==null)return;o==="access"||o==="optionalAccess"?(a=e,e=c(e)):(o==="call"||o==="optionalCall")&&(e=c((...D)=>e.call(a,...D)),a=void 0)}return e}//!placeholderMatcher
const f=new I({regexp:new RegExp(p.regexp),decoration:t=>_.replace({widget:new M(t[1])})});//!placeholderPlugin
const g=S.fromClass(class{constructor(t){d(this,"placeholders");this.placeholders=f.createDeco(t)}update(t){this.placeholders=f.updateDeco(t,this.placeholders)}},{decorations:t=>t.placeholders,provide:t=>m.atomicRanges.of(a=>w([a,"access",e=>e.plugin,"call",e=>e(t),"optionalAccess",e=>e.placeholders])||_.none)});//!placeholderWidget
class M extends B{constructor(e){super();d(this,"name");this.name=e}eq(e){return this.name==e.name}toDOM(){let e=document.createElement("span");e.textContent=`[${this.name}]`;const{dimensionMap:n,quotaMap:o}=p;if(!(n!=null&&n.length)&&!(o!=null&&o.length))return e;const c=o.includes(this.name);return e.style.borderRadius="2px",e.style.margin="0 4px",e.style.padding="0 6px",e.style.background=c?"rgba(0, 214, 185, 0.20)":"rgba(51, 112, 255, 0.20)",e.style.color=c?"#04B49C":"#2B5FD9",e}ignoreEvent(){return!1}}const b=u?[C,k(),g,x.of([y]),m.updateListener.of(t=>{t.docChanged&&v("change")})]:[C,g,x.of([y])];return new m({doc:h,extensions:b,parent:document.querySelector(`#${p.domId}`)})}}),(h,u)=>(W(),q("div",{style:O({height:r.height}),class:"editor-placeholder",id:r.domId},null,12,V))}});const ue=T(z,[["__scopeId","data-v-f5cf56fd"]]);export{ue as default};
