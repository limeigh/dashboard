import{b as rl,c as dl,y as ml,a as te,u as cl,aN as ul,R as pl,z as fl}from"./index-0.0.0-dataease.js";import{E as vl}from"./el-dialog-0.0.0-dataease.js";import{j as T,n as I,v as hl,o as gl,D as X,y as yl,G as xl}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import{E as Cl,a as kl,b as _l}from"./el-dropdown-menu-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import{E as bl,a as El}from"./el-tabs-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import{E as wl,a as Sl}from"./el-form-item-0.0.0-dataease.js";import{E as Al}from"./el-checkbox-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{a as Fl,E as Il}from"./el-select-0.0.0-dataease.js";import{E as Tl}from"./el-row-0.0.0-dataease.js";import{E as ql}from"./el-popover-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import{d as Nl,af as Dl,r as z,y as L,t as Ol,aj as Vl,a as Ml,o as Bl,X as Fa,w as Xe,e as vt,f as u,O as F,P as p,u as o,g as x,i as n,j as i,W as ce,_ as h,R as ht,S as g,a4 as C,T as Ke,l as Le,a6 as Je,a3 as O,a8 as j,ag as zl,ah as Pl,n as Ne,L as gt}from"./vue-0.0.0-dataease.js";import{d as $l}from"./dv-info-0.0.0-dataease.js";import{i as Rl}from"./icon_down_outlined-1-0.0.0-dataease.js";import{i as K}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as yt}from"./icon_info_outlined-0.0.0-dataease.js";import{i as Ia}from"./icon-filter-0.0.0-dataease.js";import{i as Ql}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as Ll}from"./icon_refresh_outlined-0.0.0-dataease.js";import{i as Jl}from"./icon_search-outline_outlined-0.0.0-dataease.js";import{i as Ta}from"./icon_copy_outlined-0.0.0-dataease.js";import{useAppStoreWithOut as Ul}from"./app-0.0.0-dataease.js";import"./el-tree-0.0.0-dataease.js";import{E as jl}from"./el-tree-select-0.0.0-dataease.js";import{d as ne}from"./vuedraggable-es-0.0.0-dataease.js";import Ce from"./DimensionItem-0.0.0-dataease.js";import{f as ke}from"./attr-0.0.0-dataease23.js";import Ue from"./QuotaItem-0.0.0-dataease.js";import se from"./DragPlaceholder-0.0.0-dataease.js";import{_ as Wl}from"./FilterTree.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import qa from"./ChartStyle-0.0.0-dataease.js";import Na from"./VQueryChartStyle-0.0.0-dataease.js";import Hl from"./Senior-0.0.0-dataease.js";import Yl from"./QuotaFilterEditor-0.0.0-dataease.js";import Gl from"./ResultFilterEditor-0.0.0-dataease.js";import Xl from"./DrillItem-0.0.0-dataease.js";import{d as Kl}from"./dvMain-0.0.0-dataease.js";import{B as Zl,ac as Da,ag as ei,ah as ti}from"./chart-0.0.0-dataease.js";import ai from"./ChartType-0.0.0-dataease.js";import oi from"./CompareEdit-0.0.0-dataease.js";import li from"./ValueFormatterEdit-0.0.0-dataease.js";import ii from"./CustomSortEdit-0.0.0-dataease.js";import ni from"./SortPriorityEdit-0.0.0-dataease.js";import{s as si}from"./snapshot-0.0.0-dataease.js";import ri from"./CalcFieldEdit-0.0.0-dataease.js";import{g as di,b as mi}from"./util-0.0.0-dataease.js";import{E as Oa,F as ci}from"./dataset-0.0.0-dataease.js";import{c as Va}from"./index-0.0.0-dataease21.js";import ui from"./DatasetSelect-0.0.0-dataease.js";import{_ as Ze}from"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{g as pi,c as fi,d as vi}from"./chart-0.0.0-dataease2.js";import hi from"./ChartTemplateInfo-0.0.0-dataease.js";import{a as gi}from"./chart-list-0.0.0-dataease.js";import{i as xt}from"./field-list-0.0.0-dataease.js";import{i as yi,a as xi}from"./field-calculated-list-0.0.0-dataease.js";import{d as Ci}from"./canvasUtils-0.0.0-dataease.js";import{Q as ki,h as Ma,G as _i,a as et,s as tt,e as qe,z as Ba}from"./lodash-0.0.0-dataease.js";import{c as bi,d as Ei,E as wi,b as Si}from"./index-0.0.0-dataease16.js";import{E as Ai}from"./index-0.0.0-dataease4.js";import{E as Fi,a as Ii}from"./index-0.0.0-dataease27.js";import{E as Ti}from"./index-0.0.0-dataease20.js";import{_ as qi}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./constants-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./icon_sort_outlined-0.0.0-dataease.js";import"./icon_right_outlined-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";import"./utils-0.0.0-dataease.js";import"./RowAuth-0.0.0-dataease.js";import"./AuthTree-0.0.0-dataease.js";import"./FilterFiled-0.0.0-dataease.js";import"./el-checkbox-group-0.0.0-dataease.js";import"./icon_close_outlined-0.0.0-dataease.js";import"./TimeDialog-0.0.0-dataease.js";import"./el-time-picker-0.0.0-dataease.js";import"./dayjs.min-0.0.0-dataease.js";import"./el-date-picker-0.0.0-dataease.js";import"./arrays-0.0.0-dataease.js";import"./index-0.0.0-dataease18.js";import"./time-format-0.0.0-dataease.js";import"./options-0.0.0-dataease.js";import"./icon_down_outlined-0.0.0-dataease.js";import"./MiscSelector-0.0.0-dataease.js";import"./el-slider-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./LabelSelector-0.0.0-dataease.js";import"./el-divider-0.0.0-dataease.js";import"./el-color-picker-0.0.0-dataease.js";import"./position-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./StringUtils-0.0.0-dataease.js";import"./TooltipSelector-0.0.0-dataease.js";import"./XAxisSelector-0.0.0-dataease.js";import"./YAxisSelector-0.0.0-dataease.js";import"./DualYAxisSelector-0.0.0-dataease.js";import"./DualYAxisSelectorInner-0.0.0-dataease.js";import"./TitleSelector-0.0.0-dataease.js";import"./icon_letter-spacing_outlined-0.0.0-dataease.js";import"./icon_italic_outlined-0.0.0-dataease.js";import"./icon_right-alignment_outlined-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./LegendSelector-0.0.0-dataease.js";import"./icon_bottom-align_outlined-0.0.0-dataease.js";import"./SummarySelector-0.0.0-dataease.js";import"./CollapseSwitchItem-0.0.0-dataease.js";import"./el-collapse-item-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";import"./BasicStyleSelector-0.0.0-dataease.js";import"./CustomColorStyleSelect-0.0.0-dataease.js";import"./icon_admin_outlined-0.0.0-dataease.js";import"./GradientColorSelector-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./SymbolicStyleSelector-0.0.0-dataease.js";import"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import"./DualBasicStyleSelector-0.0.0-dataease.js";import"./CommonBorderSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./BackgroundOverallCommon-0.0.0-dataease.js";import"./board-list-0.0.0-dataease.js";import"./ImgViewDialog-0.0.0-dataease.js";import"./TableHeaderSelector-0.0.0-dataease.js";import"./TableHeaderGroupConfig-0.0.0-dataease.js";import"./index.esm-0.0.0-dataease.js";import"./TableCellSelector-0.0.0-dataease.js";import"./TableTotalSelector-0.0.0-dataease.js";import"./CustomAggrEdit-0.0.0-dataease.js";import"./icon_adjustment_outlined-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./MiscStyleSelector-0.0.0-dataease.js";import"./IndicatorValueSelector-0.0.0-dataease.js";import"./IndicatorNameSelector-0.0.0-dataease.js";import"./QuadrantSelector-0.0.0-dataease.js";import"./FlowMapLineSelector-0.0.0-dataease.js";import"./FlowMapPointSelector-0.0.0-dataease.js";import"./BulletTargetSelector.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./BulletMeasureSelector.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./BulletRangeSelector.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./FunctionCfg-0.0.0-dataease.js";import"./ScrollCfg-0.0.0-dataease.js";import"./AssistLine-0.0.0-dataease.js";import"./AssistLineEdit-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./Threshold-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./MapMapping-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./el-table-0.0.0-dataease.js";import"./raf-0.0.0-dataease.js";import"./LinkageSet-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./dv-empty-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./BubbleAnimateCfg-0.0.0-dataease.js";import"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./index-0.0.0-dataease29.js";import"./chart-dark-list-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./eventBus-0.0.0-dataease.js";import"./index-0.0.0-dataease22.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./icon_dataset-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";const Ni={key:0,class:"collapse-title"},Di={style:{"font-size":"14px"}},Oi={key:1,style:{width:"240px"},class:"view-panel-row"},Vi={style:{display:"flex","align-items":"center",width:"calc(100% - 24px)"}},Mi={style:{"margin-bottom":"4px","font-size":"14px",color:"#646a73"}},Bi={style:{"font-size":"14px",color:"#1f2329"}},zi={class:"query-style-tab"},Pi={style:{"padding-top":"1px"}},$i={class:"data-area-label"},Ri={class:"data-area-label"},Qi={class:"area-tree-select"},Li={class:"form-draggable-title"},Ji={key:0,class:"required"},Ui={class:"form-draggable-title"},ji={key:0,class:"required"},Wi={class:"form-draggable-title"},Hi={key:0,class:"required"},Yi={class:"form-draggable-title"},Gi={key:0,class:"required"},Xi={class:"form-draggable-title"},Ki={key:0,class:"required"},Zi={class:"form-draggable-title"},en={key:0,class:"required"},tn={class:"form-draggable-title"},an={class:"data-area-label"},on={style:{"margin-right":"4px"}},ln={key:0,class:"required"},nn={class:"form-draggable-title"},sn={key:0,class:"required"},rn={class:"form-draggable-title"},dn={key:0,class:"required"},mn={class:"form-draggable-title"},cn={key:0,class:"required"},un={class:"form-draggable-title"},pn={key:0,class:"required"},fn={class:"form-draggable-title"},vn={class:"data-area-label"},hn={style:{"margin-right":"4px"}},gn={key:0,class:"required"},yn={class:"form-draggable-title"},xn={class:"data-area-label"},Cn={style:{"margin-right":"4px"}},kn={class:"form-draggable-title"},_n={class:"result-style-input"},bn={key:0},En={key:1,style:{"padding-left":"8px"}},wn={style:{"font-size":"12px"}},Sn={key:0,class:"collapse-title"},An={style:{"font-size":"14px"}},Fn={style:{"font-size":"14px"}},In=["onClick","onDragstart"],Tn=["title"];const qn=["onClick","onDragstart"],Nn=["title"];const Dn={class:"text"},On={class:"dialog-footer"},Vn={class:"dialog-footer"},Mn={class:"dialog-footer"},Bn={class:"dialog-footer"},zn={class:"dialog-footer"},Pn={class:"dialog-footer"},$n={style:{"font-size":"15px","font-weight":"bold",color:"#1f2329"}},Rn={style:{color:"#1f2329"}},Qn={class:"dialog-footer"},Ln=["effect"],Jn=Nl({__name:"index",props:{view:{type:Object,required:!1,default(){return{...Zl}}},datasetTree:{type:Array,default:()=>[]},themes:{type:String,default:"dark"}},setup(f){const{wsCache:at}=rl("localStorage"),ot=dl(),_e=si(),za=Kl(),{canvasCollapse:re,curComponent:q,componentData:Pa,editMode:Ct,mobileInPc:be,fullscreenFlag:$a,dvInfo:je}=Dl(za),kt=ml();let We=z(!1),W=z({id:null,name:null}),_t=z(null);const{t:v}=gl(),Ra=z(!1),bt=z("data"),He=z(null),Et=z(0),wt=z(),{emitter:J}=te({name:"set-table-column-width",callback:e=>Do(e)});te({name:"set-page-size",callback:e=>Oo(e)});const $=f,De=z(!1),lt=z(!0),Oe=z(),Qa=cl(),La=()=>{_e.recordSnapshotCache("onComponentNameChange")},Ja=()=>{if(We.value=!1,q.value.id===W.value.id&&!(!W.value.name||!W.value.name.trim())&&W.value.name.trim()!==a.value.title){if(W.value.name.trim().length>64||W.value.name.trim().length<2){X.warning("名称字段长度2-64个字符"),St();return}a.value.title=W.value.name,a.value.type==="VQuery"&&(a.value.customStyle.component.title=W.value.name),q.value&&(q.value.label=W.value.name,q.value.name=W.value.name),W.value.name="",W.value.id=""}},St=()=>{We.value=!0,W.value.name=a.value.title,W.value.id=a.value.id,Ne(()=>{_t.value.focus()})},R=L(()=>$.themes||"dark"),At=L(()=>a.value.dataFrom==="template"&&a.value.type!=="picture-group"&&!be.value),{view:a}=Ol($);let Ve="";const Ua=e=>{e&&e.forEach(t=>Y(t))};Vl(()=>{Ve=Qa.query.id}),Ml(()=>{Ve=""}),Bl(()=>{te({name:"clear-remove",callback:Ua})});const Ye=Ul(),ja=L(()=>Ye.getIsDataEaseBi||Ye.getIsIframe),Wa=Fa({chartShowName:[{required:!0,message:v("commons.input_content"),trigger:"change"},{max:200,message:v("commons.char_count_limit",{count:200}),trigger:"change"}]}),l=Fa({extData:"",moveId:-1,dimension:[],quota:[],dimensionData:[],quotaData:[],renameItem:!1,itemForm:{name:"",chartShowName:"",index:0,renameType:""},quotaFilterEdit:!1,quotaItem:{},resultFilterEdit:!1,filterItem:{},chartForFilter:{},searchField:"",quotaItemCompare:{},showEditQuotaCompare:!1,showValueFormatter:!1,valueFormatterItem:{},showCustomSort:!1,showSortPriority:!1,sortPriority:[],customSortList:[],customSortField:{},currEditField:{},worldTree:[],areaId:"",chartTypeOptions:[],useless:null}),Ha=L(()=>[...l.dimension,...l.quota].filter(e=>e.id!=="count"&&!!e.summary));gt("filedList",()=>Ha.value),gt("quota",()=>l.quota),Xe([()=>a.value.tableId],()=>{Ne(()=>{var s;if($.view.type==="picture-group")return;Se($.view.tableId,$.view.id,$.view.type);const e=a.value.tableId;e&&(Ve=e);const t=(s=He==null?void 0:He.value)==null?void 0:s.getNode(e);t!=null&&t.data&&(Et.value=t.data.weight)})},{deep:!0,immediate:!0});const Se=(e,t,s)=>{e&&t?(ye.value=!0,pi(e,t,{type:s}).then(c=>{l.dimension=c.dimensionList||[],l.quota=c.quotaList||[],l.dimensionData=JSON.parse(JSON.stringify(l.dimension)),l.quotaData=JSON.parse(JSON.stringify(l.quota)),ye.value=!1,J.emit("dataset-change")}).catch(()=>{l.dimension=[],l.quota=[],l.dimensionData=[],l.quotaData=[],ye.value=!1})):(l.dimension=[],l.quota=[],l.dimensionData=[],l.quotaData=[],ye.value=!1)},Ft=L(()=>!["richText","Picture"].includes(a.value.type)&&q.value&&q.value.component==="UserView"),E=L(()=>Va.getChartView(a.value.render,a.value.type)),Z=e=>{var t,s;return(s=(t=E.value)==null?void 0:t.axis)==null?void 0:s.includes(e)},it=z(),It=z([]);Xe(()=>[a.value.type,a.value],e=>{var t,s,c,y,b,w;Z("area")&&((t=l.worldTree)!=null&&t.length?l.areaId=(y=(c=(s=a.value)==null?void 0:s.customAttr)==null?void 0:c.map)==null?void 0:y.id:ei().then(async k=>{var S,A,ge;const P=(await ti()).data,Q={id:"customRoot",name:"自定义区域",disabled:!0};P.length&&(Q.children=P),l.worldTree.splice(0,l.worldTree.length,k.data,Q),l.areaId=(ge=(A=(S=a.value)==null?void 0:S.customAttr)==null?void 0:A.map)==null?void 0:ge.id}),(b=it.value)==null||b.blur(),It.value.splice(0),(w=it.value)==null||w.setCurrentKey(l.areaId)),l.chartTypeOptions.splice(0,l.chartTypeOptions.length,Da(e[0])),l.useless=e[0]},{immediate:!0,deep:!1});const Ya={label:"name",children:"children",disabled:"disabled"},N=e=>{a.value.dataFrom="calc",_e.recordSnapshotCache(e,a.value.id)},Ga=()=>{a.value.calParams=[],N("calcData")},Xa=(e,t)=>{var s;return e?(s=t.name)==null?void 0:s.includes(e):!0},Me=L(()=>ki(l.quotaData,l.dimensionData)),Ka=L(()=>{let e=[];return Pa.value.forEach(t=>{t.innerType==="VQuery"&&e.push(t),t.innerType==="DeTabs"&&t.propValue.forEach(s=>{e=[...s.componentData.filter(c=>c.innerType==="VQuery"),...e]})}),e}),nt=L(()=>{var t;let e=JSON.parse(JSON.stringify(l.quota));return((t=a.value)==null?void 0:t.type)==="table-info"&&(e=e==null?void 0:e.filter(s=>s.id!=="-1")),l.searchField&&(e=e.filter(s=>s.name.toLowerCase().includes(l.searchField.toLowerCase()))),e}),st=L(()=>{let e=JSON.parse(JSON.stringify(l.dimensionData));return l.searchField&&(e=e.filter(t=>t.name.toLowerCase().includes(l.searchField.toLowerCase()))),e}),Za=L(()=>{var t;let e=JSON.parse(JSON.stringify(l.quota));return((t=a.value)==null?void 0:t.type)==="table-info"&&(e=e==null?void 0:e.filter(s=>s.id!=="-1")),e});gt("quotaData",Za);const eo=(e,t)=>{e.dataTransfer.setData("dimension",JSON.stringify(t.filter(s=>s.id).map(s=>({...qe(o(s)),datasetId:a.value.tableId}))))},ue=e=>{var t,s;N("calcData"),a.value.type==="bar-range"&&(e.axisType==="quota"?(t=a.value.yAxisExt)==null||t.forEach(c=>{c.dateStyle=e.dateStyle,c.datePattern=e.datePattern}):e.axisType==="quotaExt"&&((s=a.value.yAxis)==null||s.forEach(c=>{c.dateStyle=e.dateStyle,c.datePattern=e.datePattern})))},pe=e=>{N("calcData"),e.removeType==="dimension"?a.value.xAxis.splice(e.index,1):e.removeType==="dimensionExt"?a.value.xAxisExt.splice(e.index,1):e.removeType==="dimensionStack"?a.value.extStack.splice(e.index,1):e.removeType==="quota"?a.value.yAxis.splice(e.index,1):e.removeType==="quotaExt"?a.value.yAxisExt.splice(e.index,1):e.removeType==="xAxisExtRight"?a.value.extBubble.splice(e.index,1):e.removeType==="flowMapStartName"?a.value.flowMapStartName.splice(e.index,1):e.removeType==="flowMapEndName"?a.value.flowMapEndName.splice(e.index,1):e.removeType==="extColor"&&a.value.extColor.splice(e.index,1)},Be=(e,t)=>{N("calcData"),J.emit("updateAxis",{axisType:t,axis:[e],editType:"update"})},to=()=>{N("calcData")},ze=e=>{N("calcData");let t=e.removeType,s;e.removeType==="quota"?(t="yAxis",s=a.value.yAxis.splice(e.index,1)):e.removeType==="quotaExt"?(t="yAxisExt",s=a.value.yAxisExt.splice(e.index,1)):e.removeType==="extLabel"?s=a.value.extLabel.splice(e.index,1):e.removeType==="extTooltip"?s=a.value.extTooltip.splice(e.index,1):e.removeType==="extBubble"&&(s=a.value.extBubble.splice(e.index,1)),te().emitter.emit("removeAxis",{axisType:t,axis:s,editType:"remove"})},Tt=L(()=>{var e,t;return!!((t=(e=a.value.customFilter)==null?void 0:e.items)!=null&&t.length)}),ao=L(()=>{var s,c;if(!((c=(s=a.value.customFilter)==null?void 0:s.items)!=null&&c.length)||!a.value.tableId)return!1;const e=a.value.customFilter.items[0];return!Me.value.some(y=>y.id===e.fieldId)}),oo=()=>{N("calcData")},lo=e=>{N("calcData"),a.value.drillFields.splice(e.index,1)},fe=z("xAxis"),Ee=()=>{l.showCustomSort=!0},io=e=>{l.customSortList=e},qt=()=>{l.showCustomSort=!1,l.customSortField={},l.customSortList=[]},no=()=>{a.value[fe.value].forEach(e=>{e.id===l.customSortField.id&&(e.sort="custom_sort",e.customSort=l.customSortList)}),qt()},Nt=e=>{N("render"),l.customSortField=a.value.xAxis[e.index],fe.value="xAxis",Ee()},so=e=>{N("render"),l.customSortField=a.value.extStack[e.index],fe.value="extStack",Ee()},rt=e=>{N("render"),l.customSortField=a.value.xAxisExt[e.index],fe.value="xAxisExt",Ee()},ro=e=>{N("render"),l.customSortField=a.value.extBubble[e.index],fe.value="extBubble",Ee()},mo=e=>{N("render"),l.customSortField=a.value.flowMapStartName[e.index],fe.value="flowMapStartName",Ee()},co=e=>{N("render"),l.customSortField=a.value.flowMapEndName[e.index],fe.value="flowMapEndName",Ee()},uo=e=>{N("render"),l.customSortField=a.value.extColor[e.index],fe.value="extColor",Ee()},po=e=>{N("render"),l.customSortField=a.value.drillFields[e.index],fe.value="drillFields",Ee()},ae=e=>(N("calcData"),l.moveId=e.draggedContext.element.id,!0),Dt=(e,t)=>{if(e&&e.length>0){let s=!0;for(let c=0;c<e.length;c++)e[c].groupType!==t&&(e.splice(c,1),s=!1);return s||X({message:v(t==="d"?"chart.error_q_2_d":"chart.error_d_2_q"),type:"warning"}),s}},Ot=(e,t,s)=>{if(s==="ds")e.splice(t.newDraggableIndex,1);else{const c=e.filter(function(y){return y.id===l.moveId});if(c&&c.length>1)return e.splice(t.newDraggableIndex,1),c}},fo=(e,t)=>{const s=e.filter(function(c){return c.id===l.moveId});s&&s.length>0&&s[0].summary===""&&e.splice(t.newDraggableIndex,1)},vo=L(()=>{if(a.value.type==="bar-range"){const e=a.value.yAxis[0],t=a.value.yAxisExt[0];if(e&&e.groupType==="d"||t&&t.groupType==="d")return!0}return!1}),ho=L(()=>{let e=!1;if(a.value.type==="table-info"||!E.value)return e;const t=E.value.axisConfig;if(!t)return e;for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const c=a.value[s];c instanceof Array&&c.forEach(y=>{y.desensitized&&(e=!0)})}return e}),go=e=>{if(e&&e.length>0){let t=!0;for(let s=0;s<e.length;s++)e[s].deType!==5&&(e.splice(s,1),t=!1);return t||X({message:v("chart.error_d_not_coordinates"),type:"warning"}),t}},ve=(e,t)=>{var P,Q,S,A,ge;N("calcData");const s=(P=E.value)==null?void 0:P.axisConfig[t];if(!s)return;const{type:c,limit:y,duplicate:b}=s;let w,k;if(a.value.type==="bar-range"&&(t==="yAxis"||t==="yAxisExt")){const _=a.value[t];if(_&&_.length>0){let B=!0;for(let V=0;V<_.length;V++)_[V].groupType==="d"&&_[V].deType===1&&(_[V].sort="asc"),_[V].groupType==="q"||_[V].groupType==="d"&&_[V].deType===1||(_.splice(V,1),B=!1);B||X({message:v("chart.error_d_not_time_2_q"),type:"warning"}),w=B}}else(a.value.type==="symbolic-map"||a.value.type==="heat-map")&&t==="xAxis"||a.value.type==="flow-map"&&(t==="xAxis"||t==="xAxisExt")?w=go(a.value[t]):c&&(w=Dt(a.value[t],c));if(w&&c==="q"&&a.value.type==="indicator"){const _=a.value[t];if(_&&_.length>0){let B=!0;for(let V=0;V<_.length;V++)_[V].deType!==2&&_[V].deType!==3&&(_.splice(V,1),B=!1);w=B,w||X({message:v("chart.error_not_number"),type:"warning"})}}if(b||(k=Ot(a.value[t],e,"chart")),a.value[t].length>y){const _=a.value[t].splice(y);e.newDraggableIndex+1<=y&&(J.emit("removeAxis",{axisType:t,axis:_,editType:"remove"}),J.emit("addAxis",{axisType:t,axis:[a.value[t][e.newDraggableIndex]],editType:"add"}))}else if(!k&&w){const _=a.value.type==="gauge"||a.value.type==="liquid",B=qe(l.quotaData);J.emit("addAxis",{axisType:t,axis:[a.value[t][e.newDraggableIndex]],editType:"add",..._?{quotaData:B}:{}})}if(a.value.type==="line"&&(S=(Q=a.value)==null?void 0:Q.xAxisExt)!=null&&S.length&&((ge=(A=a.value)==null?void 0:A.yAxis)==null?void 0:ge.length)>1){const _=a.value.yAxis.splice(1);J.emit("removeAxis",{axisType:"yAxis",axis:_,editType:"remove"})}if(a.value.type.includes("chart-mix")){if(t==="yAxis"){if(a.value.yAxisExt.length>0){const _=a.value.yAxisExt[0].chartType;Ba(a.value.yAxis,B=>{_==="bar"?B.chartType="line":_==="line"&&(B.chartType="bar")})}}else if(t==="yAxisExt"&&a.value.yAxis.length>0){const _=a.value.yAxis[0].chartType;Ba(a.value.yAxisExt,B=>{_==="bar"?B.chartType="line":_==="line"&&(B.chartType="bar")})}}if(w&&a.value.type==="bar-range"){let _=null,B=null;if(t==="yAxis"&&a.value.yAxisExt[0]?(_=a.value.yAxisExt[0].groupType,B=a.value.yAxisExt[0].deType):t==="yAxisExt"&&a.value.yAxis[0]&&(_=a.value.yAxis[0].groupType,B=a.value.yAxis[0].deType),_!==null){const V=a.value[t];if(V&&V.length>0){let de=!0;for(let xe=0;xe<V.length;xe++)V[xe].groupType===_&&(_==="q"||_==="d"&&V[xe].deType===B)||(V.splice(xe,1),de=!1);de||X({message:v("chart.error_bar_range_axis_type_not_equal"),type:"warning"}),w=de}}}},yo=e=>{ve(e,"xAxis")},xo=e=>{ve(e,"xAxisExt")},Co=e=>{ve(e,"extStack")},Vt=e=>{ve(e,"yAxis")},Mt=e=>{ve(e,"yAxisExt")},Bt=e=>{ve(e,"extBubble")},zt=e=>{N("calcData"),Dt(a.value.drillFields,"d"),Ot(a.value.drillFields,e,""),fo(a.value.drillFields,e)},ko=e=>{ve(e,"flowMapStartName")},_o=e=>{ve(e,"flowMapEndName")},bo=e=>{ve(e,"extColor")},Ae=(e,t)=>{if(e.removed){const{element:s}=e.removed;J.emit("removeAxis",{axisType:t,axis:[s],editType:"remove"})}},Fe=(e,t=!1,s="")=>{if(e.refreshTime===""||parseFloat(e.refreshTime).toString()==="NaN"||parseFloat(e.refreshTime)<1){X.error(v("chart.only_input_number"));return}t?te().emitter.emit("resetDrill-"+e.id,0):be.value?te().emitter.emit("onMobileStatusChange",{type:"componentStyleChange",value:{type:"calcData",component:JSON.parse(JSON.stringify(e))}}):(te().emitter.emit("calcData-"+e.id,e),_e.recordSnapshotCache("renderChart",e.id)),_e.recordSnapshotCache("calcData",e.id),s==="updateQuery"&&Ka.value.forEach(c=>{te().emitter.emit(`updateQueryCriteria${c.id}`)})},Eo=e=>{q.value.state="ready",te().emitter.emit("checkShowEmpty",{allFields:Me.value,view:e}),Fe(e,!0,"updateQuery")},M=e=>{be.value?te().emitter.emit("onMobileStatusChange",{type:"componentStyleChange",value:{type:"renderChart",component:JSON.parse(JSON.stringify(e))}}):(te().emitter.emit("renderChart-"+e.id,e),_e.recordSnapshotCache("renderChart",e.id))},wo=e=>{e.id!=="customRoot"&&(a.value.customAttr.map={id:e.id,level:e.level},M(a.value))},So=(e,t)=>{var y,b,w,k,P;const s=Da(t);s.isPlugin?(a.value.plugin={isPlugin:!0,staticMap:s.staticMap},a.value.isPlugin=!0):(a.value.isPlugin=!1,delete a.value.plugin),a.value.render=e,a.value.type=t,J.emit("chart-type-change"),J.emit("chart-type-change-"+a.value.id);const c=Va.getChartView(a.value.render,a.value.type);if(c){a.value=c.setupDefaultOptions(a.value);const Q=c.axisConfig;if(_i(Q).forEach(S=>{const A=a.value[S];if(!(A!=null&&A.length))return;const ge=Q[S],{type:_,limit:B}=ge,V=[];if(_){for(let de=A.length-1;de>=0;de--)if(A[de].groupType!==_){const[xe]=A.splice(de,1);V.push(xe)}}B&&B<A.length&&A.splice(B).forEach(de=>V.push(de)),V.length&&J.emit("removeAxis",{axisType:S,axis:V,editType:"remove"})}),a.value.type==="line"&&(b=(y=a.value)==null?void 0:y.xAxisExt)!=null&&b.length&&((k=(w=a.value)==null?void 0:w.yAxis)==null?void 0:k.length)>1){const S=a.value.yAxis.splice(1);J.emit("removeAxis",{axisType:"yAxis",axis:S,editType:"remove"})}if((a.value.type==="liquid"||a.value.type==="gauge"||a.value.type==="indicator")&&Y("drillFields"),!["line","area","bar","bar-group"].includes(a.value.type)){const S=document.getElementById("point_"+a.value.id);S&&(S.remove(),(P=S.parentNode)==null||P.removeChild(S))}}q.value.innerType=t,Fe(a.value,!0)},Pt=(e,t)=>{const{data:s,requestData:c,render:y}=e,b=et(s,t);tt(a.value.customAttr.basicStyle,t,b),c&&Fe(a.value),y!==!1&&M(a.value)},$t=e=>{a.value.customAttr.tableHeader=e,M(a.value)},Rt=e=>{a.value.customAttr.tableCell=e,M(a.value)},Qt=e=>{a.value.customAttr.tableTotal=e,M(a.value)},Lt=e=>{a.value.customAttr.color=e,M(a.value)},Jt=e=>{a.value.customAttr.misc=e.data,e.requestData?Fe(a.value):M(a.value)},Ut=(e,t)=>{const{data:s,render:c}=e;let y=s;if(s||(y=e),t){const b=et(y,t);tt(a.value.customAttr.label,t,b)}else a.value.customAttr.label=y;c!==!1&&M(a.value)},jt=(e,t)=>{(t==="color"||t==="suffixColor")&&(a.value.customAttr.basicStyle.alpha=void 0,e.indicatorName!==void 0&&(a.value.customAttr.indicatorName=e.indicatorName)),a.value.customAttr.indicator=e.indicatorValue,M(a.value)},Wt=(e,t)=>{t==="color"&&(a.value.customAttr.basicStyle.alpha=void 0,e.indicatorValue!==void 0&&(a.value.customAttr.indicator=e.indicatorValue)),a.value.customAttr.indicatorName=e.indicatorName,M(a.value)},Ht=(e,t)=>{const{data:s,requestData:c,render:y}=e;let b=s;if(s||(b=e),t){const w=et(b,t);tt(a.value.customAttr.tooltip,t,w)}else a.value.customAttr.tooltip=b;if(c){Fe(a.value);return}y!==!1&&M(a.value)},Yt=e=>{a.value.customStyle.xAxis=e,M(a.value)},Gt=e=>{a.value.customStyle.yAxis=e,M(a.value)},Xt=e=>{a.value.customStyle.yAxisExt=e,M(a.value)},Kt=e=>{a.value.customStyle.misc=e,M(a.value)},Zt=e=>{a.value.customStyle.text=e,q.value&&(q.value.name=a.value.title,q.value.title=a.value.title),be.value?te().emitter.emit("onMobileStatusChange",{type:"componentStyleChange",value:{type:"updateTitle",component:JSON.parse(JSON.stringify(a.value))}}):(te().emitter.emit("updateTitle-"+a.value.id),_e.recordSnapshotCache("renderChart",a.value.id))},ea=e=>{a.value.customStyle.legend=e,M(a.value)},Ao=e=>{a.value.senior.functionCfg=e,M(a.value)},ta=e=>{var t;q.value.id===((t=a.value)==null?void 0:t.id)&&(q.value.commonBackground=e,be.value&&te().emitter.emit("onMobileStatusChange",{type:"componentStyleChange",value:{type:"commonBackground",component:JSON.parse(JSON.stringify(q.value))}}))},aa=e=>{q.value.style[e.property]=e.value,be.value&&te().emitter.emit("onMobileStatusChange",{type:"componentStyleChange",value:{type:"style",component:JSON.parse(JSON.stringify(q.value))}})},Fo=e=>{a.value.senior.assistLineCfg=e.data,e.requestData?Fe(a.value):M(a.value)},Io=e=>{var s,c;a.value.senior.threshold=e;let t;(c=(s=a.value.senior.threshold)==null?void 0:s.tableThreshold)==null||c.some(y=>y.conditions.some(b=>b.type==="dynamic")?(t="calcData",!0):!1),t||a.value.type==="rich-text"?Fe(a.value):M(a.value)},To=e=>{a.value.senior.areaMapping=e,M(a.value)},qo=e=>{a.value.senior.scrollCfg=e,M(a.value)},No=e=>{a.value.senior.bubbleCfg=e,M(a.value)},Do=e=>{Ct.value==="edit"&&(a.value.customAttr.basicStyle.tableFieldWidth=e,_e.recordSnapshotCache("renderChart",a.value.id))},Oo=e=>{Ct.value==="edit"&&(a.value.customAttr.basicStyle.tablePageSize=e,_e.recordSnapshotCache("renderChart",a.value.id))},oa=e=>{a.value.extTooltip=e},la=e=>{a.value.customAttr.quadrant=e,M(a.value)},ia=(e,t)=>{const s=et(e,t);tt(a.value.customAttr.misc.flowMapConfig.lineConfig,t,s),M(a.value)},na=e=>{a.value.customAttr.misc.flowMapConfig.pointConfig=e,M(a.value)},H=e=>{N("render"),l.itemForm=JSON.parse(JSON.stringify(e)),l.itemForm.chartShowName||(l.itemForm.chartShowName=l.itemForm.name),l.renameItem=!0},sa=()=>{l.renameItem=!1},Y=e=>{var s,c,y,b,w,k,P,Q,S,A;N("calcData");let t=[];switch(e){case"xAxis":t=(s=a.value.xAxis)==null?void 0:s.splice(0);break;case"xAxisExt":t=(c=a.value.xAxisExt)==null?void 0:c.splice(0);break;case"extStack":t=(y=a.value.extStack)==null?void 0:y.splice(0);break;case"yAxis":t=(b=a.value.yAxis)==null?void 0:b.splice(0);break;case"yAxisExt":t=(w=a.value.yAxisExt)==null?void 0:w.splice(0);break;case"extBubble":t=(k=a.value.extBubble)==null?void 0:k.splice(0);break;case"customFilter":a.value.customFilter={};return;case"drillFields":t=(P=a.value.drillFields)==null?void 0:P.splice(0);break;case"flowMapStartName":t=(Q=a.value.flowMapStartName)==null?void 0:Q.splice(0);break;case"flowMapEndName":t=(S=a.value.flowMapEndName)==null?void 0:S.splice(0);break;case"extColor":t=(A=a.value.extColor)==null?void 0:A.splice(0);break}t!=null&&t.length&&J.emit("removeAxis",{axisType:e,axis:t,editType:"remove"})},Vo=e=>{e&&e.validate(t=>{if(t){const{renameType:s,index:c,chartShowName:y}=l.itemForm;let b,w;switch(s){case"quota":b="yAxis",w=a.value.yAxis[c],a.value.yAxis[c].chartShowName=y;break;case"dimension":a.value.xAxis[c].chartShowName=y;break;case"quotaExt":b="yAxisExt",w=a.value.yAxisExt[c],a.value.yAxisExt[c].chartShowName=y;break;case"dimensionExt":a.value.xAxisExt[c].chartShowName=y;break;case"xAxisExtRight":a.value.extBubble[c].chartShowName=y;break;case"dimensionStack":a.value.extStack[c].chartShowName=y;break;case"extBubble":b="extBubble",w=a.value.extBubble[c],a.value.extBubble[c].chartShowName=y;break;case"extLabel":a.value.extLabel[c].chartShowName=y;break;case"extTooltip":a.value.extTooltip[c].chartShowName=y;case"flowMapStartName":b="flowMapStartName",w=a.value.flowMapStartName[c],a.value.flowMapStartName[c].chartShowName=y;break;case"flowMapEndName":b="flowMapEndName",w=a.value.flowMapEndName[c],a.value.flowMapEndName[c].chartShowName=y;break;case"extColor":b="extColor",w=a.value.extColor[c],a.value.extColor[c].chartShowName=y;break;case"drillFields":b="drillFields",w=a.value.drillFields[c],a.value.drillFields[c].chartShowName=y}b&&J.emit("updateAxis",{axisType:b,axis:[w],editType:"update"}),sa()}else return!1})},Pe=e=>{N("calcData"),l.quotaItem=JSON.parse(JSON.stringify(e)),l.quotaItem.logic||(l.quotaItem.logic="and"),l.quotaFilterEdit=!0},ra=()=>{l.quotaFilterEdit=!1},Mo=()=>{for(let e=0;e<l.quotaItem.filter.length;e++){const t=l.quotaItem.filter[e];if(!t.term.includes("null")&&!t.term.includes("empty")&&(!t.value||t.value==="")){X.error(v("chart.filter_value_can_null"));return}if(!t.term.includes("null")&&!t.term.includes("empty")&&isNaN(t.value)){X.error(v("chart.filter_value_can_not_str"));return}}l.quotaItem.filterType==="quota"?(a.value.yAxis[l.quotaItem.index].filter=l.quotaItem.filter,a.value.yAxis[l.quotaItem.index].logic=l.quotaItem.logic):l.quotaItem.filterType==="quotaExt"&&(a.value.yAxisExt[l.quotaItem.index].filter=l.quotaItem.filter,a.value.yAxisExt[l.quotaItem.index].logic=l.quotaItem.logic),ra()},Bo=e=>{a.value.customFilter=qe(e)},da=z(),ma=()=>{da.value.init(qe(a.value.customFilter))},ca=()=>{l.resultFilterEdit=!1},zo=()=>{if((l.filterItem.deType===0||l.filterItem.deType===5)&&l.filterItem.filterType!=="enum"||l.filterItem.deType===1||l.filterItem.deType===2||l.filterItem.deType===3)for(let e=0;e<l.filterItem.filter.length;e++){const t=l.filterItem.filter[e];if(!t.term.includes("null")&&!t.term.includes("empty")&&(!t.value||t.value==="")){X.error(v("chart.filter_value_can_null"));return}if((l.filterItem.deType===2||l.filterItem.deType===3)&&!t.term.includes("null")&&!t.term.includes("empty")&&isNaN(t.value)){X.error(v("chart.filter_value_can_not_str"));return}}a.value.customFilter[l.filterItem.index].filter=l.filterItem.filter,a.value.customFilter[l.filterItem.index].logic=l.filterItem.logic,a.value.customFilter[l.filterItem.index].filterType=l.filterItem.filterType,a.value.customFilter[l.filterItem.index].enumCheckField=l.filterItem.enumCheckField,ca()},ua=e=>{re.value[e]=!re.value[e]},$e=z(null),dt=e=>{if($e!=null&&$e.value){const t={methodName:"initOpenHandler",args:e};$e.value.invokeMethod(t)}},Po=()=>{if(!je.value.id){X.warning(v("visualization.save_page_tips"));return}const e=ot.getToken&&Ye.getIsIframe?"dataset-embedded-form":"/dataset-form";let t=kt.resolve(e);const s=at.get("open-backend")==="1"?"_self":"_blank",c=window.open(t.href,s);dt(c)},$o=()=>{const e=ot.getToken&&Ye.getIsIframe?"dataset-embedded-form":"/dataset-form",t=at.get("open-backend")==="1"?"_self":"_blank";if(t==="_self"&&!je.value.id){X.warning(v("visualization.save_page_tips"));return}let s=kt.resolve({path:e,query:{id:a.value.tableId}});if(t==="_self"){if(!je.value.id){X.warning(v("visualization.save_page_tips"));return}Ci(()=>{at.delete("DE-DV-CATCH-"+je.value.id);const c=window.open(s.href,t);dt(c)})}else{const c=window.open(s.href,t);dt(c)}},Re=e=>{N("calcData"),l.quotaItemCompare=JSON.parse(JSON.stringify(e)),l.showEditQuotaCompare=!0},pa=()=>{l.showEditQuotaCompare=!1},Ro=()=>{l.quotaItemCompare.calcType==="quota"?a.value.yAxis[l.quotaItemCompare.index].compareCalc=l.quotaItemCompare.compareCalc:l.quotaItemCompare.calcType==="quotaExt"?a.value.yAxisExt[l.quotaItemCompare.index].compareCalc=l.quotaItemCompare.compareCalc:l.quotaItemCompare.calcType==="extLabel"?a.value.extLabel[l.quotaItemCompare.index].compareCalc=l.quotaItemCompare.compareCalc:l.quotaItemCompare.calcType==="extTooltip"&&(a.value.extTooltip[l.quotaItemCompare.index].compareCalc=l.quotaItemCompare.compareCalc),pa()},fa=e=>{switch(N("render"),e.axisType){case"dimension":a.value.xAxis[e.index].hide=e.hide;break;case"quota":a.value.yAxis[e.index].hide=e.hide;break}M(a.value)},ee=()=>{l.showSortPriority=!0},va=()=>{l.showSortPriority=!1},Qo=()=>{a.value.sortPriority=l.sortPriority,N("render"),va()},Lo=e=>{l.sortPriority=e},he=e=>{N("render"),l.valueFormatterItem=JSON.parse(JSON.stringify(e)),l.showValueFormatter=!0},ha=()=>{l.showValueFormatter=!1},Jo=()=>{const e=l.valueFormatterItem.formatterCfg.decimalCount;if(e===void 0||e.toString().indexOf(".")>-1||parseInt(e).toString()==="NaN"||parseInt(e)<0||parseInt(e)>10){X.error(v("chart.formatter_decimal_count_error"));return}l.valueFormatterItem.formatterType==="quota"?a.value.yAxis[l.valueFormatterItem.index].formatterCfg=l.valueFormatterItem.formatterCfg:l.valueFormatterItem.formatterType==="quotaExt"?a.value.yAxisExt[l.valueFormatterItem.index].formatterCfg=l.valueFormatterItem.formatterCfg:l.valueFormatterItem.formatterType==="dimension"&&(a.value.xAxis[l.valueFormatterItem.index].formatterCfg=l.valueFormatterItem.formatterCfg),ha()},Uo=L(()=>({height:ot.getToken?"calc(100% - 45px)":"calc(100vh - 110px)"})),Un=e=>{De.value=!0,lt.value=!0,Ne(()=>{Oe.value.initEdit({groupType:e,id:di()},l.dimension,l.quota.filter(t=>t.id!=="-1"))})},jo=e=>{De.value=!0,lt.value=!1,Ne(()=>{Oe.value.initEdit(e,l.dimension,l.quota.filter(t=>t.id!=="-1"))})},ga=()=>{De.value=!1},Wo=()=>{Oe.value.setFieldForm();const e=qe(Oe.value.fieldForm);xa(e),Oa(e).then(()=>{Se(a.value.tableId,a.value.id,a.value.type),ga()})},ya=(e,t,s=!1)=>t===2?(s?yi:xi)[e]:xt[ke[e]],jn=e=>{var t;switch(l.currEditField=JSON.parse(JSON.stringify(e.item)),e.type){case"copy":xa(l.currEditField),l.currEditField.id=null,l.currEditField.originName=e.item.extField===2?e.item.originName:"["+e.item.id+"]",l.currEditField.name=mi(l.dimension.concat(l.quota),e.item.name),Oa(l.currEditField).then(()=>{Se(a.value.tableId,a.value.id,a.value.type)});break;case"edit":jo(e.item);break;case"delete":ci((t=e.item)==null?void 0:t.id).then(()=>{Se(a.value.tableId,a.value.id,a.value.type)});break}},Wn=(e,t)=>({type:t,item:e}),xa=e=>{e.extField=2,e.chartId=a.value.id,e.datasetGroupId=a.value.tableId,e.dataeaseName=null,e.lastSyncTime=null,e.columnIndex=l.dimension.length+l.quota.length,e.deExtractType=e.deType},Ca=z(null),mt=z(null),{y:ct,isDragging:ka}=ul(Ca,{initialValue:{x:0,y:400},draggingElement:mt}),Ie=z(0),Ho=Ma(()=>{Ne(()=>{Ie.value=mt.value.offsetHeight,ct.value=Ie.value/2+200})},500),Yo=Ma(()=>{Ne(()=>{!Ve||a.value.tableId||At.value||["rich-text","picture-group"].includes(a.value.type)||(a.value.tableId=Ve)})},500);Xe(()=>q.value,e=>{!e||Ie.value||Ho()}),Xe(()=>q.value,e=>{e&&Yo()});const Go=L(()=>{const e=ct.value-200;return e<53?53:e>Ie.value-50?Ie.value-50:e}),Xo=L(()=>{const e=ct.value-200;return e<50?50:e>Ie.value-53?Ie.value-53:e}),Ko=e=>{if(N("render"),e===""||parseFloat(e).toString()==="NaN"||parseFloat(e)<1){X.error(v("chart.only_input_number"));return}},ut=z(!1),Te=z(!1),U=z([]),G=z([]),_a=(e,t="dimension")=>{ut.value&&(ut.value=!1);const s=t==="dimension"?U:G,c=t==="quota"?U:G;c.value=[],s.value=s.value.some(y=>y.id===e.id)?[]:[e]},Ge=(e,t="dimension")=>{ut.value=!0;const s=t==="dimension"?U:G,c=t==="quota"?U:G;c.value=[];const y=s.value.findIndex(b=>b.id===e.id);if(y!==-1){s.value.splice(y,1);return}s.value.push(e)},ba=(e,t="dimension")=>{const s=t==="dimension"?U:G,c=t==="quota"?U:G,y=t==="dimension"?st:nt;c.value=[];const b=y.value.map(k=>k.id),w=s.value.filter(k=>b.includes(k.id));if(w.length){const k=y.value.findIndex(Q=>Q.id===w[w.length-1].id),P=y.value.findIndex(Q=>Q.id===e.id);if(k===P)return;k>P&&(s.value=[...s.value,...y.value.slice(P,k)]),k<P&&(s.value=[...s.value,...y.value.slice(k+1,P+1)])}else{const k=s.value.findIndex(P=>P.id===e.id);if(k!==-1){s.value.splice(k,1);return}s.value.push(e)}},Qe=z(!1),Zo=()=>{Qe.value=!0,setTimeout(()=>{Te.value=!0},0)},el=(e,t,s)=>{const c=s==="dimension"?U:G,y=s==="quota"?U:G;y.value=[],c.value.length||(c.value=[o(t)]),eo(e,o(U.value))},tl=()=>{Qe.value=!0,setTimeout(()=>{Te.value=!0},0)},al=(e,t,s)=>{const c=s==="dimension"?U:G,y=s==="quota"?U:G;y.value=[],c.value.length||(c.value=[t]),e.dataTransfer.setData("quota",JSON.stringify(G.value.filter(b=>b.id).map(b=>({...qe(o(b)),datasetId:a.value.tableId}))))},pt=()=>{Qe.value=!1,Te.value=!1},Ea=()=>{U.value=[],G.value=[],pt()},oe=e=>{e.preventDefault()},le=e=>{e.preventDefault()},ie=(e,t="xAxis")=>{var c;e.preventDefault();const s=U.value.length?U.value:G.value;for(let y=0;y<s.length;y++){const b=qe(s[y]);l.moveId=b.id,(c=a.value)[t]??(c[t]=[]),a.value[t].push(b);const w={newDraggableIndex:a.value[t].length-1};t==="drillFields"?zt(w):ve(w,t)}},ye=z(!1),wa=e=>{ye.value=!0,fi(e,a.value.id).then(()=>{Se(a.value.tableId,a.value.id,a.value.type)}).catch(()=>{ye.value=!1})},Sa=e=>{ye.value=!0,vi(e).then(()=>{Se(a.value.tableId,a.value.id,a.value.type)}).catch(()=>{ye.value=!1})};return(e,t)=>{const s=pl,c=bi,y=vt("Fold"),b=vt("Expand"),w=ql,k=Tl,P=Fl,Q=Il,S=Ai,A=yl,ge=Al,_=wl,B=xl,V=Fi,de=Ti,xe=Ii,ol=Ei,ft=bl,ll=El,il=wi,Hn=vt("Setting"),Yn=Cl,Gn=kl,Xn=_l,nl=Si,sl=Sl,we=vl,Aa=fl;return u(),F(ce,null,[p("div",{class:g(["chart-edit","editor-"+f.themes]),onKeydown:t[87]||(t[87]=j(()=>{},["stop"])),onKeyup:t[88]||(t[88]=j(()=>{},["stop"]))},[o(be)?(u(),x(c,{key:0,direction:"vertical"},{default:n(()=>[i(s,{class:"drag_main_area"},{default:n(()=>{var d,m,r,D,me;return[o(a).type==="VQuery"&&o(q)?(u(),x(Na,{key:0,element:o(q),"common-background-pop":(d=o(q))==null?void 0:d.commonBackground,chart:o(a),themes:f.themes},null,8,["element","common-background-pop","chart","themes"])):(m=o(a).plugin)!=null&&m.isPlugin?(u(),x(o(Ze),{key:1,jsname:o(a).plugin.staticMap["editor-style"],view:o(a),dimension:l.dimension,quota:l.quota,themes:f.themes,emitter:o(J)},null,8,["jsname","view","dimension","quota","themes","emitter"])):(u(),F(ce,{key:2},[Ft.value?(u(),x(qa,{key:0,properties:E.value.properties,"property-inner-all":E.value.propertyInner,"selector-spec":E.value.selectorSpec,"common-background-pop":(r=o(q))==null?void 0:r.commonBackground,"common-border-pop":(D=o(q))==null?void 0:D.style,"event-info":(me=o(q))==null?void 0:me.events,chart:o(a),themes:f.themes,"dimension-data":l.dimension,"quota-data":l.quota,"all-fields":Me.value,onOnColorChange:Lt,onOnMiscChange:Jt,onOnLabelChange:Ut,onOnTooltipChange:Ht,onOnChangeXAxisForm:Yt,onOnChangeYAxisForm:Gt,onOnChangeYAxisExtForm:Xt,onOnTextChange:Zt,onOnIndicatorChange:jt,onOnIndicatorNameChange:Wt,onOnLegendChange:ea,onOnBackgroundChange:ta,onOnStyleAttrChange:aa,onOnBasicStyleChange:Pt,onOnTableHeaderChange:$t,onOnTableCellChange:Rt,onOnTableTotalChange:Qt,onOnChangeMiscStyleForm:Kt,onOnExtTooltipChange:oa,onOnChangeQuadrantForm:la,onOnChangeFlowMapLineForm:ia,onOnChangeFlowMapPointForm:na},null,8,["properties","property-inner-all","selector-spec","common-background-pop","common-border-pop","event-info","chart","themes","dimension-data","quota-data","all-fields"])):h("",!0)],64))]}),_:1})]),_:1})):h("",!0),o(be)?h("",!0):ht((u(),x(k,{key:1,class:"de-chart-editor"},{default:n(()=>[p("div",{class:g(["content-area",{"content-area-close":o(re).chartAreaCollapse,"content-area-left-open":!o(re).chartAreaCollapse}])},[i(o(T),{title:o(a).title,class:"custom-icon",size:"20px",onClick:t[0]||(t[0]=d=>ua("chartAreaCollapse"))},{default:n(()=>[o(re).chartAreaCollapse?(u(),x(y,{key:0,class:"collapse-icon"})):(u(),x(b,{key:1,class:"collapse-icon"}))]),_:1},8,["title"]),o(re).chartAreaCollapse?(u(),F("div",Ni,[p("span",Di,C(o(a).title),1)])):h("",!0),o(re).chartAreaCollapse?h("",!0):(u(),F("div",Oi,[i(k,{class:"editor-title"},{default:n(()=>[p("div",Vi,[p("div",{id:"component-name",class:g(["name-area",{"component-name-dark":f.themes==="dark"}]),style:Ke([{"max-width":"180px","text-overflow":"ellipsis","white-space":"nowrap"},{width:o(We)?"300px":"auto"}]),onDblclick:St},C(o(a).title),39),i(w,{"show-arrow":"",offset:8,placement:"bottom",width:"200",trigger:"click"},{reference:n(()=>[i(o(T),{style:{"margin-left":"4px",cursor:"pointer"}},{default:n(()=>[i(I,null,{default:n(()=>[i(o($l),{class:"svg-icon"})]),_:1})]),_:1})]),default:n(()=>[p("div",Mi,C(o(v)("visualization.view_id")),1),p("div",Bi,C(o(a).id),1)]),_:1})])]),_:1}),i(k,{style:Ke(Uo.value)},{default:n(()=>[o(a).type==="VQuery"&&o(q)?(u(),x(s,{key:0},{default:n(()=>{var d;return[p("div",zi,[p("div",Pi,[i(Na,{element:o(q),"common-background-pop":(d=o(q))==null?void 0:d.commonBackground,chart:o(a),themes:f.themes},null,8,["element","common-background-pop","chart","themes"])])])]}),_:1})):(u(),x(ll,{key:1,modelValue:bt.value,"onUpdate:modelValue":t[66]||(t[66]=d=>bt.value=d),class:g(["tab-header",{dark:f.themes==="dark"}])},{default:n(()=>[i(ft,{name:"data",label:o(v)("chart.chart_data"),class:"padding-tab"},{default:n(()=>[i(c,{direction:"vertical"},{default:n(()=>[i(s,{class:"has-footer drag_main_area attr-style theme-border-class"},{default:n(()=>{var d;return[["rich-text","Picture","picture-group"].includes(o(a).type)?h("",!0):(u(),x(k,{key:0,class:"drag-data padding-lr"},{default:n(()=>[p("span",$i,C(o(v)("chart.switch_chart")),1),i(w,{offset:4,placement:"bottom-end",width:"434",trigger:"click","append-to-body":!0,"popper-class":"chart-type-style-"+f.themes,persistent:!1},{reference:n(()=>[i(Q,{modelValue:l.useless,"onUpdate:modelValue":t[1]||(t[1]=m=>l.useless=m),"popper-class":"chart-type-hide-options",class:"chart-type-select","suffix-icon":o(Rl),effect:f.themes,size:"small"},{prefix:n(()=>{var m,r;return[(m=l.chartTypeOptions[0])!=null&&m.isPlugin?(u(),x(I,{key:0,"class-name":"chart-type-select-icon","static-content":(r=l.chartTypeOptions[0])==null?void 0:r.icon},null,8,["static-content"])):(u(),x(I,{key:1,"class-name":"chart-type-select-icon"},{default:n(()=>[(u(),x(Le(o(gi)[l.chartTypeOptions[0].icon]),{class:"svg-icon chart-type-select-icon"}))]),_:1}))]}),default:n(()=>[(u(!0),F(ce,null,Je(l.chartTypeOptions,m=>(u(),x(P,{key:m.value,label:m.title,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","suffix-icon","effect"])]),default:n(()=>[i(ai,{themes:f.themes,type:o(a).type,onOnTypeChange:So},null,8,["themes","type"])]),_:1},8,["popper-class"])]),_:1})),(d=o(a).plugin)!=null&&d.isPlugin?(u(),x(o(Ze),{key:1,jsname:o(a).plugin.staticMap["editor-data"],view:o(a),dimension:l.dimension,quota:l.quota,themes:f.themes,emitter:o(J),onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:Nt,onValueFormatter:he},null,8,["jsname","view","dimension","quota","themes","emitter"])):(u(),F(ce,{key:2},[Z("area")?(u(),x(k,{key:0,class:"padding-lr drag-data"},{default:n(()=>[p("span",Ri,[O(C(o(v)("chart.area"))+" ",1),t[90]||(t[90]=p("i",{class:"required"},null,-1))]),p("div",Qi,[i(o(jl),{ref_key:"areaSelect",ref:it,modelValue:l.areaId,"onUpdate:modelValue":t[2]||(t[2]=m=>l.areaId=m),effect:f.themes,data:l.worldTree,props:Ya,filterNodeMethod:Xa,"current-node-key":l.areaId,teleported:!1,"default-expanded-keys":It.value,"empty-text":"请选择区域","node-key":"id","check-strictly":"",filterable:"",onNodeClick:wo},null,8,["modelValue","effect","data","current-node-key","default-expanded-keys"])])]),_:1})):h("",!0),Z("xAxis")?(u(),x(k,{key:1,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",Li,[p("span",null,[O(C(E.value.axisConfig.xAxis.name)+" ",1),(m=E.value.axisConfig.xAxis)!=null&&m.allowEmpty?h("",!0):(u(),F("i",Ji))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[3]||(t[3]=r=>Y("xAxis"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{class:"qw",onDrop:t[4]||(t[4]=r=>ie(r)),onDragenter:oe,onDragover:t[5]||(t[5]=r=>le(r))},[i(o(ne),{list:o(a).xAxis,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:yo},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"dimension",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:Nt,onValueFormatter:he,onOnToggleHide:fa,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{themes:f.themes,"drag-list":o(a).xAxis},null,8,["themes","drag-list"])],32)]}),_:1})):h("",!0),Z("xAxisExt")?(u(),x(k,{key:2,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",Ui,[p("span",null,[O(C(E.value.axisConfig.xAxisExt.name)+" ",1),(m=E.value.axisConfig.xAxisExt)!=null&&m.allowEmpty?h("",!0):(u(),F("i",ji))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[6]||(t[6]=r=>Y("xAxisExt"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[7]||(t[7]=r=>ie(r,"xAxisExt")),onDragenter:oe,onDragover:t[8]||(t[8]=r=>le(r))},[i(o(ne),{list:o(a).xAxisExt,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:xo},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"dimensionExt",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:rt,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).xAxisExt},null,8,["drag-list"])],32)]}),_:1})):h("",!0),Z("flowMapStartName")?(u(),x(k,{key:3,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",Wi,[p("span",null,[O(C(E.value.axisConfig.flowMapStartName.name)+" ",1),(m=E.value.axisConfig.flowMapStartName)!=null&&m.allowEmpty?h("",!0):(u(),F("i",Hi))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[9]||(t[9]=r=>Y("flowMapStartName"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{class:"qw",onDrop:t[10]||(t[10]=r=>ie(r,"flowMapStartName")),onDragenter:oe,onDragover:t[11]||(t[11]=r=>le(r))},[i(o(ne),{list:o(a).flowMapStartName,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:ko},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"flowMapStartName",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:mo,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{themes:f.themes,"drag-list":o(a).flowMapStartName},null,8,["themes","drag-list"])],32)]}),_:1})):h("",!0),Z("flowMapEndName")?(u(),x(k,{key:4,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",Yi,[p("span",null,[O(C(E.value.axisConfig.flowMapEndName.name)+" ",1),(m=E.value.axisConfig.flowMapEndName)!=null&&m.allowEmpty?h("",!0):(u(),F("i",Gi))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[12]||(t[12]=r=>Y("flowMapEndName"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{class:"qw",onDrop:t[13]||(t[13]=r=>ie(r,"flowMapEndName")),onDragenter:oe,onDragover:t[14]||(t[14]=r=>le(r))},[i(o(ne),{list:o(a).flowMapEndName,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:_o},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"flowMapEndName",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:co,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{themes:f.themes,"drag-list":o(a).flowMapEndName},null,8,["themes","drag-list"])],32)]}),_:1})):h("",!0),Z("extStack")?(u(),x(k,{key:5,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",Xi,[p("span",null,[O(C(E.value.axisConfig.extStack.name)+" ",1),(m=E.value.axisConfig.extStack)!=null&&m.allowEmpty?h("",!0):(u(),F("i",Ki))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[15]||(t[15]=r=>Y("extStack"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[16]||(t[16]=r=>ie(r,"extStack")),onDragenter:oe,onDragover:t[17]||(t[17]=r=>le(r))},[i(o(ne),{list:o(a).extStack,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Co},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"dimensionStack",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:so,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).extStack},null,8,["drag-list"])],32)]}),_:1})):h("",!0),Z("extColor")?(u(),x(k,{key:6,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",Zi,[p("span",null,[O(C(E.value.axisConfig.extColor.name)+" ",1),(m=E.value.axisConfig.extColor)!=null&&m.allowEmpty?h("",!0):(u(),F("i",en))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[18]||(t[18]=r=>Y("extColor"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{class:"qw",onDrop:t[20]||(t[20]=r=>ie(r,"extColor")),onDragenter:oe,onDragover:t[21]||(t[21]=r=>le(r))},[i(o(ne),{list:o(a).extColor,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:bo,onChange:t[19]||(t[19]=r=>Ae(r,"extColor"))},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"extColor",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:uo,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{themes:f.themes,"drag-list":o(a).extColor},null,8,["themes","drag-list"])],32)]}),_:1})):h("",!0),o(a).type!=="bar-range"?(u(),F(ce,{key:7},[Z("yAxis")?(u(),x(k,{key:0,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",tn,[p("span",an,[p("span",on,[O(C(E.value.axisConfig.yAxis.name)+" ",1),(m=E.value.axisConfig.yAxis)!=null&&m.allowEmpty?h("",!0):(u(),F("i",ln))]),E.value.axisConfig.yAxis.tooltip?(u(),x(S,{key:0,class:"item",effect:R.value,placement:"top"},{content:n(()=>[p("span",null,C(E.value.axisConfig.yAxis.tooltip),1)]),default:n(()=>[i(o(T),{class:g(["hint-icon",{"hint-icon--dark":f.themes==="dark"}])},{default:n(()=>[i(I,{name:"icon_info_outlined"},{default:n(()=>[i(o(yt),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])):h("",!0)]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[22]||(t[22]=r=>Y("yAxis"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[25]||(t[25]=r=>ie(r,"yAxis")),onDragenter:oe,onDragover:t[26]||(t[26]=r=>le(r))},[i(o(ne),{list:o(a).yAxis,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Vt,onChange:t[24]||(t[24]=r=>Ae(r,"yAxis"))},{item:n(({element:r,index:D})=>[i(Ue,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,type:"quota",themes:$.themes,onOnQuotaItemChange:t[23]||(t[23]=me=>Be(me,"yAxis")),onOnQuotaItemRemove:ze,onOnNameEdit:H,onEditItemFilter:Pe,onEditItemCompare:Re,onValueFormatter:he,onOnToggleHide:fa,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{"margin-top":o(a).type==="stock-line"?"9px":"0","drag-list":o(a).yAxis},null,8,["margin-top","drag-list"])],32)]}),_:1})):h("",!0),Z("xAxisExtRight")?(u(),x(k,{key:1,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",nn,[p("span",null,[O(C(E.value.axisConfig.extBubble.name)+" ",1),(m=E.value.axisConfig.extBubble)!=null&&m.allowEmpty?h("",!0):(u(),F("i",sn))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[27]||(t[27]=r=>Y("extBubble"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[29]||(t[29]=r=>ie(r,"extBubble")),onDragenter:oe,onDragover:t[30]||(t[30]=r=>le(r))},[i(o(ne),{list:o(a).extBubble,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Bt,onChange:t[28]||(t[28]=r=>Ae(r,"extBubble"))},{item:n(({element:r,index:D})=>[i(Ce,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"xAxisExtRight",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:ro,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).extBubble},null,8,["drag-list"])],32)]}),_:1})):h("",!0),Z("yAxisExt")?(u(),x(k,{key:2,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",rn,[p("span",null,[O(C(E.value.axisConfig.yAxisExt.name)+" ",1),(m=E.value.axisConfig.yAxisExt)!=null&&m.allowEmpty?h("",!0):(u(),F("i",dn))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[31]||(t[31]=r=>Y("yAxisExt"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[34]||(t[34]=r=>ie(r,"yAxisExt")),onDragenter:oe,onDragover:t[35]||(t[35]=r=>le(r))},[i(o(ne),{list:o(a).yAxisExt,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Mt,onChange:t[33]||(t[33]=r=>Ae(r,"yAxisExt"))},{item:n(({element:r,index:D})=>[i(Ue,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,type:"quotaExt",themes:$.themes,onOnQuotaItemChange:t[32]||(t[32]=me=>Be(me,"yAxisExt")),onOnQuotaItemRemove:ze,onOnNameEdit:H,onEditItemFilter:Pe,onEditItemCompare:Re,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).yAxisExt},null,8,["drag-list"])],32)]}),_:1})):h("",!0)],64)):o(a).type==="bar-range"?(u(),F(ce,{key:8},[Z("yAxis")?(u(),x(k,{key:0,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",mn,[p("span",null,[O(C(E.value.axisConfig.yAxis.name)+" ",1),(m=E.value.axisConfig.yAxis)!=null&&m.allowEmpty?h("",!0):(u(),F("i",cn))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[36]||(t[36]=r=>Y("yAxis"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[39]||(t[39]=r=>ie(r,"yAxis")),onDragenter:oe,onDragover:t[40]||(t[40]=r=>le(r))},[i(o(ne),{list:o(a).yAxis,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Vt,onChange:t[38]||(t[38]=r=>Ae(r,"yAxis"))},{item:n(({element:r,index:D})=>[r.groupType==="d"?(u(),x(Ce,{key:0,"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"quota",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:rt,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])):r.groupType==="q"?(u(),x(Ue,{key:1,"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,type:"quota",themes:$.themes,onOnQuotaItemChange:t[37]||(t[37]=me=>Be(me,"yAxis")),onOnQuotaItemRemove:ze,onOnNameEdit:H,onEditItemFilter:Pe,onEditItemCompare:Re,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])):h("",!0)]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).yAxis},null,8,["drag-list"])],32)]}),_:1})):h("",!0),Z("yAxisExt")?(u(),x(k,{key:1,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",un,[p("span",null,[O(C(E.value.axisConfig.yAxisExt.name)+" ",1),(m=E.value.axisConfig.yAxisExt)!=null&&m.allowEmpty?h("",!0):(u(),F("i",pn))]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[41]||(t[41]=r=>Y("yAxisExt"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[44]||(t[44]=r=>ie(r,"yAxisExt")),onDragenter:oe,onDragover:t[45]||(t[45]=r=>le(r))},[i(o(ne),{list:o(a).yAxisExt,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Mt,onChange:t[43]||(t[43]=r=>Ae(r,"yAxisExt"))},{item:n(({element:r,index:D})=>[r.groupType==="d"?(u(),x(Ce,{key:0,"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,themes:$.themes,type:"quotaExt",onOnDimensionItemChange:ue,onOnDimensionItemRemove:pe,onOnNameEdit:H,onOnCustomSort:rt,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])):r.groupType==="q"?(u(),x(Ue,{key:1,"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,type:"quotaExt",themes:$.themes,onOnQuotaItemChange:t[42]||(t[42]=me=>Be(me,"yAxisExt")),onOnQuotaItemRemove:ze,onOnNameEdit:H,onEditItemFilter:Pe,onEditItemCompare:Re,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])):h("",!0)]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).yAxisExt},null,8,["drag-list"])],32)]}),_:1})):h("",!0)],64)):h("",!0),Z("extBubble")?(u(),x(k,{key:9,class:"padding-lr drag-data"},{default:n(()=>{var m;return[p("div",fn,[p("span",vn,[p("span",hn,[O(C(E.value.axisConfig.extBubble.name)+" ",1),(m=E.value.axisConfig.extBubble)!=null&&m.allowEmpty?h("",!0):(u(),F("i",gn))]),E.value.axisConfig.extBubble.tooltip?(u(),x(S,{key:0,class:"item",effect:R.value,placement:"top"},{content:n(()=>[p("span",null,C(E.value.axisConfig.extBubble.tooltip),1)]),default:n(()=>[i(o(T),{class:g(["hint-icon",{"hint-icon--dark":f.themes==="dark"}])},{default:n(()=>[i(I,{name:"icon_info_outlined"},{default:n(()=>[i(o(yt),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])):h("",!0)]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[46]||(t[46]=r=>Y("extBubble"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[49]||(t[49]=r=>ie(r,"extBubble")),onDragenter:oe,onDragover:t[50]||(t[50]=r=>le(r))},[i(o(ne),{list:o(a).extBubble,move:ae,"item-key":"id",group:"drag",animation:"300",class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:Bt,onChange:t[48]||(t[48]=r=>Ae(r,"extBubble"))},{item:n(({element:r,index:D})=>[i(Ue,{"dimension-data":l.dimension,"quota-data":l.quota,chart:o(a),item:r,index:D,type:"extBubble",themes:$.themes,onOnQuotaItemChange:t[47]||(t[47]=me=>Be(me,"extBubble")),onOnQuotaItemRemove:ze,onOnNameEdit:H,onEditItemFilter:Pe,onEditItemCompare:Re,onValueFormatter:he,onEditSortPriority:ee},null,8,["dimension-data","quota-data","chart","item","index","themes"])]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).extBubble},null,8,["drag-list"])],32)]}),_:1})):h("",!0),Z("drill")?(u(),x(k,{key:10,class:"padding-lr drag-data"},{default:n(()=>[p("div",yn,[p("span",xn,[p("span",Cn,C(o(v)("chart.drill"))+" / "+C(o(v)("chart.dimension")),1),i(S,{class:"item",effect:R.value,placement:"top"},{content:n(()=>[p("span",null,C(o(v)("chart.drill_dimension_tip")),1)]),default:n(()=>[i(o(T),{class:g(["hint-icon",{"hint-icon--dark":f.themes==="dark"}])},{default:n(()=>[i(I,{name:"icon_info_outlined"},{default:n(()=>[i(o(yt),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])]),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[51]||(t[51]=m=>Y("drillFields"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),p("div",{onDrop:t[52]||(t[52]=m=>ie(m,"drillFields")),onDragenter:oe,onDragover:t[53]||(t[53]=m=>le(m))},[i(o(ne),{list:o(a).drillFields,"item-key":"id",group:"drag",animation:"300",move:ae,class:g(["drag-block-style",{dark:f.themes==="dark"}]),onAdd:zt},{item:n(({element:m,index:r})=>[(u(),x(Xl,{key:m.id,index:r,chart:o(a),item:m,"dimension-data":l.dimension,"quota-data":l.quota,themes:$.themes,onOnDimensionItemChange:oo,onOnDimensionItemRemove:lo,onOnNameEdit:H,onOnCustomSort:po,onEditSortPriority:ee},null,8,["index","chart","item","dimension-data","quota-data","themes"]))]),_:1},8,["list","class"]),i(se,{"drag-list":o(a).drillFields},null,8,["drag-list"])],32)]),_:1})):h("",!0),i(k,{class:"padding-lr drag-data no-top-border no-top-padding"},{default:n(()=>[p("div",kn,[p("span",null,C(o(v)("chart.result_filter")),1),i(S,{effect:R.value,placement:"top",content:o(v)("common.delete")},{default:n(()=>[i(o(T),{class:g(["remove-icon",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:t[54]||(t[54]=m=>Y("customFilter"))},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"])]),Tt.value||f.themes==="dark"?(u(),F("div",{key:0,class:g(["tree-btn",{"tree-btn--dark":f.themes==="dark",active:Tt.value,invalid:ao.value}]),onClick:ma},[i(o(T),{style:{"margin-right":"2px","font-size":"12px"}},{default:n(()=>[i(I,{class:"svg-background",name:"icon-filter"},{default:n(()=>[i(o(Ia),{class:"svg-icon svg-background"})]),_:1})]),_:1}),p("span",null,C(e.$t("chart.filter")),1)],2)):(u(),x(A,{key:1,class:"tree-btn_secondary",secondary:"",onClick:ma},{icon:n(()=>[i(I,null,{default:n(()=>[i(o(Ia),{class:"svg-icon svg-background"})]),_:1})]),default:n(()=>[p("span",null,C(e.$t("chart.filter")),1)]),_:1}))]),_:1}),vo.value?(u(),x(k,{key:11,class:"refresh-area"},{default:n(()=>[i(_,{class:g(["form-item no-margin-bottom","form-item-"+f.themes])},{default:n(()=>[i(ge,{modelValue:o(a).aggregate,"onUpdate:modelValue":t[55]||(t[55]=m=>o(a).aggregate=m),effect:f.themes,size:"small",onChange:to},{default:n(()=>[O(C(o(v)("chart.aggregate_time")),1)]),_:1},8,["modelValue","effect"])]),_:1},8,["class"])]),_:1})):h("",!0)],64))]}),_:1}),i(ol,{class:g({"refresh-active-footer":o(a).refreshViewEnable})},{default:n(()=>[i(k,{class:"refresh-area"},{default:n(()=>[i(_,{class:g(["form-item no-margin-bottom","form-item-"+f.themes])},{default:n(()=>[i(ge,{modelValue:o(a).refreshViewEnable,"onUpdate:modelValue":t[56]||(t[56]=d=>o(a).refreshViewEnable=d),effect:f.themes,size:"small",onChange:t[57]||(t[57]=d=>N("render"))},{default:n(()=>[O(C(o(v)("visualization.refresh_frequency")),1)]),_:1},8,["modelValue","effect"])]),_:1},8,["class"]),o(a).refreshViewEnable?(u(),x(k,{key:0},{default:n(()=>[i(_,{class:g(["form-item no-margin-bottom select-append","form-item-"+f.themes])},{default:n(()=>[i(B,{modelValue:o(a).refreshTime,"onUpdate:modelValue":t[60]||(t[60]=d=>o(a).refreshTime=d),modelModifiers:{number:!0},effect:f.themes,class:g([f.themes==="dark"&&"dv-dark"]),size:"small",min:1,max:3600,disabled:!o(a).refreshViewEnable,onChange:Ko},{append:n(()=>[i(Q,{modelValue:o(a).refreshUnit,"onUpdate:modelValue":t[58]||(t[58]=d=>o(a).refreshUnit=d),effect:f.themes,size:"small",placeholder:"Select",style:{width:"80px"},onChange:t[59]||(t[59]=d=>N("render"))},{default:n(()=>[i(P,{effect:f.themes,label:o(v)("visualization.minute"),value:"minute"},null,8,["effect","label"]),i(P,{effect:f.themes,label:o(v)("visualization.second"),value:"second"},null,8,["effect","label"])]),_:1},8,["modelValue","effect"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"])]),_:1})):h("",!0)]),_:1}),i(k,{class:g(["result-style","result-style-"+f.themes])},{default:n(()=>[p("div",_n,[o(a).type!=="richTextView"?(u(),F("span",bn,C(o(v)("chart.result_count")),1)):h("",!0),o(a).type!=="richTextView"?(u(),F("span",En,[i(xe,{modelValue:o(a).resultMode,"onUpdate:modelValue":t[63]||(t[63]=d=>o(a).resultMode=d),effect:f.themes,class:"radio-span",size:"small",onChange:t[64]||(t[64]=d=>N("render"))},{default:n(()=>[i(V,{class:"margin20-radio",label:"all",effect:f.themes},{default:n(()=>[p("span",{class:g(["result-count-label",{dark:f.themes==="dark"}])},C(o(v)("chart.result_mode_all")),3)]),_:1},8,["effect"]),i(V,{label:"custom",effect:f.themes},{default:n(()=>[i(de,{modelValue:o(a).resultCount,"onUpdate:modelValue":t[61]||(t[61]=d=>o(a).resultCount=d),min:1,max:1e6,controls:!1,effect:f.themes,"step-strictly":!0,"value-on-clear":1e3,disabled:o(a).resultMode==="all",class:"result-count",size:"small",onChange:t[62]||(t[62]=d=>N("calcData"))},null,8,["modelValue","effect","disabled"])]),_:1},8,["effect"])]),_:1},8,["modelValue","effect"])])):h("",!0)]),i(A,{disabled:ho.value,type:"primary",class:"result-style-button",onClick:t[65]||(t[65]=d=>Eo(o(a)))},{default:n(()=>[p("span",wn,C(o(v)("chart.update_chart_data")),1)]),_:1},8,["disabled"])]),_:1},8,["class"])]),_:1},8,["class"])]),_:1})]),_:1},8,["label"]),i(ft,{name:"style",label:o(v)("chart.chart_style"),class:"padding-tab",style:{width:"100%"}},{default:n(()=>[i(c,{direction:"vertical"},{default:n(()=>[i(s,{class:"drag_main_area"},{default:n(()=>{var d,m,r,D;return[(d=o(a).plugin)!=null&&d.isPlugin?(u(),x(o(Ze),{key:0,jsname:o(a).plugin.staticMap["editor-style"],view:o(a),dimension:l.dimension,quota:l.quota,themes:f.themes,emitter:o(J)},null,8,["jsname","view","dimension","quota","themes","emitter"])):(u(),F(ce,{key:1},[Ft.value?(u(),x(qa,{key:0,properties:E.value.properties,"property-inner-all":E.value.propertyInner,"selector-spec":E.value.selectorSpec,"common-background-pop":(m=o(q))==null?void 0:m.commonBackground,"common-border-pop":(r=o(q))==null?void 0:r.style,"event-info":(D=o(q))==null?void 0:D.events,chart:o(a),themes:f.themes,"dimension-data":l.dimension,"quota-data":l.quota,"all-fields":Me.value,onOnColorChange:Lt,onOnMiscChange:Jt,onOnLabelChange:Ut,onOnTooltipChange:Ht,onOnChangeXAxisForm:Yt,onOnChangeYAxisForm:Gt,onOnChangeYAxisExtForm:Xt,onOnTextChange:Zt,onOnIndicatorChange:jt,onOnIndicatorNameChange:Wt,onOnLegendChange:ea,onOnBackgroundChange:ta,onOnStyleAttrChange:aa,onOnBasicStyleChange:Pt,onOnTableHeaderChange:$t,onOnTableCellChange:Rt,onOnTableTotalChange:Qt,onOnChangeMiscStyleForm:Kt,onOnExtTooltipChange:oa,onOnChangeQuadrantForm:la,onOnChangeFlowMapLineForm:ia,onOnChangeFlowMapPointForm:na},null,8,["properties","property-inner-all","selector-spec","common-background-pop","common-border-pop","event-info","chart","themes","dimension-data","quota-data","all-fields"])):h("",!0)],64))]}),_:1})]),_:1})]),_:1},8,["label"]),i(ft,{name:"senior",label:o(v)("chart.senior"),class:"padding-tab",style:{width:"100%"}},{default:n(()=>[i(c,{direction:"vertical"},{default:n(()=>[i(s,{class:"drag_main_area"},{default:n(()=>{var d,m;return[(d=o(a).plugin)!=null&&d.isPlugin?(u(),x(o(Ze),{key:0,jsname:o(a).plugin.staticMap["editor-senior"],view:o(a),dimension:l.dimension,quota:l.quota,themes:f.themes,emitter:o(J)},null,8,["jsname","view","dimension","quota","themes","emitter"])):(u(),x(Hl,{key:1,chart:o(a),"quota-data":o(a).yAxis,"quota-ext-data":o(a).yAxisExt,"fields-data":Me.value,themes:f.themes,properties:E.value.properties,"property-inner-all":E.value.propertyInner,"event-info":(m=o(q))==null?void 0:m.events,onOnFunctionCfgChange:Ao,onOnAssistLineChange:Fo,onOnScrollCfgChange:qo,onOnThresholdChange:Io,onOnMapMappingChange:To,onOnBubbleAnimateChange:No},null,8,["chart","quota-data","quota-ext-data","fields-data","themes","properties","property-inner-all","event-info"]))]}),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue","class"]))]),_:1},8,["style"])]))],2),p("div",{class:g(["dataset-main content-area",{"content-area-close":o(re).datasetAreaCollapse,"content-area-right-open":!o(re).datasetAreaCollapse}])},[i(o(T),{title:e.$t("visualization.dataset"),class:"custom-icon",size:"20px",onClick:t[67]||(t[67]=d=>ua("datasetAreaCollapse"))},{default:n(()=>[o(re).datasetAreaCollapse?(u(),x(y,{key:0,class:"collapse-icon"})):(u(),x(b,{key:1,class:"collapse-icon"}))]),_:1},8,["title"]),o(re).datasetAreaCollapse?(u(),F("div",Sn,[p("span",An,C(o(v)("visualization.dataset")),1)])):h("",!0),o(re).datasetAreaCollapse?h("",!0):(u(),x(c,{key:1,direction:"vertical",class:"dataset-area view-panel-row"},{default:n(()=>[i(il,{class:"editor-title"},{default:n(()=>[p("span",Fn,C(o(v)("visualization.dataset")),1)]),_:1}),i(nl,{class:"dataset-main-top"},{default:n(()=>[i(k,{class:"dataset-select"},{default:n(()=>[i(ui,{ref_key:"datasetSelector",ref:He,modelValue:o(a).tableId,"onUpdate:modelValue":t[68]||(t[68]=d=>o(a).tableId=d),style:{flex:"1"},"view-id":o(a).id,"state-obj":l,themes:f.themes,onAddDsWindow:Po,onOnDatasetChange:Ga},null,8,["modelValue","view-id","state-obj","themes"]),i(S,{effect:R.value,content:e.$t("deDataset.edit_dataset"),placement:"top"},{default:n(()=>[Et.value>=7&&!ja.value?(u(),x(o(T),{key:0,class:g(["field-search-icon-btn",{dark:f.themes==="dark"}]),style:{"margin-left":"8px"},onClick:$o},{default:n(()=>[i(I,{name:"icon_edit_outlined",class:"el-icon-arrow-down el-icon-delete"},{default:n(()=>[i(o(Ql),{class:"svg-icon el-icon-arrow-down el-icon-delete"})]),_:1})]),_:1},8,["class"])):h("",!0)]),_:1},8,["effect","content"])]),_:1}),i(k,{class:"dataset-search padding-lr"},{default:n(()=>[p("div",{class:g(["dataset-search-label",{dark:f.themes==="dark"}])},[p("span",null,C(o(v)("chart.field")),1),p("span",null,[i(S,{effect:R.value,content:e.$t("visualization.refresh"),placement:"top"},{default:n(()=>[i(o(T),{class:g(["field-search-icon-btn",{dark:f.themes==="dark"}]),onClick:t[69]||(t[69]=d=>Se(o(a).tableId,o(a).id,o(a).type))},{default:n(()=>[i(I,{name:"icon_refresh_outlined",class:"el-icon-arrow-down el-icon-delete"},{default:n(()=>[i(o(Ll),{class:"svg-icon el-icon-arrow-down el-icon-delete"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect","content"]),h("",!0)])],2),i(B,{modelValue:l.searchField,"onUpdate:modelValue":t[71]||(t[71]=d=>l.searchField=d),size:"middle",effect:f.themes,class:g(["dataset-search-input",{dark:f.themes==="dark"}]),placeholder:o(v)("chart.search")+" "+o(v)("chart.field"),clearable:""},{prefix:n(()=>[i(o(T),{class:"el-input__icon"},{default:n(()=>[i(I,{name:"icon_search-outline_outlined"},{default:n(()=>[i(o(Jl),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["modelValue","effect","class","placeholder"])]),_:1}),ht((u(),F("div",{ref_key:"elDrag",ref:mt,style:{height:"calc(100% - 137px)","min-height":"120px"}},[p("div",{class:g(["padding-lr field-height first right-dimension",{dark:f.themes==="dark","user-select":o(ka)}]),style:Ke({height:Go.value+"px"})},[p("label",null,C(o(v)("chart.dimension")),1),i(s,{class:"drag-list"},{default:n(()=>[(u(!0),F(ce,null,Je(st.value,d=>(u(),F("div",{key:d.id,draggable:!0,class:"item father",onClick:[j(m=>Ge(d),["ctrl"]),j(m=>Ge(d),["meta"]),j(m=>_a(d),["exact"]),j(m=>ba(d),["shift"])],onDragstart:m=>el(m,d,"dimension"),onDragend:Ea},[p("div",{class:g(["items flex-align-center",["item-dimension--"+f.themes,Te.value&&"is-dragging-item",U.value.map(m=>m.id).includes(d.id)&&"active"]])},[i(o(T),null,{default:n(()=>[i(I,null,{default:n(()=>[(u(),x(Le(ya(d.deType,d.extField)),{class:g(["svg-icon",`field-icon-${o(ke)[[2,3].includes(d.deType)?2:0]}`])},null,8,["class"]))]),_:2},1024)]),_:2},1024),p("span",{class:g(["field-name ellipsis",{dark:f.themes==="dark"}]),title:d.name},C(d.name),11,Tn),d.id!=="-1"&&!d.chartId?(u(),x(o(T),{key:0,class:g(["field-setting child",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:j(m=>wa(d.id),["stop"])},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_copy_outlined"},{default:n(()=>[i(o(Ta),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class","onClick"])):h("",!0),d.id!=="-1"&&d.chartId?(u(),x(o(T),{key:1,class:g(["field-setting child",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:j(m=>Sa(d.id),["stop"])},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class","onClick"])):h("",!0),(d.id,h("",!0))],2),U.value.map(m=>m.id).includes(d.id)?(u(),F("div",{key:0,draggable:!0,class:g(["shadow",Te.value&&"is-dragging"]),onDragstart:Zo,onDragend:pt},[Qe.value?(u(!0),F(ce,{key:0},Je(U.value,m=>(u(),F("div",{key:m.id,class:"items flex-align-center"},[i(o(T),null,{default:n(()=>[i(I,null,{default:n(()=>[(u(),x(Le(o(xt)[o(ke)[m.deType]]),{class:g(["svg-icon",`field-icon-${o(ke)[[2,3].includes(m.deType)?2:0]}`])},null,8,["class"]))]),_:2},1024)]),_:2},1024),p("span",{class:g(["field-name ellipsis",{dark:f.themes==="dark"}])},C(m.name),3),(m.id,h("",!0))]))),128)):h("",!0)],34)):h("",!0)],40,In))),128))]),_:1}),p("div",{ref_key:"el",ref:Ca,style:Ke({top:Xo.value+"px"}),class:g(["drag-vertical",o(ka)&&"is-hovering"])},null,6)],6),p("div",{class:g(["padding-lr field-height right-dimension",{dark:f.themes==="dark"}])},[t[91]||(t[91]=p("div",{class:"divider"},null,-1)),p("label",null,C(o(v)("chart.quota")),1),i(s,{class:"drag-list"},{default:n(()=>[(u(!0),F(ce,null,Je(nt.value,d=>(u(),F("div",{key:d.id,class:"item father",draggable:!0,onClick:[j(m=>Ge(d,"quota"),["ctrl"]),j(m=>Ge(d,"quota"),["meta"]),j(m=>_a(d,"quota"),["exact"]),j(m=>ba(d,"quota"),["shift"])],onDragstart:m=>al(m,d,"quota"),onDragend:Ea},[p("div",{class:g(["items flex-align-center",["item-dimension--"+f.themes,Te.value&&"is-dragging-item",G.value.map(m=>m.id).includes(d.id)&&"active"]])},[i(o(T),null,{default:n(()=>[i(I,{"class-name":`field-icon-${o(ke)[d.deType]}`},{default:n(()=>[(u(),x(Le(ya(d.deType,d.extField,!0)),{class:g(["svg-icon",`field-icon-${o(ke)[d.deType]}`])},null,8,["class"]))]),_:2},1032,["class-name"])]),_:2},1024),p("span",{class:g(["field-name ellipsis",{dark:f.themes==="dark"}]),title:d.name},C(d.name),11,Nn),d.id!=="-1"&&!d.chartId?(u(),x(o(T),{key:0,class:g(["field-setting child",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:j(m=>wa(d.id),["stop"])},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_copy_outlined"},{default:n(()=>[i(o(Ta),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class","onClick"])):h("",!0),d.id!=="-1"&&d.chartId?(u(),x(o(T),{key:1,class:g(["field-setting child",{"remove-icon--dark":f.themes==="dark"}]),size:"14px",onClick:j(m=>Sa(d.id),["stop"])},{default:n(()=>[i(I,{"class-name":"inner-class",name:"icon_delete-trash_outlined"},{default:n(()=>[i(o(K),{class:"svg-icon inner-class"})]),_:1})]),_:1},8,["class","onClick"])):h("",!0),(d.id,h("",!0))],2),G.value.map(m=>m.id).includes(d.id)?(u(),F("div",{key:0,draggable:!0,class:g(["shadow",Te.value&&"is-dragging"]),onDragstart:tl,onDragend:pt},[Qe.value?(u(!0),F(ce,{key:0},Je(G.value,m=>(u(),F("div",{key:m.id,class:"items flex-align-center"},[i(o(T),null,{default:n(()=>[i(I,{"class-name":`field-icon-${o(ke)[m.deType]}`},{default:n(()=>[(u(),x(Le(o(xt)[o(ke)[m.deType]]),{class:"svg-icon","class-name":`field-icon-${o(ke)[m.deType]}`},null,8,["class-name"]))]),_:2},1032,["class-name"])]),_:2},1024),p("span",{class:g(["field-name ellipsis",{dark:f.themes==="dark"}])},C(m.name),3),(m.id,h("",!0))]))),128)):h("",!0)],34)):h("",!0)],40,qn))),128))]),_:1})],2)])),[[Aa,ye.value&&!o($a)]])]),_:1})]),_:1}))],2)]),_:1})),[[Aa,Ra.value]]),At.value?(u(),x(hi,{key:2,themes:f.themes},null,8,["themes"])):h("",!0),i(we,{modelValue:l.renameItem,"onUpdate:modelValue":t[77]||(t[77]=d=>l.renameItem=d),title:o(v)("chart.show_name_set"),visible:l.renameItem,width:"420px","close-on-click-modal":!1},{footer:n(()=>[p("div",On,[i(A,{onClick:sa},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:t[76]||(t[76]=d=>Vo(wt.value))},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[p("div",{onKeydown:t[74]||(t[74]=j(()=>{},["stop"])),onKeyup:t[75]||(t[75]=j(()=>{},["stop"]))},[i(sl,{ref_key:"renameForm",ref:wt,"label-width":"80px","require-asterisk-position":"right",model:l.itemForm,rules:Wa,"label-position":"top",onSubmit:t[73]||(t[73]=j(()=>{},["prevent"]))},{default:n(()=>[i(_,{label:o(v)("dataset.field_origin_name"),class:"name-edit-form"},{default:n(()=>[p("span",Dn,C(l.itemForm.name),1)]),_:1},8,["label"]),i(_,{label:o(v)("chart.show_name"),class:"name-edit-form no-margin-bottom",prop:"chartShowName"},{default:n(()=>[i(B,{modelValue:l.itemForm.chartShowName,"onUpdate:modelValue":t[72]||(t[72]=d=>l.itemForm.chartShowName=d),class:"text",clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])],32)]),_:1},8,["modelValue","title","visible"]),l.quotaFilterEdit?(u(),x(we,{key:3,modelValue:l.quotaFilterEdit,"onUpdate:modelValue":t[78]||(t[78]=d=>l.quotaFilterEdit=d),title:o(v)("chart.add_filter"),visible:l.quotaFilterEdit,"close-on-click-modal":!1,width:"600px",class:"dialog-css"},{footer:n(()=>[p("div",Vn,[i(A,{onClick:ra},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:Mo},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[i(Yl,{item:l.quotaItem},null,8,["item"])]),_:1},8,["modelValue","title","visible"])):h("",!0),l.resultFilterEdit?(u(),x(we,{key:4,modelValue:l.resultFilterEdit,"onUpdate:modelValue":t[79]||(t[79]=d=>l.resultFilterEdit=d),title:o(v)("chart.add_filter"),visible:l.resultFilterEdit,"close-on-click-modal":!1,width:"600px",class:"dialog-css"},{footer:n(()=>[p("div",Mn,[i(A,{onClick:ca},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:zo},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[i(Gl,{chart:l.chartForFilter,item:l.filterItem},null,8,["chart","item"])]),_:1},8,["modelValue","title","visible"])):h("",!0),l.showEditQuotaCompare?(u(),x(we,{key:5,modelValue:l.showEditQuotaCompare,"onUpdate:modelValue":t[80]||(t[80]=d=>l.showEditQuotaCompare=d),title:o(v)("chart.yoy_setting"),visible:l.showEditQuotaCompare,"close-on-click-modal":!1,width:"600px",class:"dialog-css"},{footer:n(()=>[p("div",Bn,[i(A,{onClick:pa},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:Ro},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[i(oi,{"compare-item":l.quotaItemCompare,chart:o(a),"dimension-data":st.value,"quota-data":nt.value},null,8,["compare-item","chart","dimension-data","quota-data"])]),_:1},8,["modelValue","title","visible"])):h("",!0),l.showValueFormatter?(u(),x(we,{key:6,modelValue:l.showValueFormatter,"onUpdate:modelValue":t[81]||(t[81]=d=>l.showValueFormatter=d),title:o(v)("chart.value_formatter")+" - "+l.valueFormatterItem.name,visible:l.showValueFormatter,"close-on-click-modal":!1,width:"420px",class:"dialog-css"},{footer:n(()=>[p("div",zn,[i(A,{onClick:ha},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:Jo},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[i(li,{"formatter-item":l.valueFormatterItem,chart:o(a)},null,8,["formatter-item","chart"])]),_:1},8,["modelValue","title","visible"])):h("",!0),l.showCustomSort?(u(),x(we,{key:7,modelValue:l.showCustomSort,"onUpdate:modelValue":t[82]||(t[82]=d=>l.showCustomSort=d),title:o(v)("chart.custom_sort")+o(v)("chart.sort"),visible:l.showCustomSort,"close-on-click-modal":!1,width:"372px",class:"dialog-css custom_sort_dialog"},{footer:n(()=>[p("div",Pn,[i(A,{onClick:qt},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:no},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[i(ii,{chart:o(a),"field-type":fe.value,field:l.customSortField,onOnSortChange:io},null,8,["chart","field-type","field"])]),_:1},8,["modelValue","title","visible"])):h("",!0),i(we,{modelValue:l.showSortPriority,"onUpdate:modelValue":t[83]||(t[83]=d=>l.showSortPriority=d),"close-on-click-modal":!1,width:"372px",class:"dialog-css custom_sort_dialog","destroy-on-close":""},{header:n(()=>[p("span",$n,C(o(v)("chart.sort_priority")),1),p("span",Rn,"("+C(o(v)("chart.sort_priority_tip"))+")",1)]),footer:n(()=>[p("div",Qn,[i(A,{onClick:va},{default:n(()=>[O(C(o(v)("chart.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:Qo},{default:n(()=>[O(C(o(v)("chart.confirm")),1)]),_:1})])]),default:n(()=>[i(ni,{chart:o(a),onOnPriorityChange:Lo},null,8,["chart"])]),_:1},8,["modelValue"]),i(we,{modelValue:De.value,"onUpdate:modelValue":t[86]||(t[86]=d=>De.value=d),width:"1000px",title:lt.value?o(v)("dataset.add_calc_field"):o(v)("dataset.edit_calc_field"),"close-on-click-modal":!1},{footer:n(()=>[i(A,{secondary:"",onClick:t[84]||(t[84]=d=>ga())},{default:n(()=>[O(C(o(v)("dataset.cancel")),1)]),_:1}),i(A,{type:"primary",onClick:t[85]||(t[85]=d=>Wo())},{default:n(()=>[O(C(o(v)("dataset.confirm")),1)]),_:1})]),default:n(()=>[i(ri,{ref_key:"calcEdit",ref:Oe},null,512)]),_:1},8,["modelValue","title"])],34),i(Wl,{ref_key:"filterTree",ref:da,onFilterData:Bo},null,512),i(o(hl),{ref_key:"openHandler",ref:$e,jsname:"L2NvbXBvbmVudC9lbWJlZGRlZC1pZnJhbWUvT3BlbkhhbmRsZXI="},null,512),o(We)?(u(),x(Pl,{key:0,to:"#component-name"},[ht(p("input",{ref_key:"componentNameInput",ref:_t,"onUpdate:modelValue":t[89]||(t[89]=d=>o(W).name=d),effect:f.themes,width:"100%",onChange:La,onBlur:Ja},null,40,Ln),[[zl,o(W).name]])])):h("",!0)],64)}}});const jm=qi(Jn,[["__scopeId","data-v-b39f4f6f"]]);export{jm as default};
