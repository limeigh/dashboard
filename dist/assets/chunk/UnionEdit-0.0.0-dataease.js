import{z as B}from"./index-0.0.0-dataease.js";import F from"./UnionFieldList-0.0.0-dataease.js";import I from"./UnionItemEdit-0.0.0-dataease.js";import{Q as b}from"./dataset-0.0.0-dataease.js";import{e as l}from"./lodash-0.0.0-dataease.js";import{d as P,x as T,r as y,X as N,f as r,O as f,P as _,R as k,a4 as C,g,_ as v}from"./vue-0.0.0-dataease.js";import{_ as V}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./el-table-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";import"./el-checkbox-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./raf-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./icon_search-outline_outlined-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./field-list-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./icon_right-association-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./join-join-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";const L={style:{height:"100%","overflow-y":"auto"}},q={class:"field-style"},z={class:"fields"},Q=["title"],R={class:"fields"},X=["title"],G=P({__name:"UnionEdit",props:{editArr:{type:Array,default:()=>[]}},setup(D,{expose:U}){const E=T("isCross"),w=t=>{i.currentDsFields=t},S=t=>{e.currentDsFields=t},j=t=>{t!==void 0?e.unionFields.splice(t,1):e.unionFields.push({parentField:null,currentField:null})},c={info:"",tableName:"",type:"db",datasourceId:"",id:"",unionType:"left",unionFields:[],currentDsFields:[],sqlVariableDetails:null,confirm:!1,isShadow:!1,flag:""},s=y([]),n=y([]),e=N(l(c)),i=N(l(c)),m=D,A=()=>{Object.assign(e,l(c)),Object.assign(i,l(c)),s.value=[],n.value=[]},O=()=>{e.confirm=!1,e.isShadow=!1,e.flag="",i.confirm=!1,i.isShadow=!1,i.flag="",Object.assign(e,l(m.editArr[0])),Object.assign(i,l(m.editArr[1])),x()},h=t=>["datasourceId","id","info","tableName","type"].reduce((o,a)=>(o[a]=t[a],o),{isCross:E.value}),x=async()=>{const[t,o]=m.editArr,[a,p]=await Promise.all([b(h(t)),b(h(o))]);s.value=p,s.value.forEach(d=>{d.checked=o.currentDsFields.map(u=>u.originName).includes(d.originName)}),n.value=a,n.value.forEach(d=>{d.checked=t.currentDsFields.map(u=>u.originName).includes(d.originName)})};return U({node:e,parent:i,clearState:A,initState:O}),(t,o)=>{const a=B;return r(),f("div",L,[_("div",q,[k((r(),f("div",z,[_("p",{title:i.tableName},C(i.tableName),9,Q),s.value.length?(r(),g(F,{key:0,"field-list":s.value,node:i,onCheckedFields:w},null,8,["field-list","node"])):v("",!0)])),[[a,!s.value.length]]),k((r(),f("div",R,[_("p",{title:e.tableName},C(e.tableName),9,X),n.value.length?(r(),g(F,{key:0,"field-list":n.value,node:e,onCheckedFields:S},null,8,["field-list","node"])):v("",!0)])),[[a,!n.value.length]])]),e.tableName?(r(),g(I,{key:0,"parent-field-list":s.value,"node-field-list":n.value,node:e,onChangeUnionType:o[0]||(o[0]=p=>e.unionType=p),onChangeUnionFields:j,"table-name":i.tableName},null,8,["parent-field-list","node-field-list","node","table-name"])):v("",!0)])}}});const Ce=V(G,[["__scopeId","data-v-edb39a79"]]);export{Ce as default};
