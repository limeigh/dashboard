var b={exports:{}},y=b.exports={};y.getOption=B;function B(u,n,e){var t=u[n];return t==null&&e!==void 0?e:t}var F=b.exports,h=F,O=function(n){n=n||{};var e=n.reporter,t=h.getOption(n,"async",!0),d=h.getOption(n,"auto",!0);d&&!t&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),t=!0);var o=g(),c,r=!1;function i(a,f){!r&&d&&t&&o.size()===0&&p(),o.add(a,f)}function s(){for(r=!0;o.size();){var a=o;o=g(),a.process()}r=!1}function v(a){r||(a===void 0&&(a=t),c&&(m(c),c=null),a?p():s())}function p(){c=x(s)}function m(a){var f=clearTimeout;return f(a)}function x(a){var f=function(z){return setTimeout(z,0)};return f(a)}return{add:i,force:v}};function g(){var u={},n=0,e=0,t=0;function d(r,i){i||(i=r,r=0),r>e?e=r:r<t&&(t=r),u[r]||(u[r]=[]),u[r].push(i),n++}function o(){for(var r=t;r<=e;r++)for(var i=u[r],s=0;s<i.length;s++){var v=i[s];v()}}function c(){return n}return{add:d,process:o,size:c}}export{O as b};
