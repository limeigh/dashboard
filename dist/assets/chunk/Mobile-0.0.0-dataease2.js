import{u as B,y as q,a as A}from"./index-0.0.0-dataease.js";import{n as j,j as z}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{v as E,i as G}from"./visual-star-0.0.0-dataease.js";import{i as N}from"./icon_replace_outlined-0.0.0-dataease.js";import{V as O}from"./canvasUtils-0.0.0-dataease.js";import{f as F,y as R}from"./dataVisualization-0.0.0-dataease.js";import{m as T,n as $}from"./DePreview-0.0.0-dataease.js";import{d as H}from"./dvMain-0.0.0-dataease.js";import{s as L}from"./index-0.0.0-dataease33.js";import{s as Q}from"./index-0.0.0-dataease59.js";import"./index-0.0.0-dataease30.js";import"./index-0.0.0-dataease60.js";import{a as W}from"./imgUtils-0.0.0-dataease.js";import{d as X,X as J,r as m,aj as K,n as I,f as u,O as U,j as r,i as e,u as p,P as Y,g as h,l as Z,T as tt,_ as ot}from"./vue-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./chart-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./dataset-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./decimal-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./eventBus-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./tslib.es6-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./Component-0.0.0-dataease18.js";import"./DeShortcutKey-0.0.0-dataease.js";import"./canvasStyle-0.0.0-dataease.js";import"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./index-0.0.0-dataease21.js";import"./index-0.0.0-dataease22.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./constants-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./Component-0.0.0-dataease17.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-form-item-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease3.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease6.js";import"./token-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./el-tree-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tree-select-0.0.0-dataease.js";import"./el-checkbox-group-0.0.0-dataease.js";import"./el-tabs-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./el-dropdown-menu-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import"./icon_more_outlined-0.0.0-dataease.js";import"./more_v-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./icon_dataset-0.0.0-dataease.js";import"./icon_warning_filled-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./vuedraggable-es-0.0.0-dataease.js";import"./time-format-0.0.0-dataease.js";import"./dayjs.min-0.0.0-dataease.js";import"./time-format-dayjs-0.0.0-dataease.js";import"./attr-0.0.0-dataease23.js";import"./EmptyBackground-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./el-time-picker-0.0.0-dataease.js";import"./el-date-picker-0.0.0-dataease.js";import"./arrays-0.0.0-dataease.js";import"./index-0.0.0-dataease18.js";import"./el-input-number-0.0.0-dataease.js";import"./icon_admin_outlined-0.0.0-dataease.js";import"./index-0.0.0-dataease27.js";import"./index-0.0.0-dataease20.js";import"./index-0.0.0-dataease28.js";import"./index-0.0.0-dataease29.js";import"./use-route-0.0.0-dataease.js";import"./index-0.0.0-dataease31.js";import"./index-0.0.0-dataease32.js";import"./el-virtual-list-0.0.0-dataease.js";import"./raf-0.0.0-dataease.js";import"./el-select-v2-0.0.0-dataease.js";import"./fixed-size-list-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./field-list-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./Attr-0.0.0-dataease22.js";import"./CommonAttr-0.0.0-dataease.js";import"./el-collapse-item-0.0.0-dataease.js";import"./CommonBorderSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-color-picker-0.0.0-dataease.js";import"./position-0.0.0-dataease.js";import"./BackgroundOverallCommon-0.0.0-dataease.js";import"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import"./board-list-0.0.0-dataease.js";import"./ImgViewDialog-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./icon_italic_outlined-0.0.0-dataease.js";import"./icon_right-alignment_outlined-0.0.0-dataease.js";import"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./CollapseSwitchItem-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";import"./icon_download_outlined-0.0.0-dataease.js";import"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./watermark-0.0.0-dataease2.js";import"./user-0.0.0-dataease.js";import"./el-divider-0.0.0-dataease.js";import"./ChartComponentS2-0.0.0-dataease.js";import"./ViewTrackBar-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./ChartError-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./LinkageSet-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./dv-empty-0.0.0-dataease.js";import"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./Component-0.0.0-dataease16.js";import"./index-0.0.0-dataease34.js";import"./ChartComponentG2Plot-0.0.0-dataease.js";import"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./DrillPath-0.0.0-dataease.js";import"./DeRichTextView-0.0.0-dataease.js";import"./Component-0.0.0-dataease12.js";import"./ChartEmptyInfo-0.0.0-dataease.js";import"./chart-dark-list-0.0.0-dataease.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./Component-0.0.0-dataease13.js";import"./Attr-0.0.0-dataease16.js";import"./Component-0.0.0-dataease10.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import"./Component-0.0.0-dataease5.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease3.js";import"./Attr-0.0.0-dataease.js";import"./Component-0.0.0-dataease3.js";import"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import"./Attr-0.0.0-dataease9.js";import"./Component-0.0.0-dataease6.js";import"./Attr-0.0.0-dataease6.js";import"./Component-0.0.0-dataease4.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease4.js";import"./Component-0.0.0-dataease14.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease5.js";import"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import"./Attr-0.0.0-dataease10.js";import"./Component-0.0.0-dataease11.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease6.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease7.js";import"./Attr-0.0.0-dataease7.js";import"./Component-0.0.0-dataease9.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease8.js";import"./Component-0.0.0-dataease7.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease9.js";import"./Component-0.0.0-dataease15.js";import"./Attr-0.0.0-dataease19.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease10.js";import"./Attr-0.0.0-dataease15.js";import"./DatasetSelect-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./Threshold-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./Component-0.0.0-dataease2.js";import"./icon_left_outlined-0.0.0-dataease.js";const rt={class:"top-nav_refresh"},Ji=X({__name:"Mobile",setup(it){const d=H(),t=J({canvasDataPreview:null,canvasStylePreview:null,canvasViewInfoPreview:null,dvInfo:{name:"",id:""},curPreviewGap:0}),n=m(!0),f=m(null),_=m(null),s=m(!1),S=(o,i)=>{n.value=!1,O(o,"dashboard",function({canvasDataResult:v,canvasStyleResult:a,dvInfo:C,canvasViewInfoPreview:M,curPreviewGap:V}){C.weight=i,t.canvasDataPreview=v,t.canvasStylePreview=a,t.canvasViewInfoPreview=M,t.dvInfo=C,t.curPreviewGap=V,n.value=!0,I(()=>{P(),f.value.restore()})})},l=B(),k=q();let w,y;K(()=>{d.setMobileInPc(!0),d.setInMobile(!0);const o=l.query.dvId;w=l.query.from,y=l.query.cache,S(o),A({name:"canvasDownload",callback:function(){b("img")}})});const b=o=>{s.value=!0,I(()=>{const i=_.value.querySelector(".canvas-container");W(o,i,t.dvInfo.name,()=>{s.value=!1})})},g=()=>{k.replace({path:"/index",query:{from:w,cache:y}})},x=()=>{window.location.reload()},c=m(!1),D=()=>{const o={id:t.dvInfo.id,type:"panel"};F(o).then(()=>{P()})},P=()=>{var o;(o=t.dvInfo)!=null&&o.id&&R(t.dvInfo.id).then(i=>{c.value=i.data})};return(o,i)=>{const v=j,a=z;return u(),U("div",{class:"dv-common-layout-mobile",ref_key:"previewCanvasContainer",ref:_},[r(p(L),null,{default:e(()=>[r(p(Q),{title:t.dvInfo.name,"left-arrow":"",onClickLeft:g},null,8,["title"])]),_:1}),Y("div",rt,[r(a,{size:"16",onClick:D,style:tt({color:c.value?"#FFC60A":"#646A73"})},{default:e(()=>[r(v,null,{default:e(()=>[(u(),h(Z(c.value?p(E):p(G)),{class:"svg-icon"}))]),_:1})]),_:1},8,["style"]),r(a,{style:{"margin-left":"16px"},onClick:x,color:"#646A73",size:"16"},{default:e(()=>[r(p(N))]),_:1})]),r(T,{style:{top:"48px"},"canvas-id":"canvas-main","canvas-style-data":t.canvasStylePreview||{},"component-data":t.canvasDataPreview||[]},null,8,["canvas-style-data","component-data"]),t.canvasStylePreview&&n.value?(u(),h($,{key:0,ref_key:"dashboardPreview",ref:f,"dv-info":t.dvInfo,"cur-gap":t.curPreviewGap,"component-data":t.canvasDataPreview,"canvas-style-data":t.canvasStylePreview,"canvas-view-info":t.canvasViewInfoPreview,"download-status":s.value,"show-linkage-button":!1},null,8,["dv-info","cur-gap","component-data","canvas-style-data","canvas-view-info","download-status"])):ot("",!0)],512)}}});export{Ji as default};
