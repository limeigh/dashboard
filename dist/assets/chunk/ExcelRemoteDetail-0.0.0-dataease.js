import{x as he,e as X,E as h,q as He,r as Xe,w as Qe,i as Ye,T as Ze,U as et,W as tt,A as at,y as lt,B as ot,z as nt,V as st,P as it,Q as rt,g as dt,_ as ut,v as ct}from"./element-plus-secondary-0.0.0-dataease.js";import{d as mt,l as le,t as pt,r as V,x as oe,n as ne,b as ft,e as yt,w as Se,o as p,c as B,a as S,z as F,u as e,Y as _,$ as R,a0 as C,T as v,U as d,W as r,_ as E,X as gt,S as xe,R as T,V as se,a8 as _t,h as vt,s as ht}from"./@vue-0.0.0-dataease.js";import{i as Te}from"./icon_calendar_outlined-0.0.0-dataease.js";import{f as St,e as Q}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as Y}from"./field-list-0.0.0-dataease.js";import{_ as xt}from"./Cron.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import Tt from"./SheetTabs-0.0.0-dataease.js";import{f as bt,b as Vt,u as Et}from"./datasource-0.0.0-dataease.js";import{g as ie}from"./js-base64-0.0.0-dataease.js";import{u as wt}from"./index-0.0.0-dataease.js";import{_ as kt}from"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{f as q}from"./attr-0.0.0-dataease23.js";import{h as U,d as Nt}from"./lodash-es-0.0.0-dataease.js";import{b as Rt}from"./mathjs-0.0.0-dataease.js";import{_ as Ct}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./fast-png-0.0.0-dataease.js";import"./iobuffer-0.0.0-dataease.js";import"./pako-0.0.0-dataease.js";import"./vue-router_2-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./icon_expand-right_filled-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";const Ot={class:"editor-detail"},Dt={class:"detail-inner create-dialog"},It={class:"info-update"},Lt={key:0,class:"table-select_mode"},Ft={class:"btn-select"},Ut={style:{float:"left"}},Kt={style:{float:"left","font-size":"12px",color:"#8492a6"}},$t={class:"flex-align-center"},Mt={key:2,class:"execute-rate-cont"},jt={class:"simple-cron"},Bt={style:{width:"814px",height:"450px","overflow-y":"auto"}},qt={style:{width:"100%"}};function zt(z){return typeof z=="function"||Object.prototype.toString.call(z)==="[object Object]"&&!ht(z)}const At=mt({__name:"ExcelRemoteDetail",props:{form:{required:!1,default(){return le({id:"0",name:"",desc:"",type:"Excel",editType:0})},type:Object},isSupportSetKey:{type:Rt,required:!0},activeStep:{required:!1,default:1,type:Number}},setup(z,{expose:be}){const{t:l}=St(),O=z,{form:a,isSupportSetKey:Ve,activeStep:g}=pt(O),j={tableName:" ",sheetExcelId:"",fields:[],jsonArray:[],nameExist:!1,empty:"",overLength:!1},K=le(U(j)),x=le({excelData:[],defaultExpandedKeys:[],defaultCheckedKeys:[],fileList:null,sheets:[]}),A=V("preview"),$=V(),Ee=V(!1),w=oe([]),Z=V(!0),ee=V(!1),W=V(),{emitter:we}=wt(),I=oe([]),M=oe([]),L=V(!1),H=V(!0),re={name:[{required:!0,message:l("sync_datasource.input_ds_name"),trigger:"blur"},{min:1,max:64,message:l("datasource.input_limit_1_64",[1,64]),trigger:"blur"}],"configuration.url":[{required:!0,message:l("datasource.remote_excel_url_empty"),trigger:"blur"}]},de=V(U(re)),b=V("");let ue;const ke=s=>{a.value.configuration={url:"",userName:"",passwd:""},a.value.syncSetting={updateType:"all_scope",syncRate:"SIMPLE_CRON",simpleCronValue:"1",simpleCronType:"minute",startTime:"",endTime:"",endLimit:"0",cron:"0 0/1 * * * ? *"},a.value.type=s,ue=setTimeout(()=>{clearTimeout(ue),$.value.clearValidate()},0)},ce=Nt(()=>{Z.value=!1,ne(()=>{Z.value=!0})},500);ft(()=>{window.addEventListener("resize",ce)}),yt(()=>{window.removeEventListener("resize",ce)}),Se(()=>a.value.type,s=>{s.startsWith("API")||(de.value=U(re))},{immediate:!0}),Se(()=>g.value,()=>{var s;te.value=((s=a.value.syncSetting)==null?void 0:s.syncRate)==="CRON"});const Ne=()=>($.value.clearValidate(),$.value.validate),Re=()=>(ae.value.clearValidate(),ae.value.validate),Ce=()=>{var o;let s=[],t=[],n=(o=x.excelData[0])==null?void 0:o.sheets;if(n===void 0)return h({message:l("datasource.file_not_empty"),type:"error"}),!1;for(let u=0;u<n.length;u++)if(n[u].sheet){if(n[u].fields.filter(c=>c.checked).length==0)return h({message:n[u].excelLabel+l("datasource.api_field_not_empty"),type:"error"}),!1;for(let c=0;c<n[u].fields.length;c++)if(n[u].fields[c].checked&&n[u].fields[c].primaryKey&&!n[u].fields[c].length&&n[u].fields[c].deExtractType===0)return h({message:l("datasource.primary_key_length")+n[u].excelLabel+": "+n[u].fields[c].name,type:"error"}),!1;s.push(n[u]),t.push(n[u].fieldsMd5)}return s.length?!0:(h({message:l("dataset.ple_select_excel"),type:"error"}),!1)},Oe=()=>(x.excelData=[],b.value="",M.value=[],Object.assign(K,U(j)),$.value.clearValidate()),De=()=>{$.value.resetFields()},te=V(!1),Ie=()=>{a.value.syncSetting.syncRate==="SIMPLE"&&(a.value.syncSetting.endLimit=0,a.value.syncSetting.endTime=0,a.value.syncSetting.cron=""),a.value.syncSetting.syncRate==="SIMPLE_CRON"&&(a.value.syncSetting.cron="0 0/1 * * * ? *",a.value.syncSetting.simpleCronType="minute"),a.value.syncSetting.syncRate==="CRON"&&(a.value.syncSetting.cron="00 00 * ? * * *"),ne(()=>{te.value=a.value.syncSetting.syncRate==="CRON"})},me=()=>{if(a.value.syncSetting.simpleCronType==="minute"){(a.value.syncSetting.simpleCronValue<1||a.value.syncSetting.simpleCronValue>59)&&(h.warning(l("cron.minute_limit")),a.value.syncSetting.simpleCronValue=59),a.value.syncSetting.cron="0 0/"+a.value.syncSetting.simpleCronValue+" * * * ? *";return}if(a.value.syncSetting.simpleCronType==="hour"){(a.value.syncSetting.simpleCronValue<1||a.value.syncSetting.simpleCronValue>23)&&(h.warning(l("cron.hour_limit")),a.value.syncSetting.simpleCronValue=23),a.value.syncSetting.cron="0 0 0/"+a.value.syncSetting.simpleCronValue+" * * ? *";return}if(a.value.syncSetting.simpleCronType==="day"){(a.value.syncSetting.simpleCronValue<1||a.value.syncSetting.simpleCronValue>31)&&(h.warning(l("cron.day_limit")),a.value.syncSetting.simpleCronValue=31),a.value.syncSetting.cron="0 0 0 1/"+a.value.syncSetting.simpleCronValue+" * ? *";return}},ae=V(),Le={"syncSetting.updateType":[{required:!0,message:l("datasource.update_type"),trigger:"change"}],"syncSetting.syncRate":[{required:!0,message:l("datasource.sync_rate"),trigger:"change"}],"syncSetting.simpleCronValue":[{required:!0,message:l("auth.set_rules"),trigger:"change"}],"syncSetting.cron":[{required:!0,message:l("common.cron_exp"),trigger:"change"}],"syncSetting.startTime":[{required:!0,message:l("datasource.start_time"),trigger:"change"}]},pe=s=>{var n;b.value=s.value;const t=(n=x.excelData[0])==null?void 0:n.sheets.find(o=>o.sheetId===s.value);fe(t)},fe=s=>{s.sheet&&(Object.assign(K,s),I.value=Fe(s.fields),w.value=I.value.filter(t=>t.checked),A.value="preview")},P={TEXT:"text",DATETIME:"time",LONG:"value",DOUBLE:"value"},Fe=s=>s.map(t=>({key:t.originName,fieldType:t.fieldType,deExtractType:t.deExtractType,dataKey:t.originName,title:t.name,checked:t.checked,primaryKey:t.primaryKey,length:t.length,width:150,headerCellRenderer:({column:n})=>{let o;return r("div",{class:"flex-align-center icon"},[r(X,null,{default:()=>[r(Q,null,zt(o=vt(Y[P[n.fieldType]],{class:`svg-icon field-icon-${P[n.fieldType]}`}))?o:{default:()=>[o]})]}),r("span",{class:"ellipsis",title:n.title,style:{width:"100px"}},[n.title])])}})),Ue=()=>{$.value.validate(s=>{if(s){const t=JSON.parse(JSON.stringify(a.value.configuration));return t.userName=ie.encode(t.userName),t.passwd=ie.encode(t.passwd),t.datasourceId=a.value.id||0,t.editType=a.value.editType,L.value=!0,bt(t).then(n=>{L.value=!1,Ke(n),L.value=!1}).catch(n=>{x.excelData=[],b.value="",M.value=[],Object.assign(K,U(j)),n.code==="ECONNABORTED"&&h({type:"error",message:n.message,showClose:!0}),L.value=!1})}})},Ke=s=>{if(!s){x.excelData=[],b.value="",M.value=[],Object.assign(K,U(j)),h.warning(s.msg);return}if((s==null?void 0:s.code)!==0){x.excelData=[],b.value="",M.value=[],Object.assign(K,U(j)),h.warning(s.msg);return}I.value=[],Object.assign(K,U(j)),w.value=[],Ee.value=!1,a.value.name||(a.value.name=s.data.excelLabel),M.value=s.data.sheets.map(n=>{const{sheetId:o,tableName:u,newSheet:c}=n;return{value:o,label:u,newSheet:c}}),x.excelData=[s.data];const[t]=M.value;t&&pe(t)},ye=s=>{var t;if(A.value=s,s==="select")ne(()=>{var n;ee.value=!0;for(let o=0;o<I.value.length;o++)I.value[o].checked&&((n=W==null?void 0:W.value)==null||n.toggleRowSelection(I.value[o],!0));ee.value=!1});else{const n=(t=x.excelData[0])==null?void 0:t.sheets.find(o=>o.sheetId===b.value);fe(n)}},$e=s=>{var t;ee.value||(w.value=s,w.value.forEach(o=>{o.checked=!0}),I.value.forEach(o=>{let u;for(let c=0;c<w.value.length;c++)o.dataKey===w.value[c].dataKey&&(u=w.value[c]);u?o.checked=u.checked:o.checked=!1}),((t=x.excelData[0])==null?void 0:t.sheets.find(o=>o.sheetId===b.value)).fields.forEach(o=>{let u;for(let c=0;c<w.value.length;c++)o.originName===w.value[c].dataKey&&(u=w.value[c]);u?o.checked=u.checked:o.checked=!1}))},Me=s=>{var n;((n=x.excelData[0])==null?void 0:n.sheets.find(o=>o.sheetId===b.value)).fields.forEach(o=>{o.originName===s.dataKey&&(o.length=s.length)})},je=s=>{var n;((n=x.excelData[0])==null?void 0:n.sheets.find(o=>o.sheetId===b.value)).fields.forEach(o=>{o.originName===s.dataKey&&(o.primaryKey=s.primaryKey)})},Be=s=>{if(!s.checked||s.deExtractType!==0)return!0},qe=(s,t,n)=>{var G;let o=[],u=[],c=!1,k=!1,m=(G=x.excelData[0])==null?void 0:G.sheets;for(let f=0;f<m.length;f++)if(m[f].sheet){if(m[f].effectExtField&&(c=!0),m[f].changeFiled&&(k=!0),m[f].fields.filter(N=>N.checked).length==0){h({message:m[f].excelLabel+l("datasource.api_field_not_empty"),type:"error"}),n==null||n();return}for(let N=0;N<m[f].fields.length;N++)if(m[f].fields[N].checked&&m[f].fields[N].primaryKey&&!m[f].fields[N].length&&m[f].fields[N].deExtractType===0){h({message:l("datasource.primary_key_length")+m[f].excelLabel+": "+m[f].fields[N].name,type:"error"}),n==null||n();return}o.push(m[f]),u.push(m[f].fieldsMd5)}if(!o.length){h({message:l("dataset.ple_select_excel"),type:"error"}),n==null||n();return}let D={};s&&(a.value.name=s.name),a.value.configuration.sheets=o,O.form.id?D={id:O.form.id,name:O.form.name,type:"ExcelRemote",configuration:JSON.parse(JSON.stringify(a.value.configuration)),editType:O.form.editType?O.form.editType:0}:D={id:O.form.id,name:O.form.name,type:"ExcelRemote",configuration:JSON.parse(JSON.stringify(a.value.configuration)),editType:0},D.syncSetting=a.value.syncSetting,O.form.editType===0&&O.form.id&&(c||k)?He.confirm(l("deDataset.replace_the_data"),{confirmButtonText:l("dataset.confirm"),tip:l("data_source.to_replace_it"),cancelButtonText:"Cancel",confirmButtonType:"primary",type:"warning",autofocus:!1,showClose:!1,callback:f=>{f==="confirm"&&ge(u,D,s,t,n)}}):ge(u,D,s,t,n)},ze=[{label:l("dataset.text"),value:0},{label:l("dataset.value"),value:2},{label:l("dataset.value")+"("+l("dataset.float")+")",value:3}],Ae=s=>{var n;s.deType=s.deExtractType,((n=x.excelData[0])==null?void 0:n.sheets.find(o=>o.sheetId===b.value)).fields.forEach(o=>{o.originName===s.dataKey&&(o.deExtractType=s.deExtractType,o.deType=s.deExtractType,o.fieldType=Pe[s.deExtractType])})},Pe={0:"TEXT",2:"LONG",3:"DOUBLE"},ge=(s,t,n,o,u)=>{for(let k=0;k<t.configuration.sheets.length;k++)t.configuration.sheets[k].data=[],t.configuration.sheets[k].jsonArray=[];t.configuration=ie.encode(JSON.stringify(t.configuration)),t.syncSetting.startTime=new Date(t.syncSetting.startTime).getTime(),t.syncSetting.endTime=new Date(t.syncSetting.endTime).getTime();let c=Vt;!t.id||t.id==="0"?(delete t.id,t.pid=n.pid):c=Et,!L.value&&(L.value=!0,c(t).then(k=>{we.emit("showFinishPage",k),o==null||o(),h({message:l("commons.save_success"),type:"success"})}).finally(()=>{u==null||u(),L.value=!1}))};return be({submitForm:Ne,resetForm:De,initForm:ke,clearForm:Oe,submitSyncSettingForm:Re,validateExcel:Ce,saveExcelDs:qe}),(s,t)=>{const n=Xe,o=Qe,u=Ye,c=Ze,k=et,m=tt,D=at,G=lt,f=ot,N=nt,Ge=st,J=it,_e=rt,Je=dt,ve=ut,We=ct;return p(),B("div",Ot,[S("div",Dt,[S("div",It,[S("div",{class:F([e(g)===1&&"active","info-text"])},_(e(l)("data_source.source_configuration_information")),3),t[21]||(t[21]=S("div",{class:"update-info-line"},null,-1)),S("div",{class:F([e(g)===2&&"active","update-text"])},_(e(l)("data_source.data_update_settings")),3)]),R(S("div",{class:"title-form_primary base-info"},_(e(l)("datasource.basic_info")),513),[[C,e(g)!==2]]),R((p(),v(e(he),{ref_key:"remoteExcelForm",ref:$,onSubmit:t[5]||(t[5]=gt(()=>{},["prevent"])),model:e(a),rules:de.value,"label-width":"180px","label-position":"top","require-asterisk-position":"right"},{default:d(()=>[R(r(o,{label:e(l)("data_source.data_source_name"),prop:"name"},{default:d(()=>[r(n,{modelValue:e(a).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(a).name=i),autocomplete:"off",placeholder:e(l)("data_source.data_source_name_de")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[C,e(g)!==2]]),R(r(o,{label:e(l)("datasource.remote_excel_url"),prop:"configuration.url"},{default:d(()=>[r(n,{modelValue:e(a).configuration.url,"onUpdate:modelValue":t[1]||(t[1]=i=>e(a).configuration.url=i),autocomplete:"off",placeholder:e(l)("datasource.remote_excel_url_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[C,e(g)!==2]]),R(r(o,{label:e(l)("datasource.username")},{default:d(()=>[r(n,{modelValue:e(a).configuration.userName,"onUpdate:modelValue":t[2]||(t[2]=i=>e(a).configuration.userName=i),autocomplete:"off",placeholder:e(l)("datasource.please_input_user_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[C,e(g)!==2]]),R(r(o,{label:e(l)("datasource.password")},{default:d(()=>[r(e(kt),{placeholder:e(l)("common.inputText")+e(l)("common.empty")+e(l)("datasource.password"),"show-password":"",type:"password",modelValue:e(a).configuration.passwd,"onUpdate:modelValue":t[3]||(t[3]=i=>e(a).configuration.passwd=i)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),[[C,e(g)!==2]]),R(r(o,null,{default:d(()=>[r(u,{type:"primary",onClick:t[4]||(t[4]=i=>Ue())},{default:d(()=>[E(_(e(l)("datasource.load_data")),1)]),_:1})]),_:1},512),[[C,e(g)!==2]])]),_:1},8,["model","rules"])),[[We,L.value],[C,e(g)!==2]]),b.value?(p(),B(xe,{key:0},[R(S("div",{class:"title-form_primary"},_(e(l)("chart.data_preview")),513),[[C,e(g)!==2]]),R(r(Tt,{activeTab:b.value,onTabClick:pe,"tab-list":M.value},null,8,["activeTab","tab-list"]),[[C,e(g)!==2]]),e(a).editType===0?R((p(),B("div",Lt,[S("div",Ft,[r(u,{onClick:t[6]||(t[6]=i=>ye("preview")),class:F([A.value==="preview"&&"is-active"]),text:""},{default:d(()=>[E(_(e(l)("chart.data_preview")),1)]),_:1},8,["class"]),r(u,{onClick:t[7]||(t[7]=i=>ye("select")),class:F([A.value==="select"&&"is-active"]),text:""},{default:d(()=>[E(_(e(l)("data_set.field_selection")),1)]),_:1},8,["class"])])],512)),[[C,e(g)!==2]]):T("",!0),Z.value?R((p(),B("div",{key:1,class:F(["info-table",e(a).editType===0&&"info-table_height"])},[A.value==="preview"?(p(),v(k,{key:0},{default:d(({height:i,width:y})=>[r(c,{columns:w.value,"header-class":"excel-header-cell",data:K.jsonArray,width:y,height:i,fixed:""},null,8,["columns","data","width","height"])]),_:1})):(p(),v(Ge,{key:1,"header-class":"header-cell",ref_key:"multipleTable",ref:W,data:I.value,style:{width:"100%"},onSelectionChange:$e},{default:d(()=>[r(m,{type:"selection",width:"55"}),r(m,{label:e(l)("data_set.field_name")},{default:d(i=>[E(_(i.row.title),1)]),_:1},8,["label"]),r(m,{prop:"deExtractType",label:e(l)("datasource.field_type")},{default:d(i=>[r(G,{modelValue:i.row.deExtractType,"onUpdate:modelValue":y=>i.row.deExtractType=y,class:"select-type",style:{display:"inline-block",width:"120px"},onChange:y=>Ae(i.row)},{prefix:d(()=>[r(e(X),null,{default:d(()=>[r(e(Q),{className:`field-icon-${e(q)[i.row.deExtractType]}`},{default:d(()=>[(p(),v(se(e(Y)[e(q)[i.row.deExtractType]]),{class:F(["svg-icon",`field-icon-${e(q)[i.row.deExtractType]}`])},null,8,["class"]))]),_:2},1032,["className"])]),_:2},1024)]),default:d(()=>[(p(),B(xe,null,_t(ze,y=>r(D,{key:y.value,label:y.label,value:y.value},{default:d(()=>[S("span",Ut,[r(e(X),null,{default:d(()=>[r(e(Q),{className:`field-icon-${e(q)[y.value]}`},{default:d(()=>[(p(),v(se(e(Y)[e(q)[y.value]]),{class:F(["svg-icon",`field-icon-${e(q)[y.value]}`])},null,8,["class"]))]),_:2},1032,["className"])]),_:2},1024)]),S("span",Kt,_(y.label),1)]),_:2},1032,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),r(m,{label:e(l)("data_set.field_type")},{default:d(i=>[S("div",$t,[r(e(X),null,{default:d(()=>[r(e(Q),null,{default:d(()=>[(p(),v(se(e(Y)[P[i.row.fieldType]]),{class:F(`svg-icon field-icon-${P[i.row.fieldType]}`)},null,8,["class"]))]),_:2},1024)]),_:2},1024),E(" "+_(e(l)(`dataset.${P[i.row.fieldType]}`)),1)])]),_:1},8,["label"]),e(a).editType===0?(p(),v(m,{key:0,prop:"length",label:e(l)("datasource.length")},{default:d(i=>[r(f,{disabled:Be(i.row),modelValue:i.row.length,"onUpdate:modelValue":y=>i.row.length=y,autocomplete:"off","step-strictly":"",class:"text-left edit-all-line",min:1,max:512,placeholder:e(l)("common.inputText"),"controls-position":"right",type:"number",onChange:y=>Me(i.row)},null,8,["disabled","modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:1},8,["label"])):T("",!0),e(a).editType===0&&e(Ve)?(p(),v(m,{key:1,prop:"primaryKey","class-name":"checkbox-table",label:e(l)("datasource.set_key"),width:"100"},{default:d(i=>[(p(),v(N,{key:i.row.dataKey,modelValue:i.row.primaryKey,"onUpdate:modelValue":y=>i.row.primaryKey=y,disabled:!i.row.checked,onChange:y=>je(i.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"]))]),_:1},8,["label"])):T("",!0)]),_:1},8,["data"]))],2)),[[C,e(g)!==2]]):T("",!0)],64)):T("",!0),r(e(he),{ref_key:"dsApiForm",ref:ae,model:e(a),style:{"margin-top":"24px"},rules:Le,"label-width":"180px","label-position":"top","require-asterisk-position":"right"},{default:d(()=>[e(g)===2?(p(),v(o,{key:0,label:e(l)("datasource.update_type"),prop:"syncSetting.updateType"},{default:d(()=>[r(_e,{modelValue:e(a).syncSetting.updateType,"onUpdate:modelValue":t[8]||(t[8]=i=>e(a).syncSetting.updateType=i)},{default:d(()=>[r(J,{label:"add_scope"},{default:d(()=>[E(_(e(l)("data_source.append_data")),1)]),_:1}),r(J,{label:"all_scope"},{default:d(()=>[E(_(e(l)("data_source.replace_data")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):T("",!0),e(g)===2?(p(),v(o,{key:1,label:e(l)("datasource.sync_rate"),prop:"syncSetting.syncRate"},{default:d(()=>[r(_e,{modelValue:e(a).syncSetting.syncRate,"onUpdate:modelValue":t[9]||(t[9]=i=>e(a).syncSetting.syncRate=i),onChange:Ie},{default:d(()=>[r(J,{label:"RIGHTNOW"},{default:d(()=>[E(_(e(l)("data_source.update_now")),1)]),_:1}),r(J,{label:"CRON"},{default:d(()=>[E(_(e(l)("datasource.cron_config")),1)]),_:1}),r(J,{label:"SIMPLE_CRON"},{default:d(()=>[E(_(e(l)("datasource.simple_cron")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):T("",!0),e(g)===2&&e(a).syncSetting.syncRate!=="RIGHTNOW"?(p(),B("div",Mt,[e(a).syncSetting.syncRate==="SIMPLE_CRON"?(p(),v(o,{key:0,label:e(l)("auth.set_rules"),prop:"syncSetting.simpleCronValue"},{default:d(()=>[S("div",jt,[E(_(e(l)("common.every"))+" ",1),r(f,{modelValue:e(a).syncSetting.simpleCronValue,"onUpdate:modelValue":t[10]||(t[10]=i=>e(a).syncSetting.simpleCronValue=i),"controls-position":"right",min:1,onChange:t[11]||(t[11]=i=>me())},null,8,["modelValue"]),r(G,{modelValue:e(a).syncSetting.simpleCronType,"onUpdate:modelValue":t[12]||(t[12]=i=>e(a).syncSetting.simpleCronType=i),filterable:"",onChange:t[13]||(t[13]=i=>me())},{default:d(()=>[r(D,{label:e(l)("common.minute"),value:"minute"},null,8,["label"]),r(D,{label:e(l)("common.hour"),value:"hour"},null,8,["label"]),r(D,{label:e(l)("common.day"),value:"day"},null,8,["label"])]),_:1},8,["modelValue"]),E(" "+_(e(l)("data_source.update_once")),1)])]),_:1},8,["label"])):T("",!0),e(a).syncSetting.syncRate==="CRON"?(p(),v(o,{key:1,prop:"syncSetting.cron"},{default:d(()=>[r(Je,{width:834,modelValue:H.value,"onUpdate:modelValue":t[18]||(t[18]=i=>H.value=i),trigger:"click"},{default:d(()=>[S("div",Bt,[te.value?(p(),v(xt,{key:0,modelValue:e(a).syncSetting.cron,"onUpdate:modelValue":t[14]||(t[14]=i=>e(a).syncSetting.cron=i),"is-rate":e(a).syncRate==="CRON",onClose:t[15]||(t[15]=i=>H.value=!1)},null,8,["modelValue","is-rate"])):T("",!0)])]),reference:d(()=>[r(n,{modelValue:e(a).syncSetting.cron,"onUpdate:modelValue":t[16]||(t[16]=i=>e(a).syncSetting.cron=i),onClick:t[17]||(t[17]=i=>H.value=!0)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})):T("",!0),e(a).syncSetting.syncRate!=="RIGHTNOW"?(p(),v(o,{key:2,label:e(l)("datasource.start_time"),prop:"syncSetting.startTime"},{default:d(()=>[r(ve,{modelValue:e(a).syncSetting.startTime,"onUpdate:modelValue":t[19]||(t[19]=i=>e(a).syncSetting.startTime=i),class:"de-date-picker","prefix-icon":e(Te),type:"datetime",placeholder:e(l)("datasource.start_time")},null,8,["modelValue","prefix-icon","placeholder"])]),_:1},8,["label"])):T("",!0),e(a).syncSetting.syncRate!=="RIGHTNOW"?(p(),v(o,{key:3,label:e(l)("datasource.end_time"),prop:"syncSetting.endLimit"},{default:d(()=>[S("div",qt,[r(ve,{modelValue:e(a).syncSetting.endTime,"onUpdate:modelValue":t[20]||(t[20]=i=>e(a).syncSetting.endTime=i),class:"de-date-picker","prefix-icon":e(Te),type:"datetime",placeholder:e(l)("datasource.end_time")},null,8,["modelValue","prefix-icon","placeholder"])])]),_:1},8,["label"])):T("",!0)])):T("",!0)]),_:1},8,["model"])])])}}});const rl=Ct(At,[["__scopeId","data-v-a6f01485"]]);export{rl as default};
