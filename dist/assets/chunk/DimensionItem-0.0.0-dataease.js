import{o as de,n as A,j as le}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import{E as ie,a as ue,b as me}from"./el-dropdown-menu-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import{d as re,r as B,t as _e,y as T,w as pe,o as ye,f as c,O as E,j as n,i as t,S as f,g as l,P as s,a3 as v,a4 as i,u as e,_ as r,a8 as P,T as fe,l as Q}from"./vue-0.0.0-dataease.js";import{i as W,a as he,b as ve}from"./icon_sort_outlined-0.0.0-dataease.js";import{i as Z}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as ge}from"./icon_down_outlined-1-0.0.0-dataease.js";import{i as N}from"./icon_right_outlined-0.0.0-dataease.js";import{i as g}from"./icon_done_outlined-0.0.0-dataease.js";import{i as be}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as ke}from"./icon_visible_outlined-0.0.0-dataease.js";import{i as U}from"./icon_invisible_outlined-0.0.0-dataease.js";import{g as Se}from"./utils-0.0.0-dataease.js";import{f as S}from"./attr-0.0.0-dataease23.js";import{i as G}from"./field-list-0.0.0-dataease.js";import{E as xe}from"./index-0.0.0-dataease4.js";import{E as we}from"./index-0.0.0-dataease6.js";import{_ as Te}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";const Ce={class:"item-style"},Me={key:0,style:{display:"flex",color:"#646a73"}},De={key:1,style:{display:"flex",color:"#646a73"}},He={class:"item-name"},Ie={class:"inner-dropdown-menu menu-item-padding"},qe={class:"menu-item-content"},Ee={class:"summary-span-item"},Pe={class:"inner-dropdown-menu menu-item-padding"},Ne={class:"menu-item-content"},Oe={class:"summary-span-item"},$e={class:"inner-dropdown-menu menu-item-padding"},Re={class:"menu-item-content"},je={class:"summary-span-item"},Fe=re({__name:"DimensionItem",props:{param:{type:Object,required:!1},item:{type:Object,required:!0},index:{type:Number,required:!0},chart:{type:Object,required:!0},dimensionData:{type:Array,required:!0},quotaData:{type:Array,required:!0},themes:{type:String,default:"dark"},type:{type:String,required:!0}},emits:["onDimensionItemRemove","onCustomSort","onDimensionItemChange","onNameEdit","valueFormatter","onToggleHide","editSortPriority"],setup(d,{emit:J}){const{t:m}=de(),I=B("success"),O=B(!1),u=d,b=J,{item:a}=_e(u),$=T(()=>u.themes||"dark"),R=T(()=>(u.chart.type==="table-normal"||u.chart.type==="table-info")&&(u.item.deType===2||u.item.deType===3));pe([()=>u.dimensionData,()=>u.item,()=>u.chart.type],()=>{V()},{deep:!0});const K=p=>{if(p)switch(p.type){case"rename":ee();break;case"remove":F();break;case"filter":break;case"formatter":te();break;case"toggleHide":oe();break;case"sortPriority":b("editSortPriority");break}},w=p=>({type:p}),L=p=>{if(p.type==="custom_sort"){const h={index:u.index,sort:p.type};b("onCustomSort",h)}else a.value.index=u.index,a.value.sort=p.type,a.value.customSort=[],delete a.value.axisType,b("onDimensionItemChange",a.value)},C=p=>({type:p}),X=p=>{a.value.dateStyle=p.type,a.value.axisType=u.type,b("onDimensionItemChange",a.value)},k=p=>({type:p}),Y=p=>{a.value.datePattern=p.type,a.value.axisType=u.type,b("onDimensionItemChange",a.value)},j=p=>({type:p}),ee=()=>{a.value.index=u.index,a.value.renameType=u.type,b("onNameEdit",a.value)},F=()=>{a.value.index=u.index,a.value.removeType=u.type,b("onDimensionItemRemove",a.value)},V=()=>{I.value=Se(u.dimensionData,u.quotaData,u.item)},te=()=>{a.value.index=u.index,a.value.formatterType=u.type,b("valueFormatter",a.value)},ne=p=>u.chart.type==="symbolic-map"||u.chart.type==="flow-map"?!1:!p.chartId&&(p.deType===0||p.deType===5),ae=["word-cloud","stock-line","treemap","circle-packing"],x=T(()=>{const{type:p}=u.chart,{type:h}=u;if(ae.includes(p)||h==="extColor")return!1;const o=p.includes("chart-mix"),M=["dimension","dimensionStack","dimensionExt"].includes(h);return!o||M}),se=T(()=>u.chart.type.includes("chart-mix")?!1:x.value),oe=()=>{a.value.index=u.index,a.value.hide=!a.value.hide,a.value.axisType=u.type,b("onToggleHide",a.value)},z=T(()=>["table-info","table-normal"].includes(u.chart.type)&&a.value.hide);return ye(()=>{V()}),(p,h)=>{const _=A,o=le,M=xe,ce=we,y=ie,D=ue,H=me,q=A;return c(),E("span",Ce,[n(H,{effect:d.themes,trigger:"click",onCommand:K},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[x.value?(c(),l(y,{key:0,onClick:h[0]||(h[0]=P(()=>{},["prevent"]))},{default:t(()=>[n(H,{effect:d.themes,"popper-class":"data-dropdown_popper_mr9",placement:"right-start",style:{width:"100%",height:"100%"},onCommand:L},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style sub",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[n(y,{class:"menu-item-padding",command:C("none")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="none"?"content-active":""])},[v(i(e(m)("chart.none"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="none"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),n(y,{class:"menu-item-padding",command:C("asc")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="asc"?"content-active":""])},[v(i(e(m)("chart.asc"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="asc"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),n(y,{class:"menu-item-padding",command:C("desc")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="desc"?"content-active":""])},[v(i(e(m)("chart.desc"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="desc"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),ne(e(a))?(c(),l(y,{key:0,class:"menu-item-padding",command:C("custom_sort")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="custom_sort"?"content-active":""])},[v(i(e(m)("chart.custom_sort"))+i(e(m)("chart.sort"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="custom_sort"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])):r("",!0)]),_:1},8,["effect","class"])]),default:t(()=>[s("span",Ie,[s("span",qe,[n(o,null,{default:t(()=>[n(_,{name:"icon_sort_outlined"},{default:t(()=>[n(e(W),{class:"svg-icon"})]),_:1})]),_:1}),s("span",null,i(e(m)("chart.sort")),1),s("span",Ee,"("+i(e(m)("chart."+u.item.sort))+")",1)]),n(o,null,{default:t(()=>[n(_,{name:"icon_right_outlined"},{default:t(()=>[n(e(N),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["effect"])]),_:1})):r("",!0),se.value?(c(),l(y,{key:1,command:w("sortPriority"),class:"menu-item-padding"},{default:t(()=>[n(o),s("span",null,i(e(m)("chart.sort_priority")),1)]),_:1},8,["command"])):r("",!0),e(a).deType===1?(c(),l(y,{key:2,onClick:h[1]||(h[1]=P(()=>{},["prevent"])),divided:!d.chart.type.includes("chart-mix")||d.chart.type.includes("chart-mix")&&(d.type==="dimension"||d.type==="dimensionStack"||d.type==="dimensionExt")},{default:t(()=>[n(H,{effect:d.themes,placement:"right-start","popper-class":"data-dropdown_popper_mr9",style:{width:"100%",height:"100%"},onCommand:X},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style sub",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[n(y,{class:"menu-item-padding",command:k("y")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y"?"content-active":""])},[v(i(e(m)("chart.y"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),O.value?(c(),l(y,{key:0,class:"menu-item-padding",command:k("y_Q")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_Q"?"content-active":""])},[v(i(e(m)("chart.y_Q"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_Q"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])):r("",!0),n(y,{class:"menu-item-padding",command:k("y_M")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M"?"content-active":""])},[v(i(e(m)("chart.y_M"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),O.value?(c(),l(y,{key:1,class:"menu-item-padding",command:k("y_W")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_W"?"content-active":""])},[v(i(e(m)("chart.y_W"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_W"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])):r("",!0),n(y,{class:"menu-item-padding",command:k("y_M_d")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d"?"content-active":""])},[v(i(e(m)("chart.y_M_d"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),d.chart.type.includes("bar-range")&&["quota","quotaExt"].includes(d.type)?r("",!0):(c(),l(y,{key:2,class:"menu-item-padding",command:k("H_m_s"),divided:""},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="H_m_s"?"content-active":""])},[v(i(e(m)("chart.H_m_s"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="H_m_s"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])),n(y,{class:"menu-item-padding",command:k("y_M_d_H"),divided:d.chart.type.includes("bar-range")&&["quota","quotaExt"].includes(d.type)},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d_H"?"content-active":""])},[v(i(e(m)("chart.y_M_d_H"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d_H"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command","divided"]),n(y,{class:"menu-item-padding",command:k("y_M_d_H_m"),divided:d.chart.type.includes("bar-range")&&["quota","quotaExt"].includes(d.type)},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d_H_m"?"content-active":""])},[v(i(e(m)("chart.y_M_d_H_m"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d_H_m"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command","divided"]),n(y,{class:"menu-item-padding",command:k("y_M_d_H_m_s")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d_H_m_s"?"content-active":""])},[v(i(e(m)("chart.y_M_d_H_m_s"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d_H_m_s"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])]),_:1},8,["effect","class"])]),default:t(()=>[s("span",Pe,[s("span",Ne,[n(o),s("span",null,i(e(m)("chart.dateStyle")),1),s("span",Oe,"("+i(e(m)("chart."+e(a).dateStyle))+")",1)]),n(o,null,{default:t(()=>[n(_,{name:"icon_right_outlined"},{default:t(()=>[n(e(N),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["effect"])]),_:1},8,["divided"])):r("",!0),e(a).deType===1?(c(),l(y,{key:3,onClick:h[2]||(h[2]=P(()=>{},["prevent"]))},{default:t(()=>[n(H,{effect:d.themes,placement:"right-start","popper-class":"data-dropdown_popper_mr9",style:{width:"100%",height:"100%"},onCommand:Y},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style sub",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[n(y,{class:"menu-item-padding",command:j("date_sub")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).datePattern==="date_sub"?"content-active":""])},[v(i(e(m)("chart.date_sub"))+"(1990-01-01) ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).datePattern==="date_sub"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),n(y,{class:"menu-item-padding",command:j("date_split")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).datePattern==="date_split"?"content-active":""])},[v(i(e(m)("chart.date_split"))+"(1990/01/01) ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).datePattern==="date_split"?(c(),l(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])]),_:1},8,["effect","class"])]),default:t(()=>[s("span",$e,[s("span",Re,[n(o),s("span",null,i(e(m)("chart.datePattern")),1),s("span",je,"("+i(e(m)("chart."+e(a).datePattern))+")",1)]),n(o,null,{default:t(()=>[n(_,{name:"icon_right_outlined"},{default:t(()=>[n(e(N),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["effect"])]),_:1})):r("",!0),n(y,{class:"menu-item-padding",divided:!d.chart.type.includes("chart-mix")||d.chart.type.includes("chart-mix")&&(d.type==="dimension"||d.type==="dimensionStack"||d.type==="dimensionExt"),command:w("rename")},{default:t(()=>[n(o,null,{default:t(()=>[n(q,{name:"icon_edit_outlined"},{default:t(()=>[n(e(be),{class:"svg-icon"})]),_:1})]),_:1}),s("span",null,i(e(m)("chart.show_name_set")),1)]),_:1},8,["divided","command"]),["table-normal","table-info"].includes(d.chart.type)?(c(),l(y,{key:4,class:"menu-item-padding",command:w("toggleHide")},{default:t(()=>[n(o,null,{default:t(()=>[n(q,null,{default:t(()=>[e(a).hide===!0?(c(),l(e(ke),{key:0,class:"svg-icon"})):(c(),l(e(U),{key:1,class:"svg-icon"}))]),_:1})]),_:1}),s("span",null,i(e(a).hide===!0?e(m)("chart.show"):e(m)("chart.hide")),1)]),_:1},8,["command"])):r("",!0),R.value?(c(),l(y,{key:5,class:"menu-item-padding",divided:!R.value,command:w("formatter")},{default:t(()=>[n(o),s("span",null,i(e(m)("chart.value_formatter"))+"...",1)]),_:1},8,["divided","command"])):r("",!0),n(y,{class:"menu-item-padding",divided:"",command:w("remove")},{default:t(()=>[n(o,null,{default:t(()=>[n(q,{name:"icon_delete-trash_outlined"},{default:t(()=>[n(e(Z),{class:"svg-icon"})]),_:1})]),_:1}),s("span",null,i(e(m)("chart.delete")),1)]),_:1},8,["command"])]),_:1},8,["effect","class"])]),default:t(()=>[n(ce,{class:f(["item-axis father",["editor-"+u.themes,`${d.themes}_icon-right`]]),style:fe({backgroundColor:I.value+"0a",border:"1px solid "+I.value})},{default:t(()=>[d.type!=="extColor"?(c(),E("span",Me,[e(a).sort==="asc"&&x.value?(c(),l(o,{key:0},{default:t(()=>[n(_,{name:"icon_sort-a-to-z_outlined"},{default:t(()=>[n(e(he),{class:"svg-icon"})]),_:1})]),_:1})):r("",!0),e(a).sort==="desc"&&x.value?(c(),l(o,{key:1},{default:t(()=>[n(_,{name:"icon_sort-z-to-a_outlined"},{default:t(()=>[n(e(ve),{class:"svg-icon"})]),_:1})]),_:1})):r("",!0),e(a).sort==="custom_sort"&&x.value?(c(),l(o,{key:2},{default:t(()=>[n(_,{name:"icon_sort_outlined"},{default:t(()=>[n(e(W),{class:"svg-icon"})]),_:1})]),_:1})):r("",!0),n(o,null,{default:t(()=>[n(_,{className:`field-icon-${e(S)[[2,3].includes(e(a).deType)?2:0]}`},{default:t(()=>[(c(),l(Q(e(G)[e(S)[e(a).deType]]),{class:f(["svg-icon",`field-icon-${e(S)[[2,3].includes(e(a).deType)?2:0]}`])},null,8,["class"]))]),_:1},8,["className"])]),_:1})])):r("",!0),d.type==="extColor"?(c(),E("span",De,[n(o,null,{default:t(()=>[n(_,{className:`field-icon-${e(S)[[2,3].includes(e(a).deType)?2:0]}`,name:`field_${e(S)[e(a).deType]}`},{default:t(()=>[(c(),l(Q(e(G)[e(S)[e(a).deType]]),{class:f(["svg-icon",`field-icon-${e(S)[[2,3].includes(e(a).deType)?2:0]}`])},null,8,["class"]))]),_:1},8,["className","name"])]),_:1})])):r("",!0),n(M,{effect:$.value,placement:"top"},{content:t(()=>[s("table",null,[s("tbody",null,[s("tr",null,[s("td",null,i(e(m)("dataset.field_origin_name")),1),h[3]||(h[3]=s("td",null,":",-1)),s("td",null,i(e(a).name),1)]),s("tr",null,[s("td",null,i(e(m)("chart.show_name")),1),h[4]||(h[4]=s("td",null,":",-1)),s("td",null,i(e(a).chartShowName?e(a).chartShowName:e(a).name),1)])])])]),default:t(()=>[s("span",{class:f(["item-span-style",{"hidden-status":z.value,"sort-status":x.value&&e(a).sort!=="none"}])},[s("span",He,i(e(a).chartShowName?e(a).chartShowName:e(a).name),1)],2)]),_:1},8,["effect"]),z.value?(c(),l(o,{key:2,style:{"margin-left":"4px"}},{default:t(()=>[n(_,null,{default:t(()=>[n(e(U),{class:"svg-icon inner-class"})]),_:1})]),_:1})):r("",!0),n(M,{effect:$.value,placement:"top"},{content:t(()=>[s("span",null,i(e(m)("chart.delete")),1)]),default:t(()=>[n(o,{class:"child remove-icon"},{default:t(()=>[n(_,null,{default:t(()=>[n(e(Z),{onClick:F,class:"svg-icon inner-class"})]),_:1})]),_:1})]),_:1},8,["effect"]),n(o,{class:"child",style:{position:"absolute",top:"7px",right:"10px",cursor:"pointer"}},{default:t(()=>[n(_,{name:"icon_down_outlined-1"},{default:t(()=>[n(e(ge),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["class","style"])]),_:1},8,["effect"])])}}});const ft=Te(Fe,[["__scopeId","data-v-ce03aaa1"]]);export{ft as default};
