import{s as Le,y as M,r as k,w as L,o as le,q as ne,d as R,f as S,O as I,P as _,S as g,u as s,T as W,j as E,z as lt,C as j,I as Se,x as nt,G as rt,W as Te,a6 as st,h as J,X as it,n as ce,L as ut,g as he,i as D,R as Q,a9 as Ne,_ as ee,a8 as ct,a2 as ht,U as de}from"./vue-0.0.0-dataease.js";import{a as dt,b as Pe}from"./index-0.0.0-dataease27.js";import{E as K,a3 as me,ah as ft,a5 as vt,a2 as pt,a4 as mt,a6 as gt,ae as bt,G as Ct,j as te}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{u as kt,E as wt}from"./index-0.0.0-dataease4.js";import{l as Ke,q as De,O as _t,E as Oe,i as Y,V as Ve,_ as Z,a2 as $t,a3 as yt,aP as Mt,a7 as Et,H as Ft,w as Lt}from"./index-0.0.0-dataease.js";import{E as St}from"./index-0.0.0-dataease20.js";import{g as ge}from"./position-0.0.0-dataease.js";import{d as fe,h as Nt}from"./lodash-0.0.0-dataease.js";import{C as Pt}from"./index-0.0.0-dataease5.js";const Vt=Ke({color:{type:De(Object),required:!0},vertical:{type:Boolean,default:!1},customInput:{type:Number,default:0},inputbKls:{type:String,default:""}});let ve=!1;function G(e,a){if(!_t)return;const o=function(r){var n;(n=a.drag)==null||n.call(a,r)},t=function(r){var n;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,ve=!1,(n=a.end)==null||n.call(a,r)},l=function(r){var n;ve||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",t),document.addEventListener("touchmove",o),document.addEventListener("touchend",t),ve=!0,(n=a.start)==null||n.call(a,r))};e.addEventListener("mousedown",l),e.addEventListener("touchstart",l,{passive:!1})}const At=e=>{const a=ne(),{t:o}=Oe(),t=Le(),l=Le(),r=M(()=>e.color.get("alpha")),n=M(()=>o("el.colorpicker.alphaLabel"));function u(f){var p;f.target!==t.value&&d(f),(p=t.value)==null||p.focus()}function d(f){if(!l.value||!t.value)return;const c=a.vnode.el.getBoundingClientRect(),{clientX:v,clientY:b}=ge(f);if(e.vertical){let C=b-c.top;C=Math.max(t.value.offsetHeight/2,C),C=Math.min(C,c.height-t.value.offsetHeight/2),e.color.set("alpha",Math.round((C-t.value.offsetHeight/2)/(c.height-t.value.offsetHeight)*100))}else{let C=v-c.left;C=Math.max(t.value.offsetWidth/2,C),C=Math.min(C,c.width-t.value.offsetWidth/2),e.color.set("alpha",Math.round((C-t.value.offsetWidth/2)/(c.width-t.value.offsetWidth)*100))}}function h(f){const{code:p,shiftKey:c}=f,v=c?10:1;switch(p){case K.left:case K.down:f.preventDefault(),f.stopPropagation(),$(-v);break;case K.right:case K.up:f.preventDefault(),f.stopPropagation(),$(v);break}}function $(f){let p=r.value+f;p=p<0?0:p>100?100:p,e.color.set("alpha",p)}return{thumb:t,bar:l,alpha:r,alphaLabel:n,handleDrag:d,handleClick:u,handleKeydown:h}},Bt=(e,{bar:a,thumb:o,handleDrag:t})=>{const l=ne(),r=Y("color-alpha-slider"),n=k(0);L(n,w=>{e.color.set("alpha",Math.round(w))});const u=k(0),d=k(0),h=k();function $(){if(!o.value||e.vertical)return 0;const w=l.vnode.el,F=e.color.get("alpha");return w?Math.round(F*(w.offsetWidth-o.value.offsetWidth/2)/100):0}function f(){if(!o.value)return 0;const w=l.vnode.el;if(!e.vertical)return 0;const F=e.color.get("alpha");return w?Math.round(F*(w.offsetHeight-o.value.offsetHeight/2)/100):0}function p(){if(e.color&&e.color.value){const{r:w,g:F,b:x}=e.color.toRgb();return`linear-gradient(to right, rgba(${w}, ${F}, ${x}, 0) 0%, rgba(${w}, ${F}, ${x}, 1) 100%)`}return""}function c(){if(!o.value||e.vertical)return 0;const w=l.vnode.el,F=e.color.get("alpha");return w?Math.round(F):0}function v(){u.value=$(),d.value=f(),n.value=c(),h.value=p()}le(()=>{if(!a.value||!o.value)return;const w={drag:F=>{t(F)},end:F=>{t(F)}};G(a.value,w),G(o.value,w),v()}),L(()=>e.color.get("alpha"),()=>v()),L(()=>e.color.value,()=>v());const b=M(()=>[r.b(),r.is("vertical",e.vertical)]),C=M(()=>r.e("bar")),T=M(()=>r.e("thumb")),P=M(()=>r.e("input")),y=M(()=>({background:h.value})),A=M(()=>({left:Ve(u.value),top:Ve(d.value)}));return{rootKls:b,barKls:C,barStyle:y,thumbKls:T,thumbStyle:A,update:v,inputbKls:P,customInput:n}},Ht="ElColorAlphaSlider",It=R({name:Ht}),Tt=R({...It,props:Vt,setup(e,{expose:a}){const o=e,{alpha:t,alphaLabel:l,bar:r,thumb:n,handleDrag:u,handleClick:d,handleKeydown:h}=At(o),{rootKls:$,barKls:f,barStyle:p,thumbKls:c,thumbStyle:v,update:b,customInput:C,inputbKls:T}=Bt(o,{bar:r,thumb:n,handleDrag:u});return a({update:b,bar:r,thumb:n}),(P,y)=>(S(),I("div",{class:g(s($))},[_("div",{ref_key:"bar",ref:r,class:g(s(f)),style:W(s(p)),onClick:s(d)},null,14,["onClick"]),_("div",{ref_key:"thumb",ref:n,class:g(s(c)),style:W(s(v)),"aria-label":s(l),"aria-valuenow":s(t),"aria-orientation":P.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:s(h)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"]),_("div",{class:g(s(T))},[E(s(St),{modelValue:s(C),"onUpdate:modelValue":A=>lt(C)?C.value=A:null,min:0,max:100,"validate-event":!1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])],2)],2))}});var Kt=Z(Tt,[["__file","alpha-slider.vue"]]);const Dt=R({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const a=Y("color-hue-slider"),o=ne(),t=k(),l=k(),r=k(0),n=k(0),u=M(()=>e.color.get("hue"));L(()=>u.value,()=>{p()});function d(c){c.target!==t.value&&h(c)}function h(c){if(!l.value||!t.value)return;const b=o.vnode.el.getBoundingClientRect(),{clientX:C,clientY:T}=ge(c);let P;if(e.vertical){let y=T-b.top;y=Math.min(y,b.height-t.value.offsetHeight/2),y=Math.max(t.value.offsetHeight/2,y),P=Math.round((y-t.value.offsetHeight/2)/(b.height-t.value.offsetHeight)*360)}else{let y=C-b.left;y=Math.min(y,b.width-t.value.offsetWidth/2),y=Math.max(t.value.offsetWidth/2,y),P=Math.round((y-t.value.offsetWidth/2)/(b.width-t.value.offsetWidth)*360)}e.color.set("hue",P)}function $(){if(!t.value)return 0;const c=o.vnode.el;if(e.vertical)return 0;const v=e.color.get("hue");return c?Math.round(v*(c.offsetWidth-t.value.offsetWidth/2)/360):0}function f(){if(!t.value)return 0;const c=o.vnode.el;if(!e.vertical)return 0;const v=e.color.get("hue");return c?Math.round(v*(c.offsetHeight-t.value.offsetHeight/2)/360):0}function p(){r.value=$(),n.value=f()}return le(()=>{if(!l.value||!t.value)return;const c={drag:v=>{h(v)},end:v=>{h(v)}};G(l.value,c),G(t.value,c),p()}),{bar:l,thumb:t,thumbLeft:r,thumbTop:n,hueValue:u,handleClick:d,update:p,ns:a}}});function Ot(e,a,o,t,l,r){return S(),I("div",{class:g([e.ns.b(),e.ns.is("vertical",e.vertical)])},[_("div",{ref:"bar",class:g(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),_("div",{ref:"thumb",class:g(e.ns.e("thumb")),style:W({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Wt=Z(Dt,[["render",Ot],["__file","hue-slider.vue"]]);const Rt=Ke({modelValue:String,id:String,showAlpha:Boolean,isCustom:Boolean,effect:{type:String,default:"light"},colorFormat:String,disabled:Boolean,size:$t,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},triggerWidth:{type:Number,default:50},teleported:kt.teleported,predefine:{type:De(Array)},validateEvent:{type:Boolean,default:!0},...yt(["ariaLabel"])}),zt={[me]:e=>j(e)||fe(e),[ft]:e=>j(e)||fe(e),activeChange:e=>j(e)||fe(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},We=Symbol("colorPickerContextKey"),Ae=function(e,a,o){return[e,a*o/((e=(2-a)*o)<1?e:2-e)||0,e/2]},Ut=function(e){return j(e)&&e.includes(".")&&Number.parseFloat(e)===1},qt=function(e){return j(e)&&e.includes("%")},z=function(e,a){Ut(e)&&(e="100%");const o=qt(e);return e=Math.min(a,Math.max(0,Number.parseFloat(`${e}`))),o&&(e=Number.parseInt(`${e*a}`,10)/100),Math.abs(e-a)<1e-6?1:e%a/Number.parseFloat(a)},Be={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},ae=e=>{e=Math.min(Math.round(e),255);const a=Math.floor(e/16),o=e%16;return`${Be[a]||a}${Be[o]||o}`},He=function({r:e,g:a,b:o}){return Number.isNaN(+e)||Number.isNaN(+a)||Number.isNaN(+o)?"":`#${ae(e)}${ae(a)}${ae(o)}`},pe={A:10,B:11,C:12,D:13,E:14,F:15},O=function(e){return e.length===2?(pe[e[0].toUpperCase()]||+e[0])*16+(pe[e[1].toUpperCase()]||+e[1]):pe[e[1].toUpperCase()]||+e[1]},Xt=function(e,a,o){a=a/100,o=o/100;let t=a;const l=Math.max(o,.01);o*=2,a*=o<=1?o:2-o,t*=l<=1?l:2-l;const r=(o+a)/2,n=o===0?2*t/(l+t):2*a/(o+a);return{h:e,s:n*100,v:r*100}},Ie=(e,a,o)=>{e=z(e,255),a=z(a,255),o=z(o,255);const t=Math.max(e,a,o),l=Math.min(e,a,o);let r;const n=t,u=t-l,d=t===0?0:u/t;if(t===l)r=0;else{switch(t){case e:{r=(a-o)/u+(a<o?6:0);break}case a:{r=(o-e)/u+2;break}case o:{r=(e-a)/u+4;break}}r/=6}return{h:r*360,s:d*100,v:n*100}},X=function(e,a,o){e=z(e,360)*6,a=z(a,100),o=z(o,100);const t=Math.floor(e),l=e-t,r=o*(1-a),n=o*(1-l*a),u=o*(1-(1-l)*a),d=t%6,h=[o,n,r,r,u,o][d],$=[u,o,o,n,r,r][d],f=[r,r,u,o,o,n][d];return{r:Math.round(h*255),g:Math.round($*255),b:Math.round(f*255)}};class oe{constructor(a={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const o in a)Se(a,o)&&(this[o]=a[o]);a.value?this.fromString(a.value):this.doOnChange()}set(a,o){if(arguments.length===1&&typeof a=="object"){for(const t in a)Se(a,t)&&this.set(t,a[t]);return}this[`_${a}`]=o,this.doOnChange()}get(a){return a==="alpha"?Math.floor(this[`_${a}`]):this[`_${a}`]}toRgb(){return X(this._hue,this._saturation,this._value)}fromString(a){if(!a){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const o=(t,l,r)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,l)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(a.includes("hsl")){const t=a.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(l=>l!=="").map((l,r)=>r>2?Number.parseFloat(l):Number.parseInt(l,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:l,s:r,v:n}=Xt(t[0],t[1],t[2]);o(l,r,n)}}else if(a.includes("hsv")){const t=a.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(l=>l!=="").map((l,r)=>r>2?Number.parseFloat(l):Number.parseInt(l,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&o(t[0],t[1],t[2])}else if(a.includes("rgb")){const t=a.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(l=>l!=="").map((l,r)=>r>2?Number.parseFloat(l):Number.parseInt(l,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:l,s:r,v:n}=Ie(t[0],t[1],t[2]);o(l,r,n)}}else if(a.includes("#")){const t=a.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let l,r,n;t.length===3?(l=O(t[0]+t[0]),r=O(t[1]+t[1]),n=O(t[2]+t[2])):(t.length===6||t.length===8)&&(l=O(t.slice(0,2)),r=O(t.slice(2,4)),n=O(t.slice(4,6))),t.length===8?this._alpha=O(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:u,s:d,v:h}=Ie(l,r,n);o(u,d,h)}}compare(a){return Math.abs(a._hue-this._hue)<2&&Math.abs(a._saturation-this._saturation)<1&&Math.abs(a._value-this._value)<1&&Math.abs(a._alpha-this._alpha)<1}doOnChange(){const{_hue:a,_saturation:o,_value:t,_alpha:l,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const n=Ae(a,o/100,t/100);this.value=`hsla(${a}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${a}, ${Math.round(o)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${He(X(a,o,t))}${ae(l*255/100)}`;break}default:{const{r:n,g:u,b:d}=X(a,o,t);this.value=`rgba(${n}, ${u}, ${d}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const n=Ae(a,o/100,t/100);this.value=`hsl(${a}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${a}, ${Math.round(o)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:n,g:u,b:d}=X(a,o,t);this.value=`rgb(${n}, ${u}, ${d})`;break}default:this.value=He(X(a,o,t))}}}const jt=R({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const a=Y("color-predefine"),{currentColor:o}=nt(We),t=k(r(e.colors,e.color));L(()=>o.value,n=>{const u=new oe;u.fromString(n),t.value.forEach(d=>{d.selected=u.compare(d)})}),rt(()=>{t.value=r(e.colors,e.color)});function l(n){e.color.fromString(e.colors[n])}function r(n,u){return n.map(d=>{const h=new oe;return h.enableAlpha=e.enableAlpha,h.format="rgba",h.fromString(d),h.selected=h.value===u.value,h})}return{rgbaColors:t,handleSelect:l,ns:a}}});function Gt(e,a,o,t,l,r){return S(),I("div",{class:g(e.ns.b())},[_("div",{class:g(e.ns.e("colors"))},[(S(!0),I(Te,null,st(e.rgbaColors,(n,u)=>(S(),I("div",{key:e.colors[u],class:g([e.ns.e("color-selector"),e.ns.is("alpha",n._alpha<100),{selected:n.selected}]),onClick:d=>e.handleSelect(u)},[_("div",{style:W({backgroundColor:n.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Yt=Z(jt,[["render",Gt],["__file","predefine.vue"]]);const Zt=R({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const a=Y("color-svpanel"),o=ne(),t=k(0),l=k(0),r=k("hsl(0, 100%, 50%)"),n=M(()=>{const h=e.color.get("hue"),$=e.color.get("value");return{hue:h,value:$}});function u(){const h=e.color.get("saturation"),$=e.color.get("value"),f=o.vnode.el,{clientWidth:p,clientHeight:c}=f;l.value=h*p/100,t.value=(100-$)*c/100,r.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function d(h){const f=o.vnode.el.getBoundingClientRect(),{clientX:p,clientY:c}=ge(h);let v=p-f.left,b=c-f.top;v=Math.max(0,v),v=Math.min(v,f.width),b=Math.max(0,b),b=Math.min(b,f.height),l.value=v,t.value=b,e.color.set({saturation:v/f.width*100,value:100-b/f.height*100})}return L(()=>n.value,()=>{u()}),le(()=>{G(o.vnode.el,{drag:h=>{d(h)},end:h=>{d(h)}}),u()}),{cursorTop:t,cursorLeft:l,background:r,colorValue:n,handleDrag:d,update:u,ns:a}}});function xt(e,a,o,t,l,r){return S(),I("div",{class:g(e.ns.b()),style:W({backgroundColor:e.background})},[_("div",{class:g(e.ns.e("white"))},null,2),_("div",{class:g(e.ns.e("black"))},null,2),_("div",{class:g(e.ns.e("cursor")),style:W({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[_("div")],6)],6)}var Jt=Z(Zt,[["render",xt],["__file","sv-panel.vue"]]);const Qt=R({name:"ElColorPicker"}),ea=R({...Qt,props:Rt,emits:zt,setup(e,{expose:a,emit:o}){var t;const l=e,{t:r}=Oe(),n=Y("color"),{formItem:u}=vt(),d=pt(),h=mt(),{isSupported:$,open:f,sRGBHex:p}=Mt(),c=k(""),{inputId:v,isLabeledByFormItem:b}=gt(l,{formItemContext:u}),C=k(),T=k(),P=k(),y=k(),A=k(),w=k(),F=M(()=>["rgb(255, 255, 255)","rgba(255, 255, 255, 1)","#FFFFFFFF","#FFFFFF"].includes(l.modelValue)),x=M(()=>l.isCustom?{minWidth:`${l.triggerWidth}px`,maxWidth:`${l.triggerWidth}px`}:{}),Re=()=>{$&&f()},be=k((t=l.modelValue)!=null&&t.startsWith("#")?"HEX":"RGB"),ze=i=>{m.format=i.toLowerCase(),ue(),c.value=m.value};L(p,i=>{m.fromString(i),c.value=m.value}),L(()=>c.value,(i,N)=>{i!==N&&$e()});const Ue=J("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[J("path",{fill:"#ffffff","fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.8149 11.8272L13.4701 10.4824L7.22791 16.7246C6.92778 17.0247 6.52071 17.1933 6.09627 17.1933H4.05697C3.59673 17.1933 3.22363 16.8202 3.22363 16.36V14.3207C3.22363 13.8962 3.39224 13.4892 3.69237 13.189L9.93456 6.94686L8.92234 5.93464C8.59691 5.60921 8.59691 5.08157 8.92234 4.75613C9.24778 4.4307 9.77542 4.4307 10.1009 4.75613L11.1131 5.76835L11.2125 5.66894C11.2124 5.66904 11.2126 5.66885 11.2125 5.66894L13.241 3.64044C13.7332 3.14823 14.3796 2.90417 15.0247 2.90825C15.1093 2.90879 15.194 2.9136 15.2782 2.92268C15.8255 2.98168 16.357 3.22093 16.7765 3.64044C17.7528 4.61675 17.7528 6.19966 16.7765 7.17597L14.6486 9.30388L15.9934 10.6487C16.3188 10.9741 16.3188 11.5018 15.9934 11.8272C15.668 12.1526 15.1403 12.1526 14.8149 11.8272ZM6.06881 15.5266L12.2916 9.30388L11.1131 8.12537L4.8903 14.3481L4.8903 15.5266H6.06881Z"})]),Ce=J("svg",{width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},[J("path",{d:"M6.9996 9.25472L11.7431 4.51121C11.857 4.39731 12.0417 4.39731 12.1556 4.51121L12.5681 4.92369C12.682 5.03759 12.682 5.22226 12.5681 5.33617L7.41208 10.4922C7.18427 10.72 6.81492 10.72 6.58712 10.4922L1.43113 5.33617C1.31723 5.22226 1.31723 5.03759 1.43113 4.92369L1.84361 4.51121C1.95751 4.39731 2.14219 4.39731 2.25609 4.51121L6.9996 9.25472Z"})]),{isFocused:ke,handleFocus:qe,handleBlur:Xe}=bt(A,{beforeFocus(){return h.value},beforeBlur(i){var N;return(N=y.value)==null?void 0:N.isFocusInsideContent(i)},afterBlur(){U(!1),q()}});let re=!0;const m=it(new oe({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue})),B=k(!1),H=k(!1),je=M(()=>!l.modelValue&&!H.value?"transparent":xe(m,l.showAlpha)),se=M(()=>!l.modelValue&&!H.value?"":m.value),Ge=M(()=>b.value?void 0:l.ariaLabel||r("el.colorpicker.defaultLabel")),Ye=M(()=>b.value?u==null?void 0:u.labelId:void 0),Ze=M(()=>[n.b("picker"),n.is("disabled",h.value),n.bm("picker",d.value||"default"),n.bm("picker",l.effect),n.is("focused",ke.value),n.is("custom",l.isCustom),n.is("show-border",F.value)]);function xe(i,N){if(!(i instanceof oe))throw new TypeError("color should be instance of _color Class");const{r:V,g:Ee,b:Fe}=i.toRgb();return N?`rgba(${V}, ${Ee}, ${Fe}, ${i.get("alpha")/100})`:`rgb(${V}, ${Ee}, ${Fe})`}function U(i){B.value=i}function Je(){ue(),c.value=m.value,$e()}const ie=Nt(U,100,{leading:!0});function we(){h.value||U(!0)}function _e(){ie(!1),q()}function q(){ce(()=>{l.modelValue?m.fromString(l.modelValue):(m.value="",ce(()=>{H.value=!1}))})}function Qe(){h.value||l.isCustom||(B.value&&q(),ie(!B.value))}function et(){h.value||!l.isCustom||(B.value&&q(),ie(!B.value))}function ue(){m.fromString(c.value)}function $e(){const i=m.value;o(me,i),B.value&&o("change",i),l.validateEvent&&(u==null||u.validate("change").catch(N=>Et()))}function tt(){B.value&&(_e(),ke.value&&Me())}function ye(i){i.preventDefault(),i.stopPropagation(),U(!1),q()}function at(i){switch(i.code){case K.enter:case K.numpadEnter:case K.space:i.preventDefault(),i.stopPropagation(),we(),w.value.focus();break;case K.esc:ye(i);break}}function Me(){A.value.focus()}function ot(){A.value.blur()}return le(()=>{l.modelValue&&(c.value=se.value)}),L(()=>l.modelValue,i=>{i?i&&i!==m.value&&(re=!1,m.fromString(i)):H.value=!1}),L(()=>[l.colorFormat,l.showAlpha],()=>{m.enableAlpha=l.showAlpha,m.format=l.colorFormat||m.format,m.doOnChange(),o(me,m.value)}),L(()=>se.value,i=>{c.value=i,re&&o("activeChange",i),re=!0}),L(()=>m.value,()=>{!l.modelValue&&!H.value&&(H.value=!0)}),L(()=>B.value,()=>{ce(()=>{var i,N,V;(i=C.value)==null||i.update(),(N=T.value)==null||N.update(),(V=P.value)==null||V.update()})}),ut(We,{currentColor:se}),a({color:m,show:we,hide:_e,focus:Me,blur:ot}),(i,N)=>(S(),he(s(wt),{ref_key:"popper",ref:y,visible:B.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[s(n).be("picker","panel"),s(n).b("dropdown"),i.popperClass],"stop-popper-mouse-event":!1,trigger:"click",teleported:i.teleported,transition:`${s(n).namespace.value}-zoom-in-top`,persistent:"",onHide:V=>U(!1)},{content:D(()=>[Q((S(),I("div",{onKeydown:Ne(ye,["esc"])},[_("div",{class:g(s(n).be("dropdown","main-wrapper"))},[E(Wt,{ref_key:"hue",ref:C,class:"hue-slider",color:s(m),vertical:""},null,8,["color"]),E(Jt,{ref_key:"sv",ref:T,color:s(m)},null,8,["color"])],2),i.showAlpha?(S(),he(Kt,{key:0,ref_key:"alpha",ref:P,color:s(m)},null,8,["color"])):ee("v-if",!0),i.predefine?(S(),he(Yt,{key:1,ref:"predefine","enable-alpha":i.showAlpha,color:s(m),colors:i.predefine},null,8,["enable-alpha","color","colors"])):ee("v-if",!0),_("div",{class:g(s(n).be("dropdown","btns"))},[_("span",{class:g(s(n).be("dropdown","value"))},[E(s(Ct),{ref_key:"inputRef",ref:w,modelValue:c.value,"onUpdate:modelValue":V=>c.value=V,"validate-event":!1,size:"small",onKeyup:Ne(ue,["enter"]),onBlur:Je},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),E(s(te),{size:"20",onClick:ct(Re,["stop"])},{default:D(()=>[E(s(Ue))]),_:1},8,["onClick"]),E(s(dt),{onChange:ze,modelValue:be.value,"onUpdate:modelValue":V=>be.value=V,size:"small"},{default:D(()=>[E(s(Pe),{label:"HEX"}),E(s(Pe),{label:"RGB"})]),_:1},8,["modelValue","onUpdate:modelValue"])],2)],40,["onKeydown"])),[[s(Pt),tt,A.value]])]),default:D(()=>[_("div",ht({id:s(v),ref_key:"triggerRef",ref:A},i.$attrs,{class:s(Ze),role:"button","aria-label":s(Ge),"aria-labelledby":s(Ye),"aria-description":s(r)("el.colorpicker.description",{color:i.modelValue||""}),"aria-disabled":s(h),tabindex:s(h)?-1:i.tabindex,onKeydown:at,onFocus:s(qe),onBlur:s(Xe),onClick:et,style:s(x)}),[s(h)?(S(),I("div",{key:0,class:g(s(n).be("picker","mask"))},null,2)):ee("v-if",!0),_("div",{class:g(s(n).be("picker","trigger")),onClick:Qe},[_("span",{class:g([s(n).be("picker","color"),s(n).is("alpha",i.showAlpha)])},[_("span",{class:g(s(n).be("picker","color-inner")),style:W({backgroundColor:s(je)})},[i.isCustom?ee("v-if",!0):(S(),I(Te,{key:0},[Q(E(s(te),{class:g([s(n).be("picker","icon"),s(n).is("icon-arrow-down")])},{default:D(()=>[E(s(Ce))]),_:1},8,["class"]),[[de,i.modelValue||H.value]]),Q(E(s(te),{class:g([s(n).be("picker","empty"),s(n).is("icon-close")])},{default:D(()=>[E(s(Ft))]),_:1},8,["class"]),[[de,!i.modelValue&&!H.value]])],64))],6)],2)],2),Q(E(s(te),{size:"14",class:g([s(n).be("picker","icon"),s(n).is("icon-arrow-down"),s(n).is("icon-arrow-down_custom")])},{default:D(()=>[E(s(Ce))]),_:1},8,["class"]),[[de,i.modelValue||H.value||i.isCustom]])],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var ta=Z(ea,[["__file","color-picker.vue"]]);const ha=Lt(ta);export{ha as E};
