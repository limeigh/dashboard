var W=Object.defineProperty;var Y=(r,e,t)=>e in r?W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(Y(r,typeof e!="symbol"?e+"":e,t),t);import{p as Z,a as G,g as H,h as M,c as x,s as B,d as N,e as X,b as j}from"../assets/chunk/index-0.0.0-dataease.js";import{b as s}from"../assets/chunk/library-0.0.0-dataease.js";import{d as q,s as z,r as R,o as K,f as k,g as w,l as y,n as C,m as a,k as $}from"../assets/chunk/vue-0.0.0-dataease.js";import"../assets/chunk/lodash-0.0.0-dataease.js";const J=q({__name:"App",props:{componentName:Z.string.def("Iframe")},setup(r){const e=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease7.js"),[],import.meta.url)),t=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease8.js"),[],import.meta.url)),l=a(()=>s(()=>import("../assets/chunk/DashboardPreview-0.0.0-dataease.js"),[],import.meta.url)),c=a(()=>s(()=>import("../assets/chunk/ViewWrapper-0.0.0-dataease.js"),[],import.meta.url)),D=a(()=>s(()=>import("../assets/chunk/Iframe-0.0.0-dataease.js"),[],import.meta.url)),L=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease9.js"),[],import.meta.url)),_=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease10.js"),[],import.meta.url)),h=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease11.js"),[],import.meta.url)),b=a(()=>s(()=>import("../assets/chunk/PreviewShow-0.0.0-dataease.js"),[],import.meta.url)),f=a(()=>s(()=>import("../assets/chunk/DashboardPreviewShow-0.0.0-dataease.js"),[],import.meta.url)),E=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease12.js"),[],import.meta.url)),u=a(()=>s(()=>import("../assets/chunk/indexInject-0.0.0-dataease.js"),[],import.meta.url)),o=a(()=>s(()=>import("../assets/chunk/DePreview-0.0.0-dataease.js").then(n=>n.w),[],import.meta.url)),O=a(()=>s(()=>import("../assets/chunk/DashboardEmpty-0.0.0-dataease.js"),[],import.meta.url)),g=a(()=>s(()=>import("../assets/chunk/index-0.0.0-dataease13.js"),[],import.meta.url)),A=r,m=z(),V={DashboardEditor:t,VisualizationEditor:e,ViewWrapper:c,Preview:o,Dashboard:l,Dataset:L,Iframe:D,Datasource:h,ScreenPanel:b,DashboardPanel:f,DatasetEditor:_,DashboardEmpty:O,Copilot:E,TemplateManage:u},v=R(!1),p=R(""),I=R(!1),P=n=>{v.value=!1,I.value=!0,m.value=void 0,n&&n.includes("DataFilling")?(n==="DataFilling"?p.value="L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvbWFuYWdlL2luZGV4":n==="DataFillingEditor"?p.value="L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvbWFuYWdlL2Zvcm0vaW5kZXg=":n==="DataFillingHandler"&&(p.value="L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5lVGFibGU="),C(()=>{m.value=g,v.value=!0})):C(()=>{m.value=V[n],I.value=!1})};return G({name:"changeCurrentComponent",callback:P}),K(()=>{P(A.componentName)}),(n,T)=>!v.value&&!I.value?(k(),w(y(m.value),{key:0})):(k(),w(y(m.value),{key:1,jsname:p.value},null,8,["jsname"]))}}),Q=[],ee=H({history:M(),routes:Q}),te=r=>{r.use(ee)},S="0.0.0-dataease",F=document.querySelector("head");F.appendChild.bind(F);const re=(r,e)=>{if(["SCRIPT","LINK"].includes(r.nodeName)){let t="";if(r instanceof HTMLLinkElement?t=r.href:r instanceof HTMLScriptElement&&(t=r.src),t.includes(S)||t.includes("dataease-private")){const l=new URL(t).origin,c=t.replace(l,e);r instanceof HTMLLinkElement?r.href=c:r instanceof HTMLScriptElement&&(r.src=c)}}return r},se=()=>{let r="";return Array.from(document.querySelector("head").children).some(e=>{if(["SCRIPT","LINK"].includes(e.nodeName)){let t="";if(e instanceof HTMLLinkElement?t=e.href:e instanceof HTMLScriptElement&&(t=e.src),t.includes(S)){r=new URL(t).origin;const l=t.indexOf(`/js/div_import_${S}`);return l>0&&(r=t.substring(0,l)),!0}}}),r},U=document.createElement("head");document.body.appendChild(U);document.querySelector("head").appendChild=r=>{const e=re(r,se());return U.appendChild(e),e};const ae=async(r,e,t,l,c,D,L,_,h,b,f,E)=>{const u=$(J,{componentName:e});u.provide("embeddedParams",{chartId:b,resourceId:f,dfId:E,dvId:_,pid:h,busiFlag:t,outerParams:l,suffixId:c}),B(u);const o=x();o.setType(e),o.setBusiFlag(t),o.setOuterParams(l),o.setSuffixId(c),o.setToken(D),o.setBaseUrl(L),o.setDvId(_),o.setPid(h),o.setResourceId(f),o.setDfId(E),await(await s(()=>import("../assets/chunk/ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js").then(d=>d.aU),[],import.meta.url)).setupI18n(u),te(u),N(u),X(u),(await s(()=>import("../assets/chunk/index-0.0.0-dataease2.js"),[],import.meta.url)).installDirective(u),(await s(()=>import("../assets/chunk/ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js").then(d=>d.aV),[],import.meta.url)).userStore().setUser(),(await s(()=>import("../assets/chunk/app-0.0.0-dataease.js"),[],import.meta.url)).useAppStoreWithOut().setIsDataEaseBi(!0),(await s(()=>import("../assets/chunk/appearance-0.0.0-dataease.js").then(d=>d.a),[],import.meta.url)).useAppearanceStoreWithOut().setAppearance(!0);const n=await(await s(()=>import("../assets/chunk/common-0.0.0-dataease.js"),[],import.meta.url)).getDefaultSettings(),{wsCache:T}=j();return T.set("TreeSort-backend",n["basic.defaultSort"]??"1"),T.set("open-backend",n["basic.defaultOpen"]??"0"),u.mount(r),u},ie={container:"#designer",lng:"zh",theme:"default"};class oe{constructor(e,t){i(this,"baseUrl");i(this,"token");i(this,"type");i(this,"dvId");i(this,"busiFlag");i(this,"outerParams");i(this,"suffixId");i(this,"resourceId");i(this,"dfId");i(this,"pid");i(this,"chartId");i(this,"deOptions");i(this,"vm");this.type=e,this.token=t.token,this.busiFlag=t.busiFlag,this.outerParams=t.outerParams,this.suffixId=t.suffixId,this.baseUrl=t.baseUrl,this.dvId=t.dvId,this.pid=t.pid,this.chartId=t.chartId,this.resourceId=t.resourceId,this.dfId=t.dfId}async initialize(e){this.deOptions={...ie,...e},this.vm=await ae(this.deOptions.container,this.type,this.busiFlag,this.outerParams,this.suffixId,this.token,this.baseUrl,this.dvId,this.pid,this.chartId,this.resourceId,this.dfId)}destroy(){const e=x();e.setType(null),e.setBusiFlag(null),e.setOuterParams(null),e.setSuffixId(null),e.setToken(null),e.setChartId(null),e.clearState(),this.vm.unmount(),this.type=null,this.token=null,this.busiFlag=null,this.outerParams=null,this.suffixId=null,this.dvId=null,this.pid=null,this.chartId=null,this.resourceId=null,this.dfId=null,this.vm=null}}window.DataEaseBi=oe;
